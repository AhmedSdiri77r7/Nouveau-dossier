/*! pace 1.0.2 */
(function(){var e,t,n,r,o,i,a,s,l,u,c,d,h,p,f,g,m,v,y,b,x,_,w,S,C,M,T,k,I,A,D,P,L,N,R,E,O,B,z,F,V,H,W,G,U,j,Y,q,X=[].slice,Z={}.hasOwnProperty,$=function(e,t){function n(){this.constructor=e}for(var r in t)Z.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},K=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};for(x={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},I=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?e:+new Date},D=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,b=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==D&&(D=function(e){return setTimeout(e,50)},b=function(e){return clearTimeout(e)}),L=function(e){var t,n;return t=I(),(n=function(){var r;return(r=I()-t)>=33?(t=I(),e(r,function(){return D(n)})):setTimeout(n,33-r)})()},P=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=3<=arguments.length?X.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,e):n[t]},_=function(){var e,t,n,r,o,i,a;for(t=arguments[0],i=0,a=(r=2<=arguments.length?X.call(arguments,1):[]).length;a>i;i++)if(n=r[i])for(e in n)Z.call(n,e)&&(o=n[e],null!=t[e]&&"object"==typeof t[e]&&null!=o&&"object"==typeof o?_(t[e],o):t[e]=o);return t},m=function(e){var t,n,r,o,i;for(n=t=0,o=0,i=e.length;i>o;o++)r=e[o],n+=Math.abs(r),t++;return n/t},S=function(e,t){var n,r,o;if(null==e&&(e="options"),null==t&&(t=!0),o=document.querySelector("[data-pace-"+e+"]")){if(n=o.getAttribute("data-pace-"+e),!t)return n;try{return JSON.parse(n)}catch(e){return r=e,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},a=function(){function e(){}return e.prototype.on=function(e,t,n,r){var o;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(o=this.bindings)[e]&&(o[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:r})},e.prototype.once=function(e,t,n){return this.on(e,t,n,!0)},e.prototype.off=function(e,t){var n,r,o;if(null!=(null!=(r=this.bindings)?r[e]:void 0)){if(null==t)return delete this.bindings[e];for(n=0,o=[];n<this.bindings[e].length;)this.bindings[e][n].handler===t?o.push(this.bindings[e].splice(n,1)):o.push(n++);return o}},e.prototype.trigger=function(){var e,t,n,r,o,i,a,s,l;if(n=arguments[0],e=2<=arguments.length?X.call(arguments,1):[],null!=(a=this.bindings)?a[n]:void 0){for(o=0,l=[];o<this.bindings[n].length;)r=(s=this.bindings[n][o]).handler,t=s.ctx,i=s.once,r.apply(null!=t?t:this,e),i?l.push(this.bindings[n].splice(o,1)):l.push(o++);return l}},e}(),u=window.Pace||{},window.Pace=u,_(u,a.prototype),A=u.options=_({},x,window.paceOptions,S()),W=0,U=(Y=["ajax","document","eventLag","elements"]).length;U>W;W++)!0===A[O=Y[W]]&&(A[O]=x[O]);l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $(t,e),t}(Error),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){var e;if(null==this.el){if(!(e=document.querySelector(A.target)))throw new l;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=e.firstChild?e.insertBefore(this.el,e.firstChild):e.appendChild(this.el)}return this.el},e.prototype.finish=function(){var e;return(e=this.getElement()).className=e.className.replace("pace-active",""),e.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(e){l=e}return this.el=void 0},e.prototype.render=function(){var e,t,n,r,o,i,a;if(null==document.querySelector(A.target))return!1;for(e=this.getElement(),r="translate3d("+this.progress+"%, 0, 0)",o=0,i=(a=["webkitTransform","msTransform","transform"]).length;i>o;o++)t=a[o],e.children[0].style[t]=r;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(e.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?n="99":(n=this.progress<10?"0":"",n+=0|this.progress),e.children[0].setAttribute("data-progress",""+n)),this.lastRenderedProgress=this.progress},e.prototype.done=function(){return this.progress>=100},e}(),s=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var n,r,o,i,a;if(null!=this.bindings[e]){for(a=[],r=0,o=(i=this.bindings[e]).length;o>r;r++)n=i[r],a.push(n.call(this,t));return a}},e.prototype.on=function(e,t){var n;return null==(n=this.bindings)[e]&&(n[e]=[]),this.bindings[e].push(t)},e}(),H=window.XMLHttpRequest,V=window.XDomainRequest,F=window.WebSocket,w=function(e,t){var n,r;for(n in r=[],t.prototype)try{null==e[n]&&"function"!=typeof t[n]?"function"==typeof Object.defineProperty?r.push(Object.defineProperty(e,n,{get:function(){return t.prototype[n]},configurable:!0,enumerable:!0})):r.push(e[n]=t.prototype[n]):r.push(void 0)}catch(e){e}return r},T=[],u.ignore=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?X.call(arguments,1):[],T.unshift("ignore"),n=t.apply(null,e),T.shift(),n},u.track=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?X.call(arguments,1):[],T.unshift("track"),n=t.apply(null,e),T.shift(),n},E=function(e){var t;if(null==e&&(e="GET"),"track"===T[0])return"force";if(!T.length&&A.ajax){if("socket"===e&&A.ajax.trackWebSockets)return!0;if(t=e.toUpperCase(),K.call(A.ajax.trackMethods,t)>=0)return!0}return!1},c=function(e){function t(){var e,n=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(r,o,i){return E(r)&&n.trigger("request",{type:r,url:o,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(t){var n;return n=new H(t),e(n),n};try{w(window.XMLHttpRequest,H)}catch(e){}if(null!=V){window.XDomainRequest=function(){var t;return t=new V,e(t),t};try{w(window.XDomainRequest,V)}catch(e){}}if(null!=F&&A.ajax.trackWebSockets){window.WebSocket=function(e,t){var r;return r=null!=t?new F(e,t):new F(e),E("socket")&&n.trigger("request",{type:"socket",url:e,protocols:t,request:r}),r};try{w(window.WebSocket,F)}catch(e){}}}return $(t,e),t}(s),G=null,R=function(e){var t,n,r,o;for(n=0,r=(o=A.ajax.ignoreURLs).length;r>n;n++)if("string"==typeof(t=o[n])){if(-1!==e.indexOf(t))return!0}else if(t.test(e))return!0;return!1},(C=function(){return null==G&&(G=new c),G})().on("request",function(t){var n,r,o,i,a;return i=t.type,o=t.request,a=t.url,R(a)||u.running||!1===A.restartOnRequestAfter&&"force"!==E(i)?void 0:(r=arguments,"boolean"==typeof(n=A.restartOnRequestAfter||0)&&(n=0),setTimeout(function(){var t,n,a,s,l;if("socket"===i?o.readyState<2:0<(a=o.readyState)&&4>a){for(u.restart(),l=[],t=0,n=(s=u.sources).length;n>t;t++){if((O=s[t])instanceof e){O.watch.apply(O,r);break}l.push(void 0)}return l}},n))}),e=function(){function e(){var e=this;this.elements=[],C().on("request",function(){return e.watch.apply(e,arguments)})}return e.prototype.watch=function(e){var t,n,r,o;return r=e.type,t=e.request,o=e.url,R(o)?void 0:(n="socket"===r?new p(t):new f(t),this.elements.push(n))},e}(),f=function(e){var t,n,r,o,i,a=this;if(this.progress=0,null!=window.ProgressEvent)for(e.addEventListener("progress",function(e){return e.lengthComputable?a.progress=100*e.loaded/e.total:a.progress=a.progress+(100-a.progress)/2},!1),n=0,r=(i=["load","abort","timeout","error"]).length;r>n;n++)t=i[n],e.addEventListener(t,function(){return a.progress=100},!1);else o=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?a.progress=100:3===e.readyState&&(a.progress=50),"function"==typeof o?o.apply(null,arguments):void 0}},p=function(e){var t,n,r,o,i=this;for(this.progress=0,n=0,r=(o=["error","open"]).length;r>n;n++)t=o[n],e.addEventListener(t,function(){return i.progress=100},!1)},r=function(e){var t,n,r,i;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),n=0,r=(i=e.selectors).length;r>n;n++)t=i[n],this.elements.push(new o(t))},o=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return e.check()},A.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),n=function(){function e(){var e,t,n=this;this.progress=null!=(t=this.states[document.readyState])?t:100,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=n.states[document.readyState]&&(n.progress=n.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),i=function(){var e,t,n,r,o,i=this;this.progress=0,e=0,o=[],r=0,n=I(),t=setInterval(function(){var a;return a=I()-n-50,n=I(),o.push(a),o.length>A.eventLag.sampleCount&&o.shift(),e=m(o),++r>=A.eventLag.minSamples&&e<A.eventLag.lagThreshold?(i.progress=100,clearInterval(t)):i.progress=3/(e+3)*100},50)},h=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=A.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=P(this.source,"progress"))}return e.prototype.tick=function(e,t){var n;return null==t&&(t=P(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/A.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),n=1-Math.pow(this.progress/100,A.easeFactor),this.progress+=n*this.rate*e,this.progress=Math.min(this.lastProgress+A.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),B=null,N=null,v=null,z=null,g=null,y=null,u.running=!1,M=function(){return A.restartOnPushState?u.restart():void 0},null!=window.history.pushState&&(j=window.history.pushState,window.history.pushState=function(){return M(),j.apply(window.history,arguments)}),null!=window.history.replaceState&&(q=window.history.replaceState,window.history.replaceState=function(){return M(),q.apply(window.history,arguments)}),d={ajax:e,elements:r,document:n,eventLag:i},(k=function(){var e,n,r,o,i,a,s,l;for(u.sources=B=[],n=0,o=(a=["ajax","elements","document","eventLag"]).length;o>n;n++)!1!==A[e=a[n]]&&B.push(new d[e](A[e]));for(r=0,i=(l=null!=(s=A.extraSources)?s:[]).length;i>r;r++)O=l[r],B.push(new O(A));return u.bar=v=new t,N=[],z=new h})(),u.stop=function(){return u.trigger("stop"),u.running=!1,v.destroy(),y=!0,null!=g&&("function"==typeof b&&b(g),g=null),k()},u.restart=function(){return u.trigger("restart"),u.stop(),u.start()},u.go=function(){var e;return u.running=!0,v.render(),e=I(),y=!1,g=L(function(t,n){var r,o,i,a,s,l,c,d,p,f,g,m,b,x,_;for(100-v.progress,o=f=0,i=!0,l=g=0,b=B.length;b>g;l=++g)for(O=B[l],p=null!=N[l]?N[l]:N[l]=[],c=m=0,x=(s=null!=(_=O.elements)?_:[O]).length;x>m;c=++m)a=s[c],i&=(d=null!=p[c]?p[c]:p[c]=new h(a)).done,d.done||(o++,f+=d.tick(t));return r=f/o,v.update(z.tick(t,r)),v.done()||i||y?(v.update(100),u.trigger("done"),setTimeout(function(){return v.finish(),u.running=!1,u.trigger("hide")},Math.max(A.ghostTime,Math.max(A.minTime-(I()-e),0)))):n()})},u.start=function(e){_(A,e),u.running=!0;try{v.render()}catch(e){l=e}return document.querySelector(".pace")?(u.trigger("start"),u.go()):setTimeout(u.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return u}):"object"==typeof exports?module.exports=u:A.startOnPageLoad&&u.start()}).call(this),function(){"use strict";var e=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},t=function(e){return{eq:e}},n=t(function(e,t){return e===t}),r=function(e){return t(function(t,n){if(t.length!==n.length)return!1;for(var r=t.length,o=0;o<r;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},o=function(e){return t(function(o,i){var a=Object.keys(o),s=Object.keys(i);if(!function(e,n){return function(e,n){return t(function(t,r){return e.eq(n(t),n(r))})}(r(e),function(e){return function(e,t){return Array.prototype.slice.call(e).sort(undefined)}(e)})}(n).eq(a,s))return!1;for(var l=a.length,u=0;u<l;u++){var c=a[u];if(!e.eq(o[c],i[c]))return!1}return!0})},i=t(function(t,n){if(t===n)return!0;var a=e(t);return a===e(n)&&(function(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(a)?t===n:"array"===a?r(i).eq(t,n):"object"===a&&o(i).eq(t,n))});const a=Object.getPrototypeOf,s=(e,t,n)=>{var r;return!!n(e,t.prototype)||(null===(r=e.constructor)||void 0===r?void 0:r.name)===t.name},l=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&s(e,String,(e,t)=>t.isPrototypeOf(e))?"string":t})(t)===e,u=e=>t=>typeof t===e,c=e=>t=>e===t,d=(e,t)=>p(e)&&s(e,t,(e,t)=>a(e)===t),h=l("string"),p=l("object"),f=e=>d(e,Object),g=l("array"),m=c(null),v=u("boolean"),y=c(void 0),b=e=>null==e,x=e=>!b(e),_=u("function"),w=u("number"),S=(e,t)=>{if(g(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},C=()=>{},M=(e,t)=>(...n)=>e(t.apply(null,n)),T=(e,t)=>n=>e(t(n)),k=e=>()=>e,I=e=>e,A=(e,t)=>e===t;function D(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const P=e=>t=>!e(t),L=e=>()=>{throw new Error(e)},N=e=>e(),R=e=>{e()},E=k(!1),O=k(!0);class B{constructor(e,t){this.tag=e,this.value=t}static some(e){return new B(!0,e)}static none(){return B.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?B.some(e(this.value)):B.none()}bind(e){return this.tag?e(this.value):B.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:B.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return x(e)?B.some(e):B.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}B.singletonNone=new B(!1);const z=Array.prototype.slice,F=Array.prototype.indexOf,V=Array.prototype.push,H=(e,t)=>F.call(e,t),W=(e,t)=>H(e,t)>-1,G=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},U=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++){const n=e[o];r[o]=t(n,o)}return r},j=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},Y=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},q=(e,t)=>{const n=[],r=[];for(let o=0,i=e.length;o<i;o++){const i=e[o];(t(i,o)?n:r).push(i)}return{pass:n,fail:r}},X=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];t(o,r)&&n.push(o)}return n},Z=(e,t,n)=>(Y(e,(e,r)=>{n=t(n,e,r)}),n),$=(e,t,n)=>(j(e,(e,r)=>{n=t(n,e,r)}),n),K=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const o=e[r];if(t(o,r))return B.some(o);if(n(o,r))break}return B.none()},J=(e,t)=>K(e,t,E),Q=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return B.some(n);return B.none()},ee=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!g(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);V.apply(t,e[n])}return t},te=(e,t)=>ee(U(e,t)),ne=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},re=e=>{const t=z.call(e,0);return t.reverse(),t},oe=(e,t)=>X(e,e=>!W(t,e)),ie=(e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const o=e[r];n[String(o)]=t(o,r)}return n},ae=(e,t)=>{const n=z.call(e,0);return n.sort(t),n},se=(e,t)=>t>=0&&t<e.length?B.some(e[t]):B.none(),le=e=>se(e,0),ue=e=>se(e,e.length-1),ce=_(Array.from)?Array.from:e=>z.call(e),de=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return B.none()},he=Object.keys,pe=Object.hasOwnProperty,fe=(e,t)=>{const n=he(e);for(let r=0,o=n.length;r<o;r++){const o=n[r];t(e[o],o)}},ge=(e,t)=>me(e,(e,n)=>({k:n,v:t(e,n)})),me=(e,t)=>{const n={};return fe(e,(e,r)=>{const o=t(e,r);n[o.k]=o.v}),n},ve=e=>(t,n)=>{e[n]=t},ye=(e,t,n,r)=>{fe(e,(e,o)=>{(t(e,o)?n:r)(e,o)})},be=(e,t)=>{const n={};return ye(e,t,ve(n),C),n},xe=(e,t)=>{const n=[];return fe(e,(e,r)=>{n.push(t(e,r))}),n},_e=e=>xe(e,I),we=(e,t)=>Se(e,t)?B.from(e[t]):B.none(),Se=(e,t)=>pe.call(e,t),Ce=(e,t)=>Se(e,t)&&void 0!==e[t]&&null!==e[t],Me=e=>{const t={};return j(e,e=>{t[e]={}}),he(t)},Te=e=>void 0!==e.length,ke=Array.isArray,Ie=(e,t,n)=>{if(!e)return!1;if(n=n||e,Te(e)){for(let r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(const r in e)if(Se(e,r)&&!1===t.call(n,e[r],r,e))return!1;return!0},Ae=(e,t)=>{const n=[];return Ie(e,(r,o)=>{n.push(t(r,o,e))}),n},De=(e,t)=>{const n=[];return Ie(e,(r,o)=>{t&&!t(r,o,e)||n.push(r)}),n},Pe=(e,t,n,r)=>{let o=y(n)?e[0]:n;for(let n=0;n<e.length;n++)o=t.call(r,o,e[n],n);return o},Le=(e,t,n)=>{for(let r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},Ne=e=>e[e.length-1],Re=e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)},Ee=()=>Oe(0,0),Oe=(e,t)=>({major:e,minor:t}),Be={nu:Oe,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Ee():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const r=e[n];if(r.test(t))return r}})(e,t);if(!n)return{major:0,minor:0};const r=e=>Number(t.replace(n,"$"+e));return Oe(r(1),r(2))})(e,n)},unknown:Ee},ze=(e,t)=>{const n=String(t).toLowerCase();return J(e,e=>e.search(n))},Fe=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Ve=(e,t)=>We(e,t)?((e,t)=>e.substring(t))(e,t.length):e,He=(e,t,n=0,r)=>{const o=e.indexOf(t,n);return-1!==o&&(!!y(r)||o+t.length<=r)},We=(e,t)=>Fe(e,t,0),Ge=(e,t)=>Fe(e,t,e.length-t.length),Ue=e=>t=>t.replace(e,""),je=Ue(/^\s+|\s+$/g),Ye=Ue(/^\s+/g),qe=Ue(/\s+$/g),Xe=e=>e.length>0,Ze=e=>!Xe(e),$e=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?B.none():B.some(n)},Ke=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=e=>t=>He(t,e),Qe=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>He(e,"edge/")&&He(e,"chrome")&&He(e,"safari")&&He(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ke],search:e=>He(e,"chrome")&&!He(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>He(e,"msie")||He(e,"trident")},{name:"Opera",versionRegexes:[Ke,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[Ke,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(He(e,"safari")||He(e,"mobile/"))&&He(e,"applewebkit")}],et=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>He(e,"iphone")||He(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Je("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Je("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tt={browsers:k(Qe),oses:k(et)},nt="Edge",rt="Chromium",ot="Opera",it="Firefox",at="Safari",st=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isEdge:r(nt),isChromium:r(rt),isIE:r("IE"),isOpera:r(ot),isFirefox:r(it),isSafari:r(at)}},lt=()=>st({current:void 0,version:Be.unknown()}),ut=st,ct=(k(nt),k(rt),k("IE"),k(ot),k(it),k(at),"Windows"),dt="Android",ht="Linux",pt="macOS",ft="Solaris",gt="FreeBSD",mt="ChromeOS",vt=e=>{const t=e.current,n=e.version,r=e=>()=>t===e;return{current:t,version:n,isWindows:r(ct),isiOS:r("iOS"),isAndroid:r(dt),isMacOS:r(pt),isLinux:r(ht),isSolaris:r(ft),isFreeBSD:r(gt),isChromeOS:r(mt)}},yt=()=>vt({current:void 0,version:Be.unknown()}),bt=vt,xt=(k(ct),k("iOS"),k(dt),k(ht),k(pt),k(ft),k(gt),k(mt),e=>window.matchMedia(e).matches);let _t=Re(()=>((e,t,n)=>{const r=tt.browsers(),o=tt.oses(),i=t.bind(e=>((e,t)=>de(t.brands,t=>{const n=t.brand.toLowerCase();return J(e,e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())}).map(e=>({current:e.name,version:Be.nu(parseInt(t.version,10),0)}))}))(r,e)).orThunk(()=>((e,t)=>ze(e,t).map(e=>{const n=Be.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(r,e)).fold(lt,ut),a=((e,t)=>ze(e,t).map(e=>{const n=Be.detect(e.versionRegexes,t);return{current:e.name,version:n}}))(o,e).fold(yt,bt),s=((e,t,n,r)=>{const o=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!o,a=e.isiOS()||e.isAndroid(),s=a||r("(pointer:coarse)"),l=o||!i&&a&&r("(min-device-width:768px)"),u=i||a&&!l,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),d=!u&&!l&&!c;return{isiPad:k(o),isiPhone:k(i),isTablet:k(l),isPhone:k(u),isTouch:k(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:k(c),isDesktop:k(d)}})(a,i,e,n);return{browser:i,os:a,deviceType:s}})(navigator.userAgent,B.from(navigator.userAgentData),xt));const wt=()=>_t(),St=navigator.userAgent,Ct=wt(),Mt=Ct.browser,Tt=Ct.os,kt=Ct.deviceType,It=-1!==St.indexOf("Windows Phone"),At={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Mt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Mt.isIE(),windowsPhone:It,browser:{current:Mt.current,version:Mt.version,isChromium:Mt.isChromium,isEdge:Mt.isEdge,isFirefox:Mt.isFirefox,isIE:Mt.isIE,isOpera:Mt.isOpera,isSafari:Mt.isSafari},os:{current:Tt.current,version:Tt.version,isAndroid:Tt.isAndroid,isChromeOS:Tt.isChromeOS,isFreeBSD:Tt.isFreeBSD,isiOS:Tt.isiOS,isLinux:Tt.isLinux,isMacOS:Tt.isMacOS,isSolaris:Tt.isSolaris,isWindows:Tt.isWindows},deviceType:{isDesktop:kt.isDesktop,isiPad:kt.isiPad,isiPhone:kt.isiPhone,isPhone:kt.isPhone,isTablet:kt.isTablet,isTouch:kt.isTouch,isWebView:kt.isWebView}},Dt=/^\s*|\s*$/g,Pt=e=>b(e)?"":(""+e).replace(Dt,""),Lt=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Ie(e,(e,o)=>!1!==t.call(r,e,o,n)&&(Lt(e,t,n,r),!0)))},Nt={trim:Pt,isArray:ke,is:(e,t)=>t?!("array"!==t||!ke(e))||typeof e===t:void 0!==e,toArray:e=>{if(ke(e))return e;{const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const r=h(e)?e.split(t||","):e||[];let o=r.length;for(;o--;)n[r[o]]={};return n},each:Ie,map:Ae,grep:De,inArray:(e,t)=>{if(e)for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hasOwn:Se,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)if(Se(r,t)){const n=r[t];void 0!==n&&(e[t]=n)}}return e},walk:Lt,resolve:(e,t=window)=>{const n=e.split(".");for(let e=0,r=n.length;e<r&&(t=t[n[e]]);e++);return t},explode:(e,t)=>g(e)?e:""===e?[]:Ae(e.split(t||","),Pt),_addCacheSuffix:e=>{const t=At.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Rt=(e,t,n=A)=>e.exists(e=>n(e,t)),Et=(e,t,n=A)=>Ot(e,t,n).getOr(e.isNone()&&t.isNone()),Ot=(e,t,n)=>e.isSome()&&t.isSome()?B.some(n(e.getOrDie(),t.getOrDie())):B.none(),Bt=(e,t)=>e?B.some(t):B.none(),zt="undefined"!=typeof window?window:Function("return this;")(),Ft=(e,t)=>((e,t)=>{let n=null!=t?t:zt;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),Vt=Object.getPrototypeOf,Ht=e=>e.dom.nodeName.toLowerCase(),Wt=e=>e.dom.nodeType,Gt=e=>t=>Wt(t)===e,Ut=e=>jt(e)&&(e=>{const t=Ft("ownerDocument.defaultView",e);return p(e)&&((e=>((e,t)=>{const n=((e,t)=>Ft("HTMLElement",t))(0,t);if(null==n)throw new Error(e+" not available on this browser");return n})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Vt(e).constructor.name))})(e.dom),jt=Gt(1),Yt=Gt(3),qt=Gt(9),Xt=Gt(11),Zt=e=>t=>jt(t)&&Ht(t)===e,$t=(e,t,n)=>{if(!(h(n)||v(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Kt=(e,t,n)=>{$t(e.dom,t,n)},Jt=(e,t)=>{const n=e.dom;fe(t,(e,t)=>{$t(n,t,e)})},Qt=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},en=(e,t)=>B.from(Qt(e,t)),tn=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},nn=(e,t)=>{e.dom.removeAttribute(t)},rn=e=>$(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}),on=(e,t)=>{const n=Qt(e,t);return void 0===n||""===n?[]:n.split(" ")},an=e=>void 0!==e.dom.classList,sn=e=>on(e,"class"),ln=(e,t)=>((e,t,n)=>{const r=on(e,t).concat([n]);return Kt(e,t,r.join(" ")),!0})(e,"class",t),un=(e,t)=>((e,t,n)=>{const r=X(on(e,t),e=>e!==n);return r.length>0?Kt(e,t,r.join(" ")):nn(e,t),!1})(e,"class",t),cn=(e,t)=>{an(e)?e.dom.classList.add(t):ln(e,t)},dn=e=>{0===(an(e)?e.dom.classList:sn(e)).length&&nn(e,"class")},hn=(e,t)=>{an(e)?e.dom.classList.remove(t):un(e,t),dn(e)},pn=(e,t)=>an(e)&&e.dom.classList.contains(t),fn=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},gn=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return fn(n.childNodes[0])},mn=(e,t)=>{const n=(t||document).createElement(e);return fn(n)},vn=(e,t)=>{const n=(t||document).createTextNode(e);return fn(n)},yn=fn,bn=(e,t)=>{const n=[],r=e=>(n.push(e),t(e));let o=t(e);do{o=o.bind(r)}while(o.isSome());return n},xn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},_n=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,wn=(e,t)=>e.dom===t.dom,Sn=(e,t)=>{const n=e.dom,r=t.dom;return n!==r&&n.contains(r)},Cn=e=>yn(e.dom.ownerDocument),Mn=e=>qt(e)?e:Cn(e),Tn=e=>yn(Mn(e).dom.defaultView),kn=e=>B.from(e.dom.parentNode).map(yn),In=e=>B.from(e.dom.parentElement).map(yn),An=(e,t)=>{const n=_(t)?t:E;let r=e.dom;const o=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){const e=r.parentNode,t=yn(e);if(o.push(t),!0===n(t))break;r=e}return o},Dn=e=>B.from(e.dom.previousSibling).map(yn),Pn=e=>B.from(e.dom.nextSibling).map(yn),Ln=e=>re(bn(e,Dn)),Nn=e=>bn(e,Pn),Rn=e=>U(e.dom.childNodes,yn),En=(e,t)=>{const n=e.dom.childNodes;return B.from(n[t]).map(yn)},On=e=>En(e,0),Bn=e=>En(e,e.dom.childNodes.length-1),zn=e=>e.dom.childNodes.length,Fn=e=>Xt(e)&&x(e.dom.host),Vn=_(Element.prototype.attachShadow)&&_(Node.prototype.getRootNode),Hn=k(Vn),Wn=Vn?e=>yn(e.dom.getRootNode()):Mn,Gn=e=>Fn(e)?e:(e=>{const t=e.dom.head;if(null==t)throw new Error("Head is not available yet");return yn(t)})(Mn(e)),Un=e=>yn(e.dom.host),jn=e=>{if(Hn()&&x(e.target)){const t=yn(e.target);if(jt(t)&&Yn(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return le(t)}}return B.from(e.target)},Yn=e=>x(e.dom.shadowRoot),qn=e=>{const t=Yt(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=Wn(e);return Fn(t)?B.some(t):B.none()})(yn(t)).fold(()=>n.body.contains(t),T(qn,Un))};var Xn=(e,t,n,r,o)=>e(n,r)?B.some(n):_(o)&&o(n)?B.none():t(n,r,o);const Zn=(e,t,n)=>{let r=e.dom;const o=_(n)?n:E;for(;r.parentNode;){r=r.parentNode;const e=yn(r);if(t(e))return B.some(e);if(o(e))break}return B.none()},$n=(e,t,n)=>Xn((e,t)=>t(e),Zn,e,t,n),Kn=(e,t)=>{const n=e=>{for(let r=0;r<e.childNodes.length;r++){const o=yn(e.childNodes[r]);if(t(o))return B.some(o);const i=n(e.childNodes[r]);if(i.isSome())return i}return B.none()};return n(e.dom)},Jn=(e,t,n)=>Zn(e,e=>xn(e,t),n),Qn=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return _n(n)?B.none():B.from(n.querySelector(e)).map(yn)})(t,e),er=(e,t,n)=>Xn((e,t)=>xn(e,t),Jn,e,t,n),tr=(e,t=!1)=>{return qn(e)?e.dom.isContentEditable:(n=e,er(n,"[contenteditable]")).fold(k(t),e=>"true"===nr(e));var n},nr=e=>e.dom.contentEditable,rr=e=>void 0!==e.style&&_(e.style.getPropertyValue),or=(e,t,n)=>{if(!h(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);rr(e)&&e.style.setProperty(t,n)},ir=(e,t,n)=>{const r=e.dom;or(r,t,n)},ar=(e,t)=>{const n=e.dom;fe(t,(e,t)=>{or(n,t,e)})},sr=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||qn(e)?r:lr(n,t)},lr=(e,t)=>rr(e)?e.style.getPropertyValue(t):"",ur=(e,t)=>{const n=e.dom,r=lr(n,t);return B.from(r).filter(e=>e.length>0)},cr=e=>{const t={},n=e.dom;if(rr(n))for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t[r]=n.style[r]}return t},dr=(e,t)=>{((e,t)=>{rr(e)&&e.style.removeProperty(t)})(e.dom,t),Rt(en(e,"style").map(je),"")&&nn(e,"style")},hr=(e,t)=>{kn(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},pr=(e,t)=>{Pn(e).fold(()=>{kn(e).each(e=>{gr(e,t)})},e=>{hr(e,t)})},fr=(e,t)=>{On(e).fold(()=>{gr(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},gr=(e,t)=>{e.dom.appendChild(t.dom)},mr=(e,t)=>{hr(e,t),gr(t,e)},vr=(e,t)=>{j(t,t=>{gr(e,t)})},yr=e=>{e.dom.textContent="",j(Rn(e),e=>{br(e)})},br=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},xr=e=>{const t=Rn(e);var n,r;t.length>0&&(n=e,j(r=t,(e,t)=>{const o=0===t?n:r[t-1];pr(o,e)})),br(e)},_r=e=>U(e,yn),wr=e=>e.dom.innerHTML,Sr=(e,t)=>{const n=Cn(e).dom,r=yn(n.createDocumentFragment()),o=((e,t)=>{const n=(t||document).createElement("div");return n.innerHTML=e,Rn(yn(n))})(t,n);vr(r,o),yr(e),gr(e,r)},Cr=(e,t,n,r)=>{e.dom.removeEventListener(t,n,r)},Mr=(e,t)=>({left:e,top:t,translate:(n,r)=>Mr(e+n,t+r)}),Tr=Mr,kr=(e,t)=>void 0!==e?e:void 0!==t?t:0,Ir=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?Tr(n.offsetLeft,n.offsetTop):qn(e)?(e=>{const t=e.getBoundingClientRect();return Tr(t.left,t.top)})(t):Tr(0,0)},Ar=e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Tr(n,r)},Dr=(e,t,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(e,t)},Pr=(e,t)=>{wt().browser.isSafari()&&_(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Lr=(e,t,n,r)=>({x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}),Nr=e=>{const t=void 0===e?window:e,n=t.document,r=Ar(yn(n));return(e=>{const t=void 0===e?window:e;return wt().browser.isFirefox()?B.none():B.from(t.visualViewport)})(t).fold(()=>{const e=t.document.documentElement,n=e.clientWidth,o=e.clientHeight;return Lr(r.left,r.top,n,o)},e=>Lr(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height))},Rr=(e,t)=>{let n=[];return j(Rn(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(Rr(e,t))}),n},Er=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return _n(n)?[]:U(n.querySelectorAll(e),yn)})(t,e),Or=(e,t,n)=>Jn(e,t,n).isSome();class Br{constructor(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,t,n,r){if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){let t=e[n];if(t)return t;for(let r=e.parentNode;r&&r!==this.rootNode;r=r.parentNode)if(t=r[n],t)return t}}}findPreviousNode(e,t){if(e){const n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t)for(let e=n.lastChild;e;e=e.lastChild)if(!e.lastChild)return e;return n}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const zr=e=>t=>!!t&&t.nodeType===e,Fr=e=>!!e&&!Object.getPrototypeOf(e),Vr=zr(1),Hr=e=>Vr(e)&&Ut(yn(e)),Wr=e=>{const t=e.toLowerCase();return e=>x(e)&&e.nodeName.toLowerCase()===t},Gr=e=>{const t=e.map(e=>e.toLowerCase());return e=>{if(e&&e.nodeName){const n=e.nodeName.toLowerCase();return W(t,n)}return!1}},Ur=(e,t)=>{const n=t.toLowerCase().split(" ");return t=>{if(Vr(t)){const r=t.ownerDocument.defaultView;if(r)for(let o=0;o<n.length;o++){const i=r.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[o])return!0}}return!1}},jr=e=>t=>Vr(t)&&t.hasAttribute(e),Yr=e=>Vr(e)&&e.hasAttribute("data-mce-bogus"),qr=e=>Vr(e)&&"TABLE"===e.tagName,Xr=e=>t=>{if(Hr(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},Zr=Gr(["textarea","input"]),$r=zr(3),Kr=zr(4),Jr=zr(7),Qr=zr(8),eo=zr(9),to=zr(11),no=Wr("br"),ro=Wr("img"),oo=Xr("true"),io=Xr("false"),ao=Gr(["td","th"]),so=Gr(["td","th","caption"]),lo=Gr(["video","audio","object","embed"]),uo=Wr("li"),co=Wr("details"),ho=Wr("summary"),po="\ufeff",fo="\xa0",go=e=>e===po,mo=((e,t)=>{const n=t=>e(t)?B.from(t.dom.nodeValue):B.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return n(t).getOr("")},getOption:n,set:(t,n)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=n}}})(Yt),vo=e=>mo.get(e),yo=e=>mo.getOption(e),bo=e=>{let t;return n=>(t=t||ie(e,O),Se(t,Ht(n)))},xo=e=>jt(e)&&"br"===Ht(e),_o=bo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),wo=bo(["ul","ol","dl"]),So=bo(["li","dd","dt"]),Co=bo(["thead","tbody","tfoot"]),Mo=bo(["td","th"]),To=bo(["pre","script","textarea","style"]),ko=()=>{const e=mn("br");return Kt(e,"data-mce-bogus","1"),e},Io=e=>{yr(e),gr(e,ko())},Ao=po,Do=go,Po=e=>e.replace(/\uFEFF/g,""),Lo=Vr,No=$r,Ro=e=>(No(e)&&(e=e.parentNode),Lo(e)&&e.hasAttribute("data-mce-caret")),Eo=e=>No(e)&&Do(e.data),Oo=e=>Ro(e)||Eo(e),Bo=e=>e.firstChild!==e.lastChild||!no(e.firstChild),zo=e=>{const t=e.container();return!!$r(t)&&(t.data.charAt(e.offset())===Ao||e.isAtStart()&&Eo(t.previousSibling))},Fo=e=>{const t=e.container();return!!$r(t)&&(t.data.charAt(e.offset()-1)===Ao||e.isAtEnd()&&Eo(t.nextSibling))},Vo=e=>No(e)&&e.data[0]===Ao,Ho=e=>No(e)&&e.data[e.data.length-1]===Ao,Wo=e=>e&&e.hasAttribute("data-mce-caret")?((e=>{var t;const n=e.getElementsByTagName("br"),r=n[n.length-1];Yr(r)&&(null===(t=r.parentNode)||void 0===t||t.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Go=e=>Ro(e.startContainer),Uo=oo,jo=io,Yo=no,qo=$r,Xo=Gr(["script","style","textarea"]),Zo=Gr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),$o=Gr(["table"]),Ko=Oo,Jo=e=>!Ko(e)&&(qo(e)?!Xo(e.parentNode):Zo(e)||Yo(e)||$o(e)||Qo(e)),Qo=e=>!(e=>Vr(e)&&"true"===e.getAttribute("unselectable"))(e)&&jo(e),ei=(e,t)=>Jo(e)&&((e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Qo(n))return!1;if(Uo(n))return!0}return!0})(e,t),ti=/^[ \t\r\n]*$/,ni=e=>ti.test(e),ri=e=>{for(const t of e)if(!go(t))return!1;return!0},oi=e=>"\n"===e||"\r"===e,ii=(e,t=4,n=!0,r=!0)=>{const o=((e,t)=>t<=0?"":new Array(t+1).join(" "))(0,t),i=e.replace(/\t/g,o),a=$(i,(e,t)=>(e=>-1!==" \f\t\v".indexOf(e))(t)||t===fo?e.pcIsSpace||""===e.str&&n||e.str.length===i.length-1&&r||((e,t)=>t<e.length&&t>=0&&oi(e[t]))(i,e.str.length+1)?{pcIsSpace:!1,str:e.str+fo}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:oi(t),str:e.str+t},{pcIsSpace:!1,str:""});return a.str},ai=(e,t)=>Jo(e)&&!((e,t)=>$r(e)&&ni(e.data)&&!((e,t)=>{const n=yn(t),r=yn(e);return Or(r,"pre,code",D(wn,n))})(e,t))(e,t)||(e=>Vr(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")))(e)||si(e),si=jr("data-mce-bookmark"),li=jr("data-mce-bogus"),ui=e=>Vr(e)&&"all"===e.getAttribute("data-mce-bogus"),ci=e=>In(yn(e)).exists(e=>!tr(e)),di=(e,t=!0)=>((e,t)=>{let n=0;if(ai(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const o=new Br(r,e);do{if(t){if(ui(r)){r=o.next(!0);continue}if(li(r)){r=o.next();continue}}if(oo(r)&&ci(r))return!1;if(no(r))n++,r=o.next();else{if(ai(r,e))return!1;r=o.next()}}while(r);return n<=1}})(e.dom,t),hi=e=>"svg"===e.toLowerCase(),pi=e=>hi(e.nodeName),fi=e=>"svg"===(null==e?void 0:e.nodeName)?"svg":"html",gi=["svg"],mi="data-mce-block",vi=e=>U((e=>X(he(e),e=>!/[A-Z]/.test(e)))(e),e=>`${e}:`+U(gi,t=>`not(${t} ${e})`).join(":")).join(","),yi=(e,t)=>x(t.querySelector(e))?(t.setAttribute(mi,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(mi),!1),bi=(e,t)=>{const n=vi(e.getTransparentElements()),r=vi(e.getBlockElements());return X(t.querySelectorAll(n),e=>yi(r,e))},xi=(e,t)=>{var n;const r=t?"lastChild":"firstChild";for(let t=e[r];t;t=t[r])if(di(yn(t)))return void(null===(n=t.parentNode)||void 0===n||n.removeChild(t))},_i=(e,t)=>{const n=bi(e,t);((e,t,n)=>{const r=e.getBlockElements(),o=yn(t),i=e=>Ht(e)in r,a=e=>wn(e,o);j(_r(n),t=>{Zn(t,i,a).each(n=>{const r=((t,r)=>X(Rn(t),t=>i(t)&&!e.isValidChild(Ht(n),Ht(t))))(t);if(r.length>0){const t=In(n);j(r,e=>{Zn(e,i,a).each(t=>{((e,t)=>{const n=document.createRange(),r=e.parentNode;if(r){n.setStartBefore(e),n.setEndBefore(t);const o=n.extractContents();xi(o,!0),n.setStartAfter(t),n.setEndAfter(e);const i=n.extractContents();xi(i,!1),di(yn(o))||r.insertBefore(o,e),di(yn(t))||r.insertBefore(t,e),di(yn(i))||r.insertBefore(i,e),r.removeChild(e)}})(t.dom,e.dom)})}),t.each(t=>bi(e,t.dom))}})})})(e,t,n),((e,t,n)=>{j([...n,...Ti(e,t)?[t]:[]],t=>j(Er(yn(t),t.nodeName.toLowerCase()),t=>{ki(e,t.dom)&&xr(t)}))})(e,t,n)},wi=(e,t)=>{if(Mi(e,t)){const n=vi(e.getBlockElements());yi(n,t)}},Si=e=>e.hasAttribute(mi),Ci=(e,t)=>Se(e.getTransparentElements(),t),Mi=(e,t)=>Vr(t)&&Ci(e,t.nodeName),Ti=(e,t)=>Mi(e,t)&&Si(t),ki=(e,t)=>Mi(e,t)&&!Si(t),Ii=(e,t)=>1===t.type&&Ci(e,t.name)&&h(t.attr(mi)),Ai=wt().browser,Di=e=>J(e,jt),Pi=(e,t)=>e.children&&W(e.children,t),Li=(e,t={})=>{let n=0;const r={},o=yn(e),i=Mn(o),a=e=>{gr(Gn(o),e)},s=e=>{const t=Gn(o);Qn(t,"#"+e).each(br)},l=e=>we(r,e).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),u=e=>new Promise((n,o)=>{let s;const u=Nt._addCacheSuffix(e),c=l(u);r[u]=c,c.count++;const d=(e,t)=>{j(e,R),c.status=t,c.passed=[],c.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},h=()=>d(c.passed,2),p=()=>d(c.failed,3);if(n&&c.passed.push(n),o&&c.failed.push(o),1===c.status)return;if(2===c.status)return void h();if(3===c.status)return void p();c.status=1;const f=mn("link",i.dom);Jt(f,{rel:"stylesheet",type:"text/css",id:c.id}),t.contentCssCors&&Kt(f,"crossOrigin","anonymous"),t.referrerPolicy&&Kt(f,"referrerpolicy",t.referrerPolicy),s=f.dom,s.onload=h,s.onerror=p,a(f),Kt(f,"href",u)}),c=e=>{const t=Nt._addCacheSuffix(e);we(r,t).each(e=>{0==--e.count&&(delete r[t],s(e.id))})};return{load:u,loadRawCss:(e,t)=>{const n=l(e);r[e]=n,n.count++;const o=mn("style",i.dom);Jt(o,{rel:"stylesheet",type:"text/css",id:n.id}),o.dom.innerHTML=t,a(o)},loadAll:e=>Promise.allSettled(U(e,e=>u(e).then(k(e)))).then(e=>{const t=q(e,e=>"fulfilled"===e.status);return t.fail.length>0?Promise.reject(U(t.fail,e=>e.reason)):U(t.pass,e=>e.value)}),unload:c,unloadRawCss:e=>{we(r,e).each(t=>{0==--t.count&&(delete r[e],s(t.id))})},unloadAll:e=>{j(e,e=>{c(e)})},_setReferrerPolicy:e=>{t.referrerPolicy=e},_setContentCssCors:e=>{t.contentCssCors=e}}},Ni=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const r=Wn(t).dom;return B.from(e.get(r)).getOrThunk(()=>{const t=Li(r,n);return e.set(r,t),t})}}})(),Ri=(e,t,n)=>x(e)&&(ai(e,t)||n.isInline(e.nodeName.toLowerCase())),Ei=e=>(e=>"span"===e.nodeName.toLowerCase())(e)&&"bookmark"===e.getAttribute("data-mce-type"),Oi=(e,t,n,r)=>{var o;const i=r||t;if(Vr(t)&&Ei(t))return t;const a=t.childNodes;for(let t=a.length-1;t>=0;t--)Oi(e,a[t],n,i);if(Vr(t)){const e=t.childNodes;1===e.length&&Ei(e[0])&&(null===(o=t.parentNode)||void 0===o||o.insertBefore(e[0],t))}return(e=>to(e)||eo(e))(t)||ai(t,i)||(e=>!!Vr(e)&&e.childNodes.length>0)(t)||((e,t,n)=>$r(e)&&e.data.length>0&&((e,t,n)=>{const r=new Br(e,t).prev(!1),o=new Br(e,t).next(!1),i=y(r)||Ri(r,t,n),a=y(o)||Ri(o,t,n);return i&&a})(e,t,n))(t,i,n)||e.remove(t),t},Bi=Nt.makeMap,zi=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fi=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vi=/[<>&\"\']/g,Hi=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Wi={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Gi={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ui={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ji=(e,t)=>{const n={};if(e){const r=e.split(",");t=t||10;for(let e=0;e<r.length;e+=2){const o=String.fromCharCode(parseInt(r[e],t));if(!Gi[o]){const t="&"+r[e+1]+";";n[o]=t,n[t]=o}}return n}},Yi=ji("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),qi=(e,t)=>e.replace(t?zi:Fi,e=>Gi[e]||e),Xi=(e,t)=>e.replace(t?zi:Fi,e=>e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Gi[e]||"&#"+e.charCodeAt(0)+";"),Zi=(e,t,n)=>{const r=n||Yi;return e.replace(t?zi:Fi,e=>Gi[e]||r[e]||e)},$i={encodeRaw:qi,encodeAllRaw:e=>(""+e).replace(Vi,e=>Gi[e]||e),encodeNumeric:Xi,encodeNamed:Zi,getEncodeFunc:(e,t)=>{const n=ji(t)||Yi,r=Bi(e.replace(/\+/g,","));return r.named&&r.numeric?(e,t)=>e.replace(t?zi:Fi,e=>void 0!==Gi[e]?Gi[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"):r.named?t?(e,t)=>Zi(e,t,n):Zi:r.numeric?Xi:qi},decode:e=>e.replace(Hi,(e,t)=>t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Wi[t]||String.fromCharCode(t):Ui[e]||Yi[e]||(e=>{const t=mn("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e})(e))},Ki=(e,t)=>(e=Nt.trim(e))?e.split(t||" "):[],Ji=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Qi={},ea=Nt.makeMap,ta=Nt.each,na=Nt.extend,ra=Nt.explode,oa=(e,t={})=>{const n=ea(e," ",ea(e.toUpperCase()," "));return na(n,t)},ia=e=>oa("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),aa=(e,t)=>{if(e){const n={};return h(e)&&(e={"*":e}),ta(e,(e,r)=>{n[r]=n[r.toUpperCase()]="map"===t?ea(e,/[, ]/):ra(e,/[, ]/)}),n}},sa=(e={})=>{var t;const n={},r={};let o=[];const i={},a={},s=(t,n,r)=>{const o=e[t];if(o)return ea(o,/[, ]/,ea(o.toUpperCase(),/[, ]/));{let e=Qi[t];return e||(e=oa(n,r),Qi[t]=e),e}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",u=(e=>{const{globalAttributes:t,phrasingContent:n,flowContent:r}=(e=>{let t,n,r;t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const o=[n,r].join(" ");return{globalAttributes:t,blockContent:n,phrasingContent:r,flowContent:o}})(e),o={},i=(e,t,n)=>{o[e]={attributes:ie(t,k({})),attributesOrder:t,children:ie(n,k({}))}},a=(e,n="",r="")=>{const o=Ki(r),a=Ki(e);let s=a.length;const l=Ki([t,n].join(" "));for(;s--;)i(a[s],l.slice(),o)},s=(e,t)=>{const n=Ki(e),r=Ki(t);let i=n.length;for(;i--;){const e=o[n[i]];for(let t=0,n=r.length;t<n;t++)e.attributes[r[t]]={},e.attributesOrder.push(r[t])}};return"html5-strict"!==e&&(j(Ki("acronym applet basefont big font strike tt"),e=>{a(e,"",n)}),j(Ki("center dir isindex noframes"),e=>{a(e,"",r)})),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),a("dd div","",r),a("address dt caption","","html4"===e?n:r),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",r),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",r),a("dl","","dt dd"),a("a","href target rel media hreflang type","html4"===e?n:r),a("q","cite",n),a("ins del","cite datetime",r),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",r),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),a("param","name value"),a("map","name",[r,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",r),a("th","colspan rowspan headers scope abbr",r),a("form","accept-charset action autocomplete enctype method name novalidate target",r),a("fieldset","disabled form name",[r,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?r:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[r,"li"].join(" ")),a("noscript","",r),"html4"!==e&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",r),a("mark rt rp bdi","",n),a("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas","width height",r),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside main header footer","",r),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[r,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",r),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[r,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name"),i("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==e&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&j([o.video,o.audio],e=>{delete e.children.audio,delete e.children.video}),j(Ki("a form meter progress dfn"),e=>{o[e]&&delete o[e].children[e]}),delete o.caption.children.table,delete o.script,o})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const c=aa(e.valid_styles),d=aa(e.invalid_styles,"map"),h=aa(e.valid_classes,"map"),p=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),m=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=s("non_empty_elements",v+" pre svg",g),b=s("move_caret_before_on_enter_elements",v+" table",g),x="h1 h2 h3 h4 h5 h6",_=s("text_block_elements",x+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",_),S=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),C=s("transparent_elements","a ins del canvas map"),M=s("wrap_block_elements","pre "+x);ta("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),e=>{a[e]=new RegExp("</"+e+"[^>]*>","gi")});const T=e=>{const t=B.from(n["@"]),r=/[*?+]/;j(((e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return te(Ki(t,","),t=>{const r=n.exec(t);if(r){const t=r[1],n=r[2],o=r[3],i=r[4],a=r[5],s={attributes:{},attributesOrder:[]};if(e.each(e=>((e,t)=>{fe(e.attributes,(e,n)=>{t.attributes[n]=e}),t.attributesOrder.push(...e.attributesOrder)})(e,s)),"#"===t?s.paddEmpty=!0:"-"===t&&(s.removeEmpty=!0),"!"===i&&(s.removeEmptyAttrs=!0),a&&((e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:o,attributesOrder:i}=t;j(Ki(e,"|"),e=>{const a=n.exec(e);if(a){const e={},n=a[1],s=a[2].replace(/[\\:]:/g,":"),l=a[3],u=a[4];if("!"===n&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(s),e.required=!0),"-"===n)return delete o[s],void i.splice(Nt.inArray(i,s),1);if(l&&("="===l?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:s,value:u}),e.defaultValue=u):"~"===l?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:s,value:u}),e.forcedValue=u):"<"===l&&(e.validValues=Nt.makeMap(u,"?"))),r.test(s)){const n=e;t.attributePatterns=t.attributePatterns||[],n.pattern=Ji(s),t.attributePatterns.push(n)}else o[s]||i.push(s),o[s]=e}})})(a,s),o&&(s.outputName=n),"@"===n){if(!e.isNone())return[];e=B.some(s)}return[o?{name:n,element:s,aliasName:o}:{name:n,element:s}]}return[]})})(t,null!=e?e:""),({name:e,element:t,aliasName:i})=>{if(i&&(n[i]=t),r.test(e)){const n=t;n.pattern=Ji(e),o.push(n)}else n[e]=t})},I=e=>{o=[],j(he(n),e=>{delete n[e]}),T(e)},A=e=>{delete Qi.text_block_elements,delete Qi.block_elements,j((e=>{const t=/^(~)?(.+)$/;return te(Ki(e,","),e=>{const n=t.exec(e);if(n){const e="~"===n[1];return[{inline:e,cloneName:e?"span":"div",name:n[2]}]}return[]})})(null!=e?e:""),({inline:e,name:t,cloneName:o})=>{if(r[t]=r[o],i[t]=o,y[t.toUpperCase()]={},y[t]={},e||(w[t.toUpperCase()]={},w[t]={}),!n[t]){let e=n[o];e=na({},e),delete e.removeEmptyAttrs,delete e.removeEmpty,n[t]=e}fe(r,(e,n)=>{e[o]&&(r[n]=e=na({},r[n]),e[t]=e[o])})})},D=e=>{j((e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return te(Ki(e,","),e=>{const n=t.exec(e);if(n){const e=n[1],t=e?(e=>"-"===e?"remove":"add")(e):"replace";return[{operation:t,name:n[2],validChildren:Ki(n[3],"|")}]}return[]})})(null!=e?e:""),({operation:e,name:t,validChildren:n})=>{const o="replace"===e?{"#comment":{}}:r[t];j(n,t=>{"remove"===e?delete o[t]:o[t]={}}),r[t]=o})},P=e=>{const t=n[e];if(t)return t;let r=o.length;for(;r--;){const t=o[r];if(t.pattern.test(e))return t}};e.valid_elements?(I(e.valid_elements),ta(u,(e,t)=>{r[t]=e.children})):(ta(u,(e,t)=>{n[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},r[t]=e.children}),ta(Ki("strong/b em/i"),e=>{const t=Ki(e,"/");n[t[1]].outputName=t[0]}),ta(S,(t,r)=>{n[r]&&(e.padd_empty_block_inline_children&&(n[r].paddInEmptyBlock=!0),n[r].removeEmpty=!0)}),ta(Ki("ol ul blockquote a table tbody"),e=>{n[e]&&(n[e].removeEmpty=!0)}),ta(Ki("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),e=>{n[e]&&(n[e].paddEmpty=!0)}),ta(Ki("span"),e=>{n[e].removeEmptyAttrs=!0})),delete n.svg,A(e.custom_elements),D(e.valid_children),T(e.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),ta({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(e,t)=>{n[t]&&(n[t].parentsRequired=Ki(e))}),e.invalid_elements&&ta(ra(e.invalid_elements),e=>{n[e]&&delete n[e]}),P("span")||T("span[!data-mce-type|*]");const L=k(c),N=k(d),R=k(h),E=k(m),O=k(w),z=k(_),F=k(S),V=k(Object.seal(g)),H=k(f),W=k(y),G=k(b),U=k(p),Y=k(C),q=k(M),X=k(Object.seal(a)),Z=(e,t)=>{const n=P(e);if(n){if(!t)return!0;{if(n.attributes[t])return!0;const e=n.attributePatterns;if(e){let n=e.length;for(;n--;)if(e[n].pattern.test(t))return!0}}}return!1},$=e=>Se(O(),e),K=e=>Z(e)&&!$(e),J=k(i);return{type:l,children:r,elements:n,getValidStyles:L,getValidClasses:R,getBlockElements:O,getInvalidStyles:N,getVoidElements:V,getTextBlockElements:z,getTextInlineElements:F,getBoolAttrs:E,getElementRule:P,getSelfClosingElements:H,getNonEmptyElements:W,getMoveCaretBeforeOnEnterElements:G,getWhitespaceElements:U,getTransparentElements:Y,getSpecialElements:X,isValidChild:(e,t)=>{const n=r[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:Z,isBlock:$,isInline:K,isWrapper:e=>Se(q(),e)||K(e),getCustomElements:J,addValidElements:T,setValidElements:I,addCustomElements:A,addValidChildren:D}},la=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},ua=e=>(e=>{return{value:(t=e,Ve(t,"#").toUpperCase())};var t})(la(e.red)+la(e.green)+la(e.blue)),ca=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,da=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ha=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),pa=(e,t,n,r)=>{const o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),s=parseFloat(r);return ha(o,i,a,s)},fa=e=>{if("transparent"===e)return B.some(ha(0,0,0,0));const t=ca.exec(e);if(null!==t)return B.some(pa(t[1],t[2],t[3],"1"));const n=da.exec(e);return null!==n?B.some(pa(n[1],n[2],n[3],n[4])):B.none()},ga=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,ma=e=>fa(e).map(ua).map(e=>"#"+e.value).getOr(e),va=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,i={};let a,s;t&&(a=t.getValidStyles(),s=t.getInvalidStyles());const l="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let e=0;e<l.length;e++)i[l[e]]="\ufeff"+e,i["\ufeff"+e]=l[e];const u={parse:t=>{const a={};let s=!1;const l=e.url_converter,c=e.url_converter_scope||u,d=(e,t,n)=>{const r=a[e+"-top"+t];if(!r)return;const o=a[e+"-right"+t];if(!o)return;const i=a[e+"-bottom"+t];if(!i)return;const s=a[e+"-left"+t];if(!s)return;const l=[r,o,i,s];let u=l.length-1;for(;u--&&l[u]===l[u+1];);u>-1&&n||(a[e+t]=-1===u?l[0]:l.join(" "),delete a[e+"-top"+t],delete a[e+"-right"+t],delete a[e+"-bottom"+t],delete a[e+"-left"+t])},p=e=>{const t=a[e];if(!t)return;const n=t.indexOf(",")>-1?[t]:t.split(" ");let r=n.length;for(;r--;)if(n[r]!==n[0])return!1;return a[e]=n[0],!0},f=e=>(s=!0,i[e]),g=(e,t)=>(s&&(e=e.replace(/\uFEFF[0-9]/g,e=>i[e])),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e),m=e=>String.fromCharCode(parseInt(e.slice(1),16)),v=e=>e.replace(/\\[0-9a-f]+/gi,m),y=(t,n,r,o,i,a)=>{if(i=i||a)return"'"+(i=g(i)).replace(/\'/g,"\\'")+"'";if(n=g(n||r||o||""),!e.allow_script_urls){const t=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(t))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(t))return""}return l&&(n=l.call(c,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){let i;for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,e=>e.replace(/[;:]/g,f));i=r.exec(t);){r.lastIndex=i.index+i[0].length;let t=i[1].replace(o,"").toLowerCase(),l=i[2].replace(o,"");if(t&&l){if(t=v(t),l=v(l),-1!==t.indexOf("\ufeff")||-1!==t.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===t||/expression\s*\(|\/\*|\*\//.test(l)))continue;"font-weight"===t&&"700"===l?l="bold":"color"!==t&&"background-color"!==t||(l=l.toLowerCase()),h(e.force_hex_color)&&"off"!==e.force_hex_color&&fa(l).each(t=>{"always"!==e.force_hex_color&&1!==t.alpha||(l=ma(ga(t)))}),l=l.replace(n,y),a[t]=s?g(l,!0):l}}d("border","",!0),d("border","-width"),d("border","-color"),d("border","-style"),d("padding",""),d("margin",""),x="border-style",_="border-color",p(b="border-width")&&p(x)&&p(_)&&(a.border=a[b]+" "+a[x]+" "+a[_],delete a[b],delete a[x],delete a[_]),"medium none"===a.border&&delete a.border,"none"===a["border-image"]&&delete a["border-image"]}var b,x,_;return a},serialize:(e,t)=>{let n="";const r=(t,r)=>{const o=r[t];if(o)for(let t=0,r=o.length;t<r;t++){const r=o[t],i=e[r];i&&(n+=(n.length>0?" ":"")+r+": "+i+";")}};return t&&a?(r("*",a),r(t,a)):fe(e,(e,r)=>{e&&((e,t)=>{if(!s||!t)return!0;let n=s["*"];return!(n&&n[e]||(n=s[t],n&&n[e]))})(r,t)&&(n+=(n.length>0?" ":"")+r+": "+e+";")}),n}};return u},ya={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ba=(e,t)=>{const n=null!=t?t:{};for(const t in e)Se(ya,t)||(n[t]=e[t]);return x(e.composedPath)&&(n.composedPath=()=>e.composedPath()),x(e.getModifierState)&&(n.getModifierState=t=>e.getModifierState(t)),x(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},xa=(e,t,n,r)=>{var o;const i=ba(t,r);return i.type=e,b(i.target)&&(i.target=null!==(o=i.srcElement)&&void 0!==o?o:n),(e=>b(e.preventDefault)||(e=>e instanceof Event||_(e.initEvent))(e))(t)&&(i.preventDefault=()=>{i.defaultPrevented=!0,i.isDefaultPrevented=O,_(t.preventDefault)&&t.preventDefault()},i.stopPropagation=()=>{i.cancelBubble=!0,i.isPropagationStopped=O,_(t.stopPropagation)&&t.stopPropagation()},i.stopImmediatePropagation=()=>{i.isImmediatePropagationStopped=O,i.stopPropagation()},(e=>e.isDefaultPrevented===O||e.isDefaultPrevented===E)(i)||(i.isDefaultPrevented=!0===i.defaultPrevented?O:E,i.isPropagationStopped=!0===i.cancelBubble?O:E,i.isImmediatePropagationStopped=E)),i},_a=/^(?:mouse|contextmenu)|click/,wa=(e,t,n,r)=>{e.addEventListener(t,n,r||!1)},Sa=(e,t,n,r)=>{e.removeEventListener(t,n,r||!1)},Ca=(e,t)=>{const n=xa(e.type,e,document,t);if((e=>x(e)&&_a.test(e.type))(e)&&y(e.pageX)&&!y(e.clientX)){const t=n.target.ownerDocument||document,r=t.documentElement,o=t.body,i=n;i.pageX=e.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),i.pageY=e.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)}return n},Ma=(e,t,n)=>{const r=e.document,o={type:"ready"};if(n.domLoaded)return void t(o);const i=()=>{Sa(e,"DOMContentLoaded",i),Sa(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};"complete"===r.readyState||"interactive"===r.readyState&&r.body?i():wa(e,"DOMContentLoaded",i),n.domLoaded||wa(e,"load",i)};class Ta{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,t,n,r){const o=this;let i;const a=window,s=e=>{o.executeHandlers(Ca(e||a.event),l)};if(!e||$r(e)||Qr(e))return n;let l;e[o.expando]?l=e[o.expando]:(l=o.count++,e[o.expando]=l,o.events[l]={}),r=r||e;const u=t.split(" ");let c=u.length;for(;c--;){let t=u[c],d=s,h=!1,p=!1;"DOMContentLoaded"===t&&(t="ready"),o.domLoaded&&"ready"===t&&"complete"===e.readyState?n.call(r,Ca({type:t})):(o.hasFocusIn||"focusin"!==t&&"focusout"!==t||(h=!0,p="focusin"===t?"focus":"blur",d=e=>{const t=Ca(e||a.event);t.type="focus"===t.type?"focusin":"focusout",o.executeHandlers(t,l)}),i=o.events[l][t],i?"ready"===t&&o.domLoaded?n(Ca({type:t})):i.push({func:n,scope:r}):(o.events[l][t]=i=[{func:n,scope:r}],i.fakeName=p,i.capture=h,i.nativeHandler=d,"ready"===t?Ma(e,d,o):wa(e,p||t,d,h)))}return e=i=null,n}unbind(e,t,n){if(!e||$r(e)||Qr(e))return this;const r=e[this.expando];if(r){let o=this.events[r];if(t){const r=t.split(" ");let i=r.length;for(;i--;){const t=r[i],a=o[t];if(a){if(n){let e=a.length;for(;e--;)if(a[e].func===n){const n=a.nativeHandler,r=a.fakeName,i=a.capture,s=a.slice(0,e).concat(a.slice(e+1));s.nativeHandler=n,s.fakeName=r,s.capture=i,o[t]=s}}n&&0!==a.length||(delete o[t],Sa(e,a.fakeName||t,a.nativeHandler,a.capture))}}}else fe(o,(t,n)=>{Sa(e,t.fakeName||n,t.nativeHandler,t.capture)}),o={};for(const e in o)if(Se(o,e))return this;delete this.events[r];try{delete e[this.expando]}catch(t){e[this.expando]=null}}return this}fire(e,t,n){return this.dispatch(e,t,n)}dispatch(e,t,n){if(!e||$r(e)||Qr(e))return this;const r=Ca({type:t,target:e},n);do{const t=e[this.expando];t&&this.executeHandlers(r,t),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||$r(e)||Qr(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const t=e.getElementsByTagName("*");let n=t.length;for(;n--;)(e=t[n])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,t){const n=this.events[t],r=n&&n[e.type];if(r)for(let t=0,n=r.length;t<n;t++){const n=r[t];if(n&&!1===n.func.call(n.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Ta.Event=new Ta;const ka=Nt.each,Ia=Nt.grep,Aa="data-mce-style",Da=Nt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Pa=(e,t,n)=>{b(n)||""===n?nn(e,t):Kt(e,t,n)},La=e=>e.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Na=(e,t)=>{let n=0;if(e)for(let r=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const e=o.nodeType;(!t||!$r(o)||e!==r&&o.data.length)&&(n++,r=e)}return n},Ra=(e,t)=>{const n=Qt(t,"style"),r=e.serialize(e.parse(n),Ht(t));Pa(t,Aa,r)},Ea=(e,t,n)=>{const r=La(t);b(n)||""===n?dr(e,r):ir(e,r,((e,t)=>w(e)?Se(Da,t)?e+"":e+"px":e)(n,r))},Oa=(e,t={})=>{const n={},r=window,o={};let i=0;const a=Ni.forElement(yn(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),s=[],l=t.schema?t.schema:sa({}),u=va({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),c=t.ownEvents?new Ta:Ta.Event,d=l.getBlockElements(),p=t=>t&&e&&h(t)?e.getElementById(t):t,f=e=>{const t=p(e);return x(t)?yn(t):null},m=(e,t,n="")=>{let r;const o=f(e);if(x(o)&&jt(o)){const e=Z[t];r=e&&e.get?e.get(o.dom,t):Qt(o,t)}return x(r)?r:n},v=e=>{const t=p(e);return b(t)?[]:t.attributes},y=(e,n,r)=>{P(e,e=>{if(Vr(e)){const o=yn(e),i=""===r?null:r,a=Qt(o,n),s=Z[n];s&&s.set?s.set(o.dom,i,n):Pa(o,n,i),a!==i&&t.onSetAttrib&&t.onSetAttrib({attrElm:o.dom,attrName:n,attrValue:i})}})},w=()=>t.root_element||e.body,S=(t,n)=>((e,t,n)=>{let r=0,o=0;const i=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===sr(yn(e),"position")){const n=t.getBoundingClientRect();return r=n.left+(i.documentElement.scrollLeft||e.scrollLeft)-i.documentElement.clientLeft,o=n.top+(i.documentElement.scrollTop||e.scrollTop)-i.documentElement.clientTop,{x:r,y:o}}let a=t;for(;a&&a!==n&&a.nodeType&&!Pi(a,n);){const e=a;r+=e.offsetLeft||0,o+=e.offsetTop||0,a=e.offsetParent}for(a=t.parentNode;a&&a!==n&&a.nodeType&&!Pi(a,n);)r-=a.scrollLeft||0,o-=a.scrollTop||0,a=a.parentNode;o+=(e=>Ai.isFirefox()&&"table"===Ht(e)?Di(Rn(e)).filter(e=>"caption"===Ht(e)).bind(e=>Di(Nn(e)).map(t=>{const n=t.dom.offsetTop,r=e.dom.offsetTop,o=e.dom.offsetHeight;return n<=r?-o:0})).getOr(0):0)(yn(t))}return{x:r,y:o}})(e.body,p(t),n),M=(e,t,n)=>{const r=p(e);var o;if(!b(r)&&(Hr(r)||Vr(o=r)&&"http://www.w3.org/2000/svg"===o.namespaceURI))return n?sr(yn(r),La(t)):("float"===(t=t.replace(/-(\D)/g,(e,t)=>t.toUpperCase()))&&(t="cssFloat"),r.style?r.style[t]:void 0)},T=e=>{const t=p(e);if(!t)return{w:0,h:0};let n=M(t,"width"),r=M(t,"height");return n&&-1!==n.indexOf("px")||(n="0"),r&&-1!==r.indexOf("px")||(r="0"),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(r,10)||t.offsetHeight||t.clientHeight}},I=(e,t)=>{if(!e)return!1;const n=g(e)?e:[e];return G(n,e=>xn(yn(e),t))},A=(e,t,n,r)=>{const o=[];let i=p(e);r=void 0===r;const a=n||("BODY"!==w().nodeName?w().parentNode:null);if(h(t))if("*"===t)t=Vr;else{const e=t;t=t=>I(t,e)}for(;i&&!(i===a||b(i.nodeType)||eo(i)||to(i));){if(!t||t(i)){if(!r)return[i];o.push(i)}i=i.parentNode}return r?o:null},D=(e,t,n)=>{let r=t;if(e){h(t)&&(r=e=>I(e,t));for(let t=e[n];t;t=t[n])if(_(r)&&r(t))return t}return null},P=function(e,t,n){const r=null!=n?n:this;if(g(e)){const n=[];return ka(e,(e,o)=>{const i=p(e);i&&n.push(t.call(r,i,o))}),n}{const n=p(e);return!!n&&t.call(r,n)}},L=(e,t)=>{P(e,e=>{fe(t,(t,n)=>{y(e,n,t)})})},N=(e,t)=>{P(e,e=>{const n=yn(e);Sr(n,t)})},R=(t,n,r,o,i)=>P(t,t=>{const a=h(n)?e.createElement(n):n;return x(r)&&L(a,r),o&&(!h(o)&&o.nodeType?a.appendChild(o):h(o)&&N(a,o)),i?a:t.appendChild(a)}),E=(t,n,r)=>R(e.createElement(t),t,n,r,!0),O=$i.encodeAllRaw,B=(e,t)=>P(e,e=>{const n=yn(e);return t&&j(Rn(n),e=>{Yt(e)&&0===e.dom.length?br(e):hr(n,e)}),br(n),n.dom}),z=(e,t,n)=>{P(e,e=>{if(Vr(e)){const r=yn(e),o=t.split(" ");j(o,e=>{x(n)?(n?cn:hn)(r,e):((e,t)=>{an(e)?e.dom.classList.toggle(t):((e,t)=>{W(sn(e),t)?un(e,t):ln(e,t)})(e,t);dn(e)})(r,e)})}})},F=(e,t,n)=>P(t,r=>{var o;const i=g(t)?e.cloneNode(!0):e;return n&&ka(Ia(r.childNodes),e=>{i.appendChild(e)}),null===(o=r.parentNode)||void 0===o||o.replaceChild(i,r),r}),V=e=>{if(Vr(e)){const t="a"===e.nodeName.toLowerCase()&&!m(e,"href")&&m(e,"id");if(m(e,"name")||m(e,"data-mce-bookmark")||t)return!0}return!1},H=()=>e.createRange(),U=(n,o,i,a)=>{if(g(n)){let e=n.length;const t=[];for(;e--;)t[e]=U(n[e],o,i,a);return t}return!t.collect||n!==e&&n!==r||s.push([n,o,i,a]),c.bind(n,o,i,a||X)},Y=(t,n,o)=>{if(g(t)){let e=t.length;const r=[];for(;e--;)r[e]=Y(t[e],n,o);return r}if(s.length>0&&(t===e||t===r)){let e=s.length;for(;e--;){const[r,i,a]=s[e];t!==r||n&&n!==i||o&&o!==a||c.unbind(r,i,a)}}return c.unbind(t,n,o)},q=e=>{if(e&&Hr(e)){const t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},X={doc:e,settings:t,win:r,files:o,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:s,styles:u,schema:l,events:c,isBlock:e=>h(e)?Se(d,e):Vr(e)&&(Se(d,e.nodeName)||Ti(l,e)),root:null,clone:(e,t)=>e.cloneNode(t),getRoot:w,getViewPort:e=>{const t=Nr(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:e=>{const t=p(e),n=S(t),r=T(t);return{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:T,getParent:(e,t,n)=>{const r=A(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:A,get:p,getNext:(e,t)=>D(e,t,"nextSibling"),getPrev:(e,t)=>D(e,t,"previousSibling"),select:(n,r)=>{var o,i;const a=null!==(i=null!==(o=p(r))&&void 0!==o?o:t.root_element)&&void 0!==i?i:e;return _(a.querySelectorAll)?ce(a.querySelectorAll(n)):[]},is:I,add:R,create:E,createHTML:(e,t,n="")=>{let r="<"+e;for(const e in t)Ce(t,e)&&(r+=" "+e+'="'+O(t[e])+'"');return Ze(n)&&Se(l.getVoidElements(),e)?r+" />":r+">"+n+"</"+e+">"},createFragment:t=>{const n=e.createElement("div"),r=e.createDocumentFragment();let o;for(r.appendChild(n),t&&(n.innerHTML=t);o=n.firstChild;)r.appendChild(o);return r.removeChild(n),r},remove:B,setStyle:(e,n,r)=>{P(e,e=>{const o=yn(e);Ea(o,n,r),t.update_styles&&Ra(u,o)})},getStyle:M,setStyles:(e,n)=>{P(e,e=>{const r=yn(e);fe(n,(e,t)=>{Ea(r,t,e)}),t.update_styles&&Ra(u,r)})},removeAllAttribs:e=>P(e,e=>{const t=e.attributes;for(let n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))}),setAttrib:y,setAttribs:L,getAttrib:m,getPos:S,parseStyle:e=>u.parse(e),serializeStyle:(e,t)=>u.serialize(e,t),addStyle:t=>{if(X!==Oa.DOM&&e===document){if(n[t])return;n[t]=!0}let r=e.getElementById("mceDefaultStyles");if(!r){r=e.createElement("style"),r.id="mceDefaultStyles",r.type="text/css";const t=e.head;t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},loadCSS:e=>{e||(e=""),j(e.split(","),e=>{o[e]=!0,a.load(e).catch(C)})},addClass:(e,t)=>{z(e,t,!0)},removeClass:(e,t)=>{z(e,t,!1)},hasClass:(e,t)=>{const n=f(e),r=t.split(" ");return x(n)&&ne(r,e=>pn(n,e))},toggleClass:z,show:e=>{P(e,e=>dr(yn(e),"display"))},hide:e=>{P(e,e=>ir(yn(e),"display","none"))},isHidden:e=>{const t=f(e);return x(t)&&Rt(ur(t,"display"),"none")},uniqueId:e=>(e||"mce_")+i++,setHTML:N,getOuterHTML:e=>{const t=f(e);return x(t)?Vr(t.dom)?t.dom.outerHTML:(e=>{const t=mn("div"),n=yn(e.dom.cloneNode(!0));return gr(t,n),wr(t)})(t):""},setOuterHTML:(e,t)=>{P(e,e=>{Vr(e)&&(e.outerHTML=t)})},decode:$i.decode,encode:O,insertAfter:(e,t)=>{const n=p(t);return P(e,e=>{const t=null==n?void 0:n.parentNode,r=null==n?void 0:n.nextSibling;return t&&(r?t.insertBefore(e,r):t.appendChild(e)),e})},replace:F,rename:(e,t)=>{if(e.nodeName!==t.toUpperCase()){const n=E(t);return ka(v(e),t=>{y(n,t.nodeName,m(e,t.nodeName))}),F(n,e,!0),n}return e},findCommonAncestor:(e,t)=>{let n=e;for(;n;){let e=t;for(;e&&n!==e;)e=e.parentNode;if(n===e)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},run:P,getAttribs:v,isEmpty:(e,t,n)=>{let r=0;if(V(e))return!1;const o=e.firstChild;if(o){const i=new Br(o,e),a=l?l.getWhitespaceElements():{},s=t||(l?l.getNonEmptyElements():null);let u=o;do{if(Vr(u)){const e=u.getAttribute("data-mce-bogus");if(e){u=i.next("all"===e);continue}const t=u.nodeName.toLowerCase();if(s&&s[t]){if("br"===t){r++,u=i.next();continue}return!1}if(V(u))return!1}if(Qr(u))return!1;if($r(u)&&!ni(u.data)&&(!(null==n?void 0:n.includeZwsp)||!ri(u.data)))return!1;if($r(u)&&u.parentNode&&a[u.parentNode.nodeName]&&ni(u.data))return!1;u=i.next()}while(u)}return r<=1},createRng:H,nodeIndex:Na,split:(e,t,n)=>{let r,o,i=H();if(e&&t&&e.parentNode&&t.parentNode){const a=e.parentNode;return i.setStart(a,Na(e)),i.setEnd(t.parentNode,Na(t)),r=i.extractContents(),i=H(),i.setStart(t.parentNode,Na(t)+1),i.setEnd(a,Na(e)+1),o=i.extractContents(),a.insertBefore(Oi(X,r,l),e),n?a.insertBefore(n,e):a.insertBefore(t,e),a.insertBefore(Oi(X,o,l),e),B(e),n||t}},bind:U,unbind:Y,fire:(e,t,n)=>c.dispatch(e,t,n),dispatch:(e,t,n)=>c.dispatch(e,t,n),getContentEditable:q,getContentEditableParent:e=>{const t=w();let n=null;for(let r=e;r&&r!==t&&(n=q(r),null===n);r=r.parentNode);return n},isEditable:e=>{if(x(e)){const t=Vr(e)?e:e.parentElement;return x(t)&&Hr(t)&&tr(yn(t))}return!1},destroy:()=>{if(s.length>0){let e=s.length;for(;e--;){const[t,n,r]=s[e];c.unbind(t,n,r)}}fe(o,(e,t)=>{a.unload(t),delete o[t]})},isChildOf:(e,t)=>e===t||t.contains(e),dumpRng:e=>"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},Z=((e,t,n)=>{const r=t.keep_values,o={set:(e,r,o)=>{const i=yn(e);_(t.url_converter)&&x(r)&&(r=t.url_converter.call(t.url_converter_scope||n(),String(r),o,e)),Pa(i,"data-mce-"+o,r),Pa(i,o,r)},get:(e,t)=>{const n=yn(e);return Qt(n,"data-mce-"+t)||Qt(n,t)}},i={style:{set:(t,n)=>{const o=yn(t);r&&Pa(o,Aa,n),nn(o,"style"),h(n)&&ar(o,e.parse(n))},get:t=>{const n=yn(t),r=Qt(n,Aa)||Qt(n,"style");return e.serialize(e.parse(r),Ht(n))}}};return r&&(i.href=i.src=o),i})(u,t,k(X));return X};Oa.DOM=Oa(document),Oa.nodeIndex=Na;const Ba=Oa.DOM;class za{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((t,n)=>{const r=Ba;let o;const i=()=>{r.remove(a),o&&(o.onerror=o.onload=o=null)},a=r.uniqueId();o=document.createElement("script"),o.id=a,o.type="text/javascript",o.src=Nt._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(o,"referrerpolicy",this.settings.referrerPolicy),o.onload=()=>{i(),t()},o.onerror=()=>{i(),n("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(o)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise((n,r)=>{t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const t=this,n=(e,n)=>{we(t.scriptLoadedCallbacks,n).each(t=>{j(t,t=>t[e](n))}),delete t.scriptLoadedCallbacks[n]},r=e=>{const t=X(e,e=>"rejected"===e.status);return t.length>0?Promise.reject(te(t,({reason:e})=>g(e)?e:[e])):Promise.resolve()},o=e=>Promise.allSettled(U(e,e=>2===t.states[e]?(n("resolve",e),Promise.resolve()):3===t.states[e]?(n("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then(()=>{t.states[e]=2,n("resolve",e);const i=t.queue;return i.length>0?(t.queue=[],o(i).then(r)):Promise.resolve()},()=>(t.states[e]=3,n("reject",e),Promise.reject(e)))))),i=e=>(t.loading=!0,o(e).then(e=>{t.loading=!1;const n=t.queueLoadedCallbacks.shift();return B.from(n).each(R),r(e)})),a=Me(e);return t.loading?new Promise((e,n)=>{t.queueLoadedCallbacks.push(()=>{i(a).then(e,n)})}):i(a)}}za.ScriptLoader=new za;const Fa=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Va={},Ha=Fa("en"),Wa=()=>we(Va,Ha.get()),Ga={getData:()=>ge(Va,e=>({...e})),setCode:e=>{e&&Ha.set(e)},getCode:()=>Ha.get(),add:(e,t)=>{let n=Va[e];n||(Va[e]=n={});const r=U(he(t),e=>e.toLowerCase());fe(t,(e,o)=>{const i=o.toLowerCase();i!==o&&((e,t)=>{const n=e.indexOf(t);return-1!==n&&e.indexOf(t,n+1)>n})(r,i)?(Se(t,i)||(n[i]=e),n[o]=e):n[i]=e})},translate:e=>{const t=Wa().getOr({}),n=e=>_(e)?Object.prototype.toString.call(e):r(e)?"":""+e,r=e=>""===e||null==e,o=e=>{const r=n(e);return Se(t,r)?n(t[r]):we(t,r.toLowerCase()).map(n).getOr(r)},i=e=>e.replace(/{context:\w+}$/,"");if(r(e))return"";if(p(a=e)&&Se(a,"raw"))return n(e.raw);var a;if((e=>g(e)&&e.length>1)(e)){const t=e.slice(1);return i(o(e[0]).replace(/\{([0-9]+)\}/g,(e,r)=>Se(t,r)?n(t[r]):e))}return i(o(e))},isRtl:()=>Wa().bind(e=>we(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Se(Va,e)},Ua=()=>{const e=[],t={},n={},r=[],o=(e,t)=>{const n=X(r,n=>n.name===e&&n.state===t);j(n,e=>e.resolve())},i=e=>Se(t,e),a=(e,n)=>{const r=Ga.getCode();!r||n&&-1===(","+(n||"")+",").indexOf(","+r+",")||za.ScriptLoader.add(t[e]+"/langs/"+r+".js")},s=(e,t="added")=>"added"===t&&(e=>Se(n,e))(e)||"loaded"===t&&i(e)?Promise.resolve():new Promise(n=>{r.push({name:e,state:t,resolve:n})});return{items:e,urls:t,lookup:n,get:e=>{if(n[e])return n[e].instance},requireLangPack:(e,t)=>{!1!==Ua.languageLoad&&(i(e)?a(e,t):s(e,"loaded").then(()=>a(e,t)))},add:(t,r)=>(e.push(r),n[t]={instance:r},o(t,"added"),r),remove:e=>{delete t[e],delete n[e]},createUrl:(e,t)=>h(t)?h(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t,load:(e,r)=>{if(t[e])return Promise.resolve();let i=h(r)?r:r.prefix+r.resource+r.suffix;0!==i.indexOf("/")&&-1===i.indexOf("://")&&(i=Ua.baseURL+"/"+i),t[e]=i.substring(0,i.lastIndexOf("/"));const a=()=>(o(e,"loaded"),Promise.resolve());return n[e]?a():za.ScriptLoader.add(i).then(a)},waitFor:s}};Ua.languageLoad=!0,Ua.baseURL="",Ua.PluginManager=Ua(),Ua.ThemeManager=Ua(),Ua.ModelManager=Ua();const ja=e=>{const t=Fa(B.none()),n=()=>t.get().each(e=>clearInterval(e));return{clear:()=>{n(),t.set(B.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:r=>{n(),t.set(B.some(setInterval(r,e)))}}},Ya=()=>{const e=(e=>{const t=Fa(B.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(B.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(B.some(e))}}})(C);return{...e,on:t=>e.get().each(t)}},qa=(e,t)=>{let n=null;return{cancel:()=>{m(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{m(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},Xa=(e,t)=>{let n=null;const r=()=>{m(n)||(clearTimeout(n),n=null)};return{cancel:r,throttle:(...o)=>{r(),n=setTimeout(()=>{n=null,e.apply(null,o)},t)}}},Za=k("mce-annotation"),$a=k("data-mce-annotation"),Ka=k("data-mce-annotation-uid"),Ja=k("data-mce-annotation-active"),Qa=k("data-mce-annotation-classes"),es=k("data-mce-annotation-attrs"),ts=e=>t=>wn(t,e),ns=(e,t)=>{const n=e.selection.getRng(),r=yn(n.startContainer),o=yn(e.getBody()),i=t.fold(()=>"."+Za(),e=>`[${$a()}="${e}"]`),a=En(r,n.startOffset).getOr(r);return er(a,i,ts(o)).bind(t=>en(t,`${Ka()}`).bind(n=>en(t,`${$a()}`).map(t=>{const r=os(e,n);return{uid:n,name:t,elements:r}})))},rs=(e,t)=>tn(e,"data-mce-bogus")||Or(e,'[data-mce-bogus="all"]',ts(t)),os=(e,t)=>{const n=yn(e.getBody()),r=Er(n,`[${Ka()}="${t}"]`);return X(r,e=>!rs(e,n))},is=(e,t)=>{const n=yn(e.getBody()),r=Er(n,`[${$a()}="${t}"]`),o={};return j(r,e=>{if(!rs(e,n)){const t=Qt(e,Ka()),n=we(o,t).getOr([]);o[t]=n.concat([e])}}),o};let as=0;const ss=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return as++,e+"_"+n+as+String(t)},ls=(e,t)=>yn(e.dom.cloneNode(t)),us=e=>ls(e,!1),cs=e=>ls(e,!0),ds=(e,t,n=E)=>{const r=new Br(e,t),o=e=>{let t;do{t=r[e]()}while(t&&!$r(t)&&!n(t));return B.from(t).filter($r)};return{current:()=>B.from(r.current()).filter($r),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},hs=(e,t)=>{const n=t||(t=>e.isBlock(t)||no(t)||io(t)),r=(e,t,n,o)=>{if($r(e)){const n=o(e,t,e.data);if(-1!==n)return B.some({container:e,offset:n})}return n().bind(e=>r(e.container,e.offset,n,o))};return{backwards:(t,o,i,a)=>{const s=ds(t,null!=a?a:e.getRoot(),n);return r(t,o,()=>s.prev().map(e=>({container:e,offset:e.length})),i).getOrNull()},forwards:(t,o,i,a)=>{const s=ds(t,null!=a?a:e.getRoot(),n);return r(t,o,()=>s.next().map(e=>({container:e,offset:0})),i).getOrNull()}}},ps=Math.round,fs=e=>e?{left:ps(e.left),top:ps(e.top),bottom:ps(e.bottom),right:ps(e.right),width:ps(e.width),height:ps(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},gs=(e,t)=>(e=fs(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),ms=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,vs=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&ms(t.top-e.bottom,e,t)},ys=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&ms(t.bottom-e.top,e,t),bs=(e,t,n)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(n-o)*(n-o))},xs=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},_s=(e,t)=>{if(Vr(e)&&e.hasChildNodes()){const n=e.childNodes,r=((e,t,n)=>Math.min(Math.max(e,0),n))(t,0,n.length-1);return n[r]}return e},ws=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Ss=e=>h(e)&&e.charCodeAt(0)>=768&&ws.test(e),Cs=Vr,Ms=Jo,Ts=Ur("display","block table"),ks=Ur("float","left right"),Is=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Cs,Ms,P(ks)),As=P(Ur("white-space","pre pre-line pre-wrap")),Ds=$r,Ps=no,Ls=Oa.nodeIndex,Ns=(e,t)=>t<0&&Vr(e)&&e.hasChildNodes()?void 0:_s(e,t),Rs=e=>e?e.createRange():Oa.DOM.createRng(),Es=e=>h(e)&&/[\r\n\t ]/.test(e),Os=e=>!!e.setStart&&!!e.setEnd,Bs=e=>{const t=e.startContainer,n=e.startOffset;if(Es(e.toString())&&As(t.parentNode)&&$r(t)){const e=t.data;if(Es(e[n-1])||Es(e[n+1]))return!0}return!1},zs=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,Fs=e=>{var t;let n;const r=e.getClientRects();return n=r.length>0?fs(r[0]):fs(e.getBoundingClientRect()),!Os(e)&&Ps(e)&&zs(n)?(e=>{const t=e.ownerDocument,n=Rs(t),r=t.createTextNode(fo),o=e.parentNode;o.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);const i=fs(n.getBoundingClientRect());return o.removeChild(r),i})(e):zs(n)&&Os(e)&&null!==(t=(e=>{const t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&$r(n)&&0===r&&1===o){const t=e.cloneRange();return t.setEndAfter(n),Fs(t)}return null})(e))&&void 0!==t?t:n},Vs=(e,t)=>{const n=gs(e,t);return n.width=1,n.right=n.left+1,n},Hs=(e,t,n)=>{const r=()=>(n||(n=(e=>{const t=[],n=e=>{var n,r;0!==e.height&&(t.length>0&&(n=e,r=t[t.length-1],n.left===r.left&&n.top===r.top&&n.bottom===r.bottom&&n.right===r.right)||t.push(e))},r=(e,t)=>{const r=Rs(e.ownerDocument);if(t<e.data.length){if(Ss(e.data[t]))return;if(Ss(e.data[t-1])&&(r.setStart(e,t),r.setEnd(e,t+1),!Bs(r)))return void n(Vs(Fs(r),!1))}t>0&&(r.setStart(e,t-1),r.setEnd(e,t),Bs(r)||n(Vs(Fs(r),!1))),t<e.data.length&&(r.setStart(e,t),r.setEnd(e,t+1),Bs(r)||n(Vs(Fs(r),!0)))},o=e.container(),i=e.offset();if(Ds(o))return r(o,i),t;if(Cs(o))if(e.isAtEnd()){const e=Ns(o,i);Ds(e)&&r(e,e.data.length),Is(e)&&!Ps(e)&&n(Vs(Fs(e),!1))}else{const a=Ns(o,i);if(Ds(a)&&r(a,0),Is(a)&&e.isAtEnd())return n(Vs(Fs(a),!1)),t;const s=Ns(e.container(),e.offset()-1);Is(s)&&!Ps(s)&&(Ts(s)||Ts(a)||!Is(a))&&n(Vs(Fs(s),!1)),Is(a)&&n(Vs(Fs(a),!0))}return t})(Hs(e,t))),n);return{container:k(e),offset:k(t),toRange:()=>{const n=Rs(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:()=>r().length>0,isAtStart:()=>(Ds(e),0===t),isAtEnd:()=>Ds(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:n=>n&&e===n.container()&&t===n.offset(),getNode:n=>Ns(e,n?t-1:t)}};Hs.fromRangeStart=e=>Hs(e.startContainer,e.startOffset),Hs.fromRangeEnd=e=>Hs(e.endContainer,e.endOffset),Hs.after=e=>Hs(e.parentNode,Ls(e)+1),Hs.before=e=>Hs(e.parentNode,Ls(e)),Hs.isAbove=(e,t)=>Ot(le(t.getClientRects()),ue(e.getClientRects()),vs).getOr(!1),Hs.isBelow=(e,t)=>Ot(ue(t.getClientRects()),le(e.getClientRects()),ys).getOr(!1),Hs.isAtStart=e=>!!e&&e.isAtStart(),Hs.isAtEnd=e=>!!e&&e.isAtEnd(),Hs.isTextPosition=e=>!!e&&$r(e.container()),Hs.isElementPosition=e=>!Hs.isTextPosition(e);const Ws=(e,t)=>{$r(t)&&0===t.data.length&&e.remove(t)},Gs=(e,t,n)=>{to(n)?((e,t,n)=>{const r=B.from(n.firstChild),o=B.from(n.lastChild);t.insertNode(n),r.each(t=>Ws(e,t.previousSibling)),o.each(t=>Ws(e,t.nextSibling))})(e,t,n):((e,t,n)=>{t.insertNode(n),Ws(e,n.previousSibling),Ws(e,n.nextSibling)})(e,t,n)},Us=$r,js=Yr,Ys=Oa.nodeIndex,qs=e=>{const t=e.parentNode;return js(t)?qs(t):t},Xs=e=>e?Pe(e.childNodes,(e,t)=>(js(t)&&"BR"!==t.nodeName?e=e.concat(Xs(t)):e.push(t),e),[]):[],Zs=e=>t=>e===t,$s=e=>(Us(e)?"text()":e.nodeName.toLowerCase())+"["+(e=>{let t,n;t=Xs(qs(e)),n=Le(t,Zs(e),e),t=t.slice(0,n+1);const r=Pe(t,(e,n,r)=>(Us(n)&&Us(t[r-1])&&e++,e),0);return t=De(t,Gr([e.nodeName])),n=Le(t,Zs(e),e),n-r})(e)+"]",Ks=(e,t)=>{let n,r=[],o=t.container(),i=t.offset();if(Us(o))n=((e,t)=>{let n=e;for(;(n=n.previousSibling)&&Us(n);)t+=n.data.length;return t})(o,i);else{const e=o.childNodes;i>=e.length?(n="after",i=e.length-1):n="before",o=e[i]}r.push($s(o));let a=((e,t,n)=>{const r=[];for(let n=t.parentNode;n&&n!==e;n=n.parentNode)r.push(n);return r})(e,o);return a=De(a,P(Yr)),r=r.concat(Ae(a,e=>$s(e))),r.reverse().join("/")+","+n},Js=(e,t)=>{if(!t)return null;const n=t.split(","),r=n[0].split("/"),o=n.length>1?n[1]:"before",i=Pe(r,(e,t)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),((e,t,n)=>{let r=Xs(e);return r=De(r,(e,t)=>!Us(e)||!Us(r[t-1])),r=De(r,Gr([t])),r[n]})(e,n[1],parseInt(n[2],10))):null},e);if(!i)return null;if(!Us(i)&&i.parentNode){let e;return e="after"===o?Ys(i)+1:Ys(i),Hs(i.parentNode,e)}return((e,t)=>{let n=e,r=0;for(;Us(n);){const o=n.data.length;if(t>=r&&t<=r+o){e=n,t-=r;break}if(!Us(n.nextSibling)){e=n,t=o;break}r+=o,n=n.nextSibling}return Us(e)&&t>e.data.length&&(t=e.data.length),Hs(e,t)})(i,parseInt(o,10))},Qs=io,el=(e,t,n,r,o)=>{const i=o?r.startContainer:r.endContainer;let a=o?r.startOffset:r.endOffset;const s=[],l=e.getRoot();if($r(i))s.push(n?((e,t,n)=>{let r=e(t.data.slice(0,n)).length;for(let n=t.previousSibling;n&&$r(n);n=n.previousSibling)r+=e(n.data).length;return r})(t,i,a):a);else{let t=0;const r=i.childNodes;a>=r.length&&r.length&&(t=1,a=Math.max(0,r.length-1)),s.push(e.nodeIndex(r[a],n)+t)}for(let t=i;t&&t!==l;t=t.parentNode)s.push(e.nodeIndex(t,n));return s},tl=(e,t,n)=>{let r=0;return Nt.each(e.select(t),e=>"all"===e.getAttribute("data-mce-bogus")?void 0:e!==n&&void r++),r},nl=(e,t)=>{let n=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(Vr(n)&&"TR"===n.nodeName){const o=n.childNodes;n=o[Math.min(t?r:r-1,o.length-1)],n&&(r=t?0:n.childNodes.length,t?e.setStart(n,r):e.setEnd(n,r))}},rl=e=>(nl(e,!0),nl(e,!1),e),ol=(e,t)=>{if(Vr(e)&&(e=_s(e,t),Qs(e)))return e;if(Oo(e)){$r(e)&&Ro(e)&&(e=e.parentNode);let t=e.previousSibling;if(Qs(t))return t;if(t=e.nextSibling,Qs(t))return t}},il=(e,t,n)=>{const r=n.getNode(),o=n.getRng();if("IMG"===r.nodeName||Qs(r)){const e=r.nodeName;return{name:e,index:tl(n.dom,e,r)}}const i=(e=>ol(e.startContainer,e.startOffset)||ol(e.endContainer,e.endOffset))(o);if(i){const e=i.tagName;return{name:e,index:tl(n.dom,e,i)}}return((e,t,n,r)=>{const o=t.dom,i=el(o,e,n,r,!0),a=t.isForward(),s=Go(r)?{isFakeCaret:!0}:{};return t.isCollapsed()?{start:i,forward:a,...s}:{start:i,end:el(o,e,n,r,!1),forward:a,...s}})(e,n,t,o)},al=(e,t,n)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},sl=(e,t)=>{const n=e.dom;let r=e.getRng();const o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),s=a.nodeName,l=e.isForward();if("IMG"===s)return{name:s,index:tl(n,s,a)};const u=rl(r.cloneRange());if(!i){u.collapse(!1);const e=al(n,o+"_end",t);Gs(n,u,e)}r=rl(r),r.collapse(!0);const c=al(n,o+"_start",t);return Gs(n,r,c),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},ll=D(il,I,!0),ul=e=>{const t=t=>t(e),n=k(e),r=()=>o,o={tag:!0,inner:e,fold:(t,n)=>n(e),isValue:O,isError:E,map:t=>dl.value(t(e)),mapError:r,bind:t,exists:t,forall:t,getOr:n,or:r,getOrThunk:n,orThunk:r,getOrDie:n,each:t=>{t(e)},toOptional:()=>B.some(e)};return o},cl=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(t,n)=>t(e),isValue:E,isError:O,map:t,mapError:t=>dl.error(t(e)),bind:t,exists:E,forall:O,getOr:I,or:I,getOrThunk:N,orThunk:N,getOrDie:L(String(e)),each:C,toOptional:B.none};return n},dl={value:ul,error:cl,fromOption:(e,t)=>e.fold(()=>cl(t),ul)},hl=e=>{if(!g(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return j(e,(r,o)=>{const i=he(r);if(1!==i.length)throw new Error("one and only one name per case");const a=i[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!g(s))throw new Error("case arguments must be an array");t.push(a),n[a]=(...n)=>{const r=n.length;if(r!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[o].apply(null,n)},match:e=>{const r=he(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!ne(t,e=>W(r,e)))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:a,params:n})}}}}),n};hl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const pl=e=>"inline-command"===e.type||"inline-format"===e.type,fl=e=>"block-command"===e.type||"block-format"===e.type,gl=e=>{const t=t=>dl.error({message:t,pattern:e}),n=(n,r,o)=>{if(void 0!==e.format){let o;if(g(e.format)){if(!ne(e.format,h))return t(n+" pattern has non-string items in the `format` array");o=e.format}else{if(!h(e.format))return t(n+" pattern has non-string `format` parameter");o=[e.format]}return dl.value(r(o))}return void 0!==e.cmd?h(e.cmd)?dl.value(o(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!p(e))return t("Raw pattern is not an object");if(!h(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!h(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,o=e.end;return 0===o.length&&(o=r,r=""),n("Inline",e=>({type:"inline-format",start:r,end:o,format:e}),(e,t)=>({type:"inline-command",start:r,end:o,cmd:e,value:t}))}return void 0!==e.replacement?h(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):dl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",t=>({type:"block-format",start:e.start,format:t[0]}),(t,n)=>({type:"block-command",start:e.start,cmd:t,value:n}))},ml=e=>X(e,fl),vl=e=>X(e,pl),yl=e=>{const t=(e=>{const t=[],n=[];return j(e,e=>{e.fold(e=>{t.push(e)},e=>{n.push(e)})}),{errors:t,values:n}})(U(e,gl));return j(t.errors,e=>console.error(e.message,e.pattern)),t.values},bl=wt().deviceType,xl=bl.isTouch(),_l=Oa.DOM,wl=e=>d(e,RegExp),Sl=e=>t=>t.options.get(e),Cl=e=>h(e)||p(e),Ml=(e,t="")=>n=>{const r=h(n);if(r){if(-1!==n.indexOf("=")){const o=(e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return $(t,(e,t)=>{const n=t.split("="),r=n[0],o=n.length>1?n[1]:r;return e[je(r)]=je(o),e},{})})(n);return{value:we(o,e.id).getOr(t),valid:r}}return{value:n,valid:r}}return{valid:!1,message:"Must be a string."}},Tl=Sl("iframe_attrs"),kl=Sl("doctype"),Il=Sl("document_base_url"),Al=Sl("body_id"),Dl=Sl("body_class"),Pl=Sl("content_security_policy"),Ll=Sl("br_in_pre"),Nl=Sl("forced_root_block"),Rl=Sl("forced_root_block_attrs"),El=Sl("newline_behavior"),Ol=Sl("br_newline_selector"),Bl=Sl("no_newline_selector"),zl=Sl("keep_styles"),Fl=Sl("end_container_on_empty_block"),Vl=Sl("automatic_uploads"),Hl=Sl("images_reuse_filename"),Wl=Sl("images_replace_blob_uris"),Gl=Sl("icons"),Ul=Sl("icons_url"),jl=Sl("images_upload_url"),Yl=Sl("images_upload_base_path"),ql=Sl("images_upload_credentials"),Xl=Sl("images_upload_handler"),Zl=Sl("content_css_cors"),$l=Sl("referrer_policy"),Kl=Sl("language"),Jl=Sl("language_url"),Ql=Sl("indent_use_margin"),eu=Sl("indentation"),tu=Sl("content_css"),nu=Sl("content_style"),ru=Sl("font_css"),ou=Sl("directionality"),iu=Sl("inline_boundaries_selector"),au=Sl("object_resizing"),su=Sl("resize_img_proportional"),lu=Sl("placeholder"),uu=Sl("event_root"),cu=Sl("service_message"),du=Sl("theme"),hu=Sl("theme_url"),pu=Sl("model"),fu=Sl("model_url"),gu=Sl("inline_boundaries"),mu=Sl("formats"),vu=Sl("preview_styles"),yu=Sl("format_empty_lines"),bu=Sl("format_noneditable_selector"),xu=Sl("custom_ui_selector"),_u=Sl("inline"),wu=Sl("hidden_input"),Su=Sl("submit_patch"),Cu=Sl("add_form_submit_trigger"),Mu=Sl("add_unload_trigger"),Tu=Sl("custom_undo_redo_levels"),ku=Sl("disable_nodechange"),Iu=Sl("readonly"),Au=Sl("editable_root"),Du=Sl("content_css_cors"),Pu=Sl("plugins"),Lu=Sl("external_plugins"),Nu=Sl("block_unsupported_drop"),Ru=Sl("visual"),Eu=Sl("visual_table_class"),Ou=Sl("visual_anchor_class"),Bu=Sl("iframe_aria_text"),zu=Sl("setup"),Fu=Sl("init_instance_callback"),Vu=Sl("urlconverter_callback"),Hu=Sl("auto_focus"),Wu=Sl("browser_spellcheck"),Gu=Sl("protect"),Uu=Sl("paste_block_drop"),ju=Sl("paste_data_images"),Yu=Sl("paste_preprocess"),qu=Sl("paste_postprocess"),Xu=Sl("newdocument_content"),Zu=Sl("paste_webkit_styles"),$u=Sl("paste_remove_styles_if_webkit"),Ku=Sl("paste_merge_formats"),Ju=Sl("smart_paste"),Qu=Sl("paste_as_text"),ec=Sl("paste_tab_spaces"),tc=Sl("allow_html_data_urls"),nc=Sl("text_patterns"),rc=Sl("text_patterns_lookup"),oc=Sl("noneditable_class"),ic=Sl("editable_class"),ac=Sl("noneditable_regexp"),sc=Sl("preserve_cdata"),lc=Sl("highlight_on_focus"),uc=Sl("xss_sanitization"),cc=Sl("init_content_sync"),dc=e=>Nt.explode(e.options.get("images_file_types")),hc=Sl("table_tab_navigation"),pc=Sl("details_initial_state"),fc=Sl("details_serialized_state"),gc=Sl("force_hex_color"),mc=Sl("sandbox_iframes"),vc=Vr,yc=$r,bc=e=>{const t=e.parentNode;t&&t.removeChild(e)},xc=e=>{const t=Po(e);return{count:e.length-t.length,text:t}},_c=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Ao));)e.deleteData(t,1)},wc=(e,t)=>(Sc(e),t),Sc=e=>{vc(e)&&Oo(e)&&(Bo(e)?e.removeAttribute("data-mce-caret"):bc(e)),yc(e)&&(_c(e),0===e.data.length&&bc(e))},Cc=io,Mc=lo,Tc=ao,kc=(e,t,n)=>{const r=gs(t.getBoundingClientRect(),n);let o,i;if("BODY"===e.tagName){const t=e.ownerDocument.documentElement;o=e.scrollLeft||t.scrollLeft,i=e.scrollTop||t.scrollTop}else{const t=e.getBoundingClientRect();o=e.scrollLeft-t.left,i=e.scrollTop-t.top}r.left+=o,r.right+=o,r.top+=i,r.bottom+=i,r.width=1;let a=t.offsetWidth-t.clientWidth;return a>0&&(n&&(a*=-1),r.left+=a,r.right+=a),r},Ic=()=>At.browser.isFirefox(),Ac=e=>Cc(e)||Mc(e),Dc=e=>(Ac(e)||qr(e)&&Ic())&&In(yn(e)).exists(tr),Pc=oo,Lc=io,Nc=lo,Rc=Ur("display","block table table-cell table-caption list-item"),Ec=Oo,Oc=Ro,Bc=Vr,zc=$r,Fc=Jo,Vc=e=>e>0,Hc=e=>e<0,Wc=(e,t)=>{let n;for(;n=e(t);)if(!Oc(n))return n;return null},Gc=(e,t,n,r,o)=>{const i=new Br(e,r),a=Lc(e)||Oc(e);let s;if(Hc(t)){if(a&&(s=Wc(i.prev.bind(i),!0),n(s)))return s;for(;s=Wc(i.prev.bind(i),o);)if(n(s))return s}if(Vc(t)){if(a&&(s=Wc(i.next.bind(i),!0),n(s)))return s;for(;s=Wc(i.next.bind(i),o);)if(n(s))return s}return null},Uc=(e,t)=>{for(;e&&e!==t;){if(Rc(e))return e;e=e.parentNode}return null},jc=(e,t,n)=>Uc(e.container(),n)===Uc(t.container(),n),Yc=(e,t)=>{if(!t)return B.none();const n=t.container(),r=t.offset();return Bc(n)?B.from(n.childNodes[r+e]):B.none()},qc=(e,t)=>{var n;const r=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},Xc=(e,t,n)=>Uc(t,e)===Uc(n,e),Zc=(e,t,n)=>{const r=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let e=o[r];if(e&&Ec(e)&&(e=e[r]),Lc(e)||Nc(e)){if(Xc(t,e,o))return e;break}if(Fc(e))break;o=o.parentNode}return null},$c=D(qc,!0),Kc=D(qc,!1),Jc=(e,t,n)=>{let r;const o=D(Zc,!0,t),i=D(Zc,!1,t),a=n.startContainer,s=n.startOffset;if(Ro(a)){const e=zc(a)?a.parentNode:a,t=e.getAttribute("data-mce-caret");if("before"===t&&(r=e.nextSibling,Dc(r)))return $c(r);if("after"===t&&(r=e.previousSibling,Dc(r)))return Kc(r)}if(!n.collapsed)return n;if($r(a)){if(Ec(a)){if(1===e){if(r=i(a),r)return $c(r);if(r=o(a),r)return Kc(r)}if(-1===e){if(r=o(a),r)return Kc(r);if(r=i(a),r)return $c(r)}return n}if(Ho(a)&&s>=a.data.length-1)return 1===e&&(r=i(a),r)?$c(r):n;if(Vo(a)&&s<=1)return-1===e&&(r=o(a),r)?Kc(r):n;if(s===a.data.length)return r=i(a),r?$c(r):n;if(0===s)return r=o(a),r?Kc(r):n}return n},Qc=(e,t)=>Yc(e?0:-1,t).filter(Lc),ed=(e,t,n)=>{const r=Jc(e,t,n);return-1===e?Hs.fromRangeStart(r):Hs.fromRangeEnd(r)},td=e=>B.from(e.getNode()).map(yn),nd=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},rd=(e,t)=>{const n=jc(e,t);return!(n||!no(e.getNode()))||n};var od;!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(od||(od={}));const id=io,ad=$r,sd=Vr,ld=no,ud=Jo,cd=e=>Zo(e)||(e=>!!Qo(e)&&!$(ce(e.getElementsByTagName("*")),(e,t)=>e||Uo(t),!1))(e),dd=ei,hd=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,pd=(e,t)=>{if(Vc(e)){if(ud(t.previousSibling)&&!ad(t.previousSibling))return Hs.before(t);if(ad(t))return Hs(t,0)}if(Hc(e)){if(ud(t.nextSibling)&&!ad(t.nextSibling))return Hs.after(t);if(ad(t))return Hs(t,t.data.length)}return Hc(e)?ld(t)?Hs.before(t):Hs.after(t):Hs.before(t)},fd=(e,t,n)=>{let r,o,i,a;if(!sd(n)||!t)return null;if(t.isEqual(Hs.after(n))&&n.lastChild){if(a=Hs.after(n.lastChild),Hc(e)&&ud(n.lastChild)&&sd(n.lastChild))return ld(n.lastChild)?Hs.before(n.lastChild):a}else a=t;const s=a.container();let l=a.offset();if(ad(s)){if(Hc(e)&&l>0)return Hs(s,--l);if(Vc(e)&&l<s.length)return Hs(s,++l);r=s}else{if(Hc(e)&&l>0&&(o=hd(s,l-1),ud(o)))return!cd(o)&&(i=Gc(o,e,dd,o),i)?ad(i)?Hs(i,i.data.length):Hs.after(i):ad(o)?Hs(o,o.data.length):Hs.before(o);if(Vc(e)&&l<s.childNodes.length&&(o=hd(s,l),ud(o)))return ld(o)?((e,t)=>{const n=t.nextSibling;return n&&ud(n)?ad(n)?Hs(n,0):Hs.before(n):fd(od.Forwards,Hs.after(t),e)})(n,o):!cd(o)&&(i=Gc(o,e,dd,o),i)?ad(i)?Hs(i,0):Hs.before(i):ad(o)?Hs(o,0):Hs.after(o);r=o||a.getNode()}if(r&&(Vc(e)&&a.isAtEnd()||Hc(e)&&a.isAtStart())&&(r=Gc(r,e,O,n,!0),dd(r,n)))return pd(e,r);o=r?Gc(r,e,dd,n):r;const u=Ne(X(((e,t)=>{const n=[];let r=e;for(;r&&r!==t;)n.push(r),r=r.parentNode;return n})(s,n),id));return!u||o&&u.contains(o)?o?pd(e,o):null:(a=Vc(e)?Hs.after(u):Hs.before(u),a)},gd=e=>({next:t=>fd(od.Forwards,t,e),prev:t=>fd(od.Backwards,t,e)}),md=e=>Hs.isTextPosition(e)?0===e.offset():Jo(e.getNode()),vd=e=>{if(Hs.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Jo(e.getNode(!0))},yd=(e,t)=>!Hs.isTextPosition(e)&&!Hs.isTextPosition(t)&&e.getNode()===t.getNode(!0),bd=(e,t,n)=>{const r=gd(t);return B.from(e?r.next(n):r.prev(n))},xd=(e,t,n)=>bd(e,t,n).bind(r=>jc(n,r,t)&&((e,t,n)=>{return e?!yd(t,n)&&(r=t,!(!Hs.isTextPosition(r)&&no(r.getNode())))&&vd(t)&&md(n):!yd(n,t)&&md(t)&&vd(n);var r})(e,n,r)?bd(e,t,r):B.some(r)),_d=(e,t,n,r)=>xd(e,t,n).bind(n=>r(n)?_d(e,t,n,r):B.some(n)),wd=(e,t)=>{const n=e?t.firstChild:t.lastChild;return $r(n)?B.some(Hs(n,e?0:n.data.length)):n?Jo(n)?B.some(e?Hs.before(n):no(r=n)?Hs.before(r):Hs.after(r)):((e,t,n)=>{const r=e?Hs.before(n):Hs.after(n);return bd(e,t,r)})(e,t,n):B.none();var r},Sd=D(bd,!0),Cd=D(bd,!1),Md=D(wd,!0),Td=D(wd,!1),kd="_mce_caret",Id=e=>Vr(e)&&e.id===kd,Ad=(e,t)=>{let n=t;for(;n&&n!==e;){if(Id(n))return n;n=n.parentNode}return null},Dd=e=>Se(e,"name"),Pd=e=>Nt.isArray(e.start),Ld=e=>!(!Dd(e)&&v(e.forward))||e.forward,Nd=(e,t)=>(Vr(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),Rd=(e,t)=>Td(e).fold(E,e=>(t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0)),Ed=(e,t,n)=>!(!(e=>!e.hasChildNodes())(t)||!Ad(e,t)||(((e,t)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Ao);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)})(t,n),0)),Od=(e,t,n,r)=>{const o=n[t?"start":"end"],i=e.getRoot();if(o){let e=i,n=o[0];for(let t=o.length-1;e&&t>=1;t--){const n=e.childNodes;if(Ed(i,e,r))return!0;if(o[t]>n.length-1)return!!Ed(i,e,r)||Rd(e,r);e=n[o[t]]}$r(e)&&(n=Math.min(o[0],e.data.length)),Vr(e)&&(n=Math.min(o[0],e.childNodes.length)),t?r.setStart(e,n):r.setEnd(e,n)}return!0},Bd=e=>$r(e)&&e.data.length>0,zd=(e,t,n)=>{const r=e.get(n.id+"_"+t),o=null==r?void 0:r.parentNode,i=n.keep;if(r&&o){let a,s;if("start"===t?i?r.hasChildNodes()?(a=r.firstChild,s=1):Bd(r.nextSibling)?(a=r.nextSibling,s=0):Bd(r.previousSibling)?(a=r.previousSibling,s=r.previousSibling.data.length):(a=o,s=e.nodeIndex(r)+1):(a=o,s=e.nodeIndex(r)):i?r.hasChildNodes()?(a=r.firstChild,s=1):Bd(r.previousSibling)?(a=r.previousSibling,s=r.previousSibling.data.length):(a=o,s=e.nodeIndex(r)):(a=o,s=e.nodeIndex(r)),!i){const o=r.previousSibling,i=r.nextSibling;let l;for(Nt.each(Nt.grep(r.childNodes),e=>{$r(e)&&(e.data=e.data.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);if($r(i)&&$r(o)&&!At.browser.isOpera()){const t=o.data.length;o.appendData(i.data),e.remove(i),a=o,s=t}}return B.some(Hs(a,s))}return B.none()},Fd=(e,t,n)=>((e,t,n=!1)=>2===t?il(Po,n,e):3===t?(e=>{const t=e.getRng();return{start:Ks(e.dom.getRoot(),Hs.fromRangeStart(t)),end:Ks(e.dom.getRoot(),Hs.fromRangeEnd(t)),forward:e.isForward()}})(e):t?(e=>({rng:e.getRng(),forward:e.isForward()}))(e):sl(e,!1))(e,t,n),Vd=(e,t)=>{((e,t)=>{const n=e.dom;if(t){if(Pd(t))return((e,t)=>{const n=e.createRng();return Od(e,!0,t,n)&&Od(e,!1,t,n)?B.some({range:n,forward:Ld(t)}):B.none()})(n,t);if((e=>h(e.start))(t))return((e,t)=>{const n=B.from(Js(e.getRoot(),t.start)),r=B.from(Js(e.getRoot(),t.end));return Ot(n,r,(n,r)=>{const o=e.createRng();return o.setStart(n.container(),n.offset()),o.setEnd(r.container(),r.offset()),{range:o,forward:Ld(t)}})})(n,t);if((e=>Se(e,"id"))(t))return((e,t)=>{const n=zd(e,"start",t),r=zd(e,"end",t);return Ot(n,r.or(n),(n,r)=>{const o=e.createRng();return o.setStart(Nd(e,n.container()),n.offset()),o.setEnd(Nd(e,r.container()),r.offset()),{range:o,forward:Ld(t)}})})(n,t);if(Dd(t))return((e,t)=>B.from(e.select(t.name)[t.index]).map(t=>{const n=e.createRng();return n.selectNode(t),{range:n,forward:!0}}))(n,t);if((e=>Se(e,"rng"))(t))return B.some({range:t.rng,forward:Ld(t)})}return B.none()})(e,t).each(({range:t,forward:n})=>{e.setRng(t,n)})},Hd=e=>Vr(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),Wd=(fo,e=>"\xa0"===e);const Gd=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Ud=e=>!Gd(e)&&!Wd(e)&&!go(e),jd=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Yd=(e,t)=>{const n=Er(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(e=>X((e=>te(e,e=>{const t=xs(e);return t?[yn(t)]:[]}))(e),Mo))(e)},qd=e=>Yd(jd(e.selection.getSel()),yn(e.getBody())),Xd=(e,t)=>Jn(e,"table",t),Zd=e=>On(e).fold(k([e]),t=>[e].concat(Zd(t))),$d=e=>Bn(e).fold(k([e]),t=>"br"===Ht(t)?Dn(t).map(t=>[e].concat($d(t))).getOr([]):[e].concat($d(t))),Kd=(e,t)=>Ot((e=>{const t=e.startContainer,n=e.startOffset;return $r(t)?0===n?B.some(yn(t)):B.none():B.from(t.childNodes[n]).map(yn)})(t),(e=>{const t=e.endContainer,n=e.endOffset;return $r(t)?n===t.data.length?B.some(yn(t)):B.none():B.from(t.childNodes[n-1]).map(yn)})(t),(t,n)=>{const r=J(Zd(e),D(wn,t)),o=J($d(e),D(wn,n));return r.isSome()&&o.isSome()}).getOr(!1),Jd=(e,t,n,r)=>{const o=n,i=new Br(n,o),a=be(e.schema.getMoveCaretBeforeOnEnterElements(),(e,t)=>!W(["td","th","table"],t.toLowerCase()));let s=n;do{if($r(s)&&0!==Nt.trim(s.data).length)return void(r?t.setStart(s,0):t.setEnd(s,s.data.length));if(a[s.nodeName])return void(r?t.setStartBefore(s):"BR"===s.nodeName?t.setEndBefore(s):t.setEndAfter(s))}while(s=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Qd=e=>{const t=e.selection.getSel();return x(t)&&t.rangeCount>0},eh=(e,t)=>{const n=qd(e);n.length>0?j(n,n=>{const r=n.dom,o=e.dom.createRng();o.setStartBefore(r),o.setEndAfter(r),t(o,!0)}):t(e.selection.getRng(),!1)},th=(e,t,n)=>{const r=sl(e,t);n(r),e.moveToBookmark(r)},nh=e=>w(null==e?void 0:e.nodeType),rh=e=>Vr(e)&&!Hd(e)&&!Id(e)&&!Yr(e),oh=(e,t,n)=>{const{selection:r,dom:o}=e,i=r.getNode(),a=io(i);th(r,!0,()=>{t()}),a&&io(i)&&o.isChildOf(i,e.getBody())?e.selection.select(i):n(r.getStart())&&ih(o,r)},ih=(e,t)=>{var n,r;const o=t.getRng(),{startContainer:i,startOffset:a}=o;if(!((e,t)=>{if(rh(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),r=parseInt(n,10);return!isNaN(r)&&r>0}return!1})(e,t.getNode())&&Vr(i)){const s=i.childNodes,l=e.getRoot();let u;if(a<s.length){const t=s[a];u=new Br(t,null!==(n=e.getParent(t,e.isBlock))&&void 0!==n?n:l)}else{const t=s[s.length-1];u=new Br(t,null!==(r=e.getParent(t,e.isBlock))&&void 0!==r?r:l),u.next(!0)}for(let n=u.current();n;n=u.next()){if("false"===e.getContentEditable(n))return;if($r(n)&&!uh(n))return o.setStart(n,0),void t.setRng(o)}}},ah=(e,t,n)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(Vr(e)||!uh(e))return e}},sh=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Ti(e,t),lh=(e,t,n)=>e.schema.isValidChild(t,n),uh=(e,t=!1)=>{if(x(e)&&$r(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return ni(n)}return!1},ch=(e,t)=>{const n=e.dom;return rh(t)&&"false"===n.getContentEditable(t)&&((e,t)=>{const n="[data-mce-cef-wrappable]",r=bu(e),o=Ze(r)?n:`${n},${r}`;return xn(yn(t),o)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},dh=(e,t)=>_(e)?e(t):(x(t)&&(e=e.replace(/%(\w+)/g,(e,n)=>t[n]||e)),e),hh=(e,t)=>(t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),ph=(e,t)=>{if(b(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=ma(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},fh=(e,t,n)=>{const r=e.getStyle(t,n);return ph(r,n)},gh=(e,t)=>{let n;return e.getParent(t,t=>!!Vr(t)&&(n=e.getStyle(t,"text-decoration"),!!n&&"none"!==n)),n},mh=(e,t,n)=>e.getParents(t,n,e.getRoot()),vh=(e,t,n)=>{const r=e.formatter.get(t);return x(r)&&G(r,n)},yh=e=>Ce(e,"block"),bh=e=>Ce(e,"selector"),xh=e=>Ce(e,"inline"),_h=e=>bh(e)&&!1!==e.expand&&!xh(e),wh=e=>(e=>{const t=[];let n=e;for(;n;){if($r(n)&&n.data!==Ao||n.childNodes.length>1)return[];Vr(n)&&t.push(n),n=n.firstChild}return t})(e).length>0,Sh=e=>Id(e.dom)&&wh(e.dom),Ch=Hd,Mh=mh,Th=uh,kh=sh,Ih=(e,t)=>{let n=t;for(;n;){if(Vr(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Ah=(e,t,n,r)=>{const o=t.data;if(e){for(let e=n;e>0;e--)if(r(o.charAt(e-1)))return e}else for(let e=n;e<o.length;e++)if(r(o.charAt(e)))return e;return-1},Dh=(e,t,n)=>Ah(e,t,n,e=>Wd(e)||Gd(e)),Ph=(e,t,n)=>Ah(e,t,n,Ud),Lh=(e,t,n,r,o,i)=>{let a;const s=e.getParent(n,e.isBlock)||t,l=(t,n,r)=>{const i=hs(e),l=o?i.backwards:i.forwards;return B.from(l(t,n,(e,t)=>Ch(e.parentNode)?-1:(a=e,r(o,e,t)),s))};return l(n,r,Dh).bind(e=>i?l(e.container,e.offset+(o?-1:0),Ph):B.some(e)).orThunk(()=>a?B.some({container:a,offset:o?0:a.length}):B.none())},Nh=(e,t,n,r,o)=>{const i=r[o];$r(r)&&Ze(r.data)&&i&&(r=i);const a=Mh(e,r);for(let r=0;r<a.length;r++)for(let o=0;o<t.length;o++){const i=t[o];if((!x(i.collapsed)||i.collapsed===n.collapsed)&&bh(i)&&e.is(a[r],i.selector))return a[r]}return r},Rh=(e,t,n,r)=>{var o;let i=n;const a=e.getRoot(),s=t[0];if(yh(s)&&(i=s.wrapper?null:e.getParent(n,s.block,a)),!i){const t=null!==(o=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==o?o:a;i=e.getParent($r(n)?n.parentNode:n,t=>t!==a&&kh(e.schema,t),t)}if(i&&yh(s)&&s.wrapper&&(i=Mh(e,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i&&i[r]&&!e.isBlock(i[r])&&(i=i[r],!hh(i,"br")););return i||n},Eh=(e,t,n,r)=>{const o=n.parentNode;return!x(n[r])&&(!(o!==t&&!b(o)&&!e.isBlock(o))||Eh(e,t,o,r))},Oh=(e,t,n,r,o)=>{let i=n;const a=o?"previousSibling":"nextSibling",s=e.getRoot();if($r(n)&&!Th(n)&&(o?r>0:r<n.data.length))return n;for(;i;){if(!t[0].block_expand&&e.isBlock(i))return i;for(let t=i[a];t;t=t[a]){const n=$r(t)&&!Eh(e,s,t,a);if(!Ch(t)&&(!no(l=t)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Th(t,n))return i}if(i===s||i.parentNode===s){n=i;break}i=i.parentNode}var l;return n},Bh=e=>Ch(e.parentNode)||Ch(e),zh=(e,t,n,r=!1)=>{let{startContainer:o,startOffset:i,endContainer:a,endOffset:s}=t;const l=n[0];return Vr(o)&&o.hasChildNodes()&&(o=_s(o,i),$r(o)&&(i=0)),Vr(a)&&a.hasChildNodes()&&(a=_s(a,t.collapsed?s:s-1),$r(a)&&(s=a.data.length)),o=Ih(e,o),a=Ih(e,a),Bh(o)&&(o=Ch(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,$r(o)&&(i=t.collapsed?o.length:0)),Bh(a)&&(a=Ch(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,$r(a)&&(s=t.collapsed?0:a.length)),t.collapsed&&(Lh(e,e.getRoot(),o,i,!0,r).each(({container:e,offset:t})=>{o=e,i=t}),Lh(e,e.getRoot(),a,s,!1,r).each(({container:e,offset:t})=>{a=e,s=t})),(xh(l)||l.block_expand)&&(xh(l)&&$r(o)&&0!==i||(o=Oh(e,n,o,i,!0)),xh(l)&&$r(a)&&s!==a.data.length||(a=Oh(e,n,a,s,!1))),_h(l)&&(o=Nh(e,n,t,o,"previousSibling"),a=Nh(e,n,t,a,"nextSibling")),(yh(l)||bh(l))&&(o=Rh(e,n,o,"previousSibling"),a=Rh(e,n,a,"nextSibling"),yh(l)&&(e.isBlock(o)||(o=Oh(e,n,o,i,!0)),e.isBlock(a)||(a=Oh(e,n,a,s,!1)))),Vr(o)&&o.parentNode&&(i=e.nodeIndex(o),o=o.parentNode),Vr(a)&&a.parentNode&&(s=e.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:i,endContainer:a,endOffset:s}},Fh=(e,t,n)=>{var r;const o=t.startOffset,i=_s(t.startContainer,o),a=t.endOffset,s=_s(t.endContainer,a-1),l=e=>{const t=e[0];$r(t)&&t===i&&o>=t.data.length&&e.splice(0,1);const n=e[e.length-1];return 0===a&&e.length>0&&n===s&&$r(n)&&e.splice(e.length-1,1),e},u=(e,t,n)=>{const r=[];for(;e&&e!==n;e=e[t])r.push(e);return r},c=(t,n)=>e.getParent(t,e=>e.parentNode===n,n),d=(e,t,r)=>{const o=r?"nextSibling":"previousSibling";for(let i=e,a=i.parentNode;i&&i!==t;i=a){a=i.parentNode;const t=u(i===e?i:i[o],o);t.length&&(r||t.reverse(),n(l(t)))}};if(i===s)return n(l([i]));const h=null!==(r=e.findCommonAncestor(i,s))&&void 0!==r?r:e.getRoot();if(e.isChildOf(i,s))return d(i,h,!0);if(e.isChildOf(s,i))return d(s,h);const p=c(i,h)||i,f=c(s,h)||s;d(i,p,!0);const g=u(p===i?p:p.nextSibling,"nextSibling",f===s?f.nextSibling:f);g.length&&n(l(g)),d(s,f)},Vh=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Hh=(e,t,n,r,o,i)=>{const{uid:a=t,...s}=n;cn(e,Za()),Kt(e,`${Ka()}`,a),Kt(e,`${$a()}`,r);const{attributes:l={},classes:u=[]}=o(a,s);if(Jt(e,l),((e,t)=>{j(t,t=>{cn(e,t)})})(e,u),i){u.length>0&&Kt(e,`${Qa()}`,u.join(","));const t=he(l);t.length>0&&Kt(e,`${es()}`,t.join(","))}},Wh=(e,t,n,r,o)=>{const i=mn("span",e);return Hh(i,t,n,r,o,!1),i},Gh=e=>{const t=(()=>{const e={};return{register:(t,n)=>{e[t]={name:t,settings:n}},lookup:t=>we(e,t).map(e=>e.settings),getNames:()=>he(e)}})();((e,t)=>{const n=$a(),r=e=>B.from(e.attr(n)).bind(t.lookup),o=e=>{var t,n;e.attr(Ka(),null),e.attr($a(),null),e.attr(Ja(),null);const r=B.from(e.attr(es())).map(e=>e.split(",")).getOr([]),o=B.from(e.attr(Qa())).map(e=>e.split(",")).getOr([]);j(r,t=>e.attr(t,null));const i=null!==(n=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==n?n:[],a=oe(i,[Za()].concat(o));e.attr("class",a.length>0?a.join(" "):null),e.attr(Qa(),null),e.attr(es(),null)};e.serializer.addTempAttr(Ja()),e.serializer.addAttributeFilter(n,e=>{for(const t of e)r(t).each(e=>{!1===e.persistent&&("span"===t.name?t.unwrap():o(t))})})})(e,t);const n=((e,t)=>{const n=Fa({}),r=()=>({listeners:[],previous:Ya()}),o=(e,t)=>{i(e,e=>(t(e),e))},i=(e,t)=>{const o=n.get(),i=t(we(o,e).getOrThunk(r));o[e]=i,n.set(o)},a=(t,n)=>{j(os(e,t),e=>{n?Kt(e,Ja(),"true"):nn(e,Ja())})},s=Xa(()=>{const n=ae(t.getNames());j(n,t=>{i(t,n=>{const r=n.previous.get();return ns(e,B.some(t)).fold(()=>{r.each(e=>{(e=>{o(e,t=>{j(t.listeners,t=>t(!1,e))})})(t),n.previous.clear(),a(e,!1)})},({uid:e,name:t,elements:i})=>{Rt(r,e)||(r.each(e=>a(e,!1)),((e,t,n)=>{o(e,r=>{j(r.listeners,r=>r(!0,e,{uid:t,nodes:U(n,e=>e.dom)}))})})(t,e,i),n.previous.set(e),a(e,!0))}),{previous:n.previous,listeners:n.listeners}})})},30);return e.on("remove",()=>{s.cancel()}),e.on("NodeChange",()=>{s.throttle()}),{addListener:(e,t)=>{i(e,e=>({previous:e.previous,listeners:e.listeners.concat([t])}))}}})(e,t),r=Zt("span"),o=e=>{j(e,e=>{r(e)?xr(e):(e=>{hn(e,Za()),nn(e,`${Ka()}`),nn(e,`${$a()}`),nn(e,`${Ja()}`);const t=en(e,`${es()}`).map(e=>e.split(",")).getOr([]),n=en(e,`${Qa()}`).map(e=>e.split(",")).getOr([]);var r;j(t,t=>nn(e,t)),r=e,j(n,e=>{hn(r,e)}),nn(e,`${Qa()}`),nn(e,`${es()}`)})(e)})};return{register:(e,n)=>{t.register(e,n)},annotate:(n,r)=>{t.lookup(n).each(t=>{((e,t,n,r)=>{e.undoManager.transact(()=>{const o=e.selection,i=o.getRng(),a=qd(e).length>0,s=ss("mce-annotation");if(i.collapsed&&!a&&((e,t)=>{const n=zh(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)})(e,i),o.getRng().collapsed&&!a){const i=Wh(e.getDoc(),s,r,t,n.decorate);Sr(i,fo),o.getRng().insertNode(i.dom),o.select(i.dom)}else th(o,!1,()=>{eh(e,o=>{((e,t,n,r,o,i)=>{const a=[],s=Wh(e.getDoc(),n,i,r,o),l=Ya(),u=()=>{l.clear()},c=e=>{j(e,d)},d=t=>{switch(((e,t,n,r)=>kn(t).fold(()=>"skipping",o=>"br"===r||(e=>Yt(e)&&vo(e)===Ao)(t)?"valid":(e=>jt(e)&&pn(e,Za()))(t)?"existing":Id(t.dom)?"caret":G(Vh,e=>xn(t,e))?"valid-block":lh(e,n,r)&&lh(e,Ht(o),n)?"valid":"invalid-child"))(e,t,"span",Ht(t))){case"invalid-child":{u();const e=Rn(t);c(e),u();break}case"valid-block":u(),Hh(t,n,i,r,o,!0);break;case"valid":{const e=l.get().getOrThunk(()=>{const e=us(s);return a.push(e),l.set(e),e});mr(t,e);break}}};Fh(e.dom,t,e=>{u(),(e=>{const t=U(e,yn);c(t)})(e)})})(e,o,s,t,n.decorate,r)})})})})(e,n,t,r)})},annotationChanged:(e,t)=>{n.addListener(e,t)},remove:t=>{ns(e,B.some(t)).each(({elements:t})=>{const n=e.selection.getBookmark();o(t),e.selection.moveToBookmark(n)})},removeAll:t=>{const n=e.selection.getBookmark();fe(is(e,t),(e,t)=>{o(e)}),e.selection.moveToBookmark(n)},getAll:t=>{const n=is(e,t);return ge(n,e=>U(e,e=>e.dom))}}},Uh=e=>({getBookmark:D(Fd,e),moveToBookmark:D(Vd,e)});Uh.isBookmarkNode=Hd;const jh=(e,t,n)=>!n.collapsed&&G(n.getClientRects(),n=>((e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom)(n,e,t)),Yh=(e,t,n)=>{e.dispatch(t,n)},qh=(e,t,n,r)=>{e.dispatch("FormatApply",{format:t,node:n,vars:r})},Xh=(e,t,n,r)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:r})},Zh=(e,t)=>e.dispatch("SetContent",t),$h=(e,t)=>e.dispatch("GetContent",t),Kh=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Jh={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Jh.metaKeyPressed(e),metaKeyPressed:e=>At.os.isMacOS()||At.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Qh="data-mce-selected",ep=Math.abs,tp=Math.round,np={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},rp=(e,t)=>{const n=t.dom,r=t.getDoc(),o=document,i=t.getBody();let a,s,l,u,c,d,h,p,f,g,m,v,y,b,_;const w=e=>x(e)&&(ro(e)||n.is(e,"figure.image")),S=e=>lo(e)||n.hasClass(e,"mce-preview-object"),C=e=>{const n=e.target;((e,t)=>{if((e=>"longpress"===e.type||0===e.type.indexOf("touch"))(e)){const n=e.touches[0];return w(e.target)&&!jh(n.clientX,n.clientY,t)}return w(e.target)&&!jh(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},M=e=>n.hasClass(e,"mce-preview-object")&&x(e.firstElementChild)?[e,e.firstElementChild]:n.is(e,"figure.image")?[e.querySelector("img")]:[e],T=e=>{const r=au(t);return!!r&&"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&(n.hasClass(e,"mce-preview-object")&&x(e.firstElementChild)?xn(yn(e.firstElementChild),r):xn(yn(e),r))},k=(e,r,o)=>{if(x(o)){const i=M(e);j(i,e=>{e.style[r]||!t.schema.isValid(e.nodeName.toLowerCase(),r)?n.setStyle(e,r,o):n.setAttrib(e,r,""+o)})}},I=(e,t,n)=>{k(e,"width",t),k(e,"height",n)},A=e=>{let r,o,c,x,C;r=e.screenX-d,o=e.screenY-h,v=r*u[2]+p,y=o*u[3]+f,v=v<5?5:v,y=y<5?5:y,c=(w(a)||S(a))&&!1!==su(t)?!Jh.modifierPressed(e):Jh.modifierPressed(e),c&&(ep(r)>ep(o)?(y=tp(v*g),v=tp(y/g)):(v=tp(y/g),y=tp(v*g))),I(s,v,y),x=u.startPos.x+r,C=u.startPos.y+o,x=x>0?x:0,C=C>0?C:0,n.setStyles(l,{left:x,top:C,display:"block"}),l.innerHTML=v+" &times; "+y,u[2]<0&&s.clientWidth<=v&&n.setStyle(s,"left",void 0+(p-v)),u[3]<0&&s.clientHeight<=y&&n.setStyle(s,"top",void 0+(f-y)),r=i.scrollWidth-b,o=i.scrollHeight-_,r+o!==0&&n.setStyles(l,{left:x-r,top:C-o}),m||(((e,t,n,r,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:r,origin:o})})(t,a,p,f,"corner-"+u.name),m=!0)},D=()=>{const e=m;m=!1,e&&(k(a,"width",v),k(a,"height",y)),n.unbind(r,"mousemove",A),n.unbind(r,"mouseup",D),o!==r&&(n.unbind(o,"mousemove",A),n.unbind(o,"mouseup",D)),n.remove(s),n.remove(l),n.remove(c),P(a),e&&(((e,t,n,r,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:r,origin:o})})(t,a,v,y,"corner-"+u.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),t.nodeChanged()},P=e=>{O();const m=n.getPos(e,i),x=m.x,w=m.y,C=e.getBoundingClientRect(),k=C.width||C.right-C.left,P=C.height||C.bottom-C.top;a!==e&&(N(),a=e,v=y=0);const L=t.dispatch("ObjectSelected",{target:e});T(e)&&!L.isDefaultPrevented()?fe(np,(e,t)=>{let m=n.get("mceResizeHandle"+t);m&&n.remove(m),m=n.add(i,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),n.bind(m,"mousedown",m=>{m.stopImmediatePropagation(),m.preventDefault(),(m=>{const v=M(a)[0];var y;d=m.screenX,h=m.screenY,p=v.clientWidth,f=v.clientHeight,g=f/p,u=e,u.name=t,u.startPos={x:k*e[0]+x,y:P*e[1]+w},b=i.scrollWidth,_=i.scrollHeight,c=n.add(i,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),s=S(y=a)?n.create("img",{src:At.transparentSrc}):y.cloneNode(!0),n.addClass(s,"mce-clonedresizable"),n.setAttrib(s,"data-mce-bogus","all"),s.contentEditable="false",n.setStyles(s,{left:x,top:w,margin:0}),I(s,k,P),s.removeAttribute(Qh),i.appendChild(s),n.bind(r,"mousemove",A),n.bind(r,"mouseup",D),o!==r&&(n.bind(o,"mousemove",A),n.bind(o,"mouseup",D)),l=n.add(i,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(m)}),e.elm=m,n.setStyles(m,{left:k*e[0]+x-m.offsetWidth/2,top:P*e[1]+w-m.offsetHeight/2})}):N(!1)},L=qa(P,0),N=(e=!0)=>{L.cancel(),O(),a&&e&&a.removeAttribute(Qh),fe(np,(e,t)=>{const r=n.get("mceResizeHandle"+t);r&&(n.unbind(r),n.remove(r))})},R=(e,t)=>n.isChildOf(e,t),E=r=>{if(m||t.removed||t.composing)return;const o="mousedown"===r.type?r.target:e.getNode(),a=er(yn(o),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(e=>e.dom).filter(e=>n.isEditable(e.parentElement)||"IMG"===e.nodeName&&n.isEditable(e)).getOrUndefined(),s=x(a)?n.getAttrib(a,Qh,"1"):"1";if(j(n.select(`img[${Qh}],hr[${Qh}]`),e=>{e.removeAttribute(Qh)}),x(a)&&R(a,i)&&t.hasFocus()){B();const t=e.getStart(!0);if(R(t,a)&&R(e.getEnd(!0),a))return n.setAttrib(a,Qh,s),void L.throttle(a)}N()},O=()=>{fe(np,e=>{e.elm&&(n.unbind(e.elm),delete e.elm)})},B=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};return t.on("init",()=>{B(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",E),t.on("keyup compositionend",e=>{a&&"TABLE"===a.nodeName&&E(e)}),t.on("hide blur",N),t.on("contextmenu longpress",C,!0)}),t.on("remove",O),{isResizable:T,showResizeRect:P,hideResizeRect:N,updateResizeRect:E,destroy:()=>{L.cancel(),a=s=c=null}}},op=(e,t,n)=>{const r=e.document.createRange();var o;return o=r,t.fold(e=>{o.setStartBefore(e.dom)},(e,t)=>{o.setStart(e.dom,t)},e=>{o.setStartAfter(e.dom)}),((e,t)=>{t.fold(t=>{e.setEndBefore(t.dom)},(t,n)=>{e.setEnd(t.dom,n)},t=>{e.setEndAfter(t.dom)})})(r,n),r},ip=(e,t,n,r,o)=>{const i=e.document.createRange();return i.setStart(t.dom,n),i.setEnd(r.dom,o),i},ap=hl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),sp=(e,t,n)=>t(yn(n.startContainer),n.startOffset,yn(n.endContainer),n.endOffset);ap.ltr,ap.rtl;const lp=(e,t,n,r)=>({start:e,soffset:t,finish:n,foffset:r}),up=document.caretPositionFromPoint?(e,t,n)=>{var r,o;return B.from(null===(o=(r=e.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,n)).bind(t=>{if(null===t.offsetNode)return B.none();const n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),B.some(n)})}:document.caretRangeFromPoint?(e,t,n)=>{var r,o;return B.from(null===(o=(r=e.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,n))}:B.none,cp=hl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),dp={before:cp.before,on:cp.on,after:cp.after,cata:(e,t,n,r)=>e.fold(t,n,r),getStart:e=>e.fold(I,I,I)},hp=hl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),pp={domRange:hp.domRange,relative:hp.relative,exact:hp.exact,exactFromRange:e=>hp.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>yn(e.startContainer),relative:(e,t)=>dp.getStart(e),exact:(e,t,n,r)=>e}))(e);return Tn(t)},range:lp},fp=(e,t)=>{const n=Ht(e);return"input"===n?dp.after(e):W(["br","img"],n)?0===t?dp.before(e):dp.after(e):dp.on(e,t)},gp=(e,t)=>{const n=e.fold(dp.before,fp,dp.after),r=t.fold(dp.before,fp,dp.after);return pp.relative(n,r)},mp=(e,t,n,r)=>{const o=fp(e,t),i=fp(n,r);return pp.relative(o,i)},vp=(e,t)=>{const n=(t||document).createDocumentFragment();return j(e,e=>{n.appendChild(e.dom)}),yn(n)},yp=(e,t,n)=>((e,t,n)=>((e,t,n)=>{const r=yn(e.document);return up(r,t,n).map(e=>lp(yn(e.startContainer),e.startOffset,yn(e.endContainer),e.endOffset))})(e,t,n))(Tn(yn(n)).dom,e,t).map(e=>{const t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t}).getOrUndefined(),bp=(e,t)=>x(e)&&x(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,xp=(e,t,n)=>null!==((e,t,n)=>{let r=e;for(;r&&r!==t;){if(n(r))return r;r=r.parentNode}return null})(e,t,n),_p=(e,t,n)=>xp(e,t,e=>e.nodeName===n),wp=(e,t)=>Oo(e)&&!xp(e,t,Id),Sp=(e,t,n)=>{const r=t.parentNode;if(r){const o=new Br(t,e.getParent(r,e.isBlock)||e.getRoot());let i;for(;i=o[n?"prev":"next"]();)if(no(i))return!0}return!1},Cp=(e,t,n,r,o)=>{const i=e.getRoot(),a=e.schema.getNonEmptyElements(),s=o.parentNode;let l,u;if(!s)return B.none();const c=e.getParent(s,e.isBlock)||i;if(r&&no(o)&&t&&e.isEmpty(c))return B.some(Hs(s,e.nodeIndex(o)));const d=new Br(o,c);for(;u=d[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||wp(u,i))return B.none();if($r(u)&&u.data.length>0)return _p(u,i,"A")?B.none():B.some(Hs(u,r?u.data.length:0));if(e.isBlock(u)||a[u.nodeName.toLowerCase()])return B.none();l=u}return Qr(l)?B.none():n&&l?B.some(Hs(l,0)):B.none()},Mp=(e,t,n,r)=>{const o=e.getRoot();let i,a=!1,s=n?r.startContainer:r.endContainer,l=n?r.startOffset:r.endOffset;const u=Vr(s)&&l===s.childNodes.length,c=e.schema.getNonEmptyElements();let d=n;if(Oo(s))return B.none();if(Vr(s)&&l>s.childNodes.length-1&&(d=!1),eo(s)&&(s=o,l=0),s===o){if(d&&(i=s.childNodes[l>0?l-1:0],i)){if(Oo(i))return B.none();if(c[i.nodeName]||qr(i))return B.none()}if(s.hasChildNodes()){if(l=Math.min(!d&&l>0?l-1:l,s.childNodes.length-1),s=s.childNodes[l],l=$r(s)&&u?s.data.length:0,!t&&s===o.lastChild&&qr(s))return B.none();if(((e,t)=>{let n=t;for(;n&&n!==e;){if(io(n))return!0;n=n.parentNode}return!1})(o,s)||Oo(s))return B.none();if(co(s))return B.none();if(s.hasChildNodes()&&!qr(s)){i=s;const t=new Br(s,o);do{if(io(i)||Oo(i)){a=!1;break}if($r(i)&&i.data.length>0){l=d?0:i.data.length,s=i,a=!0;break}if(c[i.nodeName.toLowerCase()]&&!so(i)){l=e.nodeIndex(i),s=i.parentNode,d||l++,a=!0;break}}while(i=d?t.next():t.prev())}}}return t&&($r(s)&&0===l&&Cp(e,u,t,!0,s).each(e=>{s=e.container(),l=e.offset(),a=!0}),Vr(s)&&(i=s.childNodes[l],i||(i=s.childNodes[l-1]),!i||!no(i)||((e,t)=>{var n;return"A"===(null===(n=e.previousSibling)||void 0===n?void 0:n.nodeName)})(i)||Sp(e,i,!1)||Sp(e,i,!0)||Cp(e,u,t,!0,i).each(e=>{s=e.container(),l=e.offset(),a=!0}))),d&&!t&&$r(s)&&l===s.data.length&&Cp(e,u,t,!1,s).each(e=>{s=e.container(),l=e.offset(),a=!0}),a&&s?B.some(Hs(s,l)):B.none()},Tp=(e,t)=>{const n=t.collapsed,r=t.cloneRange(),o=Hs.fromRangeStart(t);return Mp(e,n,!0,r).each(e=>{n&&Hs.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||Mp(e,n,!1,r).each(e=>{r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),bp(t,r)?B.none():B.some(r)},kp=(e,t)=>e.splitText(t),Ip=e=>{let t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset;if(t===r&&$r(t)){if(n>0&&n<t.data.length)if(r=kp(t,n),t=r.previousSibling,o>n){o-=n;const e=kp(r,o).previousSibling;t=r=e,o=e.data.length,n=0}else o=0}else if($r(t)&&n>0&&n<t.data.length&&(t=kp(t,n),n=0),$r(r)&&o>0&&o<r.data.length){const e=kp(r,o).previousSibling;r=e,o=e.data.length}return{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},Ap=e=>({walk:(t,n)=>Fh(e,t,n),split:Ip,expand:(t,n={type:"word"})=>{if("word"===n.type){const n=zh(e,t,[{inline:"span"}]),r=e.createRng();return r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),r}return t},normalize:t=>Tp(e,t).fold(E,e=>(t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0))});Ap.compareRanges=bp,Ap.getCaretRangeFromPoint=yp,Ap.getSelectedNode=xs,Ap.getNode=_s;const Dp=((e,t)=>{const n=t=>{const n=(e=>{const t=e.dom;return qn(e)?t.getBoundingClientRect().height:t.offsetHeight})(t);if(n<=0||null===n){const n=sr(t,e);return parseFloat(n)||0}return n},r=(e,t)=>$(t,(t,n)=>{const r=sr(e,n),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0);return{set:(t,n)=>{if(!w(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);const r=t.dom;rr(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:(e,t,n)=>{const o=r(e,n);return t>o?t-o:0}}})("height"),Pp=()=>yn(document),Lp=(e,t)=>e.view(t).fold(k([]),t=>{const n=e.owner(t),r=Lp(e,n);return[t].concat(r)});var Np=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?B.none():B.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(yn)},owner:e=>Mn(e)});const Rp=e=>"textarea"===Ht(e),Ep=(e,t)=>{const n=(e=>{const t=e.dom.ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom)return Tr(n.offsetLeft,n.offsetTop);const i=kr(null==r?void 0:r.pageYOffset,o.scrollTop),a=kr(null==r?void 0:r.pageXOffset,o.scrollLeft),s=kr(o.clientTop,n.clientTop),l=kr(o.clientLeft,n.clientLeft);return Ir(e).translate(a-l,i-s)})(e),r=(e=>Dp.get(e))(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},Op=(e,t,n,r)=>{Vp(e,(o,i)=>zp(e,t,n,r),n)},Bp=(e,t,n,r,o)=>{const i={elm:r.element.dom,alignToTop:o};((e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented())(e,i)||(n(e,t,Ar(t).top,r,o),((e,t)=>{e.dispatch("AfterScrollIntoView",t)})(e,i))},zp=(e,t,n,r)=>{const o=yn(e.getBody()),i=yn(e.getDoc());o.dom.offsetWidth;const a=((e,t)=>{const n=((e,t)=>{const n=Rn(e);if(0===n.length||Rp(e))return{element:e,offset:t};if(t<n.length&&!Rp(n[t]))return{element:n[t],offset:0};{const r=n[n.length-1];return Rp(r)?{element:e,offset:t}:"img"===Ht(r)?{element:r,offset:1}:Yt(r)?{element:r,offset:vo(r).length}:{element:r,offset:Rn(r).length}}})(e,t),r=gn('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return hr(n.element,r),Ep(r,()=>br(r))})(yn(n.startContainer),n.startOffset);Bp(e,i,t,a,r),a.cleanup()},Fp=(e,t,n,r)=>{const o=yn(e.getDoc());Bp(e,o,n,(e=>Ep(yn(e),C))(t),r)},Vp=(e,t,n)=>{const r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;t(yn(r),yn(i));const s=e.dom.createRng();s.setStart(r,o),s.setEnd(i,a),e.selection.setRng(n)},Hp=(e,t,n,r,o)=>{const i=t.pos;if(r)Dr(i.left,i.top,o);else{const r=i.top-n+t.height;Dr(-e.getBody().getBoundingClientRect().left,r,o)}},Wp=(e,t,n,r,o,i)=>{const a=r+n,s=o.pos.top,l=o.bottom,u=l-s>=r;s<n?Hp(e,o,r,!1!==i,t):s>a?Hp(e,o,r,u?!1!==i:!0===i,t):l>a&&!u&&Hp(e,o,r,!0===i,t)},Gp=(e,t,n,r,o)=>{const i=Tn(t).dom.innerHeight;Wp(e,t,n,i,r,o)},Up=(e,t,n,r,o)=>{const i=Tn(t).dom.innerHeight;Wp(e,t,n,i,r,o);const a=(e=>{const t=Pp(),n=Ar(t),r=((e,t)=>{const n=t.owner(e);return Lp(t,n)})(e,Np),o=Ir(e),i=Z(r,(e,t)=>{const n=Ir(t);return{left:e.left+n.left,top:e.top+n.top}},{left:0,top:0});return Tr(i.left+o.left+n.left,i.top+o.top+n.top)})(r.element),s=Nr(window);a.top<s.y?Pr(r.element,!1!==o):a.top>s.bottom&&Pr(r.element,!0===o)},jp=(e,t,n)=>Op(e,Gp,t,n),Yp=(e,t,n)=>Fp(e,t,Gp,n),qp=(e,t,n)=>Op(e,Up,t,n),Xp=(e,t,n)=>Fp(e,t,Up,n),Zp=(e,t,n)=>{(e.inline?jp:qp)(e,t,n)},$p=(e,t=!1)=>e.dom.focus({preventScroll:t}),Kp=e=>{const t=Wn(e).dom;return e.dom===t.activeElement},Jp=(e=Pp())=>B.from(e.dom.activeElement).map(yn),Qp=(e,t)=>{const n=Yt(t)?vo(t).length:Rn(t).length+1;return e>n?n:e<0?0:e},ef=e=>pp.range(e.start,Qp(e.soffset,e.start),e.finish,Qp(e.foffset,e.finish)),tf=(e,t)=>!Fr(t.dom)&&(Sn(e,t)||wn(e,t)),nf=e=>t=>tf(e,t.start)&&tf(e,t.finish),rf=e=>pp.range(yn(e.startContainer),e.startOffset,yn(e.endContainer),e.endOffset),of=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),B.some(t)}catch(e){return B.none()}},af=e=>{const t=(e=>e.inline||At.browser.isFirefox())(e)?(n=yn(e.getBody()),(e=>{const t=e.getSelection();return(t&&0!==t.rangeCount?B.from(t.getRangeAt(0)):B.none()).map(rf)})(Tn(n).dom).filter(nf(n))):B.none();var n;e.bookmark=t.isSome()?t:e.bookmark},sf=e=>(e.bookmark?e.bookmark:B.none()).bind(t=>{return n=yn(e.getBody()),r=t,B.from(r).filter(nf(n)).map(ef);var n,r}).bind(of),lf={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},uf={setEditorTimeout:(e,t,n)=>((e,t)=>(w(t)||(t=0),setTimeout(e,t)))(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const r=((e,t)=>(w(t)||(t=0),setInterval(e,t)))(()=>{e.removed?clearInterval(r):t()},n);return r}};let cf;const df=Oa.DOM,hf=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},pf=(e,t)=>{const n=xu(e),r=df.getParent(t,t=>(e=>Vr(e)&&lf.isEditorUIElement(e))(t)||!!n&&e.dom.is(t,n));return null!==r},ff=e=>{try{const t=Wn(yn(e.getElement()));return Jp(t).fold(()=>document.body,e=>e.dom)}catch(e){return document.body}},gf=(e,t)=>{const n=t.editor;(e=>{const t=qa(()=>{af(e)},0);e.on("init",()=>{e.inline&&((e,t)=>{const n=()=>{t.throttle()};Oa.DOM.bind(document,"mouseup",n),e.on("remove",()=>{Oa.DOM.unbind(document,"mouseup",n)})})(e,t),((e,t)=>{((e,t)=>{e.on("mouseup touchend",e=>{t.throttle()})})(e,t),e.on("keyup NodeChange AfterSetSelectionRange",t=>{(e=>"nodechange"===e.type&&e.selectionChange)(t)||af(e)})})(e,t)}),e.on("remove",()=>{t.cancel()})})(n);const r=(e,t)=>{lc(e)&&!0!==e.inline&&t(yn(e.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const t=e.focusedEditor;hf(ff(n))&&r(n,cn),t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))}),n.on("focusout",()=>{uf.setEditorTimeout(n,()=>{const t=e.focusedEditor;hf(ff(n))&&t===n||r(n,hn),pf(n,ff(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),cf||(cf=t=>{const n=e.activeEditor;n&&jn(t).each(t=>{const r=t;r.ownerDocument===document&&(r===document.body||pf(n,r)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},df.bind(document,"focusin",cf))},mf=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&cf&&(df.unbind(document,"focusin",cf),cf=null)},vf=(e,t)=>{((e,t)=>(e=>e.collapsed?B.from(_s(e.startContainer,e.startOffset)).map(yn):B.none())(t).bind(t=>Co(t)?B.some(t):Sn(e,t)?B.none():B.some(e)))(yn(e.getBody()),t).bind(e=>Md(e.dom)).fold(()=>{e.selection.normalize()},t=>e.selection.setRng(t.toRange()))},yf=e=>{if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},bf=e=>e.inline?(e=>{const t=e.getBody();return t&&(n=yn(t),Kp(n)||(r=n,Jp(Wn(r)).filter(e=>r.dom.contains(e.dom))).isSome());var n,r})(e):(e=>x(e.iframeElement)&&Kp(yn(e.iframeElement)))(e),xf=e=>bf(e)||(e=>{const t=Wn(yn(e.getElement()));return Jp(t).filter(t=>!hf(t.dom)&&pf(e,t.dom)).isSome()})(e),_f=e=>e.editorManager.setActive(e),wf=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Sf=(e,t,n,r,o)=>{const i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return B.from(i).map(yn).map(e=>r&&t.collapsed?e:En(e,o(e,a)).getOr(e)).bind(e=>jt(e)?B.some(e):kn(e).filter(jt)).map(e=>e.dom).getOr(e)},Cf=(e,t,n=!1)=>Sf(e,t,!0,n,(e,t)=>Math.min(zn(e),t)),Mf=(e,t,n=!1)=>Sf(e,t,!1,n,(e,t)=>t>0?t-1:t),Tf=(e,t)=>{const n=e;for(;e&&$r(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},kf=(e,t)=>U(t,t=>{const n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t}),If=["img","br"],Af=e=>{const t=yo(e).filter(e=>0!==e.trim().length||e.indexOf(fo)>-1).isSome();return t||W(If,Ht(e))||(e=>Ut(e)&&"false"===Qt(e,"contenteditable"))(e)},Df="[data-mce-autocompleter]",Pf=e=>Qn(e,Df),Lf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Nf=(e,t,n)=>{const r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){let n=e[o];if(n)return n;for(let r=e.parent;r&&r!==t;r=r.parent)if(n=r[o],n)return n}},Rf=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!ni(n))return!1;const r=e.parent;return!r||"span"===r.name&&!r.attr("style")||!/^[ ]+$/.test(n)},Ef=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Of{static create(e,t){const n=new Of(e,Lf[e]||1);return t&&fe(t,(e,t)=>{n.attr(t,e)}),n}constructor(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}replace(e){const t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}attr(e,t){const n=this;if(!h(e))return x(e)&&fe(e,(e,t)=>{n.attr(t,e)}),n;const r=n.attributes;if(r){if(void 0!==t){if(null===t){if(e in r.map){delete r.map[e];let t=r.length;for(;t--;)if(r[t].name===e)return r.splice(t,1),n}return n}if(e in r.map){let n=r.length;for(;n--;)if(r[n].name===e){r[n].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}}clone(){const e=this,t=new Of(e.name,e.type),n=e.attributes;if(n){const e=[];e.map={};for(let t=0,r=n.length;t<r;t++){const r=n[t];"id"!==r.name&&(e[e.length]={name:r.name,value:r.value},e.map[r.name]=r.value)}t.attributes=e}return t.value=e.value,t}wrap(e){const t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}unwrap(){const e=this;for(let t=e.firstChild;t;){const n=t.next;e.insert(t,e,!0),t=n}e.remove()}remove(){const e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r&&(r.next=n),t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n&&(n.prev=r),e.parent=e.next=e.prev=null),e}append(e){const t=this;e.parent&&e.remove();const n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}insert(e,t,n){e.parent&&e.remove();const r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=r,e}getAll(e){const t=this,n=[];for(let r=t.firstChild;r;r=Nf(r,t))r.name===e&&n.push(r);return n}children(){const e=[];for(let t=this.firstChild;t;t=t.next)e.push(t);return e}empty(){const e=this;if(e.firstChild){const t=[];for(let n=e.firstChild;n;n=Nf(n,e))t.push(n);let n=t.length;for(;n--;){const e=t[n];e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,t={},n){var r;const o=this;let i=o.firstChild;if(Ef(o))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(e[i.name])return!1;if(Ef(i))return!1}if(8===i.type)return!1;if(3===i.type&&!Rf(i))return!1;if(3===i.type&&i.parent&&t[i.parent.name]&&ni(null!==(r=i.value)&&void 0!==r?r:""))return!1;if(n&&n(i))return!1}while(i=Nf(i,o));return!0}walk(e){return Nf(this,null,e)}}const Bf=Nt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),zf=e=>h(e.nodeValue)&&e.nodeValue.includes(Ao),Ff=e=>(0===e.length?"":`${U(e,e=>`[${e}]`).join(",")},`)+'[data-mce-bogus="all"]',Vf=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,e=>zf(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Hf=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,e=>{if(zf(e)){const t=e.parentNode;return t&&Se(Bf,t.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),Wf=e=>null!==Vf(e).nextNode(),Gf=e=>null!==Hf(e).nextNode(),Uf=(e,t)=>null!==t.querySelector(Ff(e)),jf=(e,t)=>{j(((e,t)=>t.querySelectorAll(Ff(e)))(e,t),t=>{const n=yn(t);"all"===Qt(n,"data-mce-bogus")?br(n):j(e,e=>{tn(n,e)&&nn(n,e)})})},Yf=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},qf=M(Yf,Vf),Xf=M(Yf,Hf),Zf=(e,t)=>{const n=[{condition:D(Uf,t),action:D(jf,t)},{condition:Wf,action:qf},{condition:Gf,action:Xf}];let r=e,o=!1;return j(n,({condition:t,action:n})=>{t(r)&&(o||(r=e.cloneNode(!0),o=!0),n(r))}),r},$f=e=>{const t=Er(e,"[data-mce-bogus]");j(t,e=>{"all"===Qt(e,"data-mce-bogus")?br(e):xo(e)?(hr(e,vn(po)),br(e)):xr(e)})},Kf=e=>{const t=Er(e,"input");j(t,e=>{nn(e,"name")})},Jf=Nt.makeMap,Qf=e=>{const t=[],n=(e=e||{}).indent,r=Jf(e.indent_before||""),o=Jf(e.indent_after||""),i=$i.getEncodeFunc(e.entity_encoding||"raw",e.entities),a="xhtml"!==e.element_format;return{start:(e,s,l)=>{if(n&&r[e]&&t.length>0){const e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}if(t.push("<",e),s)for(let e=0,n=s.length;e<n;e++){const n=s[e];t.push(" ",n.name,'="',i(n.value,!0),'"')}if(t[t.length]=!l||a?">":" />",l&&n&&o[e]&&t.length>0){const e=t[t.length-1];e.length>0&&"\n"!==e&&t.push("\n")}},end:e=>{let r;t.push("</",e,">"),n&&o[e]&&t.length>0&&(r=t[t.length-1],r.length>0&&"\n"!==r&&t.push("\n"))},text:(e,n)=>{e.length>0&&(t[t.length]=n?e:i(e))},cdata:e=>{t.push("<![CDATA[",e,"]]>")},comment:e=>{t.push("\x3c!--",e,"--\x3e")},pi:(e,r)=>{r?t.push("<?",e," ",i(r),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:e=>{t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},eg=(e={},t=sa())=>{const n=Qf(e);return e.validate=!("validate"in e)||e.validate,{serialize:r=>{const o=e.validate,i={3:e=>{var t;n.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:e=>{var t;n.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:e=>{n.pi(e.name,e.value)},10:e=>{var t;n.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:e=>{var t;n.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:e=>{let t=e;if(t=t.firstChild)do{a(t)}while(t=t.next)}};n.reset();const a=e=>{var r;const s=i[e.type];if(s)s(e);else{const i=e.name,s=i in t.getVoidElements();let l=e.attributes;if(o&&l&&l.length>1){const n=[];n.map={};const r=t.getElementRule(e.name);if(r){for(let e=0,t=r.attributesOrder.length;e<t;e++){const t=r.attributesOrder[e];if(t in l.map){const e=l.map[t];n.map[t]=e,n.push({name:t,value:e})}}for(let e=0,t=l.length;e<t;e++){const t=l[e].name;if(!(t in n.map)){const e=l.map[t];n.map[t]=e,n.push({name:t,value:e})}}l=n}}if(n.start(i,l,s),hi(i))h(e.value)&&n.text(e.value,!0),n.end(i);else if(!s){let t=e.firstChild;if(t){"pre"!==i&&"textarea"!==i||3!==t.type||"\n"!==(null===(r=t.value)||void 0===r?void 0:r[0])||n.text("\n",!0);do{a(t)}while(t=t.next)}n.end(i)}}};return 1!==r.type||e.inner?3===r.type?i[3](r):i[11](r):a(r),n.getContent()}}},tg=new Set;j(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{tg.add(e)});const ng=["font","text-decoration","text-emphasis"],rg=(e,t)=>he(e.parseStyle(e.getAttrib(t,"style"))),og=(e,t,n)=>{const r=rg(e,t),o=rg(e,n),i=r=>{var o,i;const a=null!==(o=e.getStyle(t,r))&&void 0!==o?o:"",s=null!==(i=e.getStyle(n,r))&&void 0!==i?i:"";return Xe(a)&&Xe(s)&&a!==s};return G(r,e=>{const t=t=>G(t,t=>t===e);if(!t(o)&&t(ng)){const e=X(o,e=>G(ng,t=>We(e,t)));return G(e,i)}return i(e)})},ig=(e,t,n)=>B.from(n.container()).filter($r).exists(r=>{const o=e?0:-1;return t(r.data.charAt(n.offset()+o))}),ag=D(ig,!0,Gd),sg=D(ig,!1,Gd),lg=e=>{const t=e.container();return $r(t)&&(0===t.data.length||Do(t.data)&&Uh.isBookmarkNode(t.parentNode))},ug=(e,t)=>n=>Yc(e?0:-1,n).filter(t).isSome(),cg=e=>ro(e)&&"block"===sr(yn(e),"display"),dg=e=>io(e)&&!(e=>Vr(e)&&"all"===e.getAttribute("data-mce-bogus"))(e),hg=ug(!0,cg),pg=ug(!1,cg),fg=ug(!0,lo),gg=ug(!1,lo),mg=ug(!0,qr),vg=ug(!1,qr),yg=ug(!0,dg),bg=ug(!1,dg),xg=(e,t)=>((e,t,n)=>Sn(t,e)?An(e,e=>n(e)||wn(e,t)).slice(0,-1):[])(e,t,E),_g=(e,t)=>[e].concat(xg(e,t)),wg=(e,t,n)=>_d(e,t,n,lg),Sg=(e,t,n)=>J(_g(yn(t.container()),e),(e=>t=>e.isBlock(Ht(t)))(n)),Cg=(e,t,n,r)=>wg(e,t.dom,n).forall(e=>Sg(t,n,r).fold(()=>!jc(e,n,t.dom),r=>!jc(e,n,t.dom)&&Sn(r,yn(e.container())))),Mg=(e,t,n,r)=>Sg(t,n,r).fold(()=>wg(e,t.dom,n).forall(e=>!jc(e,n,t.dom)),t=>wg(e,t.dom,n).isNone()),Tg=D(Mg,!1),kg=D(Mg,!0),Ig=D(Cg,!1),Ag=D(Cg,!0),Dg=e=>td(e).exists(xo),Pg=(e,t,n,r)=>{const o=X(_g(yn(n.container()),t),e=>r.isBlock(Ht(e))),i=le(o).getOr(t);return bd(e,i.dom,n).filter(Dg)},Lg=(e,t,n)=>td(t).exists(xo)||Pg(!0,e,t,n).isSome(),Ng=(e,t,n)=>(e=>B.from(e.getNode(!0)).map(yn))(t).exists(xo)||Pg(!1,e,t,n).isSome(),Rg=D(Pg,!1),Eg=D(Pg,!0),Og=e=>Hs.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),Bg=(e,t,n)=>{const r=X(_g(yn(t.container()),e),e=>n.isBlock(Ht(e)));return le(r).getOr(e)},zg=(e,t,n)=>Og(t)?sg(t):sg(t)||Cd(Bg(e,t,n).dom,t).exists(sg),Fg=(e,t,n)=>Og(t)?ag(t):ag(t)||Sd(Bg(e,t,n).dom,t).exists(ag),Vg=e=>td(e).bind(e=>$n(e,jt)).exists(e=>(e=>W(["pre","pre-wrap"],e))(sr(e,"white-space"))),Hg=(e,t)=>n=>{return r=new Br(n,e)[t](),x(r)&&io(r)&&Rc(r);var r},Wg=(e,t,n)=>!Vg(t)&&(((e,t,n)=>((e,t)=>Cd(e.dom,t).isNone())(e,t)||((e,t)=>Sd(e.dom,t).isNone())(e,t)||Tg(e,t,n)||kg(e,t,n)||Ng(e,t,n)||Lg(e,t,n))(e,t,n)||zg(e,t,n)||Fg(e,t,n)),Gg=(e,t,n)=>!Vg(t)&&(Tg(e,t,n)||Ig(e,t,n)||Ng(e,t,n)||zg(e,t,n)||((e,t)=>{const n=Cd(e.dom,t).getOr(t),r=Hg(e.dom,"prev");return t.isAtStart()&&(r(t.container())||r(n.container()))})(e,t)),Ug=(e,t,n)=>!Vg(t)&&(kg(e,t,n)||Ag(e,t,n)||Lg(e,t,n)||Fg(e,t,n)||((e,t)=>{const n=Sd(e.dom,t).getOr(t),r=Hg(e.dom,"next");return t.isAtEnd()&&(r(t.container())||r(n.container()))})(e,t)),jg=(e,t,n)=>Gg(e,t,n)||Ug(e,(e=>{const t=e.container(),n=e.offset();return $r(t)&&n<t.data.length?Hs(t,n+1):e})(t),n),Yg=(e,t)=>Wd(e.charAt(t)),qg=(e,t)=>Gd(e.charAt(t)),Xg=(e,t,n,r)=>{const o=t.data,i=Hs(t,0);return n||!Yg(o,0)||jg(e,i,r)?!!(n&&qg(o,0)&&Gg(e,i,r))&&(t.data=fo+o.slice(1),!0):(t.data=" "+o.slice(1),!0)},Zg=(e,t,n,r)=>{const o=t.data,i=Hs(t,o.length-1);return n||!Yg(o,o.length-1)||jg(e,i,r)?!!(n&&qg(o,o.length-1)&&Ug(e,i,r))&&(t.data=o.slice(0,-1)+fo,!0):(t.data=o.slice(0,-1)+" ",!0)},$g=(e,t,n,r)=>{if(0===n)return;const o=yn(e),i=Zn(o,e=>r.isBlock(Ht(e))).getOr(o),a=e.data.slice(t,t+n),s=t+n>=e.data.length&&Ug(i,Hs(e,e.data.length),r),l=0===t&&Gg(i,Hs(e,0),r);e.replaceData(t,n,ii(a,4,l,s))},Kg=(e,t,n)=>{const r=e.data.slice(t),o=r.length-Ye(r).length;$g(e,t,o,n)},Jg=(e,t,n)=>{const r=e.data.slice(0,t),o=r.length-qe(r).length;$g(e,t-o,o,n)},Qg=(e,t,n,r,o=!0)=>{const i=qe(e.data).length,a=o?e:t,s=o?t:e;return o?a.appendData(s.data):a.insertData(0,s.data),br(yn(s)),r&&Kg(a,i,n),a},em=(e,t)=>((e,t)=>{const n=e.container(),r=e.offset();return!Hs.isTextPosition(e)&&n===t.parentNode&&r>Hs.before(t).offset()})(t,e)?Hs(t.container(),t.offset()-1):t,tm=e=>{return Jo(e.previousSibling)?B.some((t=e.previousSibling,$r(t)?Hs(t,t.data.length):Hs.after(t))):e.previousSibling?Td(e.previousSibling):B.none();var t},nm=e=>{return Jo(e.nextSibling)?B.some((t=e.nextSibling,$r(t)?Hs(t,0):Hs.before(t))):e.nextSibling?Md(e.nextSibling):B.none();var t},rm=(e,t,n)=>{n.fold(()=>{e.focus()},n=>{e.selection.setRng(n.toRange(),t)})},om=(e,t)=>t&&Se(e.schema.getBlockElements(),Ht(t)),im=(e,t,n,r=!0,o=!1)=>{const i=((e,t,n)=>((e,t,n)=>e?((e,t)=>nm(t).orThunk(()=>tm(t)).orThunk(()=>((e,t)=>Sd(e,Hs.after(t)).orThunk(()=>Cd(e,Hs.before(t))))(e,t)))(t,n):((e,t)=>tm(t).orThunk(()=>nm(t)).orThunk(()=>((e,t)=>B.from(t.previousSibling?t.previousSibling:t.parentNode).bind(t=>Cd(e,Hs.before(t))).orThunk(()=>Sd(e,Hs.after(t))))(e,t)))(t,n))(e,t,n).map(D(em,n)))(t,e.getBody(),n.dom),a=Zn(n,D(om,e),(s=e.getBody(),e=>e.dom===s));var s;const l=((e,t,n,r)=>{const o=Dn(e).filter(Yt),i=Pn(e).filter(Yt);return br(e),(a=o,s=i,l=t,u=(e,t,o)=>{const i=e.dom,a=t.dom,s=i.data.length;return Qg(i,a,n,r),o.container()===a?Hs(i,s):o},a.isSome()&&s.isSome()&&l.isSome()?B.some(u(a.getOrDie(),s.getOrDie(),l.getOrDie())):B.none()).orThunk(()=>(r&&(o.each(e=>Jg(e.dom,e.dom.length,n)),i.each(e=>Kg(e.dom,0,n))),t));var a,s,l,u})(n,i,e.schema,((e,t)=>Se(e.schema.getTextInlineElements(),Ht(t)))(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):a.bind(e=>((e,t)=>{if(di(e)){const n=gn('<br data-mce-bogus="1">');return t?j(Rn(e),e=>{Sh(e)||br(e)}):yr(e),gr(e,n),B.some(Hs.before(n.dom))}return B.none()})(e,o)).fold(()=>{r&&rm(e,t,l)},n=>{r&&rm(e,t,B.some(n))})},am=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,sm=(e,t)=>xn(yn(t),iu(e))&&!Ti(e.schema,t)&&e.dom.isEditable(t),lm=e=>{var t;return"rtl"===Oa.DOM.getStyle(e,"direction",!0)||(e=>am.test(e))(null!==(t=e.textContent)&&void 0!==t?t:"")},um=(e,t,n)=>{const r=((e,t,n)=>X(Oa.DOM.getParents(n.container(),"*",t),e))(e,t,n);return B.from(r[r.length-1])},cm=(e,t)=>{const n=t.container(),r=t.offset();return e?Eo(n)?$r(n.nextSibling)?Hs(n.nextSibling,0):Hs.after(n):zo(t)?Hs(n,r+1):t:Eo(n)?$r(n.previousSibling)?Hs(n.previousSibling,n.previousSibling.data.length):Hs.before(n):Fo(t)?Hs(n,r-1):t},dm=D(cm,!0),hm=D(cm,!1),pm=(e,t)=>{const n=e=>e.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},fm=e=>pm(e,"Delete"),gm=e=>_o(e)||So(e),mm=(e,t)=>Sn(e,t)?$n(t,gm,(e=>t=>Rt(kn(t),e,wn))(e)):B.none(),vm=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},ym=(e,t,n)=>Ot(Md(n),Td(n),(r,o)=>{const i=cm(!0,r),a=cm(!1,o),s=cm(!1,t);return e?Sd(n,s).exists(e=>e.isEqual(a)&&t.isEqual(i)):Cd(n,s).exists(e=>e.isEqual(i)&&t.isEqual(a))}).getOr(!0),bm=e=>{var t;return(8===Wt(t=e)||"#comment"===Ht(t)?Dn(e):Bn(e)).bind(bm).orThunk(()=>B.some(e))},xm=(e,t,n,r=!0)=>{var o;t.deleteContents();const i=bm(n).getOr(n),a=yn(null!==(o=e.dom.getParent(i.dom,e.dom.isBlock))&&void 0!==o?o:n.dom);if(a.dom===e.getBody()?vm(e,r):di(a)&&(Io(a),r&&e.selection.setCursorLocation(a.dom,0)),!wn(n,a)){const e=Rt(kn(a),n)?[]:kn(s=a).map(Rn).map(e=>X(e,e=>!wn(s,e))).getOr([]);j(e.concat(Rn(n)),e=>{wn(e,a)||Sn(e,a)||!di(e)||br(e)})}var s},_m=(e,t)=>Kn(e,t).isSome(),wm=e=>Er(e,"td,th"),Sm=(e,t)=>Xd(yn(e),t),Cm=(e,t)=>({start:e,end:t}),Mm=hl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Tm=(e,t)=>er(yn(e),"td,th",t),km=e=>!wn(e.start,e.end),Im=(e,t)=>Xd(e.start,t).bind(n=>Xd(e.end,t).bind(e=>Bt(wn(n,e),n))),Am=e=>t=>Im(t,e).map(e=>((e,t,n)=>({rng:e,table:t,cells:n}))(t,e,wm(e))),Dm=(e,t,n,r)=>{if(n.collapsed||!e.forall(km))return B.none();if(t.isSameTable){const t=e.bind(Am(r));return B.some({start:t,end:t})}{const e=Tm(n.startContainer,r),t=Tm(n.endContainer,r),o=e.bind((e=>t=>Xd(t,e).bind(e=>ue(wm(e)).map(e=>Cm(t,e))))(r)).bind(Am(r)),i=t.bind((e=>t=>Xd(t,e).bind(e=>le(wm(e)).map(e=>Cm(e,t))))(r)).bind(Am(r));return B.some({start:o,end:i})}},Pm=(e,t)=>Q(e,e=>wn(e,t)),Lm=e=>Ot(Pm(e.cells,e.rng.start),Pm(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),Nm=(e,t)=>{const{startTable:n,endTable:r}=t,o=e.cloneRange();return n.each(e=>o.setStartAfter(e.dom)),r.each(e=>o.setEndBefore(e.dom)),o},Rm=e=>j(e,e=>{nn(e,"contenteditable"),Io(e)}),Em=(e,t,n,r)=>{const o=n.cloneRange();r?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),Fm(e,o,t,!1).each(e=>e())},Om=e=>{const t=qd(e),n=yn(e.selection.getNode());ao(n.dom)&&di(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&G(t,e=>wn(e,n))&&Kt(n,"data-mce-selected","1")},Bm=(e,t,n)=>B.some(()=>{const r=e.selection.getRng(),o=n.bind(({rng:n,isStartInTable:o})=>{const i=((e,t)=>B.from(e.dom.getParent(t,e.dom.isBlock)).map(yn))(e,o?n.endContainer:n.startContainer);n.deleteContents(),((e,t,n)=>{n.each(n=>{t?br(n):(Io(n),e.selection.setCursorLocation(n.dom,0))})})(e,o,i.filter(di));const a=o?t[0]:t[t.length-1];return Em(e,a,r,o),di(a)?B.none():B.some(o?t.slice(1):t.slice(0,-1))}).getOr(t);Rm(o),Om(e)}),zm=(e,t,n,r)=>B.some(()=>{const o=e.selection.getRng(),i=t[0],a=n[n.length-1];Em(e,i,o,!0),Em(e,a,o,!1);const s=di(i)?t:t.slice(1),l=di(a)?n:n.slice(0,-1);Rm(s.concat(l)),r.deleteContents(),Om(e)}),Fm=(e,t,n,r=!0)=>B.some(()=>{xm(e,t,n,r)}),Vm=(e,t)=>B.some(()=>im(e,!1,t)),Hm=(e,t)=>J(_g(t,e),Mo),Wm=(e,t)=>J(_g(t,e),Zt("caption")),Gm=(e,t)=>B.some(()=>{Io(t),e.selection.setCursorLocation(t.dom,0)}),Um=(e,t)=>e?mg(t):vg(t),jm=(e,t)=>{const n=yn(e.selection.getStart(!0)),r=qd(e);return e.selection.isCollapsed()&&0===r.length?((e,t,n)=>{const r=yn(e.getBody());return Wm(r,n).fold(()=>((e,t,n,r)=>{const o=Hs.fromRangeStart(e.selection.getRng());return Hm(n,r).bind(r=>di(r)?Gm(e,r):((e,t,n,r,o)=>xd(n,e.getBody(),o).bind(e=>Hm(t,yn(e.getNode())).bind(e=>wn(e,r)?B.none():B.some(C))))(e,n,t,r,o))})(e,t,r,n).orThunk(()=>Bt(((e,t)=>{const n=Hs.fromRangeStart(e.selection.getRng());return Um(t,n)||bd(t,e.getBody(),n).exists(e=>Um(t,e))})(e,t),C)),n=>((e,t,n,r)=>{const o=Hs.fromRangeStart(e.selection.getRng());return di(r)?Gm(e,r):((e,t,n,r,o)=>xd(n,e.getBody(),o).fold(()=>B.some(C),i=>((e,t,n,r)=>Md(e.dom).bind(o=>Td(e.dom).map(e=>t?n.isEqual(o)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(o))).getOr(!0))(r,n,o,i)?((e,t)=>Gm(e,t))(e,r):((e,t,n)=>Wm(e,yn(n.getNode())).fold(()=>B.some(C),e=>Bt(!wn(e,t),C)))(t,r,i)))(e,n,t,r,o)})(e,t,r,n))})(e,t,n):((e,t,n)=>{const r=yn(e.getBody()),o=e.selection.getRng();return 0!==n.length?Bm(e,n,B.none()):((e,t,n,r)=>Wm(t,r).fold(()=>((e,t,n)=>((e,t)=>{const n=(e=>t=>wn(e,t))(e),r=((e,t)=>{const n=Tm(e.startContainer,t),r=Tm(e.endContainer,t);return Ot(n,r,Cm)})(t,n),o=((e,t)=>{const n=Sm(e.startContainer,t),r=Sm(e.endContainer,t),o=n.isSome(),i=r.isSome(),a=Ot(n,r,wn).getOr(!1);return(e=>Ot(e.startTable,e.endTable,(t,n)=>{const r=_m(t,e=>wn(e,n)),o=_m(n,e=>wn(e,t));return r||o?{...e,startTable:r?B.none():e.startTable,endTable:o?B.none():e.endTable,isSameTable:!1,isMultiTable:!1}:e}).getOr(e))({startTable:n,endTable:r,isStartInTable:o,isEndInTable:i,isSameTable:a,isMultiTable:!a&&o&&i})})(t,n);return((e,t,n)=>e.exists(e=>((e,t)=>!km(e)&&Im(e,t).exists(e=>{const t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))(e,n)&&Kd(e.start,t)))(r,t,n)?r.map(e=>Mm.singleCellTable(t,e.start)):o.isMultiTable?((e,t,n,r)=>Dm(e,t,n,r).bind(({start:e,end:r})=>{const o=e.bind(Lm).getOr([]),i=r.bind(Lm).getOr([]);if(o.length>0&&i.length>0){const e=Nm(n,t);return B.some(Mm.multiTable(o,i,e))}return B.none()}))(r,o,t,n):((e,t,n,r)=>Dm(e,t,n,r).bind(({start:e,end:t})=>e.or(t)).bind(e=>{const{isSameTable:r}=t,o=Lm(e).getOr([]);if(r&&e.cells.length===o.length)return B.some(Mm.fullTable(e.table));if(o.length>0){if(r)return B.some(Mm.partialTable(o,B.none()));{const e=Nm(n,t);return B.some(Mm.partialTable(o,B.some({...t,rng:e})))}}return B.none()}))(r,o,t,n)})(t,n).bind(t=>t.fold(D(Fm,e),D(Vm,e),D(Bm,e),D(zm,e))))(e,t,n),t=>((e,t)=>Gm(e,t))(e,t)))(e,r,o,t)})(e,n,r)},Ym=(e,t)=>{let n=t;for(;n&&n!==e;){if(oo(n)||io(n))return n;n=n.parentNode}return null},qm=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Xm=Nt.each,Zm=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),r=e=>G(qm,t=>We(e,t))||n.has(e);return{compare:(e,n)=>{if(e.nodeName!==n.nodeName||e.nodeType!==n.nodeType)return!1;const o=e=>{const n={};return Xm(t.getAttribs(e),o=>{const i=o.nodeName.toLowerCase();"style"===i||r(i)||(n[i]=t.getAttrib(e,i))}),n},i=(e,t)=>{for(const n in e)if(Se(e,n)){const r=t[n];if(y(r))return!1;if(e[n]!==r)return!1;delete t[n]}for(const e in t)if(Se(t,e))return!1;return!0};if(Vr(e)&&Vr(n)){if(!i(o(e),o(n)))return!1;if(!i(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style"))))return!1}return!Hd(e)&&!Hd(n)},isAttributeInternal:r}},$m=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Km=(e,t,n,r)=>{const o=n.name;for(let t=0,i=e.length;t<i;t++){const i=e[t];if(i.name===o){const e=r.nodes[o];e?e.nodes.push(n):r.nodes[o]={filter:i,nodes:[n]}}}if(n.attributes)for(let e=0,o=t.length;e<o;e++){const o=t[e],i=o.name;if(i in n.attributes.map){const e=r.attributes[i];e?e.nodes.push(n):r.attributes[i]={filter:o,nodes:[n]}}}},Jm=(e,t)=>{const n=(e,n)=>{fe(e,e=>{const r=ce(e.nodes);j(e.filter.callbacks,o=>{for(let t=r.length-1;t>=0;t--){const o=r[t];(n?void 0!==o.attr(e.filter.name):o.name===e.filter.name)&&!b(o.parent)||r.splice(t,1)}r.length>0&&o(r,e.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},Qm=(e,t,n,r={})=>{const o=((e,t,n)=>{const r={nodes:{},attributes:{}};return n.firstChild&&((n,o)=>{let i=n;for(;i=i.walk();)Km(e,t,i,r)})(n),r})(e,t,n);Jm(o,r)},ev=(e,t,n,r)=>{if((e.pad_empty_with_br||t.insert)&&n(r)){const e=new Of("br",1);t.insert&&e.attr("data-mce-bogus","1"),r.empty().append(e)}else r.empty().append(new Of("#text",3)).value=fo},tv=(e,t)=>{const n=null==e?void 0:e.firstChild;return x(n)&&n===e.lastChild&&n.name===t},nv=(e,t,n,r)=>r.isEmpty(t,n,t=>((e,t)=>{const n=e.getElementRule(t.name);return!0===(null==n?void 0:n.paddEmpty)})(e,t)),rv=e=>{let t;for(let n=e;n;n=n.parent){const e=n.attr("contenteditable");if("false"===e)break;"true"===e&&(t=n)}return B.from(t)},ov=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const e of r)n&&!t.isValidChild(n.name,e.name)&&ov(e,t,n);e.unwrap()}},iv=(e,t,n,r=C)=>{const o=t.getTextBlockElements(),i=t.getNonEmptyElements(),a=t.getWhitespaceElements(),s=Nt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,u=e=>e!==n&&!s[e.name];for(let n=0;n<e.length;n++){const s=e[n];let c,d,h;if(!s.parent||l.has(s))continue;if(o[s.name]&&"li"===s.parent.name){let e=s.next;for(;e&&o[e.name];)e.name="li",l.add(e),s.parent.insert(e,s.parent),e=e.next;s.unwrap();continue}const p=[s];for(c=s.parent;c&&!t.isValidChild(c.name,s.name)&&u(c);c=c.parent)p.push(c);if(c&&p.length>1)if(av(t,s,c))ov(s,t);else{p.reverse(),d=p[0].clone(),r(d);let e=d;for(let n=0;n<p.length-1;n++){t.isValidChild(e.name,p[n].name)&&n>0?(h=p[n].clone(),r(h),e.append(h)):h=e;for(let e=p[n].firstChild;e&&e!==p[n+1];){const t=e.next;h.append(e),e=t}e=h}nv(t,i,a,d)?c.insert(s,p[0],!0):(c.insert(d,p[0],!0),c.insert(s,d)),c=p[0],(nv(t,i,a,c)||tv(c,"br"))&&c.empty().remove()}else if(s.parent){if("li"===s.name){let e=s.prev;if(e&&("ul"===e.name||"ol"===e.name)){e.append(s);continue}if(e=s.next,e&&("ul"===e.name||"ol"===e.name)&&e.firstChild){e.insert(s,e.firstChild,!0);continue}const t=new Of("ul",1);r(t),s.wrap(t);continue}if(t.isValidChild(s.parent.name,"div")&&t.isValidChild("div",s.name)){const e=new Of("div",1);r(e),s.wrap(e)}else ov(s,t)}}},av=(e,t,n=t.parent)=>!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&("a"!==t.name||!((e,t)=>{let n=e;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n))&&(!(e=>"summary"===e.name)(n)||!$m(t)||(null==n?void 0:n.firstChild)===t&&(null==n?void 0:n.lastChild)===t)),sv=e=>e.collapsed?e:(e=>{const t=Hs.fromRangeStart(e),n=Hs.fromRangeEnd(e),r=e.commonAncestorContainer;return bd(!1,r,n).map(o=>!jc(t,n,r)&&jc(t,o,r)?((e,t,n,r)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,r),o})(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)})(e),lv=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},uv=(e,t)=>{const n=Hs.after(e),r=gd(t).prev(n);return r?r.toRange():null},cv=(e,t,n,r)=>{const o=((e,t,n)=>{const r=t.serialize(n);return(e=>{var t,n;const r=e.firstChild,o=e.lastChild;return r&&"META"===r.nodeName&&(null===(t=r.parentNode)||void 0===t||t.removeChild(r)),o&&"mce_marker"===o.id&&(null===(n=o.parentNode)||void 0===n||n.removeChild(o)),e})(e.createFragment(r))})(t,e,r),i=lv(t,n.startContainer),a=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||x(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&(e=>e.data===fo||no(e))(t.firstChild))?e.slice(0,-1):e;var t,n})((s=o.firstChild,X(null!==(l=null==s?void 0:s.childNodes)&&void 0!==l?l:[],e=>"LI"===e.nodeName)));var s,l;const u=t.getRoot(),c=e=>{const r=Hs.fromRangeStart(n),o=gd(t.getRoot()),a=1===e?o.prev(r):o.next(r),s=null==a?void 0:a.getNode();return!s||lv(t,s)!==i};return i?c(1)?((e,t,n)=>{const r=e.parentNode;return r&&Nt.each(t,t=>{r.insertBefore(t,e)}),((e,t)=>{const n=Hs.before(e),r=gd(t).next(n);return r?r.toRange():null})(e,n)})(i,a,u):c(2)?((e,t,n,r)=>(r.insertAfter(t.reverse(),e),uv(t[0],n)))(i,a,u,t):((e,t,n,r)=>{const o=((e,t)=>{const n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]})(e,r),i=e.parentNode;return i&&(i.insertBefore(o[0],e),Nt.each(t,t=>{i.insertBefore(t,e)}),i.insertBefore(o[1],e),i.removeChild(e)),uv(t[t.length-1],n)})(i,a,u,n):null},dv=["pre"],hv=ao,pv=(e,t,n)=>{var r,o;const i=e.selection,a=e.dom,s=e.parser,l=n.merge,u=eg({validate:!0},e.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=Po(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,c);let d=i.getRng();const h=d.startContainer,p=e.getBody();h===p&&i.isCollapsed()&&a.isBlock(p.firstChild)&&((e,t)=>x(t)&&!e.schema.getVoidElements()[t.nodeName])(e,p.firstChild)&&a.isEmpty(p.firstChild)&&(d=a.createRng(),d.setStart(p.firstChild,0),d.setEnd(p.firstChild,0),i.setRng(d)),i.isCollapsed()||(e=>{const t=e.dom,n=sv(e.selection.getRng());e.selection.setRng(n);const r=t.getParent(n.startContainer,hv);((e,t,n)=>!!x(n)&&n===e.getParent(t.endContainer,hv)&&Kd(yn(n),t))(t,n,r)?Fm(e,n,yn(r)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&$r(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)})(e);const f=i.getNode(),g={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},m=s.parse(t,g);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),((e,t)=>{const n=e.getNonEmptyElements();return x(t)&&(t.isEmpty(n)||((e,t)=>e.getBlockElements()[t.name]&&(e=>x(e.firstChild)&&e.firstChild===e.lastChild)(t)&&(e=>"br"===e.name||e.value===fo)(t.firstChild))(e,t))})(e,r)&&(r=null==r?void 0:r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)})(e.schema,m)&&((e,t)=>!!lv(e,t))(a,f))return d=cv(u,a,i.getRng(),m),d&&i.setRng(d),t;!0===n.paste&&((e,t,n,r)=>{var o;const i=t.firstChild,a=t.lastChild,s=i===("bookmark"===a.attr("data-mce-type")?a.prev:a),l=W(dv,i.name);if(s&&l){const t="false"!==i.attr("contenteditable"),a=(null===(o=e.getParent(n,e.isBlock))||void 0===o?void 0:o.nodeName.toLowerCase())===i.name,s=B.from(Ym(r,n)).forall(oo);return t&&a&&s}return!1})(a,m,f,e.getBody())&&(null===(r=m.firstChild)||void 0===r||r.unwrap()),(e=>{let t=e;for(;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")})(m);let v=m.lastChild;if(v&&"mce_marker"===v.attr("id")){const t=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!a.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(t,v,"br"===v.name);break}}if(e._selectionOverrides.showBlockCaretContainer(f),g.invalid||((e,t,n)=>{var r;return G(n.children(),$m)&&"SUMMARY"===(null===(r=e.getParent(t,e.isBlock))||void 0===r?void 0:r.nodeName)})(a,f,m)){e.selection.setContent(c);let n,r=i.getNode();const l=e.getBody();for(eo(r)?r=n=l:n=r;n&&n!==l;)r=n,n=n.parentNode;t=r===l?l.innerHTML:a.getOuterHTML(r);const d=s.parse(t),h=(e=>{for(let t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return B.some(t);return B.none()})(d),p=h.bind(rv).getOr(d);h.each(e=>e.replace(m));const f=m.children(),g=null!==(o=m.parent)&&void 0!==o?o:d;m.unwrap();const v=X(f,t=>av(e.schema,t,g));iv(v,e.schema,p),Qm(s.getNodeFilters(),s.getAttributeFilters(),d),t=u.serialize(d),r===l?a.setHTML(l,t):a.setOuterHTML(r,t)}else t=u.serialize(m),((e,t,n)=>{var r;if("all"===n.getAttribute("data-mce-bogus"))null===(r=n.parentNode)||void 0===r||r.insertBefore(e.dom.createFragment(t),n);else{const r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}})(e,t,f);var y;return((e,t)=>{const n=e.schema.getTextInlineElements(),r=e.dom;if(t){const t=e.getBody(),o=Zm(e);Nt.each(r.select("*[data-mce-fragment]"),e=>{if(x(n[e.nodeName.toLowerCase()])&&((e,t)=>ne(rg(e,t),e=>!(e=>tg.has(e))(e)))(r,e))for(let n=e.parentElement;x(n)&&n!==t&&!og(r,e,n);n=n.parentElement)if(o.compare(n,e)){r.remove(e,!0);break}})}})(e,l),((e,t)=>{var n,r,o;let i;const a=e.dom,s=e.selection;if(!t)return;s.scrollIntoView(t);const l=Ym(e.getBody(),t);if(l&&"false"===a.getContentEditable(l))return a.remove(t),void s.select(l);let u=a.createRng();const c=t.previousSibling;if($r(c)){u.setStart(c,null!==(r=null===(n=c.nodeValue)||void 0===n?void 0:n.length)&&void 0!==r?r:0);const e=t.nextSibling;$r(e)&&(c.appendData(e.data),null===(o=e.parentNode)||void 0===o||o.removeChild(e))}else u.setStartBefore(t),u.setEndBefore(t);const d=a.getParent(t,a.isBlock);if(a.remove(t),d&&a.isEmpty(d)){const t=hv(d);yr(yn(d)),u.setStart(d,0),u.setEnd(d,0),t||(e=>!!e.getAttribute("data-mce-fragment"))(d)||!(i=(t=>{let n=Hs.fromRangeStart(t);return n=gd(e.getBody()).next(n),null==n?void 0:n.toRange()})(u))?a.add(d,a.create("br",t?{}:{"data-mce-bogus":"1"})):(u=i,a.remove(d))}s.setRng(u)})(e,a.get("mce_marker")),y=e.getBody(),Nt.each(y.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")}),((e,t,n)=>{B.from(e.getParent(t,"td,th")).map(yn).each(e=>((e,t)=>{Bn(e).each(n=>{Dn(n).each(r=>{t.isBlock(Ht(e))&&xo(n)&&t.isBlock(Ht(r))&&br(n)})})})(e,n))})(a,i.getStart(),e.schema),((e,t,n)=>{const r=An(yn(n),e=>wn(e,yn(t)));se(r,r.length-2).filter(jt).fold(()=>_i(e,t),t=>_i(e,t.dom))})(e.schema,e.getBody(),i.getStart()),t},fv=e=>e instanceof Of,gv=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),!0!==n&&(e=>{bf(e)&&Md(e.getBody()).each(t=>{const n=t.getNode(),r=qr(n)?Md(n).getOr(t):t;e.selection.setRng(r.toRange())})})(e)},mv=e=>_(e)?e:E,vv=(e,t,n)=>{const r=t(e),o=mv(n);return r.orThunk(()=>o(e)?B.none():((e,t,n)=>{let r=e.dom;const o=mv(n);for(;r.parentNode;){r=r.parentNode;const e=yn(r),n=t(e);if(n.isSome())return n;if(o(e))break}return B.none()})(e,t,o))},yv=hh,bv=(e,t,n)=>{const r=e.formatter.get(n);if(r)for(let n=0;n<r.length;n++){const o=r[n];if(bh(o)&&!1===o.inherit&&e.dom.is(t,o.selector))return!0}return!1},xv=(e,t,n,r,o)=>{const i=e.dom.getRoot();if(t===i)return!1;const a=e.dom.getParent(t,t=>!!bv(e,t,n)||t.parentNode===i||!!Sv(e,t,n,r,!0));return!!Sv(e,a,n,r,o)},_v=(e,t,n)=>!(!xh(n)||!yv(t,n.inline))||!(!yh(n)||!yv(t,n.block))||!!bh(n)&&Vr(t)&&e.is(t,n.selector),wv=(e,t,n,r,o,i)=>{const a=n[r],s="attributes"===r;if(_(n.onmatch))return n.onmatch(t,n,r);if(a)if(Te(a)){for(let n=0;n<a.length;n++)if(s?e.getAttrib(t,a[n]):fh(e,t,a[n]))return!0}else for(const r in a)if(Se(a,r)){const l=s?e.getAttrib(t,r):fh(e,t,r),u=dh(a[r],i),c=b(l)||Ze(l);if(c&&b(u))continue;if(o&&c&&!n.exact)return!1;if((!o||n.exact)&&!yv(l,ph(u,r)))return!1}return!0},Sv=(e,t,n,r,o)=>{const i=e.formatter.get(n),a=e.dom;if(i&&Vr(t))for(let n=0;n<i.length;n++){const s=i[n];if(_v(e.dom,t,s)&&wv(a,t,s,"attributes",o,r)&&wv(a,t,s,"styles",o,r)){const n=s.classes;if(n)for(let o=0;o<n.length;o++)if(!e.dom.hasClass(t,dh(n[o],r)))return;return s}}},Cv=(e,t,n,r,o)=>{if(r)return xv(e,r,t,n,o);if(r=e.selection.getNode(),xv(e,r,t,n,o))return!0;const i=e.selection.getStart();return!(i===r||!xv(e,i,t,n,o))},Mv=Ao,Tv=e=>{if(e){const t=new Br(e,e);for(let e=t.current();e;e=t.next())if($r(e))return e}return null},kv=e=>{const t=mn("span");return Jt(t,{id:kd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&gr(t,vn(Mv)),t},Iv=(e,t,n)=>{const r=e.dom,o=e.selection;if(wh(t))im(e,!1,yn(t),n,!0);else{const e=o.getRng(),n=r.getParent(t,r.isBlock),i=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset,u=(e=>{const t=Tv(e);return t&&t.data.charAt(0)===Mv&&t.deleteData(0,1),t})(t);r.remove(t,!0),i===u&&a>0&&e.setStart(u,a-1),s===u&&l>0&&e.setEnd(u,l-1),n&&r.isEmpty(n)&&Io(yn(n)),o.setRng(e)}},Av=(e,t,n)=>{const r=e.dom,o=e.selection;if(t)Iv(e,t,n);else if(!(t=Ad(e.getBody(),o.getStart())))for(;t=r.get(kd);)Iv(e,t,n)},Dv=(e,t)=>(e.appendChild(t),t),Pv=(e,t)=>{var n;const r=Z(e,(e,t)=>Dv(e,t.cloneNode(!1)),t),o=null!==(n=r.ownerDocument)&&void 0!==n?n:document;return Dv(r,o.createTextNode(Mv))},Lv=(e,t,n,r)=>{const a=e.dom,s=e.selection;let l=!1;const u=e.formatter.get(t);if(!u)return;const c=s.getRng(),d=c.startContainer,h=c.startOffset;let p=d;$r(d)&&(h!==d.data.length&&(l=!0),p=p.parentNode);const f=[];let m;for(;p;){if(Sv(e,p,t,n,r)){m=p;break}p.nextSibling&&(l=!0),f.push(p),p=p.parentNode}if(m)if(l){const o=s.getBookmark();c.collapse(!0);let i=zh(a,c,u,!0);i=Ip(i),e.formatter.remove(t,n,i,r),s.moveToBookmark(o)}else{const l=Ad(e.getBody(),m),u=x(l)?a.getParents(m.parentNode,O,l):[],c=kv(!1).dom;((e,t,n)=>{var r,o;const i=e.dom,a=i.getParent(n,D(sh,e.schema));a&&i.isEmpty(a)?null===(r=n.parentNode)||void 0===r||r.replaceChild(t,n):((e=>{const t=Er(e,"br"),n=X((e=>{const t=[];let n=e.dom;for(;n;)t.push(yn(n)),n=n.lastChild;return t})(e).slice(-1),xo);t.length===n.length&&j(n,br)})(yn(n)),i.isEmpty(n)?null===(o=n.parentNode)||void 0===o||o.replaceChild(t,n):i.insertAfter(t,n))})(e,c,null!=l?l:m);const d=((e,t,n,r,a,s)=>{const l=e.formatter,u=e.dom,c=X(he(l.get()),e=>e!==r&&!He(e,"removeformat")),d=((e,t,n)=>$(n,(n,r)=>{const o=((e,t)=>vh(e,t,e=>{const t=e=>_(e)||e.length>1&&"%"===e.charAt(0);return G(["styles","attributes"],n=>we(e,n).exists(e=>{const n=g(e)?e:_e(e);return G(n,t)}))}))(e,r);return e.formatter.matchNode(t,r,{},o)?n.concat([r]):n},[]))(e,n,c);if(X(d,t=>!((e,t,n)=>{const r=["inline","block","selector","attributes","styles","classes"],a=e=>be(e,(e,t)=>G(r,e=>e===t));return vh(e,t,t=>{const r=a(t);return vh(e,n,e=>{const t=a(e);return((e,t,n=i)=>o(n).eq(e,t))(r,t)})})})(e,t,r)).length>0){const e=n.cloneNode(!1);return u.add(t,e),l.remove(r,a,e,s),u.remove(e),B.some(e)}return B.none()})(e,c,m,t,n,r),h=Pv([...f,...d.toArray(),...u],c);l&&Iv(e,l,x(l)),s.setCursorLocation(h,1),a.isEmpty(m)&&a.remove(m)}},Nv=e=>{const t=kv(!1),n=Pv(e,t.dom);return{caretContainer:t,caretPosition:Hs(n,0)}},Rv=(e,t)=>{const{caretContainer:n,caretPosition:r}=Nv(t);return hr(yn(e),n),br(yn(e)),r},Ev=(e,t)=>{if(Id(t.dom))return!1;const n=e.schema.getTextInlineElements();return Se(n,Ht(t))&&!Id(t.dom)&&!Yr(t.dom)},Ov={},Bv=Gr(["pre"]);((e,t)=>{Ov[e]||(Ov[e]=[]),Ov[e].push(e=>{if(!e.selection.getRng().collapsed){const t=e.selection.getSelectedBlocks(),n=X(X(t,Bv),(e=>t=>{const n=t.previousSibling;return Bv(n)&&W(e,n)})(t));j(n,e=>{((e,t)=>{const n=yn(t),r=Mn(n).dom;br(n),vr(yn(e),[mn("br",r),mn("br",r),...Rn(n)])})(e.previousSibling,e)})}})})("pre");const zv=["fontWeight","fontStyle","color","fontSize","fontFamily"],Fv=(e,t)=>{const n=e.get(t);return g(n)?J(n,e=>xh(e)&&"span"===e.inline&&(e=>p(e.styles)&&G(he(e.styles),e=>W(zv,e)))(e)):B.none()},Vv=(e,t)=>Cd(t,Hs.fromRangeStart(e)).isNone(),Hv=(e,t)=>!1===Sd(t,Hs.fromRangeEnd(e)).exists(e=>!no(e.getNode())||Sd(t,e).isSome()),Wv=e=>t=>uo(t)&&e.isEditable(t),Gv=e=>X(e.getSelectedBlocks(),Wv(e.dom)),Uv=Nt.each,jv=e=>Vr(e)&&!Hd(e)&&!Id(e)&&!Yr(e),Yv=(e,t)=>{for(let n=e;n;n=n[t]){if($r(n)&&Xe(n.data))return e;if(Vr(n)&&!Hd(n))return n}return e},qv=(e,t,n)=>{const r=Zm(e),o=Hr(t)&&e.dom.isEditable(t),i=Hr(n)&&e.dom.isEditable(n);if(o&&i){const o=Yv(t,"previousSibling"),i=Yv(n,"nextSibling");if(r.compare(o,i)){for(let e=o.nextSibling;e&&e!==i;){const t=e;e=e.nextSibling,o.appendChild(t)}return e.dom.remove(i),Nt.each(Nt.grep(i.childNodes),e=>{o.appendChild(e)}),o}}return n},Xv=(e,t,n,r)=>{var o;if(r&&!1!==t.merge_siblings){const t=null!==(o=qv(e,ah(r),r))&&void 0!==o?o:r;qv(e,t,ah(t,!0))}},Zv=(e,t,n)=>{Uv(e.childNodes,e=>{jv(e)&&(t(e)&&n(e),e.hasChildNodes()&&Zv(e,t,n))})},$v=(e,t)=>n=>!(!n||!fh(e,n,t)),Kv=(e,t,n)=>r=>{e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),((e,t)=>{"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)})(e,r)},Jv=hl([{keep:[]},{rename:["name"]},{removed:[]}]),Qv=/^(src|href|style)$/,ey=Nt.each,ty=hh,ny=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),ry=(e,t,n)=>{let r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(Vr(r)){const e=r.childNodes.length-1;!n&&o&&o--,r=r.childNodes[o>e?e:o]}return $r(r)&&n&&o>=r.data.length&&(r=new Br(r,e.getBody()).next()||r),$r(r)&&!n&&0===o&&(r=new Br(r,e.getBody()).prev()||r),r},oy=(e,t)=>{const n=t?"firstChild":"lastChild",r=e[n];return(e=>/^(TR|TH|TD)$/.test(e.nodeName))(e)&&r?"TR"===e.nodeName&&r[n]||r:e},iy=(e,t,n,r)=>{var o;const i=e.create(n,r);return null===(o=t.parentNode)||void 0===o||o.insertBefore(i,t),i.appendChild(t),i},ay=(e,t,n,r,o)=>{const i=yn(t),a=yn(e.create(r,o)),s=n?Nn(i):Ln(i);return vr(a,s),n?(hr(i,a),fr(a,i)):(pr(i,a),gr(a,i)),a.dom},sy=(e,t,n)=>{const r=t.parentNode;let o;const i=e.dom,a=Nl(e);yh(n)&&r===i.getRoot()&&(n.list_block&&ty(t,n.list_block)||j(ce(t.childNodes),t=>{lh(e,a,t.nodeName.toLowerCase())?o?o.appendChild(t):(o=iy(i,t,a),i.setAttribs(o,Rl(e))):o=null})),(e=>bh(e)&&xh(e)&&Rt(we(e,"mixed"),!0))(n)&&!ty(n.inline,t)||i.remove(t,!0)},ly=(e,t,n)=>w(e)?{name:t,value:null}:{name:e,value:dh(t,n)},uy=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},cy=(e,t,n,r,o)=>{let i=!1;ey(n.styles,(a,s)=>{const{name:l,value:u}=ly(s,a,r),c=ph(u,l);(n.remove_similar||m(u)||!Vr(o)||ty(fh(e,o,l),c))&&e.setStyle(t,l,""),i=!0}),i&&uy(e,t)},dy=(e,t,n,r,o)=>{const i=e.dom,a=Zm(e),s=e.schema;if(xh(t)&&Ci(s,t.inline)&&Ti(s,r)&&r.parentElement===e.getBody())return sy(e,r,t),Jv.removed();if(!t.ceFalseOverride&&r&&"false"===i.getContentEditableParent(r))return Jv.keep();if(r&&!_v(i,r,t)&&!((e,t)=>t.links&&"A"===e.nodeName)(r,t))return Jv.keep();const l=r,u=t.preserve_attributes;if(xh(t)&&"all"===t.remove&&g(u)){const e=X(i.getAttribs(l),e=>W(u,e.name.toLowerCase()));if(i.removeAllAttribs(l),j(e,e=>i.setAttrib(l,e.name,e.value)),e.length>0)return Jv.rename("span")}if("all"!==t.remove){cy(i,l,t,n,o),ey(t.attributes,(e,r)=>{const{name:a,value:s}=ly(r,e,n);if(t.remove_similar||m(s)||!Vr(o)||ty(i.getAttrib(o,a),s)){if("class"===a){const e=i.getAttrib(l,a);if(e){let t="";if(j(e.split(/\s+/),e=>{/mce\-\w+/.test(e)&&(t+=(t?" ":"")+e)}),t)return void i.setAttrib(l,a,t)}}if(Qv.test(a)&&l.removeAttribute("data-mce-"+a),"style"===a&&Gr(["li"])(l)&&"none"===i.getStyle(l,"list-style-type"))return l.removeAttribute(a),void i.setStyle(l,"list-style-type","none");"class"===a&&l.removeAttribute("className"),l.removeAttribute(a)}}),ey(t.classes,e=>{e=dh(e,n),Vr(o)&&!i.hasClass(o,e)||i.removeClass(l,e)});const e=i.getAttribs(l);for(let t=0;t<e.length;t++){const n=e[t].nodeName;if(!a.isAttributeInternal(n))return Jv.keep()}}return"none"!==t.remove?(sy(e,l,t),Jv.removed()):Jv.keep()},hy=(e,t,n,r)=>dy(e,t,n,r,r).fold(k(r),t=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,t)),k(null)),py=(e,t,n,r,o)=>{(r||e.selection.isEditable())&&((e,t,n,r,o)=>{const i=e.formatter.get(t),a=i[0],s=e.dom,l=e.selection,u=r=>{const s=((e,t,n,r,o)=>{let i;return t.parentNode&&j(mh(e.dom,t.parentNode).reverse(),t=>{if(!i&&Vr(t)&&"_start"!==t.id&&"_end"!==t.id){const a=Sv(e,t,n,r,o);a&&!1!==a.split&&(i=t)}}),i})(e,r,t,n,o);return((e,t,n,r,o,i,a,s)=>{var l,u;let c,d;const h=e.dom;if(n){const i=n.parentNode;for(let n=r.parentNode;n&&n!==i;n=n.parentNode){let r=h.clone(n,!1);for(let n=0;n<t.length&&(r=hy(e,t[n],s,r),null!==r);n++);r&&(c&&r.appendChild(c),d||(d=r),c=r)}a.mixed&&h.isBlock(n)||(r=null!==(l=h.split(n,r))&&void 0!==l?l:r),c&&d&&(null===(u=o.parentNode)||void 0===u||u.insertBefore(c,o),d.appendChild(o),xh(a)&&Xv(e,a,0,c))}return r})(e,i,s,r,r,0,a,n)},c=t=>G(i,r=>fy(e,r,n,t,t)),d=t=>{const n=ce(t.childNodes),r=c(t)||G(i,e=>_v(s,t,e)),o=t.parentNode;if(!r&&x(o)&&_h(a)&&c(o),a.deep&&n.length)for(let e=0;e<n.length;e++)d(n[e]);j(["underline","line-through","overline"],n=>{Vr(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&gh(s,t.parentNode)===n&&fy(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,t)})},h=e=>{const t=s.get(e?"_start":"_end");if(t){let n=t[e?"firstChild":"lastChild"];return(e=>Hd(e)&&Vr(e)&&("_start"===e.id||"_end"===e.id))(n)&&(n=n[e?"firstChild":"lastChild"]),$r(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),s.remove(t,!0),n}return null},p=t=>{let n,r,o=zh(s,t,i,t.collapsed);if(a.split){if(o=Ip(o),n=ry(e,o,!0),r=ry(e,o),n!==r){if(n=oy(n,!0),r=oy(r,!1),ny(s,n,r)){const e=B.from(n.firstChild).getOr(n);return u(ay(s,e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void h(!0)}if(ny(s,r,n)){const e=B.from(r.lastChild).getOr(r);return u(ay(s,e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void h(!1)}n=iy(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=iy(s,r,"span",{id:"_end","data-mce-type":"bookmark"});const e=s.createRng();e.setStartAfter(n),e.setEndBefore(r),Fh(s,e,e=>{j(e,e=>{Hd(e)||Hd(e.parentNode)||u(e)})}),u(n),u(r),n=h(!0),r=h()}else n=r=u(n);o.startContainer=n.parentNode?n.parentNode:n,o.startOffset=s.nodeIndex(n),o.endContainer=r.parentNode?r.parentNode:r,o.endOffset=s.nodeIndex(r)+1}Fh(s,o,e=>{j(e,d)})};if(r){if(nh(r)){const e=s.createRng();e.setStartBefore(r),e.setEndAfter(r),p(e)}else p(r);Xh(e,t,r,n)}else l.isCollapsed()&&xh(a)&&!qd(e).length?Lv(e,t,n,o):(oh(e,()=>eh(e,p),r=>xh(a)&&Cv(e,t,n,r)),e.nodeChanged()),((e,t,n)=>{"removeformat"===t?j(Gv(e.selection),t=>{j(zv,n=>e.dom.setStyle(t,n,"")),uy(e.dom,t)}):Fv(e.formatter,t).each(t=>{j(Gv(e.selection),r=>cy(e.dom,r,t,n,null))})})(e,t,n),Xh(e,t,r,n)})(e,t,n,r,o)},fy=(e,t,n,r,o)=>dy(e,t,n,r,o).fold(E,t=>(e.dom.rename(r,t),!0),O),gy=Nt.each,my=Nt.each,vy=(e,t,n,r)=>{if(my(n.styles,(n,o)=>{e.setStyle(t,o,dh(n,r))}),n.styles){const n=e.getAttrib(t,"style");n&&e.setAttrib(t,"data-mce-style",n)}},yy=(e,t,n,r)=>{const o=e.formatter.get(t),i=o[0],a=!r&&e.selection.isCollapsed(),s=e.dom,l=e.selection,u=(e,t=i)=>{_(t.onformat)&&t.onformat(e,t,n,r),vy(s,e,t,n),my(t.attributes,(t,r)=>{s.setAttrib(e,r,dh(t,n))}),my(t.classes,t=>{const r=dh(t,n);s.hasClass(e,r)||s.addClass(e,r)})},c=(e,t)=>{let n=!1;return my(e,e=>!(!bh(e)||("false"!==s.getContentEditable(t)||e.ceFalseOverride)&&(!x(e.collapsed)||e.collapsed===a)&&s.is(t,e.selector)&&!Id(t)&&(u(t,e),n=!0,1))),n},d=e=>{if(h(e)){const t=s.create(e);return u(t),t}return null},p=(r,a,s)=>{const l=[];let h=!0;const p=i.inline||i.block,f=d(p);Fh(r,a,a=>{let d;const g=a=>{let m=!1,v=h,y=!1;const b=a.parentNode,_=b.nodeName.toLowerCase(),w=r.getContentEditable(a);x(w)&&(v=h,h="true"===w,m=!0,y=ch(e,a));const S=h&&!m;if(no(a)&&!((e,t,n,r)=>{if(yu(e)&&xh(t)&&n.parentNode){const t=ia(e.schema),o=((e,t)=>((e,t)=>{const n=e.dom;return n.parentNode?((e,t)=>J(e.dom.childNodes,e=>t(yn(e))).map(yn))(yn(n.parentNode),n=>!wn(e,n)&&t(n)):B.none()})(e,t).isSome())(yn(n),e=>Id(e.dom));return Ce(t,r)&&di(yn(n.parentNode),!1)&&!o}return!1})(e,i,a,_))return d=null,void(yh(i)&&r.remove(a));if((r=>(e=>yh(e)&&!0===e.wrapper)(i)&&Sv(e,r,t,n))(a))d=null;else{if(((t,n,r)=>{const o=(e=>yh(e)&&!0!==e.wrapper)(i)&&sh(e.schema,t)&&lh(e,n,p);return r&&o})(a,_,S)){const e=r.rename(a,p);return u(e),l.push(e),void(d=null)}if(bh(i)){let e=c(o,a);if(!e&&x(b)&&_h(i)&&(e=c(o,b)),!xh(i)||e)return void(d=null)}x(f)&&((t,n,o,a)=>{const l=t.nodeName.toLowerCase(),u=lh(e,p,l)&&lh(e,n,p),c=!s&&$r(t)&&Do(t.data),d=Id(t),h=!xh(i)||!r.isBlock(t);return(o||a)&&u&&!c&&!d&&h})(a,_,S,y)?(d||(d=r.clone(f,!1),b.insertBefore(d,a),l.push(d)),y&&m&&(h=v),d.appendChild(a)):(d=null,j(ce(a.childNodes),g),m&&(h=v),d=null)}};j(a,g)}),!0===i.links&&j(l,e=>{const t=e=>{"A"===e.nodeName&&u(e,i),j(ce(e.childNodes),t)};t(e)}),j(l,a=>{const s=(e=>{let t=0;return j(e.childNodes,e=>{(e=>x(e)&&$r(e)&&0===e.length)(e)||Hd(e)||t++}),t})(a);!(l.length>1)&&r.isBlock(a)||0!==s?(xh(i)||yh(i)&&i.wrapper)&&(i.exact||1!==s||(a=(e=>J(e.childNodes,rh).filter(e=>"false"!==r.getContentEditable(e)&&_v(r,e,i)).map(t=>{const n=r.clone(t,!1);return u(n),r.replace(n,e,!0),r.remove(t,!0),n}).getOr(e))(a)),((e,t,n,r)=>{gy(t,t=>{xh(t)&&gy(e.dom.select(t.inline,r),r=>{jv(r)&&fy(e,t,n,r,t.exact?r:null)}),((e,t,n)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";Uv(e.select(r,n),n=>{jv(n)&&e.isEditable(n)&&Uv(t.styles,(t,r)=>{e.setStyle(n,r,"")})})}})(e.dom,t,r)})})(e,o,n,a),((e,t,n,r,o)=>{const i=o.parentNode;Sv(e,i,n,r)&&fy(e,t,r,o)||t.merge_with_parents&&i&&e.dom.getParent(i,i=>!!Sv(e,i,n,r)&&(fy(e,t,r,o),!0))})(e,i,t,n,a),((e,t,n,r)=>{if(t.styles&&t.styles.backgroundColor){const o=$v(e,"fontSize");Zv(r,t=>o(t)&&e.isEditable(t),Kv(e,"backgroundColor",dh(t.styles.backgroundColor,n)))}})(r,i,n,a),((e,t,n,r)=>{const o=t=>{if(Hr(t)&&Vr(t.parentNode)&&e.isEditable(t)){const n=gh(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Nt.walk(r,o,"childNodes"),o(r))})(r,i,0,a),((e,t,n,r)=>{if(xh(t)&&("sub"===t.inline||"sup"===t.inline)){const n=$v(e,"fontSize");Zv(r,t=>n(t)&&e.isEditable(t),Kv(e,"fontSize",""));const o=X(e.select("sup"===t.inline?"sub":"sup",r),e.isEditable);e.remove(o,!0)}})(r,i,0,a),Xv(e,i,0,a)):r.remove(a,!0)})},f=nh(r)?r:l.getNode();if("false"===s.getContentEditable(f)&&!ch(e,f))return c(o,r=f),void qh(e,t,r,n);if(i){if(r)if(nh(r)){if(!c(o,r)){const e=s.createRng();e.setStartBefore(r),e.setEndAfter(r),p(s,zh(s,e,o),!0)}}else p(s,r,!0);else a&&xh(i)&&!qd(e).length?((e,t,n)=>{let r;const o=e.selection,i=e.formatter.get(t);if(!i)return;const a=o.getRng();let s=a.startOffset;const l=a.startContainer.nodeValue;r=Ad(e.getBody(),o.getStart());const u=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&s>0&&s<l.length&&u.test(l.charAt(s))&&u.test(l.charAt(s-1))){const r=o.getBookmark();a.collapse(!0);let s=zh(e.dom,a,i);s=Ip(s),e.formatter.apply(t,n,s),o.moveToBookmark(r)}else{let i=r?Tv(r):null;r&&(null==i?void 0:i.data)===Mv||(c=e.getDoc(),d=kv(!0).dom,r=c.importNode(d,!0),i=r.firstChild,a.insertNode(r),s=1),e.formatter.apply(t,n,r),o.setCursorLocation(i,s)}var c,d})(e,t,n):(l.setRng(sv(l.getRng())),oh(e,()=>{eh(e,(e,t)=>{const n=t?e:zh(s,e,o);p(s,n,!1)})},O),e.nodeChanged()),Fv(e.formatter,t).each(t=>{j((e=>X((e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return Vv(n,t[0])&&Hv(n,t[0])?t:[];{const e=le(t).filter(e=>Vv(n,e)).toArray(),r=ue(t).filter(e=>Hv(n,e)).toArray(),o=t.slice(1,-1);return e.concat(o).concat(r)}})(e),Wv(e.dom)))(e.selection),e=>vy(s,e,t,n))});((e,t)=>{Se(Ov,e)&&j(Ov[e],e=>{e(t)})})(t,e)}qh(e,t,r,n)},by=(e,t,n,r)=>{(r||e.selection.isEditable())&&yy(e,t,n,r)},xy=e=>Se(e,"vars"),_y=e=>e.selection.getStart(),wy=(e,t,n,r,o)=>K(t,t=>{const i=e.formatter.matchNode(t,n,null!=o?o:{},r);return!y(i)},t=>!!bv(e,t,n)||!r&&x(e.formatter.matchNode(t,n,o,!0))),Sy=(e,t)=>{const n=null!=t?t:_y(e);return X(mh(e.dom,n),e=>Vr(e)&&!Yr(e))},Cy=(e,t,n)=>{const r=Sy(e,t);fe(n,(n,o)=>{const i=n=>{const i=wy(e,r,o,n.similar,xy(n)?n.vars:void 0),a=i.isSome();if(n.state.get()!==a){n.state.set(a);const e=i.getOr(t);xy(n)?n.callback(a,{node:e,format:o,parents:r}):j(n.callbacks,t=>t(a,{node:e,format:o,parents:r}))}};j([n.withSimilar,n.withoutSimilar],i),j(n.withVars,i)})},My=Nt.explode,Ty=()=>{const e={};return{addFilter:(t,n)=>{j(My(t),t=>{Se(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)})},getFilters:()=>_e(e),removeFilter:(t,n)=>{j(My(t),t=>{if(Se(e,t))if(x(n)){const r=e[t],o=X(r.callbacks,e=>e!==n);o.length>0?r.callbacks=o:delete e[t]}else delete e[t]})}}},ky=(e,t,n)=>{t.addNodeFilter("br",(t,r,o)=>{const i=Nt.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),s=n.getWhitespaceElements();i.body=1;const l=e=>e.name in i||Ii(n,e);for(let r=0,u=t.length;r<u;r++){let u=t[r],c=u.parent;if(c&&l(c)&&u===c.lastChild){let t=u.prev;for(;t;){const e=t.name;if("span"!==e||"bookmark"!==t.attr("data-mce-type")){"br"===e&&(u=null);break}t=t.prev}if(u&&(u.remove(),nv(n,a,s,c))){const t=n.getElementRule(c.name);t&&(t.removeEmpty?c.remove():t.paddEmpty&&ev(e,o,l,c))}}else{let e=u;for(;c&&c.firstChild===e&&c.lastChild===e&&(e=c,!i[c.name]);)c=c.parent;if(e===c){const e=new Of("#text",3);e.value=fo,u.replace(e)}}}})},Iy=e=>{const[t,...n]=e.split(","),r=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const e=";base64"===o[2],t=e?(e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""})(r):decodeURIComponent(r);return B.some({type:o[1],data:t,base64Encoded:e})}return B.none()},Ay=(e,t,n=!0)=>{let r=t;if(n)try{r=atob(t)}catch(e){return B.none()}const o=new Uint8Array(r.length);for(let e=0;e<o.length;e++)o[e]=r.charCodeAt(e);return B.some(new Blob([o],{type:e}))},Dy=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{var e;n(null===(e=r.error)||void 0===e?void 0:e.message)},r.readAsDataURL(e)});let Py=0;const Ly=(e,t,n)=>Iy(e).bind(({data:e,type:r,base64Encoded:o})=>{if(t&&!o)return B.none();{const t=o?e:btoa(e);return n(t,r)}}),Ny=(e,t,n)=>{const r=e.create("blobid"+Py++,t,n);return e.add(r),r},Ry=(e,t,n=!1)=>Ly(t,n,(t,n)=>B.from(e.getByData(t,n)).orThunk(()=>Ay(n,t).map(n=>Ny(e,n,t)))),Ey=(e,t)=>We(e,`${t}/`),{entries:Oy,setPrototypeOf:By,isFrozen:zy,getPrototypeOf:Fy,getOwnPropertyDescriptor:Vy}=Object;let{freeze:Hy,seal:Wy,create:Gy}=Object,{apply:Uy,construct:jy}="undefined"!=typeof Reflect&&Reflect;Uy||(Uy=function(e,t,n){return e.apply(t,n)}),Hy||(Hy=function(e){return e}),Wy||(Wy=function(e){return e}),jy||(jy=function(e,t){return new e(...t)});const Yy=ob(Array.prototype.forEach),qy=ob(Array.prototype.pop),Xy=ob(Array.prototype.push),Zy=ob(String.prototype.toLowerCase),$y=ob(String.prototype.toString),Ky=ob(String.prototype.match),Jy=ob(String.prototype.replace),Qy=ob(String.prototype.indexOf),eb=ob(String.prototype.trim),tb=ob(RegExp.prototype.test),nb=(rb=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jy(rb,t)});var rb;function ob(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Uy(e,t,r)}}function ib(e,t,n){var r;n=null!==(r=n)&&void 0!==r?r:Zy,By&&By(e,null);let o=t.length;for(;o--;){let r=t[o];if("string"==typeof r){const e=n(r);e!==r&&(zy(t)||(t[o]=e),r=e)}e[r]=!0}return e}function ab(e){const t=Gy(null);for(const[n,r]of Oy(e))t[n]=r;return t}function sb(e,t){for(;null!==e;){const n=Vy(e,t);if(n){if(n.get)return ob(n.get);if("function"==typeof n.value)return ob(n.value)}e=Fy(e)}return function(e){return console.warn("fallback value for",e),null}}const lb=Hy(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ub=Hy(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),cb=Hy(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),db=Hy(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hb=Hy(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pb=Hy(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fb=Hy(["#text"]),gb=Hy(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),mb=Hy(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vb=Hy(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yb=Hy(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bb=Wy(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xb=Wy(/<%[\w\W]*|[\w\W]*%>/gm),_b=Wy(/\${[\w\W]*}/gm),wb=Wy(/^data-[\-\w.\u00B7-\uFFFF]/),Sb=Wy(/^aria-[\-\w]+$/),Cb=Wy(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Mb=Wy(/^(?:\w+script|data):/i),Tb=Wy(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kb=Wy(/^html$/i);var Ib=Object.freeze({__proto__:null,MUSTACHE_EXPR:bb,ERB_EXPR:xb,TMPLIT_EXPR:_b,DATA_ATTR:wb,ARIA_ATTR:Sb,IS_ALLOWED_URI:Cb,IS_SCRIPT_OR_DATA:Mb,ATTR_WHITESPACE:Tb,DOCTYPE_NAME:kb});const Ab=()=>"undefined"==typeof window?null:window;var Db=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ab();const n=t=>e(t);if(n.version="3.0.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const r=t.document,o=r.currentScript;let{document:i}=t;const{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:u,NodeFilter:c,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:f}=t,g=u.prototype,m=sb(g,"cloneNode"),v=sb(g,"nextSibling"),y=sb(g,"childNodes"),b=sb(g,"parentNode");if("function"==typeof s){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let x,_="";const{implementation:w,createNodeIterator:S,createDocumentFragment:C,getElementsByTagName:M}=i,{importNode:T}=r;let k={};n.isSupported="function"==typeof Oy&&"function"==typeof b&&w&&void 0!==w.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:A,TMPLIT_EXPR:D,DATA_ATTR:P,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:R}=Ib;let{IS_ALLOWED_URI:E}=Ib,O=null;const B=ib({},[...lb,...ub,...cb,...hb,...fb]);let z=null;const F=ib({},[...gb,...mb,...vb,...yb]);let V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,W=null,G=!0,U=!0,j=!1,Y=!0,q=!1,X=!1,Z=!1,$=!1,K=!1,J=!1,Q=!1,ee=!0,te=!1,ne=!0,re=!1,oe={},ie=null;const ae=ib({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let se=null;const le=ib({},["audio","video","img","source","image","track"]);let ue=null;const ce=ib({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",he="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml";let fe=pe,ge=!1,me=null;const ve=ib({},[de,he,pe],$y);let ye;const be=["application/xhtml+xml","text/html"];let xe,_e=null;const we=i.createElement("form"),Se=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){if(!_e||_e!==e){if(e&&"object"==typeof e||(e={}),e=ab(e),ye=ye=-1===be.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,xe="application/xhtml+xml"===ye?$y:Zy,O="ALLOWED_TAGS"in e?ib({},e.ALLOWED_TAGS,xe):B,z="ALLOWED_ATTR"in e?ib({},e.ALLOWED_ATTR,xe):F,me="ALLOWED_NAMESPACES"in e?ib({},e.ALLOWED_NAMESPACES,$y):ve,ue="ADD_URI_SAFE_ATTR"in e?ib(ab(ce),e.ADD_URI_SAFE_ATTR,xe):ce,se="ADD_DATA_URI_TAGS"in e?ib(ab(le),e.ADD_DATA_URI_TAGS,xe):le,ie="FORBID_CONTENTS"in e?ib({},e.FORBID_CONTENTS,xe):ae,H="FORBID_TAGS"in e?ib({},e.FORBID_TAGS,xe):{},W="FORBID_ATTR"in e?ib({},e.FORBID_ATTR,xe):{},oe="USE_PROFILES"in e&&e.USE_PROFILES,G=!1!==e.ALLOW_ARIA_ATTR,U=!1!==e.ALLOW_DATA_ATTR,j=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,q=e.SAFE_FOR_TEMPLATES||!1,X=e.WHOLE_DOCUMENT||!1,K=e.RETURN_DOM||!1,J=e.RETURN_DOM_FRAGMENT||!1,Q=e.RETURN_TRUSTED_TYPE||!1,$=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=e.SANITIZE_NAMED_PROPS||!1,ne=!1!==e.KEEP_CONTENT,re=e.IN_PLACE||!1,E=e.ALLOWED_URI_REGEXP||Cb,fe=e.NAMESPACE||pe,V=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Se(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(U=!1),J&&(K=!0),oe&&(O=ib({},[...fb]),z=[],!0===oe.html&&(ib(O,lb),ib(z,gb)),!0===oe.svg&&(ib(O,ub),ib(z,mb),ib(z,yb)),!0===oe.svgFilters&&(ib(O,cb),ib(z,mb),ib(z,yb)),!0===oe.mathMl&&(ib(O,hb),ib(z,vb),ib(z,yb))),e.ADD_TAGS&&(O===B&&(O=ab(O)),ib(O,e.ADD_TAGS,xe)),e.ADD_ATTR&&(z===F&&(z=ab(z)),ib(z,e.ADD_ATTR,xe)),e.ADD_URI_SAFE_ATTR&&ib(ue,e.ADD_URI_SAFE_ATTR,xe),e.FORBID_CONTENTS&&(ie===ae&&(ie=ab(ie)),ib(ie,e.FORBID_CONTENTS,xe)),ne&&(O["#text"]=!0),X&&ib(O,["html","head","body"]),O.table&&(ib(O,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw nb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw nb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=e.TRUSTED_TYPES_POLICY,_=x.createHTML("")}else void 0===x&&(x=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}}(f,o)),null!==x&&"string"==typeof _&&(_=x.createHTML(""));Hy&&Hy(e),_e=e}},Me=ib({},["mi","mo","mn","ms","mtext"]),Te=ib({},["foreignobject","desc","title","annotation-xml"]),ke=ib({},["title","style","font","a","script"]),Ie=ib({},ub);ib(Ie,cb),ib(Ie,db);const Ae=ib({},hb);ib(Ae,pb);const De=function(e){Xy(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Pe=function(e,t){try{Xy(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Xy(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!z[e])if(K||J)try{De(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Le=function(e){let t,n;if($)e="<remove></remove>"+e;else{const t=Ky(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===ye&&fe===pe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=x?x.createHTML(e):e;if(fe===pe)try{t=(new p).parseFromString(r,ye)}catch(e){}if(!t||!t.documentElement){t=w.createDocument(fe,"template",null);try{t.documentElement.innerHTML=ge?_:r}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),fe===pe?M.call(t,X?"html":"body")[0]:X?t.documentElement:o},Ne=function(e){return S.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},Re=function(e){return"object"==typeof l?e instanceof l:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Ee=function(e,t,r){k[e]&&Yy(k[e],e=>{e.call(n,t,r,_e)})},Oe=function(e){let t;if(Ee("beforeSanitizeElements",e,null),(r=e)instanceof h&&("string"!=typeof r.nodeName||"string"!=typeof r.textContent||"function"!=typeof r.removeChild||!(r.attributes instanceof d)||"function"!=typeof r.removeAttribute||"function"!=typeof r.setAttribute||"string"!=typeof r.namespaceURI||"function"!=typeof r.insertBefore||"function"!=typeof r.hasChildNodes))return De(e),!0;var r;const o=xe(e.nodeName);if(Ee("uponSanitizeElement",e,{tagName:o,allowedTags:O}),e.hasChildNodes()&&!Re(e.firstElementChild)&&(!Re(e.content)||!Re(e.content.firstElementChild))&&tb(/<[/\w]/g,e.innerHTML)&&tb(/<[/\w]/g,e.textContent))return De(e),!0;if(!O[o]||H[o]){if(!H[o]&&ze(o)){if(V.tagNameCheck instanceof RegExp&&tb(V.tagNameCheck,o))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(o))return!1}if(ne&&!ie[o]){const t=b(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r)t.insertBefore(m(n[r],!0),v(e))}return De(e),!0}return e instanceof u&&!function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:fe,tagName:"template"});const n=Zy(e.tagName),r=Zy(t.tagName);return!!me[e.namespaceURI]&&(e.namespaceURI===he?t.namespaceURI===pe?"svg"===n:t.namespaceURI===de?"svg"===n&&("annotation-xml"===r||Me[r]):Boolean(Ie[n]):e.namespaceURI===de?t.namespaceURI===pe?"math"===n:t.namespaceURI===he?"math"===n&&Te[r]:Boolean(Ae[n]):e.namespaceURI===pe?!(t.namespaceURI===he&&!Te[r])&&!(t.namespaceURI===de&&!Me[r])&&!Ae[n]&&(ke[n]||!Ie[n]):!("application/xhtml+xml"!==ye||!me[e.namespaceURI]))}(e)?(De(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!tb(/<\/no(script|embed|frames)/i,e.innerHTML)?(q&&3===e.nodeType&&(t=e.textContent,t=Jy(t,I," "),t=Jy(t,A," "),t=Jy(t,D," "),e.textContent!==t&&(Xy(n.removed,{element:e.cloneNode()}),e.textContent=t)),Ee("afterSanitizeElements",e,null),!1):(De(e),!0)},Be=function(e,t,n){if(ee&&("id"===t||"name"===t)&&(n in i||n in we))return!1;if(U&&!W[t]&&tb(P,t));else if(G&&tb(L,t));else if(!z[t]||W[t]){if(!(ze(e)&&(V.tagNameCheck instanceof RegExp&&tb(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&tb(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&tb(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(ue[t]);else if(tb(E,Jy(n,R,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Qy(n,"data:")||!se[e])if(j&&!tb(N,Jy(n,R,"")));else if(n)return!1;return!0},ze=function(e){return e.indexOf("-")>0},Fe=function(e){let t,n,r,o;Ee("beforeSanitizeAttributes",e,null);const{attributes:i}=e;if(!i)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(o=i.length;o--;){t=i[o];const{name:s,namespaceURI:l}=t;n="value"===s?t.value:eb(t.value);const u=n;if(r=xe(s),a.attrName=r,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,Ee("uponSanitizeAttribute",e,a),n=a.attrValue,a.forceKeepAttr)continue;if(!a.keepAttr){Pe(s,e);continue}if(!Y&&tb(/\/>/i,n)){Pe(s,e);continue}q&&(n=Jy(n,I," "),n=Jy(n,A," "),n=Jy(n,D," "));const c=xe(e.nodeName);if(Be(c,r,n)){if(!te||"id"!==r&&"name"!==r||(Pe(s,e),n="user-content-"+n),x&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(l);else switch(f.getAttributeType(c,r)){case"TrustedHTML":n=x.createHTML(n);break;case"TrustedScriptURL":n=x.createScriptURL(n)}if(n!==u)try{l?e.setAttributeNS(l,s,n):e.setAttribute(s,n)}catch(t){Pe(s,e)}}else Pe(s,e)}Ee("afterSanitizeAttributes",e,null)},Ve=function e(t){let n;const r=Ne(t);for(Ee("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)Ee("uponSanitizeShadowNode",n,null),Oe(n)||(n.content instanceof a&&e(n.content),Fe(n));Ee("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t,o,i,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ge=!e,ge&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Re(e)){if("function"!=typeof e.toString)throw nb("toString is not a function");if("string"!=typeof(e=e.toString()))throw nb("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Z||Ce(u),n.removed=[],"string"==typeof e&&(re=!1),re){if(e.nodeName){const t=xe(e.nodeName);if(!O[t]||H[t])throw nb("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)t=Le("\x3c!----\x3e"),o=t.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?t=o:t.appendChild(o);else{if(!K&&!q&&!X&&-1===e.indexOf("<"))return x&&Q?x.createHTML(e):e;if(t=Le(e),!t)return K?null:Q?_:""}t&&$&&De(t.firstChild);const c=Ne(re?e:t);for(;i=c.nextNode();)Oe(i)||(i.content instanceof a&&Ve(i.content),Fe(i));if(re)return e;if(K){if(J)for(s=C.call(t.ownerDocument);t.firstChild;)s.appendChild(t.firstChild);else s=t;return(z.shadowroot||z.shadowrootmode)&&(s=T.call(r,s,!0)),s}let d=X?t.outerHTML:t.innerHTML;return X&&O["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&tb(kb,t.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+d),q&&(d=Jy(d,I," "),d=Jy(d,A," "),d=Jy(d,D," ")),x&&Q?x.createHTML(d):d},n.setConfig=function(e){Ce(e),Z=!0},n.clearConfig=function(){_e=null,Z=!1},n.isValidAttribute=function(e,t,n){_e||Ce({});const r=xe(e),o=xe(t);return Be(r,o,n)},n.addHook=function(e,t){"function"==typeof t&&(k[e]=k[e]||[],Xy(k[e],t))},n.removeHook=function(e){if(k[e])return qy(k[e])},n.removeHooks=function(e){k[e]&&(k[e]=[])},n.removeAllHooks=function(){k={}},n}();const Pb=Nt.each,Lb=Nt.trim,Nb=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Rb={ftp:21,http:80,https:443,mailto:25},Eb=["img","video"],Ob=(e,t,n)=>{const r=(e=>{try{return decodeURIComponent(e)}catch(t){return unescape(e)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(r)||!e.allow_html_data_urls&&(/^data:image\//i.test(r)?((e,t)=>x(e)?!e:!x(t)||!W(Eb,t))(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)))};class Bb{static parseDataUri(e){let t;const n=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(n[0]);return r&&(t=r[1]),{type:t,data:n[1]}}static isDomSafe(e,t,n={}){if(n.allow_script_urls)return!0;{const r=$i.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Ob(n,r,t)}}static getDocumentBaseUrl(e){var t;let n;return n=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(e,t={}){this.path="",this.directory="",e=Lb(e),this.settings=t;const n=t.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const o=0===e.indexOf("//");if(0!==e.indexOf("/")||o||(e=(n&&n.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const t=n?n.path:new Bb(document.location.href).directory;if(""===(null==n?void 0:n.protocol))e="//mce_host"+r.toAbsPath(t,e);else{const o=/([^#?]*)([#?]?.*)/.exec(e);o&&(e=(n&&n.protocol||"http")+"://mce_host"+r.toAbsPath(t,o[1])+o[2])}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&Pb(Nb,(e,t)=>{let n=i[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),r[e]=n}),n&&(r.protocol||(r.protocol=n.protocol),r.userInfo||(r.userInfo=n.userInfo),r.port||"mce_host"!==r.host||(r.port=n.port),r.host&&"mce_host"!==r.host||(r.host=n.host),r.source=""),o&&(r.protocol="")}setPath(e){const t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const t=new Bb(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();const n=this.getURI(),r=t.getURI();if(n===r||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r)return n;let o=this.toRelPath(this.path,t.path);return t.query&&(o+="?"+t.query),t.anchor&&(o+="#"+t.anchor),o}toAbsolute(e,t){const n=new Bb(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const t=this.protocol?Rb[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}toRelPath(e,t){let n,r,o=0,i="";const a=e.substring(0,e.lastIndexOf("/")).split("/"),s=t.split("/");if(a.length>=s.length)for(n=0,r=a.length;n<r;n++)if(n>=s.length||a[n]!==s[n]){o=n+1;break}if(a.length<s.length)for(n=0,r=s.length;n<r;n++)if(n>=a.length||a[n]!==s[n]){o=n+1;break}if(1===o)return t;for(n=0,r=a.length-(o-1);n<r;n++)i+="../";for(n=o-1,r=s.length;n<r;n++)i+=n!==o-1?"/"+s[n]:s[n];return i}toAbsPath(e,t){let n=0;const r=/\/$/.test(t)?"/":"",o=e.split("/"),i=t.split("/"),a=[];Pb(o,e=>{e&&a.push(e)});const s=[];for(let e=i.length-1;e>=0;e--)0!==i[e].length&&"."!==i[e]&&(".."!==i[e]?n>0?n--:s.push(i[e]):n++);const l=a.length-n;let u;return u=l<=0?re(s).join("/"):a.slice(0,l).join("/")+"/"+re(s).join("/"),0!==u.indexOf("/")&&(u="/"+u),r&&u.lastIndexOf("/")!==u.length-1&&(u+=r),u}getURI(e=!1){let t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}}const zb=Nt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Fb="data-mce-type";let Vb=0;const Hb=(e,t,n,r,o)=>{var i,a,s,l;const u=t.validate,c=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(i=e.nodeValue)&&void 0!==i?i:"")&&(e.nodeValue=" "+e.nodeValue);const d=null!==(a=null==o?void 0:o.tagName)&&void 0!==a?a:e.nodeName.toLowerCase();if("html"!==r&&n.isValid(r))return void(x(o)&&(o.allowedTags[d]=!0));if(1!==e.nodeType||"body"===d)return;const p=yn(e),f=tn(p,Fb),g=Qt(p,"data-mce-bogus");if(!f&&h(g))return void("all"===g?br(p):xr(p));const m=n.getElementRule(d);if(!u||m){if(x(o)&&(o.allowedTags[d]=!0),u&&m&&!f){if(j(null!==(s=m.attributesForced)&&void 0!==s?s:[],e=>{Kt(p,e.name,"{$uid}"===e.value?"mce_"+Vb++:e.value)}),j(null!==(l=m.attributesDefault)&&void 0!==l?l:[],e=>{tn(p,e.name)||Kt(p,e.name,"{$uid}"===e.value?"mce_"+Vb++:e.value)}),m.attributesRequired&&!G(m.attributesRequired,e=>tn(p,e)))return void xr(p);if(m.removeEmptyAttrs&&(e=>{const t=e.dom.attributes;return null==t||0===t.length})(p))return void xr(p);m.outputName&&m.outputName!==d&&((e,t)=>{const n=((e,t)=>{const n=mn(t),r=rn(e);return Jt(n,r),n})(e,t);pr(e,n);const r=Rn(e);vr(n,r),br(e)})(p,m.outputName)}}else Se(c,d)?br(p):xr(p)},Wb=(e,t,n,r,o,i)=>"html"!==n&&!hi(r)||!(o in zb&&Ob(e,i,r))&&(!e.validate||t.isValid(r,o)||We(o,"data-")||We(o,"aria-")),Gb=(e,t)=>e.hasAttribute(Fb)&&("id"===t||"class"===t||"style"===t),Ub=(e,t)=>e in t.getBoolAttrs(),jb=(e,t,n,r)=>{const{attributes:o}=e;for(let i=o.length-1;i>=0;i--){const a=o[i],s=a.name,l=a.value;Wb(t,n,r,e.tagName.toLowerCase(),s,l)||Gb(e,s)?Ub(s,n)&&e.setAttribute(s,s):e.removeAttribute(s)}},Yb=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(e=>`xlink:${e}`),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};return Db().sanitize(e,n),e.innerHTML},qb=Nt.makeMap,Xb=Nt.extend,Zb=(e,t,n,r)=>{const o=e.name,i=o in n&&"title"!==o&&"textarea"!==o,a=t.childNodes;for(let t=0,o=a.length;t<o;t++){const o=a[t],s=new Of(o.nodeName.toLowerCase(),o.nodeType);if(Vr(o)){const e=o.attributes;for(let t=0,n=e.length;t<n;t++){const n=e[t];s.attr(n.name,n.value)}hi(s.name)&&(r(o),s.value=o.innerHTML)}else $r(o)?(s.value=o.data,i&&(s.raw=!0)):(Qr(o)||Kr(o)||Jr(o))&&(s.value=o.data);hi(s.name)||Zb(s,o,n,r),e.append(s)}},$b=(e={},t=sa())=>{const n=Ty(),r=Ty(),o={validate:!0,root_name:"body",sanitize:!0,...e},i=new DOMParser,a=((e,t)=>{const n=(()=>{let e=[];const t=()=>e[e.length-1];return{track:n=>{pi(n)&&e.push(n);let r=t();return r&&!r.contains(n)&&(e.pop(),r=t()),fi(r)},current:()=>fi(t()),reset:()=>{e=[]}}})();if(e.sanitize){const r=((e,t,n)=>{const r=Db();return r.addHook("uponSanitizeElement",(r,o)=>{Hb(r,e,t,n.track(r),o)}),r.addHook("uponSanitizeAttribute",(r,o)=>{((e,t,n,r,o)=>{const i=e.tagName.toLowerCase(),{attrName:a,attrValue:s}=o;o.keepAttr=Wb(t,n,r,i,a,s),o.keepAttr?(o.allowedAttributes[a]=!0,Ub(a,n)&&(o.attrValue=a),t.allow_svg_data_urls&&We(s,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Gb(e,a)&&(o.forceKeepAttr=!0)})(r,e,t,n.current(),o)}),r})(e,t,n),o=(t,o)=>{r.sanitize(t,((e,t)=>{const n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(e,o)),r.removed=[],n.reset()};return{sanitizeHtmlElement:o,sanitizeNamespaceElement:Yb}}return{sanitizeHtmlElement:(r,o)=>{const i=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let a;for(;a=i.nextNode();){const r=n.track(a);Hb(a,e,t,r),Vr(a)&&jb(a,e,t,r)}n.reset()},sanitizeNamespaceElement:C}})(o,t),s=n.addFilter,l=n.getFilters,u=n.removeFilter,c=r.addFilter,d=r.getFilters,p=r.removeFilter,f=(e,n)=>{const r=h(n.attr(Fb)),o=1===n.type&&!Se(e,n.name)&&!Ii(t,n)&&!hi(n.name);return 3===n.type||o&&!r},g={schema:t,addAttributeFilter:c,getAttributeFilters:d,removeAttributeFilter:p,addNodeFilter:s,getNodeFilters:l,removeNodeFilter:u,parse:(e,n={})=>{var r;const s=o.validate,u=null!==(r=n.context)&&void 0!==r?r:o.root_name,c=((e,n,r="html")=>{const o="xhtml"===r?"application/xhtml+xml":"text/html",s=Se(t.getSpecialElements(),n.toLowerCase()),l=s?`<${n}>${e}</${n}>`:e,u="xhtml"===r?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${l}</body></html>`:`<body>${l}</body>`,c=i.parseFromString(u,o).body;return a.sanitizeHtmlElement(c,o),s?c.firstChild:c})(e,u,n.format);_i(t,c);const h=new Of(u,11);Zb(h,c,t.getSpecialElements(),a.sanitizeNamespaceElement),c.innerHTML="";const[p,g]=((e,t,n,r)=>{const o=n.validate,i=t.getNonEmptyElements(),a=t.getWhitespaceElements(),s=Xb(qb("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=ia(t),u=/[ \t\r\n]+/g,c=/^[ \t\r\n]+/,d=/[ \t\r\n]+$/,h=e=>{let t=e.parent;for(;x(t);){if(t.name in a)return!0;t=t.parent}return!1},p=n=>n.name in s||Ii(t,n)||hi(n.name)&&n.parent===e,f=(t,n)=>{const o=n?t.prev:t.next;return!x(o)&&!b(t.parent)&&p(t.parent)&&(t.parent!==e||!0===r.isRootContent)};return[e=>{var t;if(3===e.type&&!h(e)){let n=null!==(t=e.value)&&void 0!==t?t:"";n=n.replace(u," "),(((e,t)=>x(e)&&(t(e)||"br"===e.name))(e.prev,p)||f(e,!0))&&(n=n.replace(c,"")),0===n.length?e.remove():e.value=n}},e=>{var s;if(1===e.type){const s=t.getElementRule(e.name);if(o&&s){const o=nv(t,i,a,e);s.paddInEmptyBlock&&o&&(e=>{let n=e;for(;x(n);){if(n.name in l)return nv(t,i,a,n);n=n.parent}return!1})(e)?ev(n,r,p,e):s.removeEmpty&&o?p(e)?e.remove():e.unwrap():s.paddEmpty&&(o||(e=>{var t;return tv(e,"#text")&&(null===(t=null==e?void 0:e.firstChild)||void 0===t?void 0:t.value)===fo})(e))&&ev(n,r,p,e)}}else if(3===e.type&&!h(e)){let t=null!==(s=e.value)&&void 0!==s?s:"";(e.next&&p(e.next)||f(e,!1))&&(t=t.replace(d,"")),0===t.length?e.remove():e.value=t}}]})(h,t,o,n),m=[],v=s?e=>((e,n)=>{av(t,e)&&n.push(e)})(e,m):C,y={nodes:{},attributes:{}},_=e=>Km(l(),d(),e,y);if(((e,t,n)=>{const r=[];for(let n=e,o=n;n;o=n,n=n.walk()){const i=n;j(t,e=>e(i)),b(i.parent)&&i!==e?n=o:r.push(i)}for(let e=r.length-1;e>=0;e--){const t=r[e];j(n,e=>e(t))}})(h,[p,_],[g,v]),m.reverse(),s&&m.length>0)if(n.context){const{pass:e,fail:r}=q(m,e=>e.parent===h);iv(r,t,h,_),n.invalid=e.length>0}else iv(m,t,h,_);const w=((e,t)=>{var n;const r=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===r?"":!0===r?"p":r})(o,n);return w&&("body"===h.name||n.isRootContent)&&((e,n)=>{const r=Xb(qb("script,style,head,html,body,title,meta,param"),t.getBlockElements()),i=/^[ \t\r\n]+/,a=/[ \t\r\n]+$/;let s=e.firstChild,l=null;const u=e=>{var t,n;e&&(s=e.firstChild,s&&3===s.type&&(s.value=null===(t=s.value)||void 0===t?void 0:t.replace(i,"")),s=e.lastChild,s&&3===s.type&&(s.value=null===(n=s.value)||void 0===n?void 0:n.replace(a,"")))};if(t.isValidChild(e.name,n.toLowerCase())){for(;s;){const t=s.next;f(r,s)?(l||(l=new Of(n,1),l.attr(o.forced_root_block_attrs),e.insert(l,s)),l.append(s)):(u(l),l=null),s=t}u(l)}})(h,w),n.invalid||Jm(y,n),h}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&ky(t,e,n),e.addAttributeFilter("href",e=>{let n=e.length;const r=e=>{const t=e?Nt.trim(e):"";return/\b(noopener)\b/g.test(t)?t:(e=>e.split(" ").filter(e=>e.length>0).concat(["noopener"]).sort().join(" "))(t)};if(!t.allow_unsafe_link_target)for(;n--;){const t=e[n];"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",r(t.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",e=>{let t,n,r,o,i=e.length;for(;i--;)if(o=e[i],"a"===o.name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;t&&r;)n=t.prev,r.insert(t,o),t=n}),t.fix_list_elements&&e.addNodeFilter("ul,ol",e=>{let t,n,r=e.length;for(;r--;)if(t=e[r],n=t.parent,n&&("ul"===n.name||"ol"===n.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{const e=new Of("li",1);e.attr("style","list-style-type: none"),t.wrap(e)}});const r=n.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",e=>{var t;let n=e.length;for(;n--;){const o=e[n],i=null!==(t=o.attr("class"))&&void 0!==t?t:"",a=Nt.explode(i," ");let s="";for(let e=0;e<a.length;e++){const t=a[e];let n=!1,i=r["*"];i&&i[t]&&(n=!0),i=r[o.name],!n&&i&&i[t]&&(n=!0),n&&(s&&(s+=" "),s+=t)}s.length||(s=null),o.attr("class",s)}}),((e,t)=>{const{blob_cache:n}=t;if(n){const t=e=>{const t=e.attr("src");(e=>e.attr("src")===At.transparentSrc||x(e.attr("data-mce-placeholder")))(e)||(e=>x(e.attr("data-mce-bogus")))(e)||b(t)||Ry(n,t,!0).each(t=>{e.attr("src",t.blobUri())})};e.addAttributeFilter("src",e=>j(e,t))}})(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",e=>j(e,e=>{e.replace(((e,t,n,r,o)=>{let i;i=y(e)?"iframe":Ey(e,"image")?"img":Ey(e,"video")?"video":Ey(e,"audio")?"audio":"iframe";const a=new Of(i,1);return a.attr("audio"===i?{src:t}:{src:t,width:n,height:r}),"audio"!==i&&"video"!==i||a.attr("controls",""),"iframe"===i&&o&&a.attr("sandbox",""),a})(e.attr("type"),"object"===e.name?e.attr("data"):e.attr("src"),e.attr("width"),e.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",e=>j(e,e=>e.attr("sandbox","")))})(g,o),((e,t,n)=>{t.inline_styles&&((e,t,n)=>{var r;const o=va();t.convert_fonts_to_spans&&((e,t,n)=>{e.addNodeFilter("font",e=>{j(e,e=>{const r=t.parse(e.attr("style")),o=e.attr("color"),i=e.attr("face"),a=e.attr("size");o&&(r.color=o),i&&(r["font-family"]=i),a&&$e(a).each(e=>{r["font-size"]=n[e-1]}),e.name="span",e.attr("style",t.serialize(r)),((e,t)=>{j(["color","face","size"],t=>{e.attr(t,null)})})(e)})})})(e,o,Nt.explode(null!==(r=t.font_size_legacy_values)&&void 0!==r?r:"")),((e,t,n)=>{e.addNodeFilter("strike",e=>{const r="html4"!==t.type;j(e,e=>{if(r)e.name="s";else{const t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}})})})(e,n,o)})(e,t,n)})(g,o,t),g},Kb=(e,t,n)=>{const r=(e=>fv(e)?eg({validate:!1}).serialize(e):e)(e),o=t(r);if(o.isDefaultPrevented())return o;if(fv(e)){if(o.content!==r){const t=$b({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:t}}return{...o,content:e}}return o},Jb=(e,t)=>{if(t.no_events)return dl.value(t);{const n=((e,t)=>e.dispatch("BeforeGetContent",t))(e,t);return n.isDefaultPrevented()?dl.error($h(e,{content:"",...n}).content):dl.value(n)}},Qb=(e,t,n)=>{if(n.no_events)return t;{const r=Kb(t,t=>$h(e,{...n,content:t}),{sanitize:uc(e),sandbox_iframes:mc(e)});return r.content}},ex=(e,t)=>{if(t.no_events)return dl.value(t);{const n=Kb(t.content,n=>((e,t)=>e.dispatch("BeforeSetContent",t))(e,{...t,content:n}),{sanitize:uc(e),sandbox_iframes:mc(e)});return n.isDefaultPrevented()?(Zh(e,n),dl.error(void 0)):dl.value(n)}},tx=(e,t,n)=>{n.no_events||Zh(e,{...n,content:t})},nx=(e,t,n)=>({element:e,width:t,rows:n}),rx=(e,t)=>({element:e,cells:t}),ox=(e,t)=>({x:e,y:t}),ix=(e,t)=>en(e,t).bind($e).getOr(1),ax=(e,t,n)=>{const r=e.rows;return!!(r[n]?r[n].cells:[])[t]},sx=e=>$(e,(e,t)=>t.cells.length>e?t.cells.length:e,0),lx=(e,t)=>{const n=e.rows;for(let e=0;e<n.length;e++){const r=n[e].cells;for(let n=0;n<r.length;n++)if(wn(r[n],t))return B.some(ox(n,e))}return B.none()},ux=(e,t,n,r,o)=>{const i=[],a=e.rows;for(let e=n;e<=o;e++){const n=a[e].cells,o=t<r?n.slice(t,r+1):n.slice(r,t+1);i.push(rx(a[e].element,o))}return i},cx=e=>((e,t)=>{const n=us(e.element),r=mn("tbody");return vr(r,t),gr(n,r),n})(e,(e=>U(e.rows,e=>{const t=U(e.cells,e=>{const t=cs(e);return nn(t,"colspan"),nn(t,"rowspan"),t}),n=us(e.element);return vr(n,t),n}))(e)),dx=()=>vp([]),hx=(e,t,n)=>{const r=Yd(t,e);return r.length>0?((e,t)=>((e,t)=>Jn(t,"table",D(wn,e)))(e,t[0]).bind(e=>{const n=t[0],r=t[t.length-1],o=(e=>{const t=nx(us(e),0,[]);return j(Er(e,"tr"),(e,n)=>{j(Er(e,"td,th"),(r,o)=>{((e,t,n,r,o)=>{const i=ix(o,"rowspan"),a=ix(o,"colspan"),s=e.rows;for(let e=n;e<n+i;e++){s[e]||(s[e]=rx(cs(r),[]));for(let r=t;r<t+a;r++)s[e].cells[r]=e===n&&r===t?o:us(o)}})(t,((e,t,n)=>{for(;ax(e,t,n);)t++;return t})(t,o,n),n,e,r)})}),nx(t.element,sx(t.rows),t.rows)})(e);return((e,t,n)=>lx(e,t).bind(t=>lx(e,n).map(n=>((e,t,n)=>{const r=t.x,o=t.y,i=n.x,a=n.y,s=o<a?ux(e,r,o,i,a):ux(e,r,a,i,o);return nx(e.element,sx(s),s)})(e,t,n))))(o,n,r).map(e=>vp([cx(e)]))}).getOrThunk(dx))(e,r):((e,t,n)=>t.length>0&&t[0].collapsed?dx():((e,t,n)=>((e,t)=>{const n=$(t,(e,t)=>(gr(t,e),t),e);return t.length>0?vp([n]):n})(yn(t.cloneContents()),((e,t,n)=>{const r=yn(t.commonAncestorContainer),o=_g(r,e),i=X(o,e=>n.isWrapper(Ht(e))),a=((e,t)=>J(e,e=>"li"===Ht(e)&&Kd(e,t)).fold(k([]),t=>(e=>J(e,e=>"ul"===Ht(e)||"ol"===Ht(e)))(e).map(e=>{const t=mn(Ht(e)),n=be(cr(e),(e,t)=>We(t,"list-style"));return ar(t,n),[mn("li"),t]}).getOr([])))(o,t),s=i.concat(a.length?a:(e=>So(e)?kn(e).filter(wo).fold(k([]),t=>[e,t]):wo(e)?[e]:[])(r));return U(s,us)})(e,t,n)))(e,t[0],n))(e,t,n)},px=(e,t)=>t>=0&&t<e.length&&Gd(e.charAt(t)),fx=e=>Po(e.innerText),gx=e=>Vr(e)?e.outerHTML:$r(e)?$i.encodeRaw(e.data,!1):Qr(e)?"\x3c!--"+e.data+"--\x3e":"",mx=Re(()=>document.implementation.createHTMLDocument("undo")),vx=e=>{const t=e.serializer.getTempAttrs(),n=Zf(e.getBody(),t);return(e=>null!==e.querySelector("iframe"))(n)?{type:"fragmented",fragments:X(U(ce(n.childNodes),M(Po,gx)),e=>e.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Po(n.innerHTML),bookmark:null,beforeBookmark:null}},yx=(e,t,n)=>{const r=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((e,t)=>{let n=0;j(e,e=>{0===e[0]?n++:1===e[0]?(((e,t,n)=>{const r=(e=>{let t;const n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r})(t);if(e.hasChildNodes()&&n<e.childNodes.length){const t=e.childNodes[n];e.insertBefore(r,t)}else e.appendChild(r)})(t,e[1],n),n++):2===e[0]&&((e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}})(t,n)})})(((e,t)=>{const n=e.length+t.length+2,r=new Array(n),o=new Array(n),i=(n,r,o,a,l)=>{const u=s(n,r,o,a);if(null===u||u.start===r&&u.diag===r-a||u.end===n&&u.diag===n-o){let i=n,s=o;for(;i<r||s<a;)i<r&&s<a&&e[i]===t[s]?(l.push([0,e[i]]),++i,++s):r-n>a-o?(l.push([2,e[i]]),++i):(l.push([1,t[s]]),++s)}else{i(n,u.start,o,u.start-u.diag,l);for(let t=u.start;t<u.end;++t)l.push([0,e[t]]);i(u.end,r,u.end-u.diag,a,l)}},a=(n,r,o,i)=>{let a=n;for(;a-r<i&&a<o&&e[a]===t[a-r];)++a;return((e,t,n)=>({start:e,end:t,diag:n}))(n,a,r)},s=(n,i,s,l)=>{const u=i-n,c=l-s;if(0===u||0===c)return null;const d=u-c,h=c+u,p=(h%2==0?h:h+1)/2;let f,g,m,v,y;for(r[1+p]=n,o[1+p]=i+1,f=0;f<=p;++f){for(g=-f;g<=f;g+=2){for(m=g+p,g===-f||g!==f&&r[m-1]<r[m+1]?r[m]=r[m+1]:r[m]=r[m-1]+1,v=r[m],y=v-n+s-g;v<i&&y<l&&e[v]===t[y];)r[m]=++v,++y;if(d%2!=0&&d-f<=g&&g<=d+f&&o[m-d]<=r[m])return a(o[m-d],g+n-s,i,l)}for(g=d-f;g<=d+f;g+=2){for(m=g+p-d,g===d-f||g!==d+f&&o[m+1]<=o[m-1]?o[m]=o[m+1]-1:o[m]=o[m-1],v=o[m]-1,y=v-n+s-g;v>=n&&y>=s&&e[v]===t[y];)o[m]=v--,y--;if(d%2==0&&-f<=g&&g<=f&&o[m]<=r[m+d])return a(o[m],g+n-s,i,l)}}return null},l=[];return i(0,e.length,0,t.length,l),l})(U(ce(t.childNodes),gx),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!x(r)||!Pd(r)||!r.isFakeCaret}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},bx=e=>"fragmented"===e.type?e.fragments.join(""):e.content,xx=e=>{const t=mn("body",mx());return Sr(t,bx(e)),j(Er(t,"*[data-mce-bogus]"),xr),wr(t)},_x=(e,t)=>!(!e||!t)&&(!!((e,t)=>bx(e)===bx(t))(e,t)||((e,t)=>xx(e)===xx(t))(e,t)),wx=e=>0===e.get(),Sx=(e,t,n)=>{wx(n)&&(e.typing=t)},Cx=(e,t)=>{e.typing&&(Sx(e,!1,t),e.add())},Mx=e=>({init:{bindEvents:C},undoManager:{beforeChange:(t,n)=>((e,t,n)=>{wx(t)&&n.set(ll(e.selection))})(e,t,n),add:(t,n,r,o,i,a)=>((e,t,n,r,o,i,a)=>{const s=vx(e),l=Nt.extend(i||{},s);if(!wx(r)||e.removed)return null;const u=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:u,originalEvent:a}).isDefaultPrevented())return null;if(u&&_x(u,l))return null;t.data[n.get()]&&o.get().each(e=>{t.data[n.get()].beforeBookmark=e});const c=Tu(e);if(c&&t.data.length>c){for(let e=0;e<t.data.length-1;e++)t.data[e]=t.data[e+1];t.data.length--,n.set(t.data.length)}l.bookmark=ll(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(l),n.set(t.data.length-1);const d={level:l,lastLevel:u,originalEvent:a};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",d),e.dispatch("change",d)):e.dispatch("AddUndo",d),l})(e,t,n,r,o,i,a),undo:(t,n,r)=>((e,t,n,r)=>{let o;return t.typing&&(t.add(),t.typing=!1,Sx(t,!1,n)),r.get()>0&&(r.set(r.get()-1),o=t.data[r.get()],yx(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o})(e,t,n,r),redo:(t,n)=>((e,t,n)=>{let r;return t.get()<n.length-1&&(t.set(t.get()+1),r=n[t.get()],yx(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r})(e,t,n),clear:(t,n)=>((e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")})(e,t,n),reset:e=>(e=>{e.clear(),e.add()})(e),hasUndo:(t,n)=>((e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!_x(vx(e),t.data[0]))(e,t,n),hasRedo:(e,t)=>((e,t)=>t.get()<e.data.length-1&&!e.typing)(e,t),transact:(e,t,n)=>((e,t,n)=>(Cx(e,t),e.beforeChange(),e.ignore(n),e.add()))(e,t,n),ignore:(e,t)=>((e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}})(e,t),extra:(t,n,r,o)=>((e,t,n,r,o)=>{if(t.transact(r)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];yx(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}})(e,t,n,r,o)},formatter:{match:(t,n,r,o)=>Cv(e,t,n,r,o),matchAll:(t,n)=>((e,t,n)=>{const r=[],o={},i=e.selection.getStart();return e.dom.getParent(i,i=>{for(let a=0;a<t.length;a++){const s=t[a];!o[s]&&Sv(e,i,s,n)&&(o[s]=!0,r.push(s))}},e.dom.getRoot()),r})(e,t,n),matchNode:(t,n,r,o)=>Sv(e,t,n,r,o),canApply:t=>((e,t)=>{const n=e.formatter.get(t),r=e.dom;if(n&&e.selection.isEditable()){const t=e.selection.getStart(),o=mh(r,t);for(let e=n.length-1;e>=0;e--){const t=n[e];if(!bh(t))return!0;for(let e=o.length-1;e>=0;e--)if(r.is(o[e],t.selector))return!0}}return!1})(e,t),closest:t=>((e,t)=>{const n=t=>wn(t,yn(e.getBody()));return B.from(e.selection.getStart(!0)).bind(r=>vv(yn(r),n=>de(t,t=>((t,n)=>Sv(e,t.dom,n)?B.some(n):B.none())(n,t)),n)).getOrNull()})(e,t),apply:(t,n,r)=>by(e,t,n,r),remove:(t,n,r,o)=>py(e,t,n,r,o),toggle:(t,n,r)=>((e,t,n,r)=>{const o=e.formatter.get(t);o&&(!Cv(e,t,n,r)||"toggle"in o[0]&&!o[0].toggle?by(e,t,n,r):py(e,t,n,r))})(e,t,n,r),formatChanged:(t,n,r,o,i)=>((e,t,n,r,o,i)=>(((e,t,n,r,o,i)=>{const a=t.get();j(n.split(","),t=>{const n=we(a,t).getOrThunk(()=>{const e={withSimilar:{state:Fa(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Fa(!1),similar:!1,callbacks:[]},withVars:[]};return a[t]=e,e}),s=()=>{const n=Sy(e);return wy(e,n,t,o,i).isSome()};if(y(i)){const e=o?n.withSimilar:n.withoutSimilar;e.callbacks.push(r),1===e.callbacks.length&&e.state.set(s())}else n.withVars.push({state:Fa(s()),similar:o,vars:i,callback:r})}),t.set(a)})(e,t,n,r,o,i),{unbind:()=>((e,t,n)=>{const r=e.get();j(t.split(","),e=>we(r,e).each(t=>{r[e]={withSimilar:{...t.withSimilar,callbacks:X(t.withSimilar.callbacks,e=>e!==n)},withoutSimilar:{...t.withoutSimilar,callbacks:X(t.withoutSimilar.callbacks,e=>e!==n)},withVars:X(t.withVars,e=>e.callback!==n)}})),e.set(r)})(t,n,r)}))(e,t,n,r,o,i)},editor:{getContent:t=>((e,t)=>B.from(e.getBody()).fold(k("tree"===t.format?new Of("body",11):""),n=>((e,t,n)=>{let r;return r="raw"===t.format?Nt.trim(Po(Zf(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?((e,t)=>{const n=e.getDoc(),r=Wn(yn(e.getBody())),o=mn("div",n);Kt(o,"data-mce-bogus","all"),ar(o,{position:"fixed",left:"-9999999px",top:"0"}),Sr(o,t.innerHTML),$f(o),Kf(o);const i=(e=>Fn(e)?e:yn(Mn(e).dom.body))(r);gr(i,o);const a=Po(o.dom.innerText);return br(o),a})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((e,t)=>{const n=Nl(e),r=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return t.replace(r,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!To(yn(n))&&h(r)?Nt.trim(r):r})(e,t,n)))(e,t),setContent:(t,n)=>((e,t,n)=>B.from(e.getBody()).map(r=>fv(t)?((e,t,n,r)=>{Qm(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=eg({validate:!1},e.schema).serialize(n),i=Po(To(yn(t))?o:Nt.trim(o));return gv(e,i,r.no_selection),{content:n,html:i}})(e,r,t,n):((e,t,n,r)=>{if(0===(n=Po(n)).length||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const i=Nl(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=o,n=e.dom.createHTML(i,Rl(e),n)):n||(n=o),gv(e,n,r.no_selection),{content:n,html:n}}{"raw"!==r.format&&(n=eg({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=To(yn(t))?n:Nt.trim(n);return gv(e,o,r.no_selection),{content:o,html:o}}})(e,r,t,n)).getOr({content:t,html:fv(n.content)?"":n.content}))(e,t,n),insertContent:(t,n)=>pv(e,t,n),addVisual:t=>((e,t)=>{const n=e.dom,r=x(t)?t:e.getBody();j(n.select("table,a",r),t=>{switch(t.nodeName){case"TABLE":const r=Eu(e),o=n.getAttrib(t,"border");o&&"0"!==o||!e.hasVisual?n.removeClass(t,r):n.addClass(t,r);break;case"A":if(!n.getAttrib(t,"href")){const r=n.getAttrib(t,"name")||t.id,o=Ou(e);r&&e.hasVisual?n.addClass(t,o):n.removeClass(t,o)}}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((e,t,n={})=>{const r=((e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}))(n,t);return Jb(e,r).fold(I,t=>{const n=((e,t)=>{if("text"===t.format)return(e=>B.from(e.selection.getRng()).map(t=>{var n;const r=B.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),i=(e=>e.map(e=>e.nodeName).getOr("div").toLowerCase())(r),a=yn(t.cloneContents());$f(a),Kf(a);const s=e.dom.add(o,i,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),l=fx(s),u=Po(null!==(n=s.textContent)&&void 0!==n?n:"");if(e.dom.remove(s),px(u,0)||px(u,u.length-1)){const e=r.getOr(o),t=fx(e),n=t.indexOf(l);return-1===n?l:(px(t,n-1)?" ":"")+l+(px(t,n+l.length)?" ":"")}return l}).getOr(""))(e);{const n=((e,t)=>{const n=e.selection.getRng(),r=e.dom.create("body"),o=e.selection.getSel(),i=kf(e,jd(o)),a=t.contextual?hx(yn(e.getBody()),i,e.schema).dom:n.cloneContents();return a&&r.appendChild(a),e.selection.serializer.serialize(r,t)})(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n}})(e,t);return Qb(e,n,t)})})(e,t,n)},autocompleter:{addDecoration:t=>((e,t)=>{if(Pf(yn(e.getBody())).isNone()){const r=gn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());gr(r,yn(t.extractContents())),t.insertNode(r.dom),kn(r).each(e=>e.dom.normalize()),(n=r,((e,t)=>{const n=e=>{const r=Rn(e);for(let e=r.length-1;e>=0;e--){const o=r[e];if(t(o))return B.some(o);const i=n(o);if(i.isSome())return i}return B.none()};return n(e)})(n,Af)).map(t=>{e.selection.setCursorLocation(t.dom,(e=>"img"===Ht(e)?1:yo(e).fold(()=>Rn(e).length,e=>e.length))(t))})}var n})(e,t),removeDecoration:()=>((e,t)=>Pf(t).each(t=>{const n=e.selection.getBookmark();xr(t),e.selection.moveToBookmark(n)}))(e,yn(e.getBody()))},raw:{getModel:()=>B.none()}}),Tx=e=>Se(e.plugins,"rtc"),kx=e=>e.rtcInstance?e.rtcInstance:Mx(e),Ix=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Ax=e=>Ix(e).init.bindEvents(),Dx=e=>0===e.dom.length?(br(e),B.none()):B.some(e),Px=(e,t,n,r,o)=>{e.bind(e=>((r?Jg:Kg)(e.dom,r?e.dom.length:0,o),t.filter(Yt).map(t=>((e,t,n,r,o)=>{const i=e.dom,a=t.dom,s=r?i.length:a.length;r?(Qg(i,a,o,!1,!r),n.setStart(a,s)):(Qg(a,i,o,!1,!r),n.setEnd(a,s))})(e,t,n,r,o)))).orThunk(()=>{const e=((e,t)=>e.filter(e=>Uh.isBookmarkNode(e.dom)).bind(t?Pn:Dn))(t,r).or(t).filter(Yt);return e.map(e=>((e,t,n)=>{kn(e).each(r=>{const o=e.dom;t&&Gg(r,Hs(o,0),n)?Kg(o,0,n):!t&&Ug(r,Hs(o,o.length),n)&&Jg(o,o.length,n)})})(e,r,o))})},Lx=(e,t,n)=>{if(Se(e,t)){const r=X(e[t],e=>e!==n);0===r.length?delete e[t]:e[t]=r}},Nx=e=>!(!e||!e.ownerDocument)&&Sn(yn(e.ownerDocument),yn(e)),Rx=(e,t,n,r)=>{let o,i;const{selectorChangedWithUnbind:a}=((e,t)=>{let n,r;const o=(t,n)=>J(n,n=>e.is(n,t)),i=t=>e.getParents(t,void 0,e.getRoot());return{selectorChangedWithUnbind:(e,a)=>(n||(n={},r={},t.on("NodeChange",e=>{const t=e.element,a=i(t),s={};fe(n,(e,t)=>{o(t,a).each(n=>{r[t]||(j(e,e=>{e(!0,{node:n,selector:t,parents:a})}),r[t]=e),s[t]=e})}),fe(r,(e,n)=>{s[n]||(delete r[n],j(e,e=>{e(!1,{node:t,selector:n,parents:a})}))})})),n[e]||(n[e]=[]),n[e].push(a),o(e,i(t.selection.getStart())).each(()=>{r[e]=n[e]}),{unbind:()=>{Lx(n,e,a),Lx(r,e,a)}})}})(e,r),s=(e,t)=>((e,t,n={})=>{const r=((e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}))(n,t);ex(e,r).each(t=>{const n=((e,t)=>{if("raw"!==t.format){const n=e.selection.getRng(),r=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=r?{context:r.nodeName.toLowerCase()}:{},i=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return eg({validate:!1},e.schema).serialize(i)}return t.content})(e,t),r=e.selection.getRng();((e,t,n)=>{const r=B.from(t.firstChild).map(yn),o=B.from(t.lastChild).map(yn);e.deleteContents(),e.insertNode(t);const i=r.bind(Dn).filter(Yt).bind(Dx),a=o.bind(Pn).filter(Yt).bind(Dx);Px(i,r,e,!0,n),Px(a,o,e,!1,n),e.collapse(!1)})(r,r.createContextualFragment(n),e.schema),e.selection.setRng(r),Zp(e,r),tx(e,n,t)})})(r,e,t),l=e=>{const t=c();t.collapse(!!e),d(t)},u=()=>t.getSelection?t.getSelection():t.document.selection,c=()=>{let n;const a=(e,t,n)=>{try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}},s=t.document;if(x(r.bookmark)&&!bf(r)){const e=sf(r);if(e.isSome())return e.map(e=>kf(r,[e])[0]).getOr(s.createRange())}try{const e=u();e&&!Fr(e.anchorNode)&&(n=e.rangeCount>0?e.getRangeAt(0):s.createRange(),n=kf(r,[n])[0])}catch(e){}if(n||(n=s.createRange()),eo(n.startContainer)&&n.collapsed){const t=e.getRoot();n.setStart(t,0),n.setEnd(t,0)}return o&&i&&(0===a(n.START_TO_START,n,o)&&0===a(n.END_TO_END,n,o)?n=i:(o=null,i=null)),n},d=(e,t)=>{if(!(e=>!!e&&Nx(e.startContainer)&&Nx(e.endContainer))(e))return;const n=u();if(e=r.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){i=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null==n?void 0:n.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){const t=e.startContainer.childNodes[e.startOffset];t&&"IMG"===t.nodeName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(t,0,t,1))}r.dispatch("AfterSetSelectionRange",{range:e,forward:t})},h=()=>{const t=u(),n=null==t?void 0:t.anchorNode,r=null==t?void 0:t.focusNode;if(!t||!n||!r||Fr(n)||Fr(r))return!0;const o=e.createRng(),i=e.createRng();try{o.setStart(n,t.anchorOffset),o.collapse(!0),i.setStart(r,t.focusOffset),i.collapse(!0)}catch(e){return!0}return o.compareBoundaryPoints(o.START_TO_START,i)<=0},p={dom:e,win:t,serializer:n,editor:r,expand:(t={type:"word"})=>d(Ap(e).expand(c(),t)),collapse:l,setCursorLocation:(t,n)=>{const o=e.createRng();x(t)&&x(n)?(o.setStart(t,n),o.setEnd(t,n),d(o),l(!1)):(Jd(e,o,r.getBody(),!0),d(o))},getContent:e=>((e,t={})=>((e,t,n)=>Ix(e).selection.getContent(t,n))(e,t.format?t.format:"html",t))(r,e),setContent:s,getBookmark:(e,t)=>f.getBookmark(e,t),moveToBookmark:e=>f.moveToBookmark(e),select:(t,n)=>(((e,t,n)=>B.from(t).bind(t=>B.from(t.parentNode).map(r=>{const o=e.nodeIndex(t),i=e.createRng();return i.setStart(r,o),i.setEnd(r,o+1),n&&(Jd(e,i,t,!0),Jd(e,i,t,!1)),i})))(e,t,n).each(d),t),isCollapsed:()=>{const e=c(),t=u();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:()=>{const t=c(),n=r.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?ne(n,t=>e.isEditable(t.parentElement)):wf(e,t)},isForward:h,setNode:t=>(s(e.getOuterHTML(t)),t),getNode:()=>((e,t)=>{if(!t)return e;let n=t.startContainer,r=t.endContainer;const o=t.startOffset,i=t.endOffset;let a=t.commonAncestorContainer;t.collapsed||(n===r&&i-o<2&&n.hasChildNodes()&&(a=n.childNodes[o]),$r(n)&&$r(r)&&(n=n.length===o?Tf(n.nextSibling,!0):n.parentNode,r=0===i?Tf(r.previousSibling,!1):r.parentNode,n&&n===r&&(a=n)));const s=$r(a)?a.parentNode:a;return Hr(s)?s:e})(r.getBody(),c()),getSel:u,setRng:d,getRng:c,getStart:e=>Cf(r.getBody(),c(),e),getEnd:e=>Mf(r.getBody(),c(),e),getSelectedBlocks:(t,n)=>((e,t,n,r)=>{const o=[],i=e.getRoot(),a=e.getParent(n||Cf(i,t,t.collapsed),e.isBlock),s=e.getParent(r||Mf(i,t,t.collapsed),e.isBlock);if(a&&a!==i&&o.push(a),a&&s&&a!==s){let t;const n=new Br(a,i);for(;(t=n.next())&&t!==s;)e.isBlock(t)&&o.push(t)}return s&&a!==s&&s!==i&&o.push(s),o})(e,c(),t,n),normalize:()=>{const t=c(),n=u();if(!(jd(n).length>1)&&Qd(r)){const n=Tp(e,t);return n.each(e=>{d(e,h())}),n.getOr(t)}return t},selectorChanged:(e,t)=>(a(e,t),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let t,n=e.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:(e,t)=>{x(e)?((e,t,n)=>{(e.inline?Yp:Xp)(e,t,n)})(r,e,t):Zp(r,c(),t)},placeCaretAt:(e,t)=>d(yp(e,t,r.getDoc())),getBoundingClientRect:()=>{const e=c();return e.collapsed?Hs.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:()=>{t=o=i=null,g.destroy()}},f=Uh(p),g=rp(p,r);return p.bookmarkManager=f,p.controlSelection=g,p},Ex=(e,t,n)=>{-1===Nt.inArray(t,n)&&(e.addAttributeFilter(n,(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.push(n))},Ox=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:Oa.DOM,i=t&&t.schema?t.schema:sa(r),a=$b(r,i);return((e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(e,t)=>{let n=e.length;for(;n--;){const r=e[n];r.attr("tabindex",r.attr("data-mce-tabindex")),r.attr(t,null)}}),e.addAttributeFilter("src,href,style",(e,r)=>{const o="data-mce-"+r,i=t.url_converter,a=t.url_converter_scope;let s=e.length;for(;s--;){const t=e[s];let l=t.attr(o);void 0!==l?(t.attr(r,l.length>0?l:null),t.attr(o,null)):(l=t.attr(r),"style"===r?l=n.serializeStyle(n.parseStyle(l),t.name):i&&(l=i.call(a,l,r,t.name)),t.attr(r,l.length>0?l:null))}}),e.addAttributeFilter("class",e=>{let t=e.length;for(;t--;){const n=e[t];let r=n.attr("class");r&&(r=r.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}}),e.addAttributeFilter("data-mce-type",(e,t,n)=>{let r=e.length;for(;r--;){const t=e[r];if("bookmark"===t.attr("data-mce-type")&&!n.cleanup){const e=B.from(t.firstChild).exists(e=>{var t;return!Do(null!==(t=e.value)&&void 0!==t?t:"")});e?t.unwrap():t.remove()}}}),e.addNodeFilter("noscript",e=>{var t;let n=e.length;for(;n--;){const r=e[n].firstChild;r&&(r.value=$i.decode(null!==(t=r.value)&&void 0!==t?t:""))}}),e.addNodeFilter("script,style",(e,n)=>{var r;const o=e=>e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let i=e.length;for(;i--;){const a=e[i],s=a.firstChild,l=null!==(r=null==s?void 0:s.value)&&void 0!==r?r:"";if("script"===n){const e=a.attr("type");e&&a.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===t.element_format&&s&&l.length>0&&(s.value="// <![CDATA[\n"+o(l)+"\n// ]]>")}else"xhtml"===t.element_format&&s&&l.length>0&&(s.value="\x3c!--\n"+o(l)+"\n--\x3e")}}),e.addNodeFilter("#comment",e=>{let r=e.length;for(;r--;){const o=e[r],i=o.value;t.preserve_cdata&&0===(null==i?void 0:i.indexOf("[CDATA["))?(o.name="#cdata",o.type=4,o.value=n.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==i?void 0:i.indexOf("mce:protected "))&&(o.name="#text",o.type=3,o.raw=!0,o.value=unescape(i).substr(14))}}),e.addNodeFilter("xml:namespace,input",(e,t)=>{let n=e.length;for(;n--;){const r=e[n];7===r.type?r.remove():1===r.type&&("input"!==t||r.attr("type")||r.attr("type","text"))}}),e.addAttributeFilter("data-mce-type",t=>{j(t,t=>{"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(e,t)=>{let n=e.length;for(;n--;)e[n].attr(t,null)}),t.remove_trailing_brs&&ky(t,e,e.schema)})(a,r,o),{schema:i,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(e,n={})=>{const s={format:"html",...n},l=((e,t,n)=>((e,t)=>x(e)&&e.hasEventListeners("PreProcess")&&!t.no_events)(e,n)?((e,t,n)=>{let r;const o=e.dom;let i=t.cloneNode(!0);const a=document.implementation;if(a.createHTMLDocument){const e=a.createHTMLDocument("");Nt.each("BODY"===i.nodeName?i.childNodes:[i],t=>{e.body.appendChild(e.importNode(t,!0))}),i="BODY"!==i.nodeName?e.body.firstChild:e.body,r=o.doc,o.doc=e}return((e,t)=>{e.dispatch("PreProcess",t)})(e,{...n,node:i}),r&&(o.doc=r),i})(e,t,n):t)(t,e,s),u=((e,t,n)=>{const r=Po(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||To(yn(t))?r:Nt.trim(r)})(o,l,s),c=((e,t,n)=>{const r=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,r);return(e=>{const t=e=>"br"===(null==e?void 0:e.name),n=e.lastChild;if(t(n)){const e=n.prev;t(e)&&(n.remove(),e.remove())}})(o),o})(a,u,s);return"tree"===s.format?c:((e,t,n,r,o)=>{const i=((e,t,n)=>eg(e,t).serialize(n))(t,n,r);return((e,t,n)=>{if(!t.no_events&&e){const r=((e,t)=>e.dispatch("PostProcess",t))(e,{...t,content:n});return r.content}return n})(e,o,i)})(t,r,i,c,s)},addRules:i.addValidElements,setRules:i.setValidElements,addTempAttr:D(Ex,a,n),getTempAttrs:k(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Bx=(e,t,n={})=>{const r=((e,t)=>({format:"html",...e,set:!0,content:t}))(n,t);return ex(e,r).map(t=>{const n=((e,t,n)=>kx(e).editor.setContent(t,n))(e,t.content,t);return tx(e,n.html,t),n.content}).getOr(t)},zx="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Fx="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),Vx="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),Hx=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],Wx=(e,t)=>{const n=X(t,t=>Se(e,t));return ae(n)},Gx=(e,t)=>{const n=Nt.makeMap(e.plugins," "),r=X(t,e=>Se(n,e));return ae(r)},Ux=e=>J(Hx,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),jx=Oa.DOM,Yx=e=>B.from(e).each(e=>e.destroy()),qx=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Se(e,t)}})(),Xx=Ua.ModelManager,Zx=(e,t)=>t.dom[e],$x=(e,t)=>parseInt(sr(t,e),10),Kx=D(Zx,"clientWidth"),Jx=D(Zx,"clientHeight"),Qx=D($x,"margin-top"),e_=D($x,"margin-left"),t_=e=>{const t=[],n=()=>{const t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},r=()=>B.from(t[0]),o=()=>{j(t,e=>{e.reposition()})},i=e=>{Q(t,t=>t===e).each(e=>{t.splice(e,1)})},a=(a,s=!0)=>e.removed||!(e=>{return(t=e.inline?e.getBody():e.getContentAreaContainer(),B.from(t).map(yn)).map(qn).getOr(!1);var t})(e)?{}:(s&&e.dispatch("BeforeOpenNotification",{notification:a}),J(t,e=>{return t=n().getArgs(e),r=a,!(t.type!==r.type||t.text!==r.text||t.progressBar||t.timeout||r.progressBar||r.timeout);var t,r}).getOrThunk(()=>{e.editorManager.setActive(e);const s=n().open(a,()=>{i(s),o(),xf(e)&&r().fold(()=>e.focus(),e=>$p(yn(e.getEl())))});return(e=>{t.push(e)})(s),o(),e.dispatch("OpenNotification",{notification:{...s}}),s})),s=k(t);return(e=>{e.on("SkinLoaded",()=>{const t=cu(e);t&&a({text:t,type:"warning",timeout:0},!1),o()}),e.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(o)}),e.on("remove",()=>{j(t.slice(),e=>{n().close(e)})})})(e),{open:a,close:()=>{r().each(e=>{n().close(e),i(e),o()})},getNotifications:s}},n_=Ua.PluginManager,r_=Ua.ThemeManager,o_=e=>{let t=[];const n=()=>{const t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():(()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},r=(e,t)=>(...n)=>t?t.apply(e,n):void 0,o=n=>{(t=>{e.dispatch("CloseWindow",{dialog:t})})(n),t=X(t,e=>e!==n),0===t.length&&e.focus()},i=n=>{e.editorManager.setActive(e),af(e),e.ui.show();const r=n();return(n=>{t.push(n),(t=>{e.dispatch("OpenWindow",{dialog:t})})(n)})(r),r};return e.on("remove",()=>{j(t,e=>{n().close(e)})}),{open:(e,t)=>i(()=>n().open(e,t,o)),openUrl:e=>i(()=>n().openUrl(e,o)),alert:(e,t,o)=>{const i=n();i.alert(e,r(o||i,t))},confirm:(e,t,o)=>{const i=n();i.confirm(e,r(o||i,t))},close:()=>{B.from(t[t.length-1]).each(e=>{n().close(e),o(e)})}}},i_=(e,t)=>{e.notificationManager.open({type:"error",text:t})},a_=(e,t)=>{e._skinLoaded?i_(e,t):e.on("SkinLoaded",()=>{i_(e,t)})},s_=(e,t,n)=>{Yh(e,t,{message:n}),console.error(n)},l_=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,u_=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},c_=e=>"content/"+e+"/content.css",d_=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",r=`content${e.editorManager.suffix}.css`;return U(t,t=>(e=>tinymce.Resource.has(c_(e)))(t)?t:(e=>/^[a-z0-9\-]+$/i.test(e))(t)&&!e.inline?`${n}/${t}/${r}`:e.documentBaseURI.toAbsolute(t))},h_=()=>{let e={};const t=(e,t)=>({status:e,resultUri:t}),n=t=>t in e;return{hasBlobUri:n,getResultUri:t=>{const n=e[t];return n?n.resultUri:null},isPending:t=>!!n(t)&&1===e[t].status,isUploaded:t=>!!n(t)&&2===e[t].status,markPending:n=>{e[n]=t(1,null)},markUploaded:(n,r)=>{e[n]=t(2,r)},removeFailed:t=>{delete e[t]},destroy:()=>{e={}}}};let p_=0;const f_=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),g_=(e,t)=>((e,t)=>{const n={},r=(e,n)=>new Promise((r,o)=>{const i=new XMLHttpRequest;i.open("POST",t.url),i.withCredentials=t.credentials,i.upload.onprogress=e=>{n(e.loaded/e.total*100)},i.onerror=()=>{o("Image upload failed due to a XHR Transport error. Code: "+i.status)},i.onload=()=>{if(i.status<200||i.status>=300)return void o("HTTP Error: "+i.status);const e=JSON.parse(i.responseText);var n,a;e&&h(e.location)?r((n=t.basePath,a=e.location,n?n.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):o("Invalid JSON: "+i.responseText)};const a=new FormData;a.append("file",e.blob(),e.filename()),i.send(a)}),o=_(t.handler)?t.handler:r,i=(e,t)=>({url:t,blobInfo:e,status:!0}),a=(e,t)=>({url:"",blobInfo:e,status:!1,error:t}),s=(e,t)=>{Nt.each(n[e],e=>{e(t)}),delete n[e]};return{upload:(l,u)=>t.url||o!==r?((t,r)=>(t=Nt.grep(t,t=>!e.isUploaded(t.blobUri())),Promise.all(Nt.map(t,t=>e.isPending(t.blobUri())?(e=>{const t=e.blobUri();return new Promise(e=>{n[t]=n[t]||[],n[t].push(e)})})(t):((t,n,r)=>(e.markPending(t.blobUri()),new Promise(o=>{let l,u;try{const c=()=>{l&&(l.close(),u=C)},d=n=>{c(),e.markUploaded(t.blobUri(),n),s(t.blobUri(),i(t,n)),o(i(t,n))},p=n=>{c(),e.removeFailed(t.blobUri()),s(t.blobUri(),a(t,n)),o(a(t,n))};u=e=>{e<0||e>100||B.from(l).orThunk(()=>B.from(r).map(N)).each(t=>{l=t,t.progressBar.value(e)})},n(t,u).then(d,e=>{p(h(e)?{message:e}:e)})}catch(e){o(a(t,e))}})))(t,o,r)))))(l,u):new Promise(e=>{e([])})}})(t,{url:jl(e),basePath:Yl(e),credentials:ql(e),handler:Xl(e)}),m_=e=>{const t=(()=>{let e=[];const t=e=>{if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const t=e.id||"blobid"+p_+++(()=>{const e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),n=e.name||t,r=e.blob;var o;return{id:k(t),name:k(n),filename:k(e.filename||n+"."+(o=r.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[o.toLowerCase()]||"dat")),blob:k(r),base64:k(e.base64),blobUri:k(e.blobUri||URL.createObjectURL(r)),uri:k(e.uri)}},n=t=>J(e,t).getOrUndefined(),r=e=>n(t=>t.id()===e);return{create:(e,n,r,o,i)=>{if(h(e))return t({id:e,name:o,filename:i,blob:n,base64:r});if(p(e))return t(e);throw new Error("Unknown input type")},add:t=>{r(t.id())||e.push(t)},get:r,getByUri:e=>n(t=>t.blobUri()===e),getByData:(e,t)=>n(n=>n.base64()===e&&n.blob().type===t),findFirst:n,removeByUri:t=>{e=X(e,e=>e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1))},destroy:()=>{j(e,e=>{URL.revokeObjectURL(e.blobUri())}),e=[]}}})();let n,r;const o=h_(),i=[],a=t=>n=>e.selection?t(n):[],s=(e,t,n)=>{let r=0;do{r=e.indexOf(t,r),-1!==r&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},l=(e,t,n)=>{const r=`src="${n}"${n===At.transparentSrc?' data-mce-placeholder="1"':""}`;return e=s(e,`src="${t}"`,r),s(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},u=(t,n)=>{j(e.undoManager.data,e=>{"fragmented"===e.type?e.fragments=U(e.fragments,e=>l(e,t,n)):e.content=l(e.content,t,n)})},c=()=>(n||(n=g_(e,o)),g().then(a(r=>{const o=U(r,e=>e.blobInfo);return n.upload(o,f_(e)).then(a(n=>{const o=[];let i=!1;const a=U(n,(n,a)=>{const{blobInfo:s,image:l}=r[a];let c=!1;return n.status&&Wl(e)?(n.url&&!He(l.src,n.url)&&(i=!0),t.removeByUri(l.src),Tx(e)||((t,n)=>{const r=e.convertURL(n,"src");var o;u(t.src,n),Jt(yn(t),{src:Hl(e)?(o=n,o+(-1===o.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":r})})(l,n.url)):n.error&&(n.error.remove&&(u(l.src,At.transparentSrc),o.push(l),c=!0),((e,t)=>{a_(e,Ga.translate(["Failed to upload image: {0}",t]))})(e,n.error.message)),{element:l,status:n.status,uploadUri:n.url,blobInfo:s,removed:c}});return o.length>0&&!Tx(e)?e.undoManager.transact(()=>{j(_r(o),n=>{const r=kn(n);br(n),r.each((e=>t=>{((e,t)=>e.dom.isEmpty(t.dom)&&x(e.schema.getTextBlockElements()[Ht(t)]))(e,t)&&gr(t,gn('<br data-mce-bogus="1" />'))})(e)),t.removeByUri(n.dom.src)})}):i&&e.undoManager.dispatchChange(),a}))}))),d=()=>Vl(e)?c():Promise.resolve([]),f=e=>ne(i,t=>t(e)),g=()=>(r||(r=((e,t)=>{const n={};return{findAll:(r,o=O)=>{const i=X((e=>e?ce(e.getElementsByTagName("img")):[])(r),t=>{const n=t.src;return!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===At.transparentSrc)&&(We(n,"blob:")?!e.isUploaded(n)&&o(t):!!We(n,"data:")&&o(t))}),a=U(i,e=>{const r=e.src;if(Se(n,r))return n[r].then(t=>h(t)?t:{image:e,blobInfo:t.blobInfo});{const o=((e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(We(t,"blob:")){const i=e.getByUri(t);return x(i)?Promise.resolve(i):(r=t,We(r,"blob:")?(e=>fetch(e).then(e=>e.ok?e.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})))(r):We(r,"data:")?(o=r,new Promise((e,t)=>{Iy(o).bind(({type:e,data:t,base64Encoded:n})=>Ay(e,t,n)).fold(()=>t("Invalid data URI"),e)})):Promise.reject("Unknown URI format")).then(t=>Dy(t).then(r=>Ly(r,!1,n=>B.some(Ny(e,t,n))).getOrThunk(n)))}var r,o;return We(t,"data:")?Ry(e,t).fold(n,e=>Promise.resolve(e)):Promise.reject("Unknown image data format")})(t,r).then(t=>(delete n[r],{image:e,blobInfo:t})).catch(e=>(delete n[r],e));return n[r]=o,o}});return Promise.all(a)}}})(o,t)),r.findAll(e.getBody(),f).then(a(t=>{const n=X(t,t=>h(t)?(a_(e,t),!1):"blob"!==t.uriType);return Tx(e)||j(n,e=>{u(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),n}))),m=n=>n.replace(/src="(blob:[^"]+)"/g,(n,r)=>{const i=o.getResultUri(r);if(i)return'src="'+i+'"';let a=t.getByUri(r);return a||(a=$(e.editorManager.get(),(e,t)=>e||t.editorUpload&&t.editorUpload.blobCache.getByUri(r),void 0)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':n});return e.on("SetContent",()=>{Vl(e)?d():g()}),e.on("RawSaveContent",e=>{e.content=m(e.content)}),e.on("GetContent",e=>{e.source_view||"raw"===e.format||"tree"===e.format||(e.content=m(e.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",e=>{j(e,e=>{const n=e.attr("src");if(!n||t.getByUri(n))return;const r=o.getResultUri(n);r&&e.attr("src",r)})})}),{blobCache:t,addFilter:e=>{i.push(e)},uploadImages:c,uploadImagesAuto:d,scanForImages:g,destroy:()=>{t.destroy(),o.destroy(),r=n=null}}},v_={remove_similar:!0,inherit:!1},y_={selector:"td,th",...v_},b_={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...y_},tablecellverticalalign:{styles:{"vertical-align":"%value"},...y_},tablecellbordercolor:{styles:{borderColor:"%value"},...y_},tablecellclass:{classes:["%value"],...y_},tableclass:{selector:"table",classes:["%value"],...v_},tablecellborderstyle:{styles:{borderStyle:"%value"},...y_},tablecellborderwidth:{styles:{borderWidth:"%value"},...y_}},x_=k(b_),__=Nt.each,w_=Oa.DOM,S_=e=>x(e)&&p(e),C_=(e,t)=>{const n=t&&t.schema||sa({}),r=e=>{const t=h(e)?{name:e,classes:[],attrs:{}}:e,n=w_.create(t.name);return((e,t)=>{t.classes.length>0&&w_.addClass(e,t.classes.join(" ")),w_.setAttribs(e,t.attrs)})(n,t),n},o=(e,t,i)=>{let a;const s=t[0],l=S_(s)?s.name:void 0,u=((e,t)=>{const r=n.getElementRule(e.nodeName.toLowerCase()),o=null==r?void 0:r.parentsRequired;return!(!o||!o.length)&&(t&&W(o,t)?t:o[0])})(e,l);if(u)l===u?(a=s,t=t.slice(1)):a=u;else if(s)a=s,t=t.slice(1);else if(!i)return e;const c=a?r(a):w_.create("div");c.appendChild(e),i&&Nt.each(i,t=>{const n=r(t);c.insertBefore(n,e)});const d=S_(a)?a.siblings:void 0;return o(c,t,d)},i=w_.create("div");if(e.length>0){const t=e[0],n=r(t),a=S_(t)?t.siblings:void 0;i.appendChild(o(n,e.slice(1),a))}return i},M_=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=Nt.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(e,t,r,o,i)=>{switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Nt.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===o){const e=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);e&&(n.attrs[e[1]]=e[2])}return""})),n.name=t||"div",n},T_=(e,t)=>{let n="",r=vu(e);if(""===r)return"";const o=e=>h(e)?e.replace(/%(\w+)/g,""):"",i=(t,n)=>w_.getStyle(null!=n?n:e.getBody(),t,!0);if(h(t)){const n=e.formatter.get(t);if(!n)return"";t=n[0]}if("preview"in t){const e=t.preview;if(!1===e)return"";r=e||r}let a,s=t.block||t.inline||"span";const l=(u=t.selector,h(u)?(u=(u=u.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Nt.map(u.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{const t=Nt.map(e.split(/(?:~\+|~|\+)/),M_),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]);var u;l.length>0?(l[0].name||(l[0].name=s),s=t.selector,a=C_(l,e)):a=C_([s],e);const c=w_.select(s,a)[0]||a.firstChild;__(t.styles,(e,t)=>{const n=o(e);n&&w_.setStyle(c,t,n)}),__(t.attributes,(e,t)=>{const n=o(e);n&&w_.setAttrib(c,t,n)}),__(t.classes,e=>{const t=o(e);w_.hasClass(c,t)||w_.addClass(c,t)}),e.dispatch("PreviewFormats"),w_.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a);const d=i("fontSize"),p=/px$/.test(d)?parseInt(d,10):0;return __(r.split(" "),e=>{let t=i(e,c);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=i(e),"#ffffff"===ma(t).toLowerCase())||"color"===e&&"#000000"===ma(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===p)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*p+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}}),e.dispatch("AfterPreviewFormats"),w_.remove(a),n},k_=e=>{const t=(e=>{const t={},n=(e,r)=>{e&&(h(e)?(g(r)||(r=[r]),j(r,e=>{y(e.deep)&&(e.deep=!bh(e)),y(e.split)&&(e.split=!bh(e)||xh(e)),y(e.remove)&&bh(e)&&!xh(e)&&(e.remove="none"),bh(e)&&xh(e)&&(e.mixed=!0,e.block_expand=!0),h(e.classes)&&(e.classes=e.classes.split(/\s+/))}),t[e]=r):fe(e,(e,t)=>{n(t,e)}))};return n((e=>{const t=e.dom,n=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:e=>{t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},r={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[r,e,t]:[e,r,t]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(e,t,n)=>Vr(e)&&e.hasAttribute("href"),onformat:(e,n,r)=>{Nt.each(r,(n,r)=>{t.setAttrib(e,r,n)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":e=>{var t;return null!==(t=null==e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Nt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),e=>{r[e]={block:e,remove:"all"}}),r})(e)),n(x_()),n(mu(e)),{get:e=>x(e)?t[e]:t,has:e=>Se(t,e),register:n,unregister:e=>(e&&t[e]&&delete t[e],t)}})(e),n=Fa({});return(e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(e=>{e.on("mouseup keydown",t=>{var n;((e,t,n)=>{const r=e.selection,o=e.getBody();Av(e,null,n),8!==t&&46!==t||!r.isCollapsed()||r.getStart().innerHTML!==Mv||Av(e,Ad(o,r.getStart()),!0),37!==t&&39!==t||Av(e,Ad(o,r.getStart()),!0)})(e,t.keyCode,(n=e.selection.getRng().endContainer,$r(n)&&Ge(n.data,fo)))})})(e),Tx(e)||((e,t)=>{e.set({}),t.on("NodeChange",n=>{Cy(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const r=B.from(n.node).map(e=>nh(e)?e:e.startContainer).bind(e=>Vr(e)?B.some(e):B.from(e.parentElement)).getOrThunk(()=>_y(t));Cy(t,r,e.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(t,n,r)=>{((e,t,n,r)=>{Ix(e).formatter.apply(t,n,r)})(e,t,n,r)},remove:(t,n,r,o)=>{((e,t,n,r,o)=>{Ix(e).formatter.remove(t,n,r,o)})(e,t,n,r,o)},toggle:(t,n,r)=>{((e,t,n,r)=>{Ix(e).formatter.toggle(t,n,r)})(e,t,n,r)},match:(t,n,r,o)=>((e,t,n,r,o)=>Ix(e).formatter.match(t,n,r,o))(e,t,n,r,o),closest:t=>((e,t)=>Ix(e).formatter.closest(t))(e,t),matchAll:(t,n)=>((e,t,n)=>Ix(e).formatter.matchAll(t,n))(e,t,n),matchNode:(t,n,r,o)=>((e,t,n,r,o)=>Ix(e).formatter.matchNode(t,n,r,o))(e,t,n,r,o),canApply:t=>((e,t)=>Ix(e).formatter.canApply(t))(e,t),formatChanged:(t,r,o,i)=>((e,t,n,r,o,i)=>Ix(e).formatter.formatChanged(t,n,r,o,i))(e,n,t,r,o,i),getCssText:D(T_,e)}},I_=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},A_=e=>{const t=Ya(),n=Fa(0),r=Fa(0),o={data:[],typing:!1,beforeChange:()=>{((e,t,n)=>{Ix(e).undoManager.beforeChange(t,n)})(e,n,t)},add:(i,a)=>((e,t,n,r,o,i,a)=>Ix(e).undoManager.add(t,n,r,o,i,a))(e,o,r,n,t,i,a),dispatchChange:()=>{e.setDirty(!0);const t=vx(e);t.bookmark=ll(e.selection),e.dispatch("change",{level:t,lastLevel:se(o.data,r.get()).getOrUndefined()})},undo:()=>((e,t,n,r)=>Ix(e).undoManager.undo(t,n,r))(e,o,n,r),redo:()=>((e,t,n)=>Ix(e).undoManager.redo(t,n))(e,r,o.data),clear:()=>{((e,t,n)=>{Ix(e).undoManager.clear(t,n)})(e,o,r)},reset:()=>{((e,t)=>{Ix(e).undoManager.reset(t)})(e,o)},hasUndo:()=>((e,t,n)=>Ix(e).undoManager.hasUndo(t,n))(e,o,r),hasRedo:()=>((e,t,n)=>Ix(e).undoManager.hasRedo(t,n))(e,o,r),transact:t=>((e,t,n,r)=>Ix(e).undoManager.transact(t,n,r))(e,o,n,t),ignore:t=>{((e,t,n)=>{Ix(e).undoManager.ignore(t,n)})(e,n,t)},extra:(t,n)=>{((e,t,n,r,o)=>{Ix(e).undoManager.extra(t,n,r,o)})(e,o,r,t,n)}};return Tx(e)||((e,t,n)=>{const r=Fa(!1),o=e=>{Sx(t,!1,n),t.add({},e)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",e=>{const r=e.command;I_(r)||(Cx(t,n),t.beforeChange())}),e.on("ExecCommand",e=>{const t=e.command;I_(t)||o(e)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",n=>{const i=n.keyCode;if(n.isDefaultPrevented())return;const a=At.os.isMacOS()&&"Meta"===n.key;(i>=33&&i<=36||i>=37&&i<=40||45===i||n.ctrlKey||a)&&(o(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),r.get()&&t.typing&&!_x(vx(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",e=>{const i=e.keyCode;if(e.isDefaultPrevented())return;if(i>=33&&i<=36||i>=37&&i<=40||45===i)return void(t.typing&&o(e));const a=e.ctrlKey&&!e.altKey||e.metaKey;if((i<16||i>20)&&224!==i&&91!==i&&!t.typing&&!a)return t.beforeChange(),Sx(t,!0,n),t.add({},e),void r.set(!0);(At.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}),e.on("mousedown",e=>{t.typing&&o(e)}),e.on("input",e=>{var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||(e=>"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType)(e))&&o(e)}),e.on("AddUndo Undo Redo ClearUndos",t=>{t.isDefaultPrevented()||e.nodeChanged()})})(e,o,n),(e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")})(e),o},D_=[9,27,Jh.HOME,Jh.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Jh.DOWN,Jh.UP,Jh.LEFT,Jh.RIGHT].concat(At.browser.isFirefox()?[224]:[]),P_="data-mce-placeholder",L_=e=>"keydown"===e.type||"keyup"===e.type,N_=e=>{const t=e.keyCode;return t===Jh.BACKSPACE||t===Jh.DELETE},R_=(e,t)=>({from:e,to:t}),E_=(e,t)=>{const n=yn(e),r=yn(t.container());return mm(n,r).map(e=>((e,t)=>({block:e,position:t}))(e,t))},O_=(e,t)=>$n(t,e=>Mo(e)||oo(e.dom),t=>wn(t,e)).filter(jt).getOr(e),B_=(e,t)=>{const n=((e,t)=>{const n=Rn(e);return Q(n,e=>t.isBlock(Ht(e))).fold(k(n),e=>n.slice(0,e))})(e,t);return j(n,br),n},z_=(e,t)=>{const n=_g(t,e);return J(n.reverse(),e=>di(e)).each(br)},F_=(e,t,n,r,o)=>{if(di(n))return Io(n),Md(n.dom);0===X(Ln(o),e=>!di(e)).length&&di(t)&&hr(o,mn("br"));const i=Cd(n.dom,Hs.before(o.dom));return j(B_(t,r),e=>{hr(o,e)}),z_(e,t),i},V_=(e,t,n,r)=>{if(di(n)){if(di(t)){const e=e=>{const t=(e,n)=>On(e).fold(()=>n,e=>((e,t)=>e.isInline(Ht(t)))(r,e)?t(e,n.concat(us(e))):n);return t(e,[])},o=Z(e(n),(e,t)=>(mr(e,t),t),ko());yr(t),gr(t,o)}return br(n),Md(t.dom)}const o=Td(n.dom);return j(B_(t,r),e=>{gr(n,e)}),z_(e,t),o},H_=(e,t)=>{wd(e,t.dom).bind(e=>B.from(e.getNode())).map(yn).filter(xo).each(br)},W_=(e,t,n,r)=>(H_(!0,t),H_(!1,n),((e,t)=>Sn(t,e)?((e,t)=>{const n=_g(t,e);return B.from(n[n.length-1])})(t,e):B.none())(t,n).fold(D(V_,e,t,n,r),D(F_,e,t,n,r))),G_=(e,t,n,r,o)=>t?W_(e,r,n,o):W_(e,n,r,o),U_=(e,t)=>{const n=yn(e.getBody()),r=((e,t,n)=>n.collapsed?((e,t,n)=>{const r=E_(e,Hs.fromRangeStart(n)),o=r.bind(n=>bd(t,e,n.position).bind(n=>E_(e,n).map(n=>((e,t,n)=>no(n.position.getNode())&&!di(n.block)?wd(!1,n.block.dom).bind(r=>r.isEqual(n.position)?bd(t,e,r).bind(t=>E_(e,t)):B.some(n)).getOr(n):n)(e,t,n))));return Ot(r,o,R_).filter(t=>(e=>!wn(e.from.block,e.to.block))(t)&&((e,t)=>{const n=yn(e);return wn(O_(n,t.from.block),O_(n,t.to.block))})(e,t)&&(e=>!1===io(e.from.block.dom)&&!1===io(e.to.block.dom))(t)&&(e=>{const t=e=>_o(e)||Si(e.dom);return t(e.from.block)&&t(e.to.block)})(t))})(e,t,n):B.none())(n.dom,t,e.selection.getRng()).map(r=>()=>{G_(n,t,r.from.block,r.to.block,e.schema).each(t=>{e.selection.setRng(t.toRange())})});return r},j_=(e,t)=>{const n=yn(t),r=D(wn,e);return Zn(n,Mo,r).isSome()},Y_=(e,t)=>e.selection.isCollapsed()?B.none():(e=>{const t=yn(e.getBody());return((e,t)=>{const n=Cd(e.dom,Hs.fromRangeStart(t)).isNone(),r=Sd(e.dom,Hs.fromRangeEnd(t)).isNone();return!((e,t)=>j_(e,t.startContainer)||j_(e,t.endContainer))(e,t)&&n&&r})(t,e.selection.getRng())?(e=>B.some(()=>{e.setContent(""),e.selection.setCursorLocation()}))(e):((e,t,n)=>{const r=t.getRng();return Ot(mm(e,yn(r.startContainer)),mm(e,yn(r.endContainer)),(o,i)=>wn(o,i)?B.none():B.some(()=>{r.deleteContents(),G_(e,!0,o,i,n).each(e=>{t.setRng(e.toRange())})})).getOr(B.none())})(t,e.selection,e.schema)})(e),q_=(e,t,n,r,o)=>B.from(t._selectionOverrides.showCaret(e,n,r,o)),X_=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?B.none():B.some((e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t})(t)),Z_=(e,t,n)=>t.collapsed?((e,t,n)=>{const r=Jc(1,e.getBody(),t),o=Hs.fromRangeStart(r),i=o.getNode();if(Ac(i))return q_(1,e,i,!o.isAtEnd(),!1);const a=o.getNode(!0);if(Ac(a))return q_(1,e,a,!1,!1);const s=Ym(e.dom.getRoot(),o.getNode());return Ac(s)?q_(1,e,s,!1,n):B.none()})(e,t,n).getOr(t):t,$_=e=>yg(e)||fg(e),K_=e=>bg(e)||gg(e),J_=(e,t,n,r,o,i)=>{q_(r,e,i.getNode(!o),o,!0).each(n=>{if(t.collapsed){const e=t.cloneRange();o?e.setEnd(n.startContainer,n.startOffset):e.setStart(n.endContainer,n.endOffset),e.deleteContents()}else t.deleteContents();e.selection.setRng(n)}),((e,t)=>{$r(t)&&0===t.data.length&&e.remove(t)})(e.dom,n)},Q_=(e,t)=>((e,t)=>{const n=e.selection.getRng();if(!$r(n.commonAncestorContainer))return B.none();const r=t?od.Forwards:od.Backwards,o=gd(e.getBody()),i=D(nd,t?o.next:o.prev),a=t?$_:K_,s=ed(r,e.getBody(),n),l=i(s),u=l?cm(t,l):l;if(!u||!rd(s,u))return B.none();if(a(u))return B.some(()=>J_(e,n,s.getNode(),r,t,u));const c=i(u);return c&&a(c)&&rd(u,c)?B.some(()=>J_(e,n,s.getNode(),r,t,c)):B.none()})(e,t),ew=(e,t)=>{const n=e.getBody();return t?Md(n).filter(yg):Td(n).filter(bg)},tw=e=>{const t=e.selection.getRng();return!t.collapsed&&(ew(e,!0).exists(e=>e.isEqual(Hs.fromRangeStart(t)))||ew(e,!1).exists(e=>e.isEqual(Hs.fromRangeEnd(t))))},nw=hl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),rw=(e,t,n,r)=>bd(t,e,n).bind(o=>{return i=o.getNode(),x(i)&&(Mo(yn(i))||So(yn(i)))||((e,t,n,r,o)=>{const i=t=>o.isInline(t.nodeName.toLowerCase())&&!jc(n,r,e);return Qc(!t,n).fold(()=>Qc(t,r).fold(E,i),i)})(e,t,n,o,r)?B.none():t&&io(o.getNode())||!t&&io(o.getNode(!0))?((e,t,n,r)=>{const o=r.getNode(!t);return mm(yn(e),yn(n.getNode())).map(e=>di(e)?nw.remove(e.dom):nw.moveToElement(o)).orThunk(()=>B.some(nw.moveToElement(o)))})(e,t,n,o):t&&bg(n)||!t&&yg(n)?B.some(nw.moveToPosition(o)):B.none();var i}),ow=(e,t)=>B.from(Ym(e.getBody(),t)),iw=e=>{const t=e.dom,n=e.selection,r=Ym(e.getBody(),n.getNode());if(oo(r)&&t.isBlock(r)&&t.isEmpty(r)){const e=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(e),n.setRng(Hs.before(e).toRange())}return!0},aw=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return ow(e,n).filter(io).fold(()=>((e,t,n,r)=>{const o=Jc(t?1:-1,e,n),i=Hs.fromRangeStart(o),a=yn(e);return!t&&bg(i)?B.some(nw.remove(i.getNode(!0))):t&&yg(i)?B.some(nw.remove(i.getNode())):!t&&yg(i)&&Ng(a,i,r)?Rg(a,i,r).map(e=>nw.remove(e.getNode())):t&&bg(i)&&Lg(a,i,r)?Eg(a,i,r).map(e=>nw.remove(e.getNode())):((e,t,n,r)=>((e,t)=>{const n=t.getNode(!e),r=e?"after":"before";return Vr(n)&&n.getAttribute("data-mce-caret")===r})(t,n)?((e,t)=>b(t)?B.none():e&&io(t.nextSibling)?B.some(nw.moveToElement(t.nextSibling)):!e&&io(t.previousSibling)?B.some(nw.moveToElement(t.previousSibling)):B.none())(t,n.getNode(!t)).orThunk(()=>rw(e,t,n,r)):rw(e,t,n,r).bind(t=>((e,t,n)=>n.fold(e=>B.some(nw.remove(e)),e=>B.some(nw.moveToElement(e)),n=>jc(t,n,e)?B.none():B.some(nw.moveToPosition(n))))(e,n,t)))(e,t,i,r)})(e.getBody(),t,e.selection.getRng(),e.schema).map(n=>()=>n.fold(((e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),im(e,t,yn(n)),!0))(e,t),((e,t)=>n=>{const r=t?Hs.before(n):Hs.after(n);return e.selection.setRng(r.toRange()),!0})(e,t),(e=>t=>(e.selection.setRng(t.toRange()),!0))(e))),()=>B.some(C))})(e,t):((e,t)=>{const n=e.selection.getNode();return io(n)&&!ao(n)?ow(e,n.parentNode).filter(io).fold(()=>B.some(()=>{var n;n=yn(e.getBody()),j(Er(n,".mce-offscreen-selection"),br),im(e,t,yn(e.selection.getNode())),vm(e)}),()=>B.some(C)):tw(e)?B.some(()=>{xm(e,e.selection.getRng(),yn(e.getBody()))}):B.none()})(e,t),sw=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=Hs.fromRangeStart(e.selection.getRng());return bd(t,e.getBody(),n).filter(e=>t?hg(e):pg(e)).bind(e=>Yc(t?0:-1,e)).map(t=>()=>e.selection.select(t))})(e,t):B.none(),lw=$r,uw=e=>lw(e)&&e.data[0]===Ao,cw=e=>lw(e)&&e.data[e.data.length-1]===Ao,dw=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Ao)},hw=(e,t)=>e?(e=>{var t;if(lw(e.previousSibling))return cw(e.previousSibling)||e.previousSibling.appendData(Ao),e.previousSibling;if(lw(e))return uw(e)||e.insertData(0,Ao),e;{const n=dw(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),n}})(t):(e=>{var t,n;if(lw(e.nextSibling))return uw(e.nextSibling)||e.nextSibling.insertData(0,Ao),e.nextSibling;if(lw(e))return cw(e)||e.appendData(Ao),e;{const r=dw(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(r,e.nextSibling):null===(n=e.parentNode)||void 0===n||n.appendChild(r),r}})(t),pw=D(hw,!0),fw=D(hw,!1),gw=(e,t)=>$r(e.container())?hw(t,e.container()):hw(t,e.getNode()),mw=(e,t)=>{const n=t.get();return n&&e.container()===n&&Eo(n)},vw=(e,t)=>t.fold(t=>{Sc(e.get());const n=pw(t);return e.set(n),B.some(Hs(n,n.length-1))},t=>Md(t).map(t=>{if(mw(t,e)){const t=e.get();return Hs(t,1)}{Sc(e.get());const n=gw(t,!0);return e.set(n),Hs(n,1)}}),t=>Td(t).map(t=>{if(mw(t,e)){const t=e.get();return Hs(t,t.length-1)}{Sc(e.get());const n=gw(t,!1);return e.set(n),Hs(n,n.length-1)}}),t=>{Sc(e.get());const n=fw(t);return e.set(n),B.some(Hs(n,1))}),yw=(e,t)=>{for(let n=0;n<e.length;n++){const r=e[n].apply(null,t);if(r.isSome())return r}return B.none()},bw=hl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),xw=(e,t)=>Uc(t,e)||e,_w=(e,t,n)=>{const r=dm(n),o=xw(t,r.container());return um(e,o,r).fold(()=>Sd(o,r).bind(D(um,e,o)).map(e=>bw.before(e)),B.none)},ww=(e,t)=>null===Ad(e,t),Sw=(e,t,n)=>um(e,t,n).filter(D(ww,t)),Cw=(e,t,n)=>{const r=hm(n);return Sw(e,t,r).bind(e=>Cd(e,r).isNone()?B.some(bw.start(e)):B.none())},Mw=(e,t,n)=>{const r=dm(n);return Sw(e,t,r).bind(e=>Sd(e,r).isNone()?B.some(bw.end(e)):B.none())},Tw=(e,t,n)=>{const r=hm(n),o=xw(t,r.container());return um(e,o,r).fold(()=>Cd(o,r).bind(D(um,e,o)).map(e=>bw.after(e)),B.none)},kw=e=>!lm(Aw(e)),Iw=(e,t,n)=>yw([_w,Cw,Mw,Tw],[e,t,n]).filter(kw),Aw=e=>e.fold(I,I,I,I),Dw=e=>e.fold(k("before"),k("start"),k("end"),k("after")),Pw=e=>e.fold(bw.before,bw.before,bw.after,bw.after),Lw=e=>e.fold(bw.start,bw.start,bw.end,bw.end),Nw=(e,t,n,r,o,i)=>Ot(um(t,n,r),um(t,n,o),(t,r)=>t!==r&&((e,t,n)=>{const r=Uc(t,e),o=Uc(n,e);return x(r)&&r===o})(n,t,r)?bw.after(e?t:r):i).getOr(i),Rw=(e,t)=>e.fold(O,e=>{return r=t,!(Dw(n=e)===Dw(r)&&Aw(n)===Aw(r));var n,r}),Ew=(e,t)=>e?t.fold(M(B.some,bw.start),B.none,M(B.some,bw.after),B.none):t.fold(B.none,M(B.some,bw.before),B.none,M(B.some,bw.end)),Ow=(e,t,n)=>{const r=e?1:-1;return t.setRng(Hs(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Bw;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Bw||(Bw={}));const zw=(e,t)=>e===od.Backwards?re(t):t,Fw=(e,t,n)=>e===od.Forwards?t.next(n):t.prev(n),Vw=(e,t,n,r)=>no(r.getNode(t===od.Forwards))?Bw.Br:!1===jc(n,r)?Bw.Block:Bw.Wrap,Hw=(e,t,n,r)=>{const o=gd(n);let i=r;const a=[];for(;i;){const n=Fw(t,o,i);if(!n)break;if(no(n.getNode(!1)))return t===od.Forwards?{positions:zw(t,a).concat([n]),breakType:Bw.Br,breakAt:B.some(n)}:{positions:zw(t,a),breakType:Bw.Br,breakAt:B.some(n)};if(n.isVisible()){if(e(i,n)){const e=Vw(0,t,i,n);return{positions:zw(t,a),breakType:e,breakAt:B.some(n)}}a.push(n),i=n}else i=n}return{positions:zw(t,a),breakType:Bw.Eol,breakAt:B.none()}},Ww=(e,t,n,r)=>t(n,r).breakAt.map(r=>{const o=t(n,r).positions;return e===od.Backwards?o.concat(r):[r].concat(o)}).getOr([]),Gw=(e,t)=>$(e,(e,n)=>e.fold(()=>B.some(n),r=>Ot(le(r.getClientRects()),le(n.getClientRects()),(e,o)=>{const i=Math.abs(t-e.left);return Math.abs(t-o.left)<=i?n:r}).or(e)),B.none()),Uw=(e,t)=>le(t.getClientRects()).bind(t=>Gw(e,t.left)),jw=D(Hw,Hs.isAbove,-1),Yw=D(Hw,Hs.isBelow,1),qw=D(Ww,-1,jw),Xw=D(Ww,1,Yw),Zw=(e,t)=>jw(e,t).breakAt.isNone(),$w=(e,t)=>Yw(e,t).breakAt.isNone(),Kw=(e,t)=>Uw(qw(e,t),t),Jw=(e,t)=>Uw(Xw(e,t),t),Qw=io,eS=(e,t)=>Math.abs(e.left-t),tS=(e,t)=>Math.abs(e.right-t),nS=(e,t)=>Pe(e,(e,n)=>{const r=Math.min(eS(e,t),tS(e,t)),o=Math.min(eS(n,t),tS(n,t));return o===r&&Ce(n,"node")&&Qw(n.node)||o<r?n:e}),rS=e=>{const t=t=>U(t,t=>{const n=fs(t);return n.node=e,n});if(Vr(e))return t(e.getClientRects());if($r(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},oS=e=>te(e,rS);var iS;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(iS||(iS={}));const aS=(e,t,n,r,o,i)=>{let a=0;const s=[],l=r=>{let i=oS([r]);-1===e&&(i=i.reverse());for(let e=0;e<i.length;e++){const r=i[e];if(!n(r,u)){if(s.length>0&&t(r,Ne(s))&&a++,r.line=a,o(r))return!0;s.push(r)}}return!1},u=Ne(i.getClientRects());if(!u)return s;const c=i.getNode();return c&&(l(c),((e,t,n,r)=>{let o=r;for(;o=Gc(o,e,ei,t);)if(n(o))return})(e,r,l,c)),s},sS=D(aS,iS.Up,vs,ys),lS=D(aS,iS.Down,ys,vs),uS=e=>Ne(e.getClientRects()),cS=e=>t=>((e,t)=>t.line>e)(e,t),dS=e=>t=>((e,t)=>t.line===e)(e,t),hS=(e,t)=>{e.selection.setRng(t),Zp(e,e.selection.getRng())},pS=(e,t,n)=>B.some(Z_(e,t,n)),fS=(e,t,n,r,o,i)=>{const a=t===od.Forwards,s=gd(e.getBody()),l=D(nd,a?s.next:s.prev),u=a?r:o;if(!n.collapsed){const r=xs(n);if(i(r))return q_(t,e,r,t===od.Backwards,!1);if(tw(e)){const e=n.cloneRange();return e.collapse(t===od.Backwards),B.from(e)}}const c=ed(t,e.getBody(),n);if(u(c))return X_(e,c.getNode(!a));let d=l(c);const h=Go(n);if(!d)return h?B.some(n):B.none();if(d=cm(a,d),u(d))return q_(t,e,d.getNode(!a),a,!1);const p=l(d);return p&&u(p)&&rd(d,p)?q_(t,e,p.getNode(!a),a,!1):h?pS(e,d.toRange(),!1):B.none()},gS=(e,t,n,r,o,i)=>{const a=ed(t,e.getBody(),n),s=Ne(a.getClientRects()),l=t===iS.Down,u=e.getBody();if(!s)return B.none();if(tw(e)){const e=l?Hs.fromRangeEnd(n):Hs.fromRangeStart(n);return(l?Jw:Kw)(u,e).orThunk(()=>B.from(e)).map(e=>e.toRange())}const c=(l?lS:sS)(u,cS(1),a),d=X(c,dS(1)),h=s.left,p=nS(d,h);if(p&&i(p.node)){const n=Math.abs(h-p.left),r=Math.abs(h-p.right);return q_(t,e,p.node,n<r,!1)}let f;if(f=r(a)?a.getNode():o(a)?a.getNode(!0):xs(n),f){const n=((e,t,n,r)=>{const o=gd(t);let i,a,s,l;const u=[];let c=0;1===e?(i=o.next,a=ys,s=vs,l=Hs.after(r)):(i=o.prev,a=vs,s=ys,l=Hs.before(r));const d=uS(l);do{if(!l.isVisible())continue;const e=uS(l);if(s(e,d))continue;u.length>0&&a(e,Ne(u))&&c++;const t=fs(e);if(t.position=l,t.line=c,n(t))return u;u.push(t)}while(l=i(l));return u})(t,u,cS(1),f);let r=nS(X(n,dS(1)),h);if(r)return pS(e,r.position.toRange(),!1);if(r=Ne(X(n,dS(0))),r)return pS(e,r.position.toRange(),!1)}return 0===d.length?mS(e,l).filter(l?o:r).map(t=>Z_(e,t.toRange(),!1)):B.none()},mS=(e,t)=>{const n=e.selection.getRng(),r=t?Hs.fromRangeEnd(n):Hs.fromRangeStart(n),o=(i=r.container(),a=e.getBody(),Zn(yn(i),e=>Pc(e.dom),e=>e.dom===a).map(e=>e.dom).getOr(a));var i,a;if(t){const e=Yw(o,r);return ue(e.positions)}{const e=jw(o,r);return le(e.positions)}},vS=(e,t,n)=>mS(e,t).filter(n).exists(t=>(e.selection.setRng(t.toRange()),!0)),yS=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},bS=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},xS=(e,t,n)=>vw(t,n).map(t=>(yS(e,t),n)),_S=(e,t,n)=>!!gu(e)&&((e,t,n)=>{const r=e.getBody(),o=((e,t,n)=>{const r=Hs.fromRangeStart(e);if(e.collapsed)return r;{const o=Hs.fromRangeEnd(e);return n?Cd(t,o).getOr(o):Sd(t,r).getOr(r)}})(e.selection.getRng(),r,n);return((e,t,n,r)=>{const o=cm(e,r),i=Iw(t,n,o);return Iw(t,n,o).bind(D(Ew,e)).orThunk(()=>((e,t,n,r,o)=>{const i=cm(e,o);return bd(e,n,i).map(D(cm,e)).fold(()=>r.map(Pw),o=>Iw(t,n,o).map(D(Nw,e,t,n,i,o)).filter(D(Rw,r))).filter(kw)})(e,t,n,i,r))})(n,D(sm,e),r,o).bind(n=>xS(e,t,n))})(e,t,n).isSome(),wS=(e,t,n)=>!!gu(t)&&((e,t)=>{const n=t.selection.getRng(),r=e?Hs.fromRangeEnd(n):Hs.fromRangeStart(n);return!!(e=>_(e.selection.getSel().modify))(t)&&(e&&zo(r)?Ow(!0,t.selection,r):!(e||!Fo(r))&&Ow(!1,t.selection,r))})(e,t),SS=e=>{const t=Fa(null),n=D(sm,e);return e.on("NodeChange",r=>{gu(e)&&(((e,t,n)=>{const r=U(Er(yn(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),e=>e.dom),o=X(r,e),i=X(n,e);j(oe(o,i),D(bS,!1)),j(oe(i,o),D(bS,!0))})(n,e.dom,r.parents),((e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const r=Hs.fromRangeStart(e.selection.getRng());Hs.isTextPosition(r)&&!(e=>zo(e)||Fo(e))(r)&&(yS(e,((e,t)=>Hs.isTextPosition(t)?((e,t)=>yc(e)&&t.container()===e?((e,t)=>{const n=xc(e.data.substr(0,t.offset())),r=xc(e.data.substr(t.offset()));return(n.text+r.text).length>0?(_c(e),Hs(e,t.offset()-n.count)):t})(e,t):wc(e,t))(e,t):((e,t)=>t.container()===e.parentNode?((e,t)=>{const n=t.container(),r=((e,t)=>{const n=H(e,t);return-1===n?B.none():B.some(n)})(ce(n.childNodes),e).map(e=>e<t.offset()?Hs(n,t.offset()-1):t).getOr(t);return Sc(e),r})(e,t):wc(e,t))(e,t))(n,r)),t.set(null))}})(e,t),((e,t,n,r)=>{if(t.selection.isCollapsed()){const o=X(r,e);j(o,r=>{const o=Hs.fromRangeStart(t.selection.getRng());Iw(e,t.getBody(),o).bind(e=>xS(t,n,e))})}})(n,e,t,r.parents))}),t},CS=D(wS,!0),MS=D(wS,!1),TS=(e,t,n)=>{if(gu(e)){const r=mS(e,t).getOrThunk(()=>{const n=e.selection.getRng();return t?Hs.fromRangeEnd(n):Hs.fromRangeStart(n)});return Iw(D(sm,e),e.getBody(),r).exists(t=>{const r=Pw(t);return vw(n,r).exists(t=>(yS(e,t),!0))})}return!1},kS=(e,t)=>n=>vw(t,n).map(t=>()=>yS(e,t)),IS=(e,t,n,r)=>{const o=e.getBody(),i=D(sm,e);e.undoManager.ignore(()=>{e.selection.setRng(((e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n})(n,r)),fm(e),Iw(i,o,Hs.fromRangeStart(e.selection.getRng())).map(Lw).bind(kS(e,t)).each(R)}),e.nodeChanged()},AS=(e,t,n)=>{if(e.selection.isCollapsed()&&gu(e)){const r=Hs.fromRangeStart(e.selection.getRng());return((e,t,n,r)=>{const o=((e,t)=>Uc(t,e)||e)(e.getBody(),r.container()),i=D(sm,e),a=Iw(i,o,r);return a.bind(e=>n?e.fold(k(B.some(Lw(e))),B.none,k(B.some(Pw(e))),B.none):e.fold(B.none,k(B.some(Pw(e))),B.none,k(B.some(Lw(e))))).map(kS(e,t)).getOrThunk(()=>{const s=xd(n,o,r),l=s.bind(e=>Iw(i,o,e));return Ot(a,l,()=>um(i,o,r).bind(t=>(e=>Ot(Md(e),Td(e),(t,n)=>{const r=cm(!0,t),o=cm(!1,n);return Sd(e,r).forall(e=>e.isEqual(o))}).getOr(!0))(t)?B.some(()=>{im(e,n,yn(t))}):B.none())).getOrThunk(()=>l.bind(()=>s.map(o=>()=>{n?IS(e,t,r,o):IS(e,t,o,r)})))})})(e,t,n,r)}return B.none()},DS=(e,t)=>{const n=yn(e.getBody()),r=yn(e.selection.getStart()),o=_g(r,n);return Q(o,t).fold(k(o),e=>o.slice(0,e))},PS=e=>1===zn(e),LS=(e,t)=>{const n=D(Ev,e);return te(t,e=>n(e)?[e.dom]:[])},NS=e=>{const t=(e=>DS(e,t=>e.schema.isBlock(Ht(t))))(e);return LS(e,t)},RS=(e,t)=>{const n=e.selection.getStart(),r=((e,t)=>{const n=t.parentElement;return no(t)&&!m(n)&&e.dom.isEmpty(n)})(e,n)||Sh(yn(n))?Rv(n,t):((e,t)=>{const{caretContainer:n,caretPosition:r}=Nv(t);return e.insertNode(n.dom),r})(e.selection.getRng(),t);e.selection.setRng(r.toRange())},ES=e=>$r(e.startContainer),OS=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=X((e=>DS(e,t=>e.schema.isBlock(Ht(t))||(e=>zn(e)>1)(t)))(e),PS);return ue(n).bind(r=>{const o=Hs.fromRangeStart(e.selection.getRng());return ym(t,o,r.dom)&&!Sh(r)?B.some(()=>((e,t,n,r)=>{const o=LS(t,r);if(0===o.length)im(t,e,n);else{const e=Rv(n.dom,o);t.selection.setRng(e.toRange())}})(t,e,r,n)):B.none()})})(e,t):(e=>{if((e=>{const t=e.selection.getRng();return(e=>0===e.startOffset&&ES(e))(t)&&((e,t)=>{const n=t.startContainer.parentElement;return!m(n)&&Ev(e,yn(n))})(e,t)&&(e=>(e=>(e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!m(t)&&!m(n)&&t.isEqualNode(n)})(e)&&(e=>{const t=e.endContainer;return e.endOffset===($r(t)?t.length:t.childNodes.length)})(e))(e)||(e=>!e.endContainer.isEqualNode(e.commonAncestorContainer))(e))(t)})(e)){const t=NS(e);return B.some(()=>{fm(e),((e,t)=>{const n=oe(t,NS(e));n.length>0&&RS(e,n)})(e,t)})}return B.none()})(e),BS=e=>((e=>{const t=e.selection.getRng();return t.collapsed&&(ES(t)||e.dom.isEmpty(t.startContainer))&&!(e=>((e,t)=>Zn(e,e=>Id(e.dom),e=>t.isBlock(Ht(e))).isSome())(yn(e.selection.getStart()),e.schema))(e)})(e)&&RS(e,[]),!0),zS=(e,t,n)=>x(n)?B.some(()=>{e._selectionOverrides.hideFakeCaret(),im(e,t,yn(n))}):B.none(),FS=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=t?fg:gg,r=t?od.Forwards:od.Backwards,o=ed(r,e.getBody(),e.selection.getRng());return n(o)?zS(e,t,o.getNode(!t)):B.from(cm(t,o)).filter(e=>n(e)&&rd(o,e)).bind(n=>zS(e,t,n.getNode(!t)))})(e,t):((e,t)=>{const n=e.selection.getNode();return lo(n)?zS(e,t,n):B.none()})(e,t),VS=e=>$e(null!=e?e:"").getOr(0),HS=(e,t)=>(e||"table"===Ht(t)?"margin":"padding")+("rtl"===sr(t,"direction")?"-right":"-left"),WS=e=>{const t=US(e);return!e.mode.isReadOnly()&&(t.length>1||((e,t)=>ne(t,t=>{const n=HS(Ql(e),t),r=ur(t,n).map(VS).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&r>0}))(e,t))},GS=e=>wo(e)||So(e),US=e=>X(_r(e.selection.getSelectedBlocks()),e=>!GS(e)&&!(e=>kn(e).exists(GS))(e)&&$n(e,e=>oo(e.dom)||io(e.dom)).exists(e=>oo(e.dom))),jS=(e,t)=>{var n,r;const{dom:o}=e,i=eu(e),a=null!==(r=null===(n=/[a-z%]+$/i.exec(i))||void 0===n?void 0:n[0])&&void 0!==r?r:"px",s=VS(i),l=Ql(e);j(US(e),e=>{((e,t,n,r,o,i)=>{const a=HS(n,yn(i)),s=VS(e.getStyle(i,a));if("outdent"===t){const t=Math.max(0,s-r);e.setStyle(i,a,t?t+o:"")}else{const t=s+r+o;e.setStyle(i,a,t)}})(o,t,l,s,a,e.dom)})},YS=e=>jS(e,"outdent"),qS=e=>{if(e.selection.isCollapsed()&&WS(e)){const t=e.dom,n=e.selection.getRng(),r=Hs.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(null!==o&&Tg(yn(o),r,e.schema))return B.some(()=>YS(e))}return B.none()},XS=(e,t,n)=>de([qS,aw,Q_,(e,n)=>AS(e,t,n),U_,jm,sw,FS,Y_,OS],t=>t(e,n)).filter(t=>e.selection.isEditable()),ZS=e=>void 0===e.touches||1!==e.touches.length?B.none():B.some(e.touches[0]),$S=(e,t)=>Se(e,t.nodeName),KS=(e,t)=>!!$r(t)||!!Vr(t)&&!($S(e.getBlockElements(),t)||Hd(t)||Ti(e,t)||pi(t)),JS=(e,t)=>{if($r(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||$S(e,t.nextSibling)||pi(t.nextSibling)}return!1},QS=e=>e.dom.create(Nl(e),Rl(e)),eC=e=>{const t=e.dom,n=e.selection,r=e.schema,o=r.getBlockElements(),i=n.getStart(),a=e.getBody();let s,l,u=!1;const c=Nl(e);if(!i||!Vr(i))return;const d=a.nodeName.toLowerCase();if(!r.isValidChild(d,c.toLowerCase())||((e,t,n)=>G(xg(yn(n),yn(t)),t=>$S(e,t.dom)))(o,a,i))return;const h=n.getRng(),{startContainer:p,startOffset:f,endContainer:g,endOffset:m}=h,v=bf(e);let y=a.firstChild;for(;y;)if(Vr(y)&&wi(r,y),KS(r,y)){if(JS(o,y)){l=y,y=y.nextSibling,t.remove(l);continue}s||(s=QS(e),a.insertBefore(s,y),u=!0),l=y,y=y.nextSibling,s.appendChild(l)}else s=null,y=y.nextSibling;u&&v&&(h.setStart(p,f),h.setEnd(g,m),n.setRng(h),e.nodeChanged())},tC=(e,t,n)=>{const r=yn(QS(e)),o=ko();gr(r,o),n(t,r);const i=document.createRange();return i.setStartBefore(o.dom),i.setEndBefore(o.dom),i},nC=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),rC=(e,t,n)=>function(r){const o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return r;if(">"===a){const e=t.lastIndexOf("<",i);if(-1!==e&&-1!==t.substring(e,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"},oC=(e,t)=>{t.hasAttribute("data-mce-caret")&&(Wo(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},iC=(e,t)=>{const n=(e=>Qn(yn(e.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull())(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void oC(e,n)):void(Bo(n)&&(oC(e,n),e.undoManager.add()))},aC=io,sC=(e,t,n)=>{const r=gd(e.getBody()),o=D(nd,1===t?r.next:r.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(Hs.fromRangeStart(n))){const n=yn((e=>{const t=e.dom.create(Nl(e));return t.innerHTML='<br data-mce-bogus="1">',t})(e));1===t?pr(yn(r),n):hr(yn(r),n),e.selection.select(n.dom,!0),e.selection.collapse()}}},lC=(e,t)=>((e,t)=>{const n=t?od.Forwards:od.Backwards,r=e.selection.getRng();return((e,t,n)=>fS(t,e,n,yg,bg,aC))(n,e,r).orThunk(()=>(sC(e,n,r),B.none()))})(e,((e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return lm(n)?!t:t})(e.selection,t)).exists(t=>(hS(e,t),!0)),uC=(e,t)=>((e,t)=>{const n=t?1:-1,r=e.selection.getRng();return((e,t,n)=>gS(t,e,n,e=>yg(e)||mg(e),e=>bg(e)||vg(e),aC))(n,e,r).orThunk(()=>(sC(e,n,r),B.none()))})(e,t).exists(t=>(hS(e,t),!0)),cC=(e,t)=>vS(e,t,t?bg:yg),dC=(e,t)=>ew(e,!t).map(n=>{const r=n.toRange(),o=e.selection.getRng();return t?r.setStart(o.startContainer,o.startOffset):r.setEnd(o.endContainer,o.endOffset),r}).exists(t=>(hS(e,t),!0)),hC=e=>W(["figcaption"],Ht(e)),pC=(e,t)=>!!e.selection.isCollapsed()&&((e,t)=>{const n=yn(e.getBody()),r=Hs.fromRangeStart(e.selection.getRng());return((e,t,n)=>{const r=D(wn,t);return $n(yn(e.container()),e=>n.isBlock(Ht(e)),r).filter(hC)})(r,n,e.schema).exists(()=>{if(((e,t,n)=>t?$w(e.dom,n):Zw(e.dom,n))(n,t,r)){const r=tC(e,n,t?gr:fr);return e.selection.setRng(r),!0}return!1})})(e,t),fC=(e,t)=>((e,t)=>t?B.from(e.dom.getParent(e.selection.getNode(),"details")).map(t=>((e,t)=>{const n=e.selection.getRng(),r=Hs.fromRangeStart(n);return!(e.getBody().lastChild!==t||!$w(t,r)||(e.execCommand("InsertNewBlockAfter"),0))})(e,t)).getOr(!1):B.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(t=>B.from(e.dom.getParent(t,"details")).map(n=>((e,t,n)=>{const r=e.selection.getRng(),o=Hs.fromRangeStart(r);return!(e.getBody().firstChild!==t||!Zw(n,o)||(e.execCommand("InsertNewBlockBefore"),0))})(e,n,t))).getOr(!1))(e,t),gC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},mC=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,vC=(e,...t)=>()=>e.apply(null,t),yC=(e,t)=>J(((e,t)=>te((e=>U(e,e=>({...gC,...e})))(e),e=>mC(e,t)?[e]:[]))(e,t),e=>e.action()),bC=(e,t)=>de(((e,t)=>te((e=>U(e,e=>({...gC,...e})))(e),e=>mC(e,t)?[e]:[]))(e,t),e=>e.action()),xC=(e,t)=>{const n=t?od.Forwards:od.Backwards,r=e.selection.getRng();return fS(e,n,r,fg,gg,lo).exists(t=>(hS(e,t),!0))},_C=(e,t)=>{const n=t?1:-1,r=e.selection.getRng();return gS(e,n,r,fg,gg,lo).exists(t=>(hS(e,t),!0))},wC=(e,t)=>vS(e,t,t?gg:fg),SC=hl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),CC={...SC,none:e=>SC.none(e)},MC=(e,t,n)=>te(Rn(e),e=>xn(e,t)?n(e)?[e]:[]:MC(e,t,n)),TC=(e,t)=>er(e,"table",t),kC=(e,t,n,r,o=O)=>{const i=1===r;if(!i&&n<=0)return CC.first(e[0]);if(i&&n>=e.length-1)return CC.last(e[e.length-1]);{const i=n+r,a=e[i];return o(a)?CC.middle(t,a):kC(e,t,i,r,o)}},IC=(e,t)=>TC(e,t).bind(t=>{const n=MC(t,"th,td",O);return Q(n,t=>wn(e,t)).map(e=>({index:e,all:n}))}),AC=(e,t,n,r,o)=>{const i=Er(yn(n),"td,th,caption").map(e=>e.dom),a=X(((e,t)=>te(t,t=>{const n=((e,t)=>({left:e.left- -1,top:e.top- -1,right:e.right+-2,bottom:e.bottom+-2,width:e.width+-1,height:e.height+-1}))(fs(t.getBoundingClientRect()));return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))(e,i),e=>t(e,o));return((e,t,n)=>$(e,(e,r)=>e.fold(()=>B.some(r),e=>{const o=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return B.some(i<o?r:e)}),B.none()))(a,r,o).map(e=>e.cell)},DC=D(AC,e=>e.bottom,(e,t)=>e.y<t),PC=D(AC,e=>e.top,(e,t)=>e.y>t),LC=(e,t,n)=>{const r=e(t,n);return(e=>e.breakType===Bw.Wrap&&0===e.positions.length)(r)||!no(n.getNode())&&(e=>e.breakType===Bw.Br&&1===e.positions.length)(r)?!((e,t,n)=>n.breakAt.exists(n=>e(t,n).breakAt.isSome()))(e,t,r):r.breakAt.isNone()},NC=D(LC,jw),RC=D(LC,Yw),EC=(e,t,n,r)=>{const o=e.selection.getRng(),i=t?1:-1;return!(!Ic()||!((e,t,n)=>{const r=Hs.fromRangeStart(t);return wd(!e,n).exists(e=>e.isEqual(r))})(t,o,n)||(q_(i,e,n,!t,!1).each(t=>{hS(e,t)}),0))},OC=(e,t,n)=>{const r=((e,t)=>{const n=t.getNode(e);return qr(n)?B.some(n):B.none()})(!!t,n),o=!1===t;r.fold(()=>hS(e,n.toRange()),r=>wd(o,e.getBody()).filter(e=>e.isEqual(n)).fold(()=>hS(e,n.toRange()),n=>((e,t,n)=>{t.undoManager.transact(()=>{const r=e?pr:hr,o=tC(t,yn(n),r);hS(t,o)})})(t,e,r)))},BC=(e,t,n,r)=>{const o=e.selection.getRng(),i=Hs.fromRangeStart(o),a=e.getBody();if(!t&&NC(r,i)){const r=((e,t,n)=>((e,t)=>le(t.getClientRects()).bind(t=>DC(e,t.left,t.top)).bind(e=>{return Uw(Td(n=e).map(e=>jw(n,e).positions.concat(e)).getOr([]),t);var n}))(t,n).orThunk(()=>le(n.getClientRects()).bind(n=>Gw(qw(e,Hs.before(t)),n.left))).getOr(Hs.before(t)))(a,n,i);return OC(e,t,r),!0}if(t&&RC(r,i)){const r=((e,t,n)=>((e,t)=>ue(t.getClientRects()).bind(t=>PC(e,t.left,t.top)).bind(e=>{return Uw(Md(n=e).map(e=>[e].concat(Yw(n,e).positions)).getOr([]),t);var n}))(t,n).orThunk(()=>le(n.getClientRects()).bind(n=>Gw(Xw(e,Hs.after(t)),n.left))).getOr(Hs.after(t)))(a,n,i);return OC(e,t,r),!0}return!1},zC=(e,t,n)=>B.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>B.from(e.dom.getParent(r,"table")).map(o=>n(e,t,o,r))).getOr(!1),FC=(e,t)=>zC(e,t,EC),VC=(e,t)=>zC(e,t,BC),HC=(e,t,n)=>n.fold(B.none,B.none,(e,t)=>{return(n=t,Kn(n,Af)).map(e=>(e=>(e=>{const t=pp.getWin(e).dom,n=(e,n,r,o)=>ip(t,e,n,r,o),r=(e=>e.match({domRange:e=>{const t=yn(e.startContainer),n=yn(e.endContainer);return mp(t,e.startOffset,n,e.endOffset)},relative:gp,exact:mp}))(e);return((e,t)=>{const n=((e,t)=>t.match({domRange:e=>({ltr:k(e),rtl:B.none}),relative:(t,n)=>({ltr:Re(()=>op(e,t,n)),rtl:Re(()=>B.some(op(e,n,t)))}),exact:(t,n,r,o)=>({ltr:Re(()=>ip(e,t,n,r,o)),rtl:Re(()=>B.some(ip(e,r,o,t,n)))})}))(e,t);return((e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(e=>!1===e.collapsed).map(e=>ap.rtl(yn(e.endContainer),e.endOffset,yn(e.startContainer),e.startOffset)).getOrThunk(()=>sp(0,ap.ltr,n)):sp(0,ap.ltr,n)})(0,n)})(t,r).match({ltr:n,rtl:n})})(pp.exact(e,0,e,0)))(e));var n},n=>(e.execCommand("mceTableInsertRowAfter"),WC(e,t,n))),WC=(e,t,n)=>{return HC(e,t,(o=tr,IC(r=n,void 0).fold(()=>CC.none(r),e=>kC(e.all,r,e.index,1,o))));var r,o},GC=(e,t,n)=>{return HC(e,t,(o=tr,IC(r=n,void 0).fold(()=>CC.none(),e=>kC(e.all,r,e.index,-1,o))));var r,o},UC=(e,t)=>{const n=["table","li","dl"],r=yn(e.getBody()),o=e=>{const t=Ht(e);return wn(e,r)||W(n,t)},i=e.selection.getRng();return((e,t)=>((e,t,n=E)=>n(t)?B.none():W(e,Ht(t))?B.some(t):Jn(t,e.join(","),e=>xn(e,"table")||n(e)))(["td","th"],e,t))(yn(t?i.endContainer:i.startContainer),o).map(n=>(TC(n,o).each(t=>{e.model.table.clearSelectedCells(t.dom)}),e.selection.collapse(!t),(t?WC:GC)(e,o,n).each(t=>{e.selection.setRng(t)}),!0)).getOr(!1)},jC=(e,t)=>({container:e,offset:t}),YC=Oa.DOM,qC=e=>t=>e===t?-1:0,XC=(e,t,n)=>{if($r(e)&&t>=0)return B.some(jC(e,t));{const r=hs(YC);return B.from(r.backwards(e,t,qC(e),n)).map(e=>jC(e.container,e.container.data.length))}},ZC=(e,t,n)=>{if(!$r(e))return B.none();const r=e.data;if(t>=0&&t<=r.length)return B.some(jC(e,t));{const r=hs(YC);return B.from(r.backwards(e,t,qC(e),n)).bind(e=>{const r=e.container.data;return ZC(e.container,t+r.length,n)})}},$C=(e,t,n)=>{if(!$r(e))return B.none();const r=e.data;if(t<=r.length)return B.some(jC(e,t));{const o=hs(YC);return B.from(o.forwards(e,t,qC(e),n)).bind(e=>$C(e.container,t-r.length,n))}},KC=(e,t,n,r,o)=>{const i=hs(e,(e=>t=>e.isBlock(t)||W(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t))(e));return B.from(i.backwards(t,n,r,o))},JC=e=>Po(e.toString().replace(/\u00A0/g," ")),QC=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),eM=(e,t)=>e.substring(t.length),tM=(e,t,n,r=0)=>{return(o=yn(t.startContainer),er(o,Df)).fold(()=>((e,t,n,r=0)=>{if(!(o=t).collapsed||!$r(o.startContainer))return B.none();var o;const i={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return KC(e,t.startContainer,t.startOffset,(e,t,r)=>(i.text=r+i.text,i.offset+=t,((e,t,n)=>{let r;const o=n.charAt(0);for(r=t-1;r>=0;r--){const i=e.charAt(r);if(QC(i))return B.none();if(o===i&&He(e,n,r,t))break}return B.some(r)})(i.text,i.offset,n).getOr(t)),a).bind(e=>{const o=t.cloneRange();if(o.setStart(e.container,e.offset),o.setEnd(t.endContainer,t.endOffset),o.collapsed)return B.none();const i=JC(o);return 0!==i.lastIndexOf(n)||eM(i,n).length<r?B.none():B.some({text:eM(i,n),range:o,trigger:n})})})(e,t,n,r),t=>{const r=e.createRng();r.selectNode(t.dom);const o=JC(r);return B.some({range:r,text:eM(o,n),trigger:n})});var o},nM=e=>{if((e=>3===e.nodeType)(e))return jC(e,e.data.length);{const t=e.childNodes;return t.length>0?nM(t[t.length-1]):jC(e,t.length)}},rM=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?rM(n[t],0):n.length>0&&(e=>1===e.nodeType)(e)&&n.length===t?nM(n[n.length-1]):jC(e,t)},oM=(e,t,n,r={})=>{var o;const i=t(),a=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",s=X(i.lookupByTrigger(n.trigger),t=>n.text.length>=t.minChars&&t.matches.getOrThunk(()=>(e=>t=>{const n=rM(t.startContainer,t.startOffset);return!((e,t)=>{var n;const r=null!==(n=e.getParent(t.container,e.isBlock))&&void 0!==n?n:e.getRoot();return KC(e,t.container,t.offset,(e,t)=>0===t?-1:t,r).filter(e=>{const t=e.container.data.charAt(e.offset-1);return!QC(t)}).isSome()})(e,n)})(e.dom))(n.range,a,n.text));if(0===s.length)return B.none();const l=Promise.all(U(s,e=>e.fetch(n.text,e.maxResults,r).then(t=>({matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}))));return B.some({lookupData:l,context:n})};var iM;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(iM||(iM={}));const aM=(e,t,n)=>e.stype===iM.Error?t(e.serror):n(e.svalue),sM=e=>({stype:iM.Value,svalue:e}),lM=e=>({stype:iM.Error,serror:e}),uM=aM,cM=e=>p(e)&&he(e).length>100?" removed due to size":JSON.stringify(e,null,2),dM=(e,t)=>lM([{path:e,getErrorInfo:t}]),hM=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let r=0;r<t.length;r++){const o=t[r];for(const t in o)Se(o,t)&&(n[t]=e(n[t],o[t]))}return n},pM=hM((e,t)=>f(e)&&f(t)?pM(e,t):t),fM=(hM((e,t)=>t),e=>({tag:"defaultedThunk",process:k(e)})),gM=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},mM=e=>({extract:(t,n)=>{return o=e=>((e,t)=>dM(e,k(t)))(t,e),(r=e(n)).stype===iM.Error?o(r.serror):r;var r,o},toString:k("val")}),vM=mM(sM),yM=(e,t,n,r)=>r(we(e,t).getOrThunk(()=>n(e))),bM=(e,t,n,r,o)=>{const i=e=>o.extract(t.concat([r]),e),a=e=>e.fold(()=>sM(B.none()),e=>{return n=o.extract(t.concat([r]),e),i=B.some,n.stype===iM.Value?{stype:iM.Value,svalue:i(n.svalue)}:n;var n,i});switch(e.tag){case"required":return((e,t,n,r)=>we(t,n).fold(()=>((e,t,n)=>dM(e,()=>'Could not find valid *required* value for "'+t+'" in '+cM(n)))(e,n,t),r))(t,n,r,i);case"defaultedThunk":return yM(n,r,e.process,i);case"option":return((e,t,n)=>n(we(e,t)))(n,r,a);case"defaultedOptionThunk":return((e,t,n,r)=>r(we(e,t).map(t=>!0===t?n(e):t)))(n,r,e.process,a);case"mergeWithThunk":return yM(n,r,k({}),t=>{const r=pM(e.process(n),t);return i(r)})}},xM=e=>({extract:(t,n)=>((e,t,n)=>{const r={},o=[];for(const i of n)gM(i,(n,i,a,s)=>{const l=bM(a,e,t,n,s);uM(l,e=>{o.push(...e)},e=>{r[i]=e})},(e,n)=>{r[e]=n(t)});return o.length>0?lM(o):sM(r)})(t,n,e),toString:()=>{const t=U(e,e=>gM(e,(e,t,n,r)=>e+" -> "+r.toString(),(e,t)=>"state("+e+")"));return"obj{\n"+t.join("\n")+"}"}}),_M=e=>({extract:(t,n)=>{const r=U(n,(n,r)=>e.extract(t.concat(["["+r+"]"]),n));return(e=>{const t=(e=>{const t=[],n=[];return j(e,e=>{aM(e,e=>n.push(e),e=>t.push(e))}),{values:t,errors:n}})(e);return t.errors.length>0?(n=t.errors,M(lM,ee)(n)):sM(t.values);var n})(r)},toString:()=>"array("+e.toString()+")"}),wM=(e,t,n)=>{return r=((e,t,n)=>((e,t)=>e.stype===iM.Error?{stype:iM.Error,serror:(e=>({input:n,errors:e}))(e.serror)}:e)(t.extract([e],n)))(e,t,n),aM(r,dl.error,dl.value);var r},SM=(e,t)=>((e,t)=>({extract:(n,r)=>we(r,e).fold(()=>((e,t)=>dM(e,()=>'Choice schema did not contain choice key: "'+t+'"'))(n,e),e=>((e,t,n,r)=>we(n,r).fold(()=>((e,t,n)=>dM(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+cM(t)))(e,n,r),n=>n.extract(e.concat(["branch: "+r]),t)))(n,r,t,e)),toString:()=>"chooseOn("+e+"). Possible values: "+he(t)}))(e,ge(t,xM)),CM=k(vM),MM=(e,t)=>mM(n=>{const r=typeof n;return e(n)?sM(n):lM(`Expected type: ${t} but got: ${r}`)}),TM=MM(w,"number"),kM=MM(h,"string"),IM=MM(v,"boolean"),AM=MM(_,"function"),DM=(e,t,n,r)=>({tag:"field",key:e,newKey:t,presence:n,prop:r}),PM=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),LM=(e,t)=>DM(e,e,{tag:"required",process:{}},t),NM=e=>LM(e,kM),RM=e=>LM(e,AM),EM=(e,t)=>DM(e,e,{tag:"option",process:{}},t),OM=e=>EM(e,kM),BM=(e,t,n)=>DM(e,e,fM(t),n),zM=(e,t)=>BM(e,t,TM),FM=(e,t,n)=>BM(e,t,(e=>{return t=t=>W(e,t)?dl.value(t):dl.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`),mM(e=>t(e).fold(lM,sM));var t})(n)),VM=(e,t)=>BM(e,t,IM),HM=(e,t)=>BM(e,t,AM),WM=NM("type"),GM=RM("fetch"),UM=RM("onAction"),jM=HM("onSetup",()=>C),YM=OM("text"),qM=OM("icon"),XM=OM("tooltip"),ZM=OM("label"),$M=VM("active",!1),KM=VM("enabled",!0),JM=VM("primary",!1),QM=e=>((e,t)=>BM("type",t,kM))(0,e),eT=xM([WM,NM("trigger"),zM("minChars",1),((e,t)=>DM(e,e,fM(1),CM()))("columns"),zM("maxResults",10),EM("matches",AM),GM,UM,(tT=kM,BM("highlightOn",[],_M(tT)))]);var tT;const nT=[KM,XM,qM,YM,jM],rT=[$M].concat(nT),oT=[HM("predicate",E),FM("scope","node",["node","editor"]),FM("position","selection",["node","selection","line"])],iT=nT.concat([QM("contextformbutton"),JM,UM,PM("original",I)]),aT=rT.concat([QM("contextformbutton"),JM,UM,PM("original",I)]),sT=nT.concat([QM("contextformbutton")]),lT=rT.concat([QM("contextformtogglebutton")]),uT=SM("type",{contextformbutton:iT,contextformtogglebutton:aT});xM([QM("contextform"),HM("initValue",k("")),ZM,((e,t)=>DM(e,e,{tag:"required",process:{}},_M(t)))("commands",uT),EM("launch",SM("type",{contextformbutton:sT,contextformtogglebutton:lT}))].concat(oT));const cT=e=>{const t=Ya(),n=Fa(!1),r=t.isSet,o=()=>{r()&&((e=>{Ix(e).autocompleter.removeDecoration()})(e),(e=>{e.dispatch("AutocompleterEnd")})(e),n.set(!1),t.clear())},i=Re(()=>(e=>{const t=e.ui.registry.getAll().popups,n=ge(t,e=>{return(t=e,wM("Autocompleter",eT,{trigger:t.ch,...t})).fold(e=>{throw new Error("Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:k("... (only showing first ten failures)")}]):e;return U(t,e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo())})((t=e).errors).join("\n")+"\n\nInput object: "+cM(t.input));var t},I);var t}),r=Me(xe(n,e=>e.trigger)),o=_e(n);return{dataset:n,triggers:r,lookupByTrigger:e=>X(o,t=>t.trigger===e)}})(e)),a=a=>{(n=>t.get().map(t=>tM(e.dom,e.selection.getRng(),t.trigger).bind(t=>oM(e,i,t,n))).getOrThunk(()=>((e,t)=>{const n=t(),r=e.selection.getRng();return((e,t,n)=>de(n.triggers,n=>tM(e,t,n)))(e.dom,r,n).bind(n=>oM(e,t,n))})(e,i)))(a).fold(o,i=>{(n=>{r()||(((e,t)=>{Ix(e).autocompleter.addDecoration(t)})(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))})(i.context),i.lookupData.then(r=>{t.get().map(a=>{const s=i.context;a.trigger===s.trigger&&(s.text.length-a.matchLength>=10?o():(t.set({...a,matchLength:s.text.length}),n.get()?((e,t)=>{e.dispatch("AutocompleterUpdate",t)})(e,{lookupData:r}):(n.set(!0),((e,t)=>{e.dispatch("AutocompleterStart",t)})(e,{lookupData:r}))))})})})};e.addCommand("mceAutocompleterReload",(e,t)=>{const n=p(t)?t.fetchOptions:{};a(n)}),e.addCommand("mceAutocompleterClose",o),((e,t)=>{const n=Xa(t.load,50);e.on("keypress compositionend",e=>{27!==e.which&&n.throttle()}),e.on("keydown",e=>{const r=e.which;8===r?n.throttle():27===r&&t.cancelIfNecessary()}),e.on("remove",n.cancel)})(e,{cancelIfNecessary:o,load:a})},dT=wt().browser.isSafari(),hT=e=>Io(yn(e)),pT=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},fT=(e,t)=>B.from(e.getParent(t.container(),"details")),gT=(e,t)=>fT(e,t).isSome(),mT=(e,t)=>{const n=t.getNode();y(n)||e.selection.setCursorLocation(n,t.offset())},vT=(e,t,n)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const t=e.dom.select("summary",r)[0];t&&(n?Md(t):Td(t)).each(t=>mT(e,t))}else mT(e,t)},yT=(e,t,n)=>{const{dom:r,selection:o}=e,i=e.getBody();if("character"===n){const n=Hs.fromRangeStart(o.getRng()),a=r.getParent(n.container(),r.isBlock),s=fT(r,n),l=a&&r.isEmpty(a),u=m(null==a?void 0:a.previousSibling),c=m(null==a?void 0:a.nextSibling);return!!(l&&(t?c:u)&&xd(!t,i,n).exists(e=>gT(r,e)&&!Et(s,fT(r,e))))||xd(t,i,n).fold(E,n=>{const o=fT(r,n);if(gT(r,n)&&!Et(s,o)){if(t||vT(e,n,!1),a&&l){if(t&&u)return!0;if(!t&&c)return!0;vT(e,n,t),e.dom.remove(a)}return!0}return!1})}return!1},bT=(e,t,n)=>((e,t,n)=>((e,t)=>{const n=B.from(e.getParent(t.startContainer,"details")),r=B.from(e.getParent(t.endContainer,"details"));if(n.isSome()||r.isSome()){const t=n.bind(t=>B.from(e.select("summary",t)[0]));return B.some({startSummary:t,startDetails:n,endDetails:r})}return B.none()})(e.dom,e.selection.getRng()).fold(()=>yT(e,t,n),r=>((e,t,n,r)=>{const o=e.selection.getRng(),i=Hs.fromRangeStart(o),a=e.getBody();return"selection"===r?((e,t)=>{const n=t.startSummary.exists(t=>t.contains(e.startContainer)),r=t.startSummary.exists(t=>t.contains(e.endContainer)),o=t.startDetails.forall(e=>t.endDetails.forall(t=>e!==t));return(n||r)&&!(n&&r)||o})(o,t):n?((e,t)=>t.startSummary.exists(t=>((e,t)=>Td(t).exists(n=>no(n.getNode())&&Cd(t,n).exists(t=>t.isEqual(e))||n.isEqual(e)))(e,t)))(i,t)||((e,t,n)=>n.startDetails.exists(n=>Sd(e,t).forall(e=>!n.contains(e.container()))))(a,i,t):((e,t)=>t.startSummary.exists(t=>((e,t)=>Md(t).exists(t=>t.isEqual(e)))(e,t)))(i,t)||((e,t)=>t.startDetails.exists(n=>Cd(n,e).forall(n=>t.startSummary.exists(t=>!t.contains(e.container())&&t.contains(n.container())))))(i,t)})(e,r,t,n)||yT(e,t,n)))(e,t,n)||dT&&((e,t,n)=>{const r=e.selection,o=r.getNode(),i=r.getRng(),a=Hs.fromRangeStart(i);return!!ho(o)&&("selection"===n&&pT(i,o)||ym(t,a,o)?hT(o):e.undoManager.transact(()=>{const i=r.getSel();let{anchorNode:a,anchorOffset:s,focusNode:l,focusOffset:u}=null!=i?i:{};const c=()=>{x(a)&&x(s)&&x(l)&&x(u)&&(null==i||i.setBaseAndExtent(a,s,l,u))},d=(e,t)=>{j(e.childNodes,e=>{nh(e)&&t.appendChild(e)})},h=e.dom.create("span",{"data-mce-bogus":"1"});d(o,h),o.appendChild(h),c(),"word"!==n&&"line"!==n||null==i||i.modify("extend",t?"right":"left",n),!r.isCollapsed()&&pT(r.getRng(),h)?hT(o):(e.execCommand(t?"ForwardDelete":"Delete"),a=null==i?void 0:i.anchorNode,s=null==i?void 0:i.anchorOffset,l=null==i?void 0:i.focusNode,u=null==i?void 0:i.focusOffset,d(h,o),c()),e.dom.remove(h)}),!0)})(e,t,n)?B.some(C):B.none(),xT=e=>(t,n,r={})=>{const o=t.getBody(),i={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:C,inputType:n},a=ba(new InputEvent(e));return t.dispatch(e,{...a,...i,...r})},_T=xT("input"),wT=xT("beforeinput"),ST=wt(),CT=ST.os,MT=CT.isMacOS()||CT.isiOS(),TT=ST.browser.isFirefox(),kT=(e,t)=>{const n=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const e=(e=>{for(;e;){if(Vr(e)||$r(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null})(t.firstChild);e&&/^(UL|OL|DL)$/.test(e.nodeName)&&t.insertBefore(n.doc.createTextNode(fo),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const e=new Br(t,t);let n,i=t;for(;n=e.current();){if($r(n)){o.setStart(n,0),o.setEnd(n,0);break}if(r[n.nodeName.toLowerCase()]){o.setStartBefore(n),o.setEndBefore(n);break}i=n,n=e.next()}n||(o.setStart(i,0),o.setEnd(i,0))}else no(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Zp(e,o)},IT=(e,t)=>{const n=e.getRoot();let r,o=t;for(;o!==n&&o&&"false"!==e.getContentEditable(o);){if("true"===e.getContentEditable(o)){r=o;break}o=o.parentNode}return o!==n?r:n},AT=e=>B.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),DT=e=>{e.innerHTML='<br data-mce-bogus="1">'},PT=(e,t)=>{Nl(e).toLowerCase()===t.tagName.toLowerCase()&&((e,t,n)=>{const r=e.dom;B.from(n.style).map(r.parseStyle).each(e=>{const n={...cr(yn(t)),...e};r.setStyles(t,n)});const o=B.from(n.class).map(e=>e.split(/\s+/)),i=B.from(t.className).map(e=>X(e.split(/\s+/),e=>""!==e));Ot(o,i,(e,n)=>{const o=X(n,t=>!W(e,t)),i=[...e,...o];r.setAttrib(t,"class",i.join(" "))});const a=["style","class"],s=be(n,(e,t)=>!W(a,t));r.setAttribs(t,s)})(e,t,Rl(e))},LT=(e,t,n,r,o=!0,i,a)=>{const s=e.dom,l=e.schema,u=Nl(e),c=n?n.nodeName.toUpperCase():"";let d=t;const h=l.getTextInlineElements();let p;p=i||"TABLE"===c||"HR"===c?s.create(i||u,a||{}):n.cloneNode(!1);let f=p;if(o){do{if(h[d.nodeName]){if(Id(d)||Hd(d))continue;const e=d.cloneNode(!1);s.setAttrib(e,"id",""),p.hasChildNodes()?(e.appendChild(p.firstChild),p.appendChild(e)):(f=e,p.appendChild(e))}}while((d=d.parentNode)&&d!==r)}else s.setAttrib(p,"style",null),s.setAttrib(p,"class",null);return PT(e,p),DT(f),p},NT=(e,t)=>{const n=null==e?void 0:e.parentNode;return x(n)&&n.nodeName===t},RT=e=>x(e)&&/^(OL|UL|LI)$/.test(e.nodeName),ET=e=>x(e)&&/^(LI|DT|DD)$/.test(e.nodeName),OT=e=>{const t=e.parentNode;return ET(t)?t:e},BT=(e,t,n)=>{let r=e[n?"firstChild":"lastChild"];for(;r&&!Vr(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},zT=e=>$(xe(cr(yn(e)),(e,t)=>`${t}: ${e};`),(e,t)=>e+t,""),FT=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),VT=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,HT=(e,t)=>x(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),WT=(e,t,n)=>$r(t)?e?1===n&&t.data.charAt(n-1)===Ao?0:n:n===t.data.length-1&&t.data.charAt(n)===Ao?t.data.length:n:n,GT={insert:(e,t)=>{let n,r,o,i,a=!1;const s=e.dom,l=e.schema.getNonEmptyElements(),u=e.selection.getRng(),c=Nl(e),d=yn(u.startContainer),p=En(d,u.startOffset),f=p.exists(e=>Ut(e)&&!tr(e)),g=u.collapsed&&f,v=(t,r)=>LT(e,n,M,C,zl(e),t,r),y=e=>{const t=WT(e,n,r);if($r(n)&&(e?t>0:t<n.data.length))return!1;if(n.parentNode===M&&a&&!e)return!0;if(e&&Vr(n)&&n===M.firstChild)return!0;if(VT(n,"TABLE")||VT(n,"HR"))return a&&!e||!a&&e;const o=new Br(n,M);let i;for($r(n)&&(e&&0===t?o.prev():e||t!==n.data.length||o.next());i=o.current();){if(Vr(i)){if(!i.getAttribute("data-mce-bogus")){const e=i.nodeName.toLowerCase();if(l[e]&&"br"!==e)return!1}}else if($r(i)&&!ni(i.data))return!1;e?o.prev():o.next()}return!0},_=()=>{let t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(o)&&"HGROUP"!==T?v(c):v(),((e,t)=>{const n=Fl(e);return!b(t)&&(h(n)?W(Nt.explode(n),t.nodeName.toLowerCase()):n)})(e,i)&&HT(s,i)&&s.isEmpty(M,void 0,{includeZwsp:!0})?t=s.split(i,M):s.insertAfter(t,M),kT(e,t),t};Tp(s,u).each(e=>{u.setStart(e.startContainer,e.startOffset),u.setEnd(e.endContainer,e.endOffset)}),n=u.startContainer,r=u.startOffset;const w=!(!t||!t.shiftKey),S=!(!t||!t.ctrlKey);Vr(n)&&n.hasChildNodes()&&!g&&(a=r>n.childNodes.length-1,n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n,r=a&&$r(n)?n.data.length:0);const C=IT(s,n);if(!C||((e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return null!==n&&"false"===e.dom.getContentEditableParent(n)})(e,n))return;w||(n=((e,t,n,r,o)=>{var i,a;const s=e.dom,l=null!==(i=IT(s,r))&&void 0!==i?i:s.getRoot();let u=s.getParent(r,s.isBlock);if(!u||!HT(s,u)){if(u=u||l,!u.hasChildNodes()){const r=s.create(t);return PT(e,r),u.appendChild(r),n.setStart(r,0),n.setEnd(r,0),r}let i,c=r;for(;c&&c.parentNode!==u;)c=c.parentNode;for(;c&&!s.isBlock(c);)i=c,c=c.previousSibling;const d=null===(a=null==i?void 0:i.parentElement)||void 0===a?void 0:a.nodeName;if(i&&d&&e.schema.isValidChild(d,t.toLowerCase())){const a=i.parentNode,l=s.create(t);for(PT(e,l),a.insertBefore(l,i),c=i;c&&!s.isBlock(c);){const e=c.nextSibling;l.appendChild(c),c=e}n.setStart(r,o),n.setEnd(r,o)}}return r})(e,c,u,n,r));let M=s.getParent(n,s.isBlock)||s.getRoot();i=x(null==M?void 0:M.parentNode)?s.getParent(M.parentNode,s.isBlock):null,o=M?M.nodeName.toUpperCase():"";const T=i?i.nodeName.toUpperCase():"";if("LI"!==T||S||(M=i,i=i.parentNode,o=T),Vr(i)&&((e,t,n)=>!t&&n.nodeName.toLowerCase()===Nl(e)&&e.dom.isEmpty(n)&&((t,n,r)=>{let o=n;for(;o&&o!==t&&m(o.nextSibling);){const t=o.parentElement;if(!t||(i=t,!Se(e.schema.getTextBlockElements(),i.nodeName.toLowerCase())))return co(t);o=t}var i;return!1})(e.getBody(),n))(e,w,M))return((e,t,n)=>{var r,o,i;const a=t(Nl(e)),s=((e,t)=>e.dom.getParent(t,co))(e,n);s&&(e.dom.insertAfter(a,s),kT(e,a),(null!==(i=null===(o=null===(r=n.parentElement)||void 0===r?void 0:r.childNodes)||void 0===o?void 0:o.length)&&void 0!==i?i:0)>1&&e.dom.remove(n))})(e,v,M);if(/^(LI|DT|DD)$/.test(o)&&Vr(i)&&s.isEmpty(M))return void((e,t,n,r,o)=>{const i=e.dom,a=e.selection.getRng(),s=n.parentNode;if(n===e.getBody()||!s)return;var l;RT(l=n)&&RT(l.parentNode)&&(o="LI");const u=ET(r)?zT(r):void 0;let c=ET(r)&&u?t(o,{style:zT(r)}):t(o);if(BT(n,r,!0)&&BT(n,r,!1))if(NT(n,"LI")){const e=OT(n);i.insertAfter(c,e),(e=>{var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e})(n)?i.remove(e):i.remove(n)}else i.replace(c,n);else if(BT(n,r,!0))NT(n,"LI")?(i.insertAfter(c,OT(n)),c.appendChild(i.doc.createTextNode(" ")),c.appendChild(n)):s.insertBefore(c,n),i.remove(r);else if(BT(n,r,!1))i.insertAfter(c,OT(n)),i.remove(r);else{n=OT(n);const e=a.cloneRange();e.setStartAfter(r),e.setEndAfter(n);const t=e.extractContents();if("LI"===o&&((e,t)=>e.firstChild&&"LI"===e.firstChild.nodeName)(t)){const e=X(U(c.children,yn),P(Zt("br")));c=t.firstChild,i.insertAfter(t,n),j(e,e=>fr(yn(c),e)),u&&c.setAttribute("style",u)}else i.insertAfter(t,n),i.insertAfter(c,n);i.remove(r)}kT(e,c)})(e,v,i,M,c);if(!(g||M!==e.getBody()&&HT(s,M)))return;const k=M.parentNode;let I;if(g)I=v(c),p.fold(()=>{gr(d,yn(I))},e=>{hr(e,yn(I))}),e.selection.setCursorLocation(I,0);else if(Ro(M))I=Wo(M),s.isEmpty(M)&&DT(M),PT(e,I),kT(e,I);else if(y(!1))I=_();else if(y(!0)&&k){I=k.insertBefore(v(),M);const t=yn(u.startContainer).dom.hasChildNodes()&&u.collapsed;kT(e,VT(M,"HR")||t?I:M)}else{const t=(e=>{const t=e.cloneRange();return t.setStart(e.startContainer,WT(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,WT(!1,e.endContainer,e.endOffset)),t})(u).cloneRange();t.setEndAfter(M);const n=t.extractContents();(e=>{j(Rr(yn(e),Yt),e=>{const t=e.dom;t.nodeValue=Po(t.data)})})(n),(e=>{let t=e;do{$r(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(n),I=n.firstChild,s.insertAfter(n,M),((e,t,n)=>{var r;const o=[];if(!n)return;let i=n;for(;i=i.firstChild;){if(e.isBlock(i))return;Vr(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}let a=o.length;for(;a--;)i=o[a],(!i.hasChildNodes()||i.firstChild===i.lastChild&&""===(null===(r=i.firstChild)||void 0===r?void 0:r.nodeValue)||FT(e,i))&&e.remove(i)})(s,l,I),((e,t)=>{t.normalize();const n=t.lastChild;(!n||Vr(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")})(s,M),s.isEmpty(M)&&DT(M),I.normalize(),s.isEmpty(I)?(s.remove(I),_()):(PT(e,I),kT(e,I))}s.setAttrib(I,"id",""),e.dispatch("NewBlock",{newBlock:I})},fakeEventName:"insertParagraph"},UT=(e,t,n)=>{const r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),Zp(e,r)},jT=(e,t)=>{const n=mn("br");hr(yn(t),n),e.undoManager.add()},YT=(e,t)=>{qT(e.getBody(),t)||pr(yn(t),mn("br"));const n=mn("br");pr(yn(t),n),UT(e,n.dom,!1),e.undoManager.add()},qT=(e,t)=>{return n=Hs.after(t),!!no(n.getNode())||Sd(e,Hs.after(t)).map(e=>no(e.getNode())).getOr(!1);var n},XT=e=>e&&"A"===e.nodeName&&"href"in e,ZT=e=>e.fold(E,XT,XT,E),$T=(e,t)=>{t.fold(C,D(jT,e),D(YT,e),C)},KT={insert:(e,t)=>{const n=(e=>{const t=D(sm,e),n=Hs.fromRangeStart(e.selection.getRng());return Iw(t,e.getBody(),n).filter(ZT)})(e);n.isSome()?n.each(D($T,e)):((e,t)=>{const n=e.selection,r=e.dom,o=n.getRng();let i,a=!1;Tp(r,o).each(e=>{o.setStart(e.startContainer,e.startOffset),o.setEnd(e.endContainer,e.endOffset)});let s=o.startOffset,l=o.startContainer;if(Vr(l)&&l.hasChildNodes()){const e=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=e&&$r(l)?l.data.length:0}let u=r.getParent(l,r.isBlock);const c=u&&u.parentNode?r.getParent(u.parentNode,r.isBlock):null,d=c?c.nodeName.toUpperCase():"",h=!(!t||!t.ctrlKey);"LI"!==d||h||(u=c),$r(l)&&s>=l.data.length&&(((e,t,n)=>{const r=new Br(t,n);let o;const i=e.getNonEmptyElements();for(;o=r.next();)if(i[o.nodeName.toLowerCase()]||$r(o)&&o.length>0)return!0;return!1})(e.schema,l,u||r.getRoot())||(i=r.create("br"),o.insertNode(i),o.setStartAfter(i),o.setEndAfter(i),a=!0)),i=r.create("br"),Gs(r,o,i),UT(e,i,a),e.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},JT=(e,t)=>AT(e).filter(e=>t.length>0&&xn(yn(e),t)).isSome(),QT=hl([{br:[]},{block:[]},{none:[]}]),ek=(e,t)=>(e=>JT(e,Bl(e)))(e),tk=e=>(t,n)=>(e=>AT(e).filter(e=>So(yn(e))).isSome())(t)===e,nk=(e,t)=>(n,r)=>{const o=(e=>AT(e).fold(k(""),e=>e.nodeName.toUpperCase()))(n)===e.toUpperCase();return o===t},rk=e=>{const t=IT(e.dom,e.selection.getStart());return b(t)},ok=e=>nk("pre",e),ik=e=>(t,n)=>Ll(t)===e,ak=(e,t)=>(e=>JT(e,Ol(e)))(e),sk=(e,t)=>t,lk=e=>{const t=Nl(e),n=IT(e.dom,e.selection.getStart());return x(n)&&e.schema.isValidChild(n.nodeName,t)},uk=e=>{const t=e.selection.getRng(),n=yn(t.startContainer),r=En(n,t.startOffset).map(e=>Ut(e)&&!tr(e));return t.collapsed&&r.getOr(!0)},ck=(e,t)=>(n,r)=>$(e,(e,t)=>e&&t(n,r),!0)?B.some(t):B.none(),dk=(e,t,n)=>{t.selection.isCollapsed()||(e=>{e.execCommand("delete")})(t),x(n)&&wT(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),x(n)&&_T(t,e.fakeEventName))},hk=(e,t)=>{const n=()=>dk(KT,e,t),r=()=>dk(GT,e,t),o=((e,t)=>yw([ck([ek],QT.none()),ck([ok(!0),rk],QT.none()),ck([nk("summary",!0)],QT.br()),ck([ok(!0),ik(!1),sk],QT.br()),ck([ok(!0),ik(!1)],QT.block()),ck([ok(!0),ik(!0),sk],QT.block()),ck([ok(!0),ik(!0)],QT.br()),ck([tk(!0),sk],QT.br()),ck([tk(!0)],QT.block()),ck([ak],QT.br()),ck([sk],QT.br()),ck([lk],QT.block()),ck([uk],QT.block())],[e,!(!t||!t.shiftKey)]).getOr(QT.none()))(e,t);switch(El(e)){case"linebreak":o.fold(n,n,C);break;case"block":o.fold(r,r,C);break;case"invert":o.fold(r,n,C);break;default:o.fold(n,r,C)}},pk=wt(),fk=pk.os.isiOS()&&pk.browser.isSafari(),gk=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{hk(e,t)}))},mk=wt(),vk=e=>e.stopImmediatePropagation(),yk=e=>e.keyCode===Jh.PAGE_UP||e.keyCode===Jh.PAGE_DOWN,bk=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",vk,!0):!n&&e.get()&&t.off("NodeChange",vk),e.set(n)},xk=(e,t)=>{const n=t.container(),r=t.offset();return $r(n)?(n.insertData(r,e),B.some(Hs(n,r+e.length))):td(t).map(n=>{const r=vn(e);return t.isAtEnd()?pr(n,r):hr(n,r),Hs(r.dom,e.length)})},_k=D(xk,fo),wk=D(xk," "),Sk=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},Ck=e=>{const t=Hs.fromRangeStart(e.selection.getRng()),n=yn(e.getBody());if(e.selection.isCollapsed()){const r=D(sm,e),o=Hs.fromRangeStart(e.selection.getRng());return Iw(r,e.getBody(),o).bind((e=>t=>t.fold(t=>Cd(e.dom,Hs.before(t)),e=>Md(e),e=>Td(e),t=>Sd(e.dom,Hs.after(t))))(n)).map(r=>()=>((e,t,n)=>r=>Wg(e,r,n)?_k(t):wk(t))(n,t,e.schema)(r).each(Sk(e)))}return B.none()},Mk=e=>{return Bt(At.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const t=yn(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),((e,t,n)=>Wg(e,t,n)?_k(t):wk(t))(t,Hs.fromRangeStart(e.selection.getRng()),e.schema).each(Sk(e))});var t,n},Tk=e=>hc(e)?[{keyCode:Jh.TAB,action:vC(UC,e,!0)},{keyCode:Jh.TAB,shiftKey:!0,action:vC(UC,e,!1)}]:[],kk=e=>{if(e.addShortcut("Meta+P","","mcePrint"),cT(e),Tx(e))return Fa(null);{const t=SS(e);return(e=>{e.on("beforeinput",t=>{e.selection.isEditable()&&!G(t.getTargetRanges(),t=>!wf(e.dom,t))||t.preventDefault()})})(e),(e=>{e.on("keyup compositionstart",D(iC,e))})(e),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const r=At.os.isMacOS()||At.os.isiOS();yC([{keyCode:Jh.RIGHT,action:vC(lC,e,!0)},{keyCode:Jh.LEFT,action:vC(lC,e,!1)},{keyCode:Jh.UP,action:vC(uC,e,!1)},{keyCode:Jh.DOWN,action:vC(uC,e,!0)},...r?[{keyCode:Jh.UP,action:vC(dC,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Jh.DOWN,action:vC(dC,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Jh.RIGHT,action:vC(FC,e,!0)},{keyCode:Jh.LEFT,action:vC(FC,e,!1)},{keyCode:Jh.UP,action:vC(VC,e,!1)},{keyCode:Jh.DOWN,action:vC(VC,e,!0)},{keyCode:Jh.UP,action:vC(VC,e,!1)},{keyCode:Jh.UP,action:vC(fC,e,!1)},{keyCode:Jh.DOWN,action:vC(fC,e,!0)},{keyCode:Jh.RIGHT,action:vC(xC,e,!0)},{keyCode:Jh.LEFT,action:vC(xC,e,!1)},{keyCode:Jh.UP,action:vC(_C,e,!1)},{keyCode:Jh.DOWN,action:vC(_C,e,!0)},{keyCode:Jh.RIGHT,action:vC(_S,e,t,!0)},{keyCode:Jh.LEFT,action:vC(_S,e,t,!1)},{keyCode:Jh.RIGHT,ctrlKey:!r,altKey:r,action:vC(CS,e,t)},{keyCode:Jh.LEFT,ctrlKey:!r,altKey:r,action:vC(MS,e,t)},{keyCode:Jh.UP,action:vC(pC,e,!1)},{keyCode:Jh.DOWN,action:vC(pC,e,!0)}],n).each(e=>{n.preventDefault()})})(e,t,n)})})(e,t),((e,t)=>{let n=!1;e.on("keydown",r=>{n=r.keyCode===Jh.BACKSPACE,r.isDefaultPrevented()||((e,t,n)=>{const r=n.keyCode===Jh.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),i=o?"character":"selection",a=e=>o?e?"word":"line":"selection";bC([{keyCode:Jh.BACKSPACE,action:vC(qS,e)},{keyCode:Jh.BACKSPACE,action:vC(aw,e,!1)},{keyCode:Jh.DELETE,action:vC(aw,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(Q_,e,!1)},{keyCode:Jh.DELETE,action:vC(Q_,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(AS,e,t,!1)},{keyCode:Jh.DELETE,action:vC(AS,e,t,!0)},{keyCode:Jh.BACKSPACE,action:vC(jm,e,!1)},{keyCode:Jh.DELETE,action:vC(jm,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(bT,e,!1,i)},{keyCode:Jh.DELETE,action:vC(bT,e,!0,i)},...MT?[{keyCode:Jh.BACKSPACE,altKey:!0,action:vC(bT,e,!1,a(!0))},{keyCode:Jh.DELETE,altKey:!0,action:vC(bT,e,!0,a(!0))},{keyCode:Jh.BACKSPACE,metaKey:!0,action:vC(bT,e,!1,a(!1))}]:[{keyCode:Jh.BACKSPACE,ctrlKey:!0,action:vC(bT,e,!1,a(!0))},{keyCode:Jh.DELETE,ctrlKey:!0,action:vC(bT,e,!0,a(!0))}],{keyCode:Jh.BACKSPACE,action:vC(sw,e,!1)},{keyCode:Jh.DELETE,action:vC(sw,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(FS,e,!1)},{keyCode:Jh.DELETE,action:vC(FS,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(Y_,e,!1)},{keyCode:Jh.DELETE,action:vC(Y_,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(U_,e,!1)},{keyCode:Jh.DELETE,action:vC(U_,e,!0)},{keyCode:Jh.BACKSPACE,action:vC(OS,e,!1)},{keyCode:Jh.DELETE,action:vC(OS,e,!0)}],n).filter(t=>e.selection.isEditable()).each(t=>{n.preventDefault(),wT(e,r).isDefaultPrevented()||(t(),_T(e,r))})})(e,t,r)}),e.on("keyup",t=>{t.isDefaultPrevented()||((e,t,n)=>{yC([{keyCode:Jh.BACKSPACE,action:vC(iw,e)},{keyCode:Jh.DELETE,action:vC(iw,e)},...MT?[{keyCode:Jh.BACKSPACE,altKey:!0,action:vC(BS,e)},{keyCode:Jh.DELETE,altKey:!0,action:vC(BS,e)},...n?[{keyCode:TT?224:91,action:vC(BS,e)}]:[]]:[{keyCode:Jh.BACKSPACE,ctrlKey:!0,action:vC(BS,e)},{keyCode:Jh.DELETE,ctrlKey:!0,action:vC(BS,e)}]],t)})(e,t,n),n=!1})})(e,t),(e=>{let t=B.none();e.on("keydown",n=>{n.keyCode===Jh.ENTER&&(fk&&(e=>{if(!e.collapsed)return!1;const t=e.startContainer;if($r(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return n.test(r)}return!1})(e.selection.getRng())?(e=>{t=B.some(e.selection.getBookmark()),e.undoManager.add()})(e):gk(e,n))}),e.on("keyup",n=>{n.keyCode===Jh.ENTER&&t.each(()=>((e,n)=>{e.undoManager.undo(),t.fold(C,t=>e.selection.moveToBookmark(t)),gk(e,n),t=B.none()})(e,n))})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{bC([{keyCode:Jh.SPACEBAR,action:vC(Ck,e)},{keyCode:Jh.SPACEBAR,action:vC(Mk,e)}],t).each(n=>{t.preventDefault(),wT(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),_T(e,"insertText",{data:" "}))})})(e,t)})})(e),(e=>{e.on("input",t=>{t.isComposing||(e=>{const t=yn(e.getBody());e.selection.isCollapsed()&&((e,t,n)=>{const r=t.container();if(!$r(r))return B.none();if((e=>{const t=e.container();return $r(t)&&He(t.data,fo)})(t)){const o=Xg(e,r,!1,n)||(e=>{const t=e.data,n=(e=>{const t=e.split("");return U(t,(e,n)=>Wd(e)&&n>0&&n<t.length-1&&Ud(t[n-1])&&Ud(t[n+1])?" ":e).join("")})(t);return n!==t&&(e.data=n,!0)})(r)||Zg(e,r,!1,n);return Bt(o,t)}if(jg(e,t,n)){const o=Xg(e,r,!0,n)||Zg(e,r,!0,n);return Bt(o,t)}return B.none()})(t,Hs.fromRangeStart(e.selection.getRng()),e.schema).each(t=>{e.selection.setRng(t.toRange())})})(e)})})(e),(e=>{e.on("keydown",t=>{t.isDefaultPrevented()||((e,t)=>{yC([...Tk(e)],t).each(e=>{t.preventDefault()})})(e,t)})})(e),((e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||((e,t,n)=>{const r=At.os.isMacOS()||At.os.isiOS();yC([{keyCode:Jh.END,action:vC(cC,e,!0)},{keyCode:Jh.HOME,action:vC(cC,e,!1)},...r?[]:[{keyCode:Jh.HOME,action:vC(dC,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Jh.END,action:vC(dC,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Jh.END,action:vC(wC,e,!0)},{keyCode:Jh.HOME,action:vC(wC,e,!1)},{keyCode:Jh.END,action:vC(TS,e,!0,t)},{keyCode:Jh.HOME,action:vC(TS,e,!1,t)}],n).each(e=>{n.preventDefault()})})(e,t,n)})})(e,t),((e,t)=>{if(mk.os.isMacOS())return;const n=Fa(!1);e.on("keydown",t=>{yk(t)&&bk(n,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||((e,t,n)=>{yC([{keyCode:Jh.PAGE_UP,action:vC(TS,e,!1,t)},{keyCode:Jh.PAGE_DOWN,action:vC(TS,e,!0,t)}],n)})(e,t,r),yk(r)&&n.get()&&(bk(n,e,!1),e.nodeChanged())})})(e,t),t}};class Ik{constructor(e){let t;this.lastPath=[],this.editor=e;const n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",n=>{const r=e.selection.getRng(),o={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==n.type&&bp(o,t)||e.dispatch("SelectionChange"),t=o}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const t=e.selection.getStart(!0);t&&Qd(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",t=>{!t.isDefaultPrevented()&&Qd(e)&&("IMG"===e.selection.getNode().nodeName?uf.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const t=this.editor.selection;let n;if(this.editor.initialized&&t&&!ku(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();n=t.getStart(!0)||r,n.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,r)||(n=r);const o=[];this.editor.dom.getParent(n,e=>e===r||(o.push(e),!1)),this.editor.dispatch("NodeChange",{...e,element:n,parents:o})}}isSameElementPath(e){let t;const n=this.editor,r=re(n.dom.getParents(e,O,n.getBody()));if(r.length===this.lastPath.length){for(t=r.length;t>=0&&r[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=r,!0}return this.lastPath=r,!1}}const Ak=ss("image"),Dk=ss("event"),Pk=e=>t=>{t[Dk]=e},Lk=Pk(0),Nk=Pk(2),Rk=Pk(1),Ek=e=>{const t=e;return B.from(t[Dk]).exists(e=>0===e)},Ok=ss("mode"),Bk=e=>t=>{t[Ok]=e},zk=(e,t)=>Bk(t)(e),Fk=Bk(0),Vk=Bk(2),Hk=Bk(1),Wk=e=>t=>{const n=t;return B.from(n[Ok]).exists(t=>t===e)},Gk=Wk(0),Uk=Wk(1),jk=["none","copy","link","move"],Yk=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],qk=()=>{const e=new window.DataTransfer;let t="move",n="all";const r={get dropEffect(){return t},set dropEffect(e){W(jk,e)&&(t=e)},get effectAllowed(){return n},set effectAllowed(e){Ek(r)&&W(Yk,e)&&(n=e)},get items(){return((e,t)=>({...t,get length(){return t.length},add:(n,r)=>{if(Gk(e)){if(!h(n))return t.add(n);if(!y(r))return t.add(n,r)}return null},remove:n=>{Gk(e)&&t.remove(n)},clear:()=>{Gk(e)&&t.clear()}}))(r,e.items)},get files(){return Uk(r)?Object.freeze({length:0,item:e=>null}):e.files},get types(){return e.types},setDragImage:(t,n,o)=>{var i;Gk(r)&&(i={image:t,x:n,y:o},r[Ak]=i,e.setDragImage(t,n,o))},getData:t=>Uk(r)?"":e.getData(t),setData:(t,n)=>{Gk(r)&&e.setData(t,n)},clearData:t=>{Gk(r)&&e.clearData(t)}};return Fk(r),r},Xk=(e,t)=>e.setData("text/html",t),Zk="x-tinymce/html",$k=k(Zk),Kk="\x3c!-- "+Zk+" --\x3e",Jk=e=>Kk+e,Qk=e=>-1!==e.indexOf(Kk),eI="%MCEPASTEBIN%",tI=e=>e.dom.get("mcepastebin"),nI=e=>x(e)&&"mcepastebin"===e.id,rI=e=>e===eI,oI=(e,t)=>(Nt.each(t,t=>{e=d(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])}),e),iI=e=>oI(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,t,n)=>t||n?fo:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),aI=(e,t)=>({content:e,cancelled:t}),sI=(e,t)=>(e.insertContent(t,{merge:Ku(e),paste:!0}),!0),lI=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),uI=(e,t,n)=>!(e.selection.isCollapsed()||!lI(t))&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0))(e,t,n),cI=(e,t,n)=>!!((e,t)=>lI(t)&&G(dc(e),e=>Ge(t.toLowerCase(),`.${e.toLowerCase()}`)))(e,t)&&((e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0))(e,t,n),dI=(e=>{let t=0;return()=>"mceclip"+t++})(),hI=e=>{const t=qk();return Xk(t,e),Vk(t),t},pI=(e,t,n,r,o)=>{const i=((e,t,n)=>((e,t,n)=>{const r=((e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}))(e,t,n),o=((e,t)=>{const n=$b({sanitize:uc(e),sandbox_iframes:mc(e)},e.schema);n.addNodeFilter("meta",e=>{Nt.each(e,e=>{e.remove()})});const r=n.parse(t,{forced_root_block:!1,isRootContent:!0});return eg({validate:!0},e.schema).serialize(r)})(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?((e,t,n)=>{const r=e.dom.create("div",{style:"display:none"},t),o=((e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}))(e,r,n);return aI(o.node.innerHTML,o.isDefaultPrevented())})(e,o,n):aI(o,r.isDefaultPrevented())})(e,t,n))(e,t,n);if(!i.cancelled){const t=i.content,n=()=>((e,t,n)=>{n||!Ju(e)?sI(e,t):((e,t)=>{Nt.each([uI,cI,sI],n=>!n(e,t,sI))})(e,t)})(e,t,r);o?wT(e,"insertFromPaste",{dataTransfer:hI(t)}).isDefaultPrevented()||(n(),_T(e,"insertFromPaste")):n()}},fI=(e,t,n,r)=>{const o=n||Qk(t);pI(e,(e=>e.replace(Kk,""))(t),o,!1,r)},gI=(e,t,n)=>{const r=e.dom.encode(t).replace(/\r\n/g,"\n"),o=((e,t,n)=>{const r=e.split(/\n\n/),o=((e,t)=>{let n="<"+e;const r=xe(t,(e,t)=>t+'="'+$i.encodeAllRaw(e)+'"');return r.length&&(n+=" "+r.join(" ")),n+">"})(t,n),i="</"+t+">",a=U(r,e=>e.split(/\n/).join("<br />"));return 1===a.length?a[0]:U(a,e=>o+e+i).join("")})(ii(r,ec(e)),Nl(e),Rl(e));pI(e,o,!1,!0,n)},mI=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const r=e.types[n];try{t[r]=e.getData(r)}catch(e){t[r]=""}}return t},vI=(e,t)=>t in e&&e[t].length>0,yI=e=>vI(e,"text/html")||vI(e,"text/plain"),bI=(e,t,n)=>{const r="paste"===t.type?t.clipboardData:t.dataTransfer;var o;if(ju(e)&&r){const i=((e,t)=>{const n=t.items?te(ce(t.items),e=>"file"===e.kind?[e.getAsFile()]:[]):[],r=t.files?ce(t.files):[];return X(n.length>0?n:r,(e=>{const t=dc(e);return e=>We(e.type,"image/")&&G(t,t=>(e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Nt.hasOwn(n,t)?"image/"+n[t]:"image/"+t})(t)===e.type)})(e))})(e,r);if(i.length>0)return t.preventDefault(),(o=i,Promise.all(U(o,e=>Dy(e).then(t=>({file:e,uri:t}))))).then(t=>{n&&e.selection.setRng(n),j(t,t=>{((e,t)=>{Iy(t.uri).each(({data:n,type:r,base64Encoded:o})=>{const i=o?n:btoa(n),a=t.file,s=e.editorUpload.blobCache,l=s.getByData(i,r),u=null!=l?l:((e,t,n,r)=>{const o=dI(),i=Hl(e)&&x(n.name),a=i?((e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return x(n)?e.dom.encode(n[1]):void 0})(e,n.name):o,s=i?n.name:void 0,l=t.create(o,n,r,a,s);return t.add(l),l})(e,s,a,i);fI(e,`<img src="${u.blobUri()}">`,!1,!0)})})(e,t)})}),!0}return!1},xI=(e,t,n,r,o)=>{let i=iI(n);const a=vI(t,$k())||Qk(n),s=!a&&(e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e))(i),l=lI(i);(rI(i)||!i.length||s&&!l)&&(r=!0),(r||l)&&(i=vI(t,"text/plain")&&s?t["text/plain"]:(e=>{const t=sa(),n=$b({},t);let r="";const o=t.getVoidElements(),i=Nt.makeMap("script noscript style textarea video audio iframe object"," "),a=t.getBlockElements(),s=e=>{const n=e.name,l=e;if("br"!==n){if("wbr"!==n)if(o[n]&&(r+=" "),i[n])r+=" ";else{if(3===e.type&&(r+=e.value),!(e.name in t.getVoidElements())){let t=e.firstChild;if(t)do{s(t)}while(t=t.next)}a[n]&&l.next&&(r+="\n","p"===n&&(r+="\n"))}}else r+="\n"};return e=oI(e,[/<!\[[^\]]+\]>/g]),s(n.parse(e)),r})(i)),rI(i)||(r?gI(e,i,o):fI(e,i,a,o))},_I=(e,t,n,r)=>{((e,t,n)=>{if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData($k(),t),!0}catch(e){return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},wI=e=>(t,n)=>{const{dom:r,selection:o}=e,i=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=r.create("div",{contenteditable:"true"},t);r.setStyles(i,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(a),r.add(e.getBody(),i);const s=o.getRng();a.focus();const l=r.createRng();l.selectNodeContents(a),o.setRng(l),uf.setEditorTimeout(e,()=>{o.setRng(s),r.remove(i),n()},0)},SI=e=>({html:Jk(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),CI=e=>!e.selection.isCollapsed()||(e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()))(e),MI=(e,t)=>{var n,r;return Ap.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(r=t.clientY)&&void 0!==r?r:0,e.getDoc())},TI=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},kI=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,II=e=>Nt.trim(e).replace(kI,ma).toLowerCase(),AI=(e,t,n)=>{const r=Zu(e);if(n||"all"===r||!$u(e))return t;const o=r?r.split(/[, ]/):[];if(o&&"none"!==r){const n=e.dom,r=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(e,t,i,a)=>{const s=n.parseStyle(n.decode(i)),l={};for(let e=0;e<o.length;e++){const t=s[o[e]];let i=t,a=n.getStyle(r,o[e],!0);/color/.test(o[e])&&(i=II(i),a=II(a)),a!==i&&(l[o[e]]=t)}const u=n.serializeStyle(l,"span");return u?t+' style="'+u+'"'+a:t+a})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(e,t,n,r)=>t+' style="'+n+'"'+r),t},DI=e=>{const t=Fa(!1),n=Fa(Qu(e)?"text":"html"),r=(e=>{const t=Fa(null);return{create:()=>((e,t)=>{const{dom:n,selection:r}=e,o=e.getBody();t.set(r.getRng());const i=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},eI);At.browser.isFirefox()&&n.setStyle(i,"left","rtl"===n.getStyle(o,"direction",!0)?65535:-65535),n.bind(i,"beforedeactivate focusin focusout",e=>{e.stopPropagation()}),i.focus(),r.select(i,!0)})(e,t),remove:()=>((e,t)=>{const n=e.dom;if(tI(e)){let r;const o=t.get();for(;r=tI(e);)n.remove(r),n.unbind(r);o&&e.selection.setRng(o)}t.set(null)})(e,t),getEl:()=>tI(e),getHtml:()=>(e=>{const t=e.dom,n=(e,n)=>{e.appendChild(n),t.remove(n,!0)},[r,...o]=X(e.getBody().childNodes,nI);j(o,e=>{n(r,e)});const i=t.select("div[id=mcepastebin]",r);for(let e=i.length-1;e>=0;e--){const o=t.create("div");r.insertBefore(o,i[e]),n(o,i[e])}return r?r.innerHTML:""})(e),getLastRng:t.get}})(e);(e=>{(At.browser.isChromium()||At.browser.isSafari())&&((e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})})(e,AI)})(e),((e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{((e,t)=>{"text"===t.get()?(t.set("html"),Kh(e,!1)):(t.set("text"),Kh(e,!0)),e.focus()})(e,t)}),e.addCommand("mceInsertClipboardContent",(t,n)=>{n.html&&fI(e,n.html,n.internal,!1),n.text&&gI(e,n.text,!1)})})(e,n),(e=>{const t=t=>n=>{t(e,n)},n=Yu(e);_(n)&&e.on("PastePreProcess",t(n));const r=qu(e);_(r)&&e.on("PastePostProcess",t(r))})(e),e.on("PreInit",()=>{(e=>{e.on("cut",(e=>t=>{!t.isDefaultPrevented()&&CI(e)&&e.selection.isEditable()&&_I(t,SI(e),wI(e),()=>{if(At.browser.isChromium()||At.browser.isFirefox()){const t=e.selection.getRng();uf.setEditorTimeout(e,()=>{e.selection.setRng(t),e.execCommand("Delete")},0)}else e.execCommand("Delete")})})(e)),e.on("copy",(e=>t=>{!t.isDefaultPrevented()&&CI(e)&&_I(t,SI(e),wI(e),C)})(e))})(e),((e,t)=>{Uu(e)&&e.on("dragend dragover draggesture dragdrop drop drag",e=>{e.preventDefault(),e.stopPropagation()}),ju(e)||e.on("drop",e=>{const t=e.dataTransfer;t&&(e=>G(e.files,e=>/^image\//.test(e.type)))(t)&&e.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const r=MI(e,n);if(b(r))return;const o=mI(n.dataTransfer),i=vI(o,$k());if((!yI(o)||(e=>{const t=e["text/plain"];return!!t&&0===t.indexOf("file://")})(o))&&bI(e,n,r))return;const a=o[$k()],s=a||o["text/html"]||o["text/plain"],l=((e,t,n,r)=>{const o=e.getParent(n,e=>Ti(t,e));if(!m(e.getParent(n,"summary")))return!0;if(o&&Se(r,"text/html")){const e=(new DOMParser).parseFromString(r["text/html"],"text/html").body;return!m(e.querySelector(o.nodeName.toLowerCase()))}return!1})(e.dom,e.schema,r.startContainer,o),u=t.get();u&&!l||s&&(n.preventDefault(),uf.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(a||u&&l)&&e.execCommand("Delete"),TI(e,r);const t=iI(s);o["text/html"]?fI(e,t,i,!0):gI(e,t,!0)})}))}),e.on("dragstart",e=>{t.set(!0)}),e.on("dragover dragend",n=>{ju(e)&&!t.get()&&(n.preventDefault(),TI(e,MI(e,n))),"dragend"===n.type&&t.set(!1)}),(e=>{e.on("input",t=>{const n=e=>m(e.querySelector("summary"));if("deleteByDrag"===t.inputType){const t=X(e.dom.select("details"),n);j(t,t=>{no(t.firstChild)&&t.firstChild.remove();const n=e.dom.create("summary");n.appendChild(ko().dom),t.prepend(n)})}})})(e)})(e,t),((e,t,n)=>{((e,t,n)=>{let r;e.on("keydown",e=>{(e=>Jh.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode)(e)&&!e.isDefaultPrevented()&&(r=e.shiftKey&&86===e.keyCode)}),e.on("paste",o=>{if(o.isDefaultPrevented()||(e=>{var t,n;return At.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)})(o))return;const i="text"===n.get()||r;r=!1;const a=mI(o.clipboardData);!yI(a)&&bI(e,o,t.getLastRng()||e.selection.getRng())||(vI(a,"text/html")?(o.preventDefault(),xI(e,a,a["text/html"],i,!0)):vI(a,"text/plain")&&vI(a,"text/uri-list")?(o.preventDefault(),xI(e,a,a["text/plain"],i,!0)):(t.create(),uf.setEditorTimeout(e,()=>{const n=t.getHtml();t.remove(),xI(e,a,n,i,!1)},0)))})})(e,t,n),(e=>{const t=e=>We(e,"webkit-fake-url"),n=e=>We(e,"data:");e.parser.addNodeFilter("img",(r,o,i)=>{if(!ju(e)&&(e=>{var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)})(i))for(const o of r){const r=o.attr("src");h(r)&&!o.attr("data-mce-object")&&r!==At.transparentSrc&&(t(r)||!tc(e)&&n(r))&&o.remove()}})})(e)})(e,r,n)})},PI=no,LI=$r,NI=e=>io(e.dom),RI=e=>t=>wn(yn(e),t),EI=(e,t)=>$n(yn(e),NI,RI(t)),OI=(e,t,n)=>{const r=new Br(e,t),o=n?r.next.bind(r):r.prev.bind(r);let i=e;for(let t=n?e:o();t&&!PI(t);t=o())Jo(t)&&(i=t);return i};var BI;!function(e){e.Before="before",e.After="after"}(BI||(BI={}));const zI=(e,t)=>Math.abs(e.left-t),FI=(e,t)=>Math.abs(e.right-t),VI=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),HI=(e,t,n)=>{const r=e=>Jo(e.node)?B.some(e):Vr(e.node)?HI(ce(e.node.childNodes),t,n):B.none(),o=(e,o)=>{const i=ae(e,(e,r)=>o(e,t,n)-o(r,t,n));return((e,o)=>{if(e.length>=2){const i=r(e[0]).getOr(e[0]),a=r(e[1]).getOr(e[1]);if(Math.abs(o(i,t,n)-o(a,t,n))<2){if($r(i.node))return B.some(i);if($r(a.node))return B.some(a)}}return B.none()})(i,o).orThunk(()=>de(i,r))},[i,a]=((e,t)=>(e=>$(e,(e,t)=>e.fold(()=>B.some(t),e=>{const n=Math.min(t.left,e.left),r=Math.min(t.top,e.top),o=Math.max(t.right,e.right),i=Math.max(t.bottom,e.bottom);return B.some({top:r,right:o,bottom:i,left:n,width:o-n,height:i-r})}),B.none()))(X(e,e=>{return(n=t)>=(r=e).top&&n<=r.bottom;var n,r})).fold(()=>[[],e],t=>{const{pass:n,fail:r}=q(e,e=>((e,t)=>{const n=((e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)))(e,t)/Math.min(e.height,t.height);return((e,t)=>e.top<t.bottom&&e.bottom>t.top)(e,t)&&n>.5})(e,t));return[n,r]}))(oS(e),n),{pass:s,fail:l}=q(a,e=>e.top<n);return o(i,VI).orThunk(()=>o(l,bs)).orThunk(()=>o(s,bs))},WI=(e,t,n)=>((e,t,n)=>{const r=yn(e),o=((e,t,n)=>B.from(e.dom.elementFromPoint(t,n)).map(fn))(Mn(r),t,n).filter(e=>Sn(r,e)).getOr(r);return((e,t,n,r)=>{const o=(t,i)=>{const a=X(t.dom.childNodes,P(e=>Vr(e)&&e.classList.contains("mce-drag-container")));return i.fold(()=>HI(a,n,r),e=>{const t=X(a,t=>t!==e.dom);return HI(t,n,r)}).orThunk(()=>(wn(t,e)?B.none():In(t)).bind(e=>o(e,B.some(t))))};return o(t,B.none())})(r,o,t,n)})(e,t,n).filter(e=>Dc(e.node)).map(e=>((e,t)=>({node:e.node,position:zI(e,t)<FI(e,t)?BI.Before:BI.After}))(e,t)),GI=e=>{var t,n;const r=e.getBoundingClientRect(),o=e.ownerDocument,i=o.documentElement,a=o.defaultView;return{top:r.top+(null!==(t=null==a?void 0:a.scrollY)&&void 0!==t?t:0)-i.clientTop,left:r.left+(null!==(n=null==a?void 0:a.scrollX)&&void 0!==n?n:0)-i.clientLeft}},UI=e=>({target:e,srcElement:e}),jI=io,YI=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})(jI,oo),qI=(e,t,n,r)=>{const o=e.dom,i=t.cloneNode(!0);o.setStyles(i,{width:n,height:r}),o.setAttrib(i,"data-mce-selected",null);const a=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(i,{margin:0,boxSizing:"border-box"}),a.appendChild(i),a},XI=(e,t)=>n=>()=>{const r="left"===e?n.scrollX:n.scrollY;n.scroll({[e]:r+t,behavior:"smooth"})},ZI=XI("left",-32),$I=XI("left",32),KI=XI("top",-32),JI=XI("top",32),QI=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},eA=(e,t,n,r,o)=>{"dragstart"===t&&Xk(r,e.dom.getOuterHTML(n));const i=((e,t,n,r)=>{const o=((e,t)=>{const n=(e=>{const t=qk(),n=(e=>{const t=e;return B.from(t[Ok])})(e);return Vk(e),Lk(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,(e=>{const t=e;return B.from(t[Ak])})(e).each(e=>t.setDragImage(e.image,e.x,e.y)),j(e.types,n=>{"Files"!==n&&t.setData(n,e.getData(n))}),j(e.files,e=>t.items.add(e)),(e=>{const t=e;return B.from(t[Dk])})(e).each(e=>{((e,t)=>{Pk(t)(e)})(t,e)}),n.each(n=>{zk(e,n),zk(t,n)}),t})(e);return"dragstart"===t?(Lk(n),Fk(n)):"drop"===t?(Nk(n),Vk(n)):(Rk(n),Hk(n)),n})(n,e);return y(r)?((e,t,n)=>{const r=L("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:C,stopImmediatePropagation:C,stopPropagation:C,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:n,...UI(t)}})(e,t,o):((e,t,n,r)=>({...t,dataTransfer:r,type:e,...UI(n)}))(e,r,t,o)})(t,n,r,o);return e.dispatch(t,i)},tA=(e,t,n)=>{e.on(e=>{e.intervalId.clear(),e.dragging&&n.fold(()=>eA(t,"dragend",e.element,e.dataTransfer),n=>eA(t,"dragend",e.element,e.dataTransfer,n))}),nA(e)},nA=e=>{e.on(e=>{e.intervalId.clear(),QI(e.ghost)}),e.clear()},rA=e=>{const t=Ya(),n=Oa.DOM,r=document,o=((e,t)=>n=>{if((e=>0===e.button)(n)){const r=J(t.dom.getParents(n.target),YI).getOr(null);if(x(r)&&((e,t,n)=>jI(n)&&n!==t&&e.isEditable(n.parentElement))(t.dom,t.getBody(),r)){const o=t.dom.getPos(r),i=t.getBody(),a=t.getDoc().documentElement;e.set({element:r,dataTransfer:qk(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?i.scrollWidth:a.offsetWidth)-2,maxY:(t.inline?i.scrollHeight:a.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:r.offsetWidth,height:r.offsetHeight,ghost:qI(t,r,r.offsetWidth,r.offsetHeight),intervalId:ja(100)})}}})(t,e),i=((e,t)=>{const n=qa((e,n)=>((e,t,n)=>{e._selectionOverrides.hideFakeCaret(),WI(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),r=>{const o=e._selectionOverrides.showCaret(1,r.node,r.position===BI.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})})(t,e,n),0);t.on("remove",n.cancel);const r=e;return o=>e.on(e=>{const i=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(!e.dragging&&i>10){const n=eA(t,"dragstart",e.element,e.dataTransfer,o);if(x(n.dataTransfer)&&(e.dataTransfer=n.dataTransfer),n.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){const i=o.currentTarget===t.getDoc().documentElement,l=((e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}))(e,((e,t)=>{return n=(e=>e.inline?GI(e.getBody()):{left:0,top:0})(e),r=(e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}})(e),o=((e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=GI(e.getContentAreaContainer()),r=(e=>{const t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:o})(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}})(e,t),{pageX:o.left-n.left+r.left,pageY:o.top-n.top+r.top};var n,r,o})(t,o));a=e.ghost,s=t.getBody(),a.parentNode!==s&&s.appendChild(a),((e,t,n,r,o,i,a,s,l,u,c,d)=>{let h=0,p=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(h=t.pageX+n-o),t.pageY+r>i&&(p=t.pageY+r-i),e.style.width=n-h+"px",e.style.height=r-p+"px";const f=l.clientHeight,g=l.clientWidth,m=a+l.getBoundingClientRect().top,v=s+l.getBoundingClientRect().left;c.on(e=>{e.intervalId.clear(),e.dragging&&d&&(a+8>=f?e.intervalId.set(JI(u)):a-8<=0?e.intervalId.set(KI(u)):s+8>=g?e.intervalId.set($I(u)):s-8<=0?e.intervalId.set(ZI(u)):m+16>=window.innerHeight?e.intervalId.set(JI(window)):m-16<=0?e.intervalId.set(KI(window)):v+16>=window.innerWidth?e.intervalId.set($I(window)):v-16<=0&&e.intervalId.set(ZI(window)))})})(e.ghost,l,e.width,e.height,e.maxX,e.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),r,i),n.throttle(o.clientX,o.clientY)}var a,s})})(t,e),a=((e,t)=>n=>{e.on(e=>{var r;if(e.intervalId.clear(),e.dragging){if(((e,t,n)=>!b(t)&&t!==n&&!e.dom.isChildOf(t,n)&&e.dom.isEditable(t))(t,(e=>{const t=e.getSel();if(x(t)){const e=t.getRangeAt(0).startContainer;return $r(e)?e.parentNode:e}return null})(t.selection),e.element)){const o=null!==(r=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==r?r:t.getBody();eA(t,"drop",o,e.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{((e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);QI(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Io(yn(n))})(t.dom,e.element),(e=>{const t=e.getData("text/html");return""===t?B.none():B.some(t)})(e.dataTransfer).each(e=>t.insertContent(e)),t._selectionOverrides.hideFakeCaret()})}eA(t,"dragend",t.getBody(),e.dataTransfer,n)}}),nA(e)})(t,e),s=((e,t)=>n=>tA(e,t,B.some(n)))(t,e);e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",a),n.bind(r,"mousemove",i),n.bind(r,"mouseup",s),e.on("remove",()=>{n.unbind(r,"mousemove",i),n.unbind(r,"mouseup",s)}),e.on("keydown",n=>{n.keyCode===Jh.ESC&&tA(t,e,B.none())})},oA=io,iA=(e,t)=>Ym(e.getBody(),t),aA=e=>{const t=e.selection,n=e.dom,r=e.getBody(),o=((e,t,n,r)=>{const o=Ya();let i,a;const s=Nl(e),l=e.dom,u=()=>{(e=>{var t,n;const r=Er(yn(e),"*[contentEditable=false],video,audio,embed,object");for(let e=0;e<r.length;e++){const o=r[e].dom;let i=o.previousSibling;if(Ho(i)){const e=i.data;1===e.length?null===(t=i.parentNode)||void 0===t||t.removeChild(i):i.deleteData(e.length-1,1)}i=o.nextSibling,Vo(i)&&(1===i.data.length?null===(n=i.parentNode)||void 0===n||n.removeChild(i):i.deleteData(0,1))}})(t),a&&(Sc(a),a=null),o.on(e=>{l.remove(e.caret),o.clear()}),i&&(clearInterval(i),i=void 0)};return{show:(e,c)=>{let d;if(u(),Tc(c))return null;if(!n(c))return a=((e,t)=>{var n;const r=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Ao),o=e.parentNode;if(t){const t=e.previousSibling;if(No(t)){if(Oo(t))return t;if(Ho(t))return t.splitText(t.data.length-1)}null==o||o.insertBefore(r,e)}else{const t=e.nextSibling;if(No(t)){if(Oo(t))return t;if(Vo(t))return t.splitText(1),t}e.nextSibling?null==o||o.insertBefore(r,e.nextSibling):null==o||o.appendChild(r)}return r})(c,e),d=c.ownerDocument.createRange(),Ac(a.nextSibling)?(d.setStart(a,0),d.setEnd(a,0)):(d.setStart(a,1),d.setEnd(a,1)),d;{const n=((e,t,n)=>{var r;const o=(null!==(r=t.ownerDocument)&&void 0!==r?r:document).createElement(e);o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(ko().dom);const i=t.parentNode;return n?null==i||i.insertBefore(o,t):t.nextSibling?null==i||i.insertBefore(o,t.nextSibling):null==i||i.appendChild(o),o})(s,c,e),u=kc(t,c,e);l.setStyle(n,"top",u.top),a=n;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...u}),l.add(t,h),o.set({caret:h,element:c,before:e}),e&&l.addClass(h,"mce-visual-caret-before"),i=setInterval(()=>{o.on(e=>{r()?l.toggleClass(e.caret,"mce-visual-caret-hidden"):l.addClass(e.caret,"mce-visual-caret-hidden")})},500),d=c.ownerDocument.createRange(),d.setStart(n,0),d.setEnd(n,0)}return d},hide:u,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(e=>{const n=kc(t,e.element,e.before);l.setStyles(e.caret,{...n})})},destroy:()=>clearInterval(i)}})(e,r,n.isBlock,()=>bf(e)),i="sel-"+n.uniqueId(),a="data-mce-selected";let s;const l=e=>e!==r&&(oA(e)||lo(e))&&n.isChildOf(e,r)&&n.isEditable(e.parentNode),u=(n,r,i,a=!0)=>e.dispatch("ShowCaret",{target:r,direction:n,before:i}).isDefaultPrevented()?null:(a&&t.scrollIntoView(r,-1===n),o.show(i,r)),c=e=>Oo(e)||Vo(e)||Ho(e),d=e=>c(e.startContainer)||c(e.endContainer),h=t=>{const r=e.schema.getVoidElements(),o=n.createRng(),i=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset;return Se(r,i.nodeName.toLowerCase())?0===a?o.setStartBefore(i):o.setStartAfter(i):o.setStart(i,a),Se(r,s.nodeName.toLowerCase())?0===l?o.setEndBefore(s):o.setEndAfter(s):o.setEnd(s,l),o},p=(o,c)=>{if(!o)return null;if(o.collapsed){if(!d(o)){const e=c?1:-1,t=ed(e,r,o),i=t.getNode(!c);if(x(i)){if(Dc(i))return u(e,i,!!c&&!t.isAtEnd(),!1);if(Eo(i)&&io(i.nextSibling)){const e=n.createRng();return e.setStart(i,0),e.setEnd(i,0),e}}const a=t.getNode(c);if(x(a)){if(Dc(a))return u(e,a,!c&&!t.isAtEnd(),!1);if(Eo(a)&&io(a.previousSibling)){const e=n.createRng();return e.setStart(a,1),e.setEnd(a,1),e}}}return null}let h=o.startContainer,p=o.startOffset;const f=o.endOffset;if($r(h)&&0===p&&oA(h.parentNode)&&(h=h.parentNode,p=n.nodeIndex(h),h=h.parentNode),!Vr(h))return null;if(f===p+1&&h===o.endContainer){const r=h.childNodes[p];if(l(r))return(r=>{const o=r.cloneNode(!0),l=e.dispatch("ObjectSelected",{target:r,targetClone:o});if(l.isDefaultPrevented())return null;const u=((r,o)=>{const a=yn(e.getBody()),s=e.getDoc(),l=Qn(a,"#"+i).getOrThunk(()=>{const e=gn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return Kt(e,"id",i),gr(a,e),e}),u=n.createRng();yr(l),vr(l,[vn(fo,s),yn(o),vn(fo,s)]),u.setStart(l.dom.firstChild,1),u.setEnd(l.dom.lastChild,0),ar(l,{top:n.getPos(r,e.getBody()).y+"px"}),$p(l);const c=t.getSel();return c&&(c.removeAllRanges(),c.addRange(u)),u})(r,l.targetClone),c=yn(r);return j(Er(yn(e.getBody()),`*[${a}]`),e=>{wn(c,e)||nn(e,a)}),n.getAttrib(r,a)||r.setAttribute(a,"1"),s=r,g(),u})(r)}return null},f=()=>{s&&s.removeAttribute(a),Qn(yn(e.getBody()),"#"+i).each(br),s=null},g=()=>{o.hide()};return Tx(e)||(e.on("click",t=>{n.isEditable(t.target)||(t.preventDefault(),e.focus())}),e.on("blur NewBlock",f),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",t=>{const n=t.target,r=iA(e,n);oA(r)?(t.preventDefault(),X_(e,r).each(p)):l(n)&&X_(e,n).each(p)},!0),e.on("mousedown",o=>{const i=o.target;if(i!==r&&"HTML"!==i.nodeName&&!n.isChildOf(i,r))return;if(!((e,t,n)=>{const r=yn(e.getBody()),o=e.inline?r:yn(Mn(r).dom.documentElement),i=((e,t,n,r)=>{const o=(e=>e.dom.getBoundingClientRect())(t);return{x:n-(e?o.left+t.dom.clientLeft+e_(t):0),y:r-(e?o.top+t.dom.clientTop+Qx(t):0)}})(e.inline,o,t,n);return((e,t,n)=>{const r=Kx(e),o=Jx(e);return t>=0&&n>=0&&t<=r&&n<=o})(o,i.x,i.y)})(e,o.clientX,o.clientY))return;f(),g();const a=iA(e,i);oA(a)?(o.preventDefault(),X_(e,a).each(p)):WI(r,o.clientX,o.clientY).each(n=>{var r;o.preventDefault(),(r=u(1,n.node,n.position===BI.Before,!1))&&t.setRng(r),Hr(a)?a.focus():e.getBody().focus()})}),e.on("keypress",e=>{Jh.modifierPressed(e)||oA(t.getNode())&&e.preventDefault()}),e.on("GetSelectionRange",e=>{let t=e.range;if(s){if(!s.parentNode)return void(s=null);t=t.cloneRange(),t.selectNode(s),e.range=t}}),e.on("SetSelectionRange",e=>{e.range=h(e.range);const t=p(e.range,e.forward);t&&(e.range=t)}),e.on("AfterSetSelectionRange",e=>{const t=e.range,r=t.startContainer.parentElement;var o;d(t)||Vr(o=r)&&"mcepastebin"===o.id||g(),(e=>x(e)&&n.hasClass(e,"mce-offscreen-selection"))(r)||f()}),(e=>{rA(e),Nu(e)&&(e=>{const t=t=>{if(!t.isDefaultPrevented()){const n=t.dataTransfer;n&&(W(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&a_(e,"Dropped file type is not supported"))}},n=n=>{pf(e,n.target)&&t(n)},r=()=>{const r=Oa.DOM,o=e.dom,i=document,a=e.inline?e.getBody():e.getDoc(),s=["drop","dragover"];j(s,e=>{r.bind(i,e,n),o.bind(a,e,t)}),e.on("remove",()=>{j(s,e=>{r.unbind(i,e,n),o.unbind(a,e,t)})})};e.on("init",()=>{uf.setEditorTimeout(e,r,0)})})(e)})(e),(e=>{const t=qa(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const t=e.selection.getRng();if(t.collapsed){const n=Z_(e,t,!1);e.selection.setRng(n)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})})(e),(e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(lo(n)){const t=Ym(e.getBody(),n),r=io(t)?t:n;e.selection.getNode()!==r&&X_(e,r).each(t=>e.selection.setRng(t))}})})})(e)),{showCaret:u,showBlockCaretContainer:e=>{e.hasAttribute("data-mce-caret")&&(Wo(e),t.scrollIntoView(e))},hideFakeCaret:g,destroy:()=>{o.destroy(),s=null}}},sA=(e,t)=>{let n=t;for(let t=e.previousSibling;$r(t);t=t.previousSibling)n+=t.data.length;return n},lA=(e,t,n,r,o)=>{if($r(n)&&(r<0||r>n.data.length))return[];const i=o&&$r(n)?[sA(n,r)]:[r];let a=n;for(;a!==t&&a.parentNode;)i.push(e.nodeIndex(a,o)),a=a.parentNode;return a===t?i.reverse():[]},uA=(e,t,n,r,o,i,a=!1)=>({start:lA(e,t,n,r,a),end:lA(e,t,o,i,a)}),cA=(e,t)=>{const n=t.slice(),r=n.pop();return w(r)?$(n,(e,t)=>e.bind(e=>B.from(e.childNodes[t])),B.some(e)).bind(e=>$r(e)&&(r<0||r>e.data.length)?B.none():B.some({node:e,offset:r})):B.none()},dA=(e,t)=>cA(e,t.start).bind(({node:n,offset:r})=>cA(e,t.end).map(({node:e,offset:t})=>{const o=document.createRange();return o.setStart(n,r),o.setEnd(e,t),o})),hA=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const r=t.parentNode;e.remove(t,$r(t.firstChild)&&ni(t.firstChild.data)),hA(e,r,n)}},pA=(e,t,n,r=!0)=>{const o=t.startContainer.parentNode,i=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&($r(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),$r(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),hA(e,o,n),o!==i&&hA(e,i,n))},fA=(e,t)=>B.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),gA=(e,t,n)=>{const r=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:ml(r).concat(e.blockPatterns),inlinePatterns:vl(r).concat(e.inlinePatterns)}},mA=(e,t,n,r)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,r),o.toString()},vA=(e,t,n)=>{((e,t,n)=>{if($r(e)&&0>=e.length)return B.some(jC(e,0));{const t=hs(YC);return B.from(t.forwards(e,0,qC(e),n)).map(e=>jC(e.container,0))}})(t,0,t).each(r=>{const o=r.container;$C(o,n.start.length,t).each(n=>{const r=e.createRng();r.setStart(o,0),r.setEnd(n.container,n.offset),pA(e,r,e=>e===t)});const i=yn(o),a=vo(i);/^\s[^\s]/.test(a)&&((e,t)=>{mo.set(e,t)})(i,a.slice(1))})},yA=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),bA=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},xA=(e,t,n)=>{const r=dA(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=r.startContainer,i=r.endContainer,a=0===r.endOffset?i:i.splitText(r.endOffset),s=0===r.startOffset?o:o.splitText(r.startOffset),l=s.parentNode;return{prefix:t,end:a.parentNode.insertBefore(yA(e,t+"-end"),a),start:l.insertBefore(yA(e,t+"-start"),s)}},_A=(e,t,n)=>{hA(e,e.get(t.prefix+"-end"),n),hA(e,e.get(t.prefix+"-start"),n)},wA=e=>0===e.start.length,SA=(e,t,n,r)=>{const o=t.start;var i;return KC(e,r.container,r.offset,(i=o,(e,t)=>{const n=e.data.substring(0,t),r=n.lastIndexOf(i.charAt(i.length-1)),o=n.lastIndexOf(i);return-1!==o?o+i.length:-1!==r?r+1:-1}),n).bind(r=>{var i,a;const s=null!==(a=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(o))&&void 0!==a?a:-1;if(-1!==s&&r.offset>=s+o.length){const t=e.createRng();return t.setStart(r.container,r.offset-o.length),t.setEnd(r.container,r.offset),B.some(t)}{const i=r.offset-o.length;return ZC(r.container,i,n).map(t=>{const n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(r.container,r.offset),n}).filter(e=>e.toString()===o).orThunk(()=>SA(e,t,n,jC(r.container,0)))}})},CA=(e,t,n,r)=>{const o=e.dom,i=o.getRoot(),a=n.pattern,s=n.position.container,l=n.position.offset;return ZC(s,l-n.pattern.end.length,t).bind(u=>{const c=uA(o,i,u.container,u.offset,s,l,r);if(wA(a))return B.some({matches:[{pattern:a,startRng:c,endRng:c}],position:u});{const s=MA(e,n.remainingPatterns,u.container,u.offset,t,r),l=s.getOr({matches:[],position:u}),d=l.position,h=((e,t,n,r,o,i=!1)=>{if(0===t.start.length&&!i){const t=e.createRng();return t.setStart(n,r),t.setEnd(n,r),B.some(t)}return XC(n,r,o).bind(n=>SA(e,t,o,n).bind(e=>{var t;if(i){if(e.endContainer===n.container&&e.endOffset===n.offset)return B.none();if(0===n.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return B.none()}return B.some(e)}))})(o,a,d.container,d.offset,t,s.isNone());return h.map(e=>{const t=((e,t,n,r=!1)=>uA(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,r))(o,i,e,r);return{matches:l.matches.concat([{pattern:a,startRng:t,endRng:c}]),position:jC(e.startContainer,e.startOffset)}})}})},MA=(e,t,n,r,o,i)=>{const a=e.dom;return XC(n,r,a.getRoot()).bind(s=>{const l=mA(a,o,n,r);for(let a=0;a<t.length;a++){const u=t[a];if(!Ge(l,u.end))continue;const c=t.slice();c.splice(a,1);const d=CA(e,o,{pattern:u,remainingPatterns:c,position:s},i);if(d.isNone()&&r>0)return MA(e,t,n,r-1,o,i);if(d.isSome())return d}return B.none()})},TA=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?j(t.format,t=>{e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},kA=(e,t,n,r,o,i)=>{var a;return((e,t)=>{const n=ne(e,e=>G(t,t=>e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t})(MA(e,o.inlinePatterns,n,r,t,i).fold(()=>[],e=>e.matches),MA(e,(a=o.inlinePatterns,ae(a,(e,t)=>t.end.length-e.end.length)),n,r,t,i).fold(()=>[],e=>e.matches))},IA=(e,t)=>{if(0===t.length)return;const n=e.dom,r=e.selection.getBookmark(),o=((e,t)=>{const n=ss("mce_textpattern"),r=Z(t,(t,r)=>{const o=xA(e,n+`_end${t.length}`,r.endRng);return t.concat([{...r,endMarker:o}])},[]);return Z(r,(t,o)=>{const i=r.length-t.length-1,a=wA(o.pattern)?o.endMarker:xA(e,n+`_start${i}`,o.startRng);return t.concat([{...o,startMarker:a}])},[])})(n,t);j(o,t=>{const r=n.getParent(t.startMarker.start,n.isBlock),o=e=>e===r;wA(t.pattern)?((e,t,n,r)=>{const o=bA(e.dom,n);pA(e.dom,o,r),TA(e,t,o)})(e,t.pattern,t.endMarker,o):((e,t,n,r,o)=>{const i=e.dom,a=bA(i,r),s=bA(i,n);pA(i,s,o),pA(i,a,o);const l={prefix:n.prefix,start:n.end,end:r.start},u=bA(i,l);TA(e,t,u)})(e,t.pattern,t.startMarker,t.endMarker,o),_A(n,t.endMarker,o),_A(n,t.startMarker,o)}),e.selection.moveToBookmark(r)},AA=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},DA=Oa.DOM,PA=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,LA=e=>be(e,e=>!1===y(e)),NA=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return LA({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:PA(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},RA=e=>{const t=e.options.get;return LA({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},EA=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,OA=e=>{const t=EA(e),n=ru(e),r=e.contentCSS,o=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(n)},i=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let t="";Nt.each(e.contentStyles,e=>{t+=e+"\r\n"}),e.dom.addStyle(t)}const a=Promise.all(((e,t,n)=>{const{pass:r,fail:o}=q(t,e=>tinymce.Resource.has(c_(e))),i=r.map(t=>{const n=tinymce.Resource.get(c_(t));return h(n)?Promise.resolve(EA(e).loadRawCss(t,n)):Promise.resolve()}),a=[...i,EA(e).loadAll(o)];return e.inline?a:a.concat([e.ui.styleSheetLoader.loadAll(n)])})(e,r,n)).then(i).catch(i),s=nu(e);return s&&((e,t)=>{const n=yn(e.getBody()),r=Gn(Wn(n)),o=mn("style");Kt(o,"type","text/css"),gr(o,vn(t)),gr(r,o),e.on("remove",()=>{br(o)})})(e,s),a},BA=e=>{!0!==e.removed&&((e=>{Tx(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})})(e),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,(e=>{e.dispatch("Init")})(e),e.focus(!0),(e=>{const t=e.dom.getRoot();e.inline||Qd(e)&&e.selection.getStart(!0)!==t||Md(t).each(t=>{const n=t.getNode(),r=qr(n)?Md(n).getOr(t):t;e.selection.setRng(r.toRange())})})(e),e.nodeChanged({initial:!0});const t=Fu(e);_(t)&&t.call(e,e),(e=>{const t=Hu(e);t&&uf.setEditorTimeout(e,()=>{let n;n=!0===t?e:e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)})(e)})(e))},zA=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(DA.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=Iu(e),e._editableRoot=Au(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===DA.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=m_(e),e.schema=sa(RA(e)),e.dom=Oa(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Zl(e),referrerPolicy:$l(e),onSetAttrib:t=>{e.dispatch("SetAttrib",t)},force_hex_color:gc(e)}),e.parser=(e=>{const t=$b(NA(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(t,n)=>{const r=e.dom,o="data-mce-"+n;let i=t.length;for(;i--;){const a=t[i];let s=a.attr(n);if(s&&!a.attr(o)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?(s=r.serializeStyle(r.parseStyle(s),a.name),s.length||(s=null),a.attr(o,s),a.attr(n,s)):"tabindex"===n?(a.attr(o,s),a.attr(n,null)):a.attr(o,e.convertURL(s,n,a.name))}}}),t.addNodeFilter("script",e=>{let t=e.length;for(;t--;){const n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}),sc(e)&&t.addNodeFilter("#cdata",t=>{var n;let r=t.length;for(;r--;){const o=t[r];o.type=8,o.name="#comment",o.value="[CDATA["+e.dom.encode(null!==(n=o.value)&&void 0!==n?n:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",t=>{let n=t.length;const r=e.schema.getNonEmptyElements();for(;n--;){const e=t[n];e.isEmpty(r)&&0===e.getAll("br").length&&e.append(new Of("br",1))}}),t})(e),e.serializer=Ox((e=>{const t=e.options.get;return{...NA(e),...RA(e),...LA({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}})(e),e),e.selection=Rx(e.dom,e.getWin(),e.serializer,e),e.annotator=Gh(e),e.formatter=k_(e),e.undoManager=A_(e),e._nodeChangeDispatcher=new Ik(e),e._selectionOverrides=aA(e),(e=>{const t=Ya(),n=Fa(!1),r=Xa(t=>{e.dispatch("longpress",{...t,type:"longpress"}),n.set(!0)},400);e.on("touchstart",e=>{ZS(e).each(o=>{r.cancel();const i={x:o.clientX,y:o.clientY,target:e.target};r.throttle(e),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{r.cancel(),ZS(o).each(r=>{t.on(o=>{((e,t)=>{const n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return n>5||r>5})(r,o)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{r.cancel(),"touchcancel"!==o.type&&t.get().filter(e=>e.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)})(e),(e=>{(e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})})(e),(e=>{e.parser.addNodeFilter("details",t=>{const n=pc(e);j(t,e=>{"expanded"===n?e.attr("open","open"):"collapsed"===n&&e.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=fc(e);j(t,e=>{"expanded"===n?e.attr("open","open"):"collapsed"===n&&e.attr("open",null)})})})(e)})(e),(e=>{const t="contenteditable",n=" "+Nt.trim(ic(e))+" ",r=" "+Nt.trim(oc(e))+" ",o=nC(n),i=nC(r),a=ac(e);a.length>0&&e.on("BeforeSetContent",t=>{((e,t,n)=>{let r=t.length,o=n.content;if("raw"!==n.format){for(;r--;)o=o.replace(t[r],rC(e,o,oc(e)));n.content=o}})(e,a,t)}),e.parser.addAttributeFilter("class",e=>{let n=e.length;for(;n--;){const r=e[n];o(r)?r.attr(t,"true"):i(r)&&r.attr(t,"false")}}),e.serializer.addAttributeFilter(t,e=>{let n=e.length;for(;n--;){const r=e[n];(o(r)||i(r))&&(a.length>0&&r.attr("data-mce-content")?(r.name="#text",r.type=3,r.raw=!0,r.value=r.attr("data-mce-content")):r.attr(t,null))}})})(e),Tx(e)||((e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),(e=>{const t=((e,t,n)=>{const r=Hs.fromRangeStart(e).getNode(),o=((e,t,n)=>$n(yn(e),e=>(e=>oo(e.dom))(e)||n.isBlock(Ht(e)),RI(t)).getOr(yn(t)).dom)(r,t,n),i=OI(r,o,!1),a=OI(r,o,!0),s=document.createRange();return EI(i,o).fold(()=>{LI(i)?s.setStart(i,0):s.setStartBefore(i)},e=>s.setStartBefore(e.dom)),EI(a,o).fold(()=>{LI(a)?s.setEnd(a,a.data.length):s.setEndAfter(a)},e=>s.setEndAfter(e.dom)),s})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(sv(t))})(e))})})(e),(e=>{(e=>{const t=[",",".",";",":","!","?"],n=[32],r=()=>{return t=nc(e),n=rc(e),{inlinePatterns:vl(t),blockPatterns:ml(t),dynamicPatternsLookup:n};var t,n},o=()=>(e=>e.options.isSet("text_patterns_lookup"))(e);e.on("keydown",t=>{if(13===t.keyCode&&!Jh.modifierPressed(t)&&e.selection.isCollapsed()){const n=r();(n.inlinePatterns.length>0||n.blockPatterns.length>0||o())&&((e,t)=>{const n=e.selection.getRng();return fA(e,n).map(r=>{var o;const i=Math.max(0,n.startOffset),a=gA(t,r,null!==(o=r.textContent)&&void 0!==o?o:""),s=kA(e,r,n.startContainer,i,a,!0),l=((e,t,n,r)=>{var o;const i=e.dom,a=Nl(e);if(!i.is(t,a))return[];const s=null!==(o=t.textContent)&&void 0!==o?o:"";return((e,t)=>{const n=(e=>ae(e,(e,t)=>t.start.length-e.start.length))(e),r=t.replace(fo," ");return J(n,e=>0===t.indexOf(e.start)||0===r.indexOf(e.start))})(n.blockPatterns,s).map(e=>Nt.trim(s).length===e.start.length?[]:[{pattern:e,range:uA(i,i.getRoot(),t,0,t,0,!0)}]).getOr([])})(e,r,a);return(l.length>0||s.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{(e=>{e.insertContent(Ao,{preserve_zwsp:!0})})(e),IA(e,s),((e,t)=>{if(0===t.length)return;const n=e.selection.getBookmark();j(t,t=>((e,t)=>{const n=e.dom,r=t.pattern,o=dA(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return fA(e,o).each(t=>{"block-format"===r.type?((e,t)=>{const n=t.get(e);return g(n)&&le(n).exists(e=>Se(e,"block"))})(r.format,e.formatter)&&e.undoManager.transact(()=>{vA(e.dom,t,r),e.formatter.apply(r.format)}):"block-command"===r.type&&e.undoManager.transact(()=>{vA(e.dom,t,r),e.execCommand(r.cmd,!1,r.value)})}),!0})(e,t)),e.selection.moveToBookmark(n)})(e,l);const t=e.selection.getRng(),n=XC(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),n.each(t=>{const n=t.container;n.data.charAt(t.offset-1)===po&&(n.deleteData(t.offset-1,1),hA(e.dom,n.parentNode,t=>t===e.dom.getRoot()))})}),!0)}).getOr(!1)})(e,n)&&t.preventDefault()}},!0);const i=()=>{if(e.selection.isCollapsed()){const t=r();(t.inlinePatterns.length>0||o())&&((e,t)=>{const n=e.selection.getRng();fA(e,n).map(r=>{const o=Math.max(0,n.startOffset-1),i=mA(e.dom,r,n.startContainer,o),a=gA(t,r,i),s=kA(e,r,n.startContainer,o,a,!1);s.length>0&&e.undoManager.transact(()=>{IA(e,s)})})})(e,t)}};e.on("keyup",e=>{AA(n,e,(e,t)=>e===t.keyCode&&!Jh.modifierPressed(t))&&i()}),e.on("keypress",n=>{AA(t,n,(e,t)=>e.charCodeAt(0)===t.charCode)&&uf.setEditorTimeout(e,i)})})(e)})(e));const o=kk(e);((e,t)=>{e.addCommand("delete",()=>{((e,t)=>{XS(e,t,!1).fold(()=>{e.selection.isEditable()&&(fm(e),vm(e))},R)})(e,t)}),e.addCommand("forwardDelete",()=>{((e,t)=>{XS(e,t,!0).fold(()=>{e.selection.isEditable()&&(e=>{pm(e,"ForwardDelete")})(e)},R)})(e,t)})})(e,o),(e=>{e.on("NodeChange",D(eC,e))})(e),(e=>{var t;const n=e.dom,r=Nl(e),o=null!==(t=lu(e))&&void 0!==t?t:"",i=(t,a)=>{if((e=>{if(L_(e)){const t=e.keyCode;return!N_(e)&&(Jh.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||W(D_,t))}return!1})(t))return;const s=e.getBody(),l=!(e=>L_(e)&&!(N_(e)||"keyup"===e.type&&229===e.keyCode))(t)&&((e,t,n)=>{if(di(yn(t),!1)){const r=t.firstElementChild;return!r||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===r.nodeName.toLowerCase()}return!1})(n,s,r);(""!==n.getAttrib(s,P_)!==l||a)&&(n.setAttrib(s,P_,l?o:null),n.setAttrib(s,"aria-placeholder",l?o:null),((e,t)=>{e.dispatch("PlaceholderToggle",{state:t})})(e,l),e.on(l?"keydown":"keyup",i),e.off(l?"keyup":"keydown",i))};Xe(o)&&e.on("init",t=>{i(t,!0),e.on("change SetContent ExecCommand",i),e.on("paste",t=>uf.setEditorTimeout(e,()=>i(t)))})})(e),DI(e);const i=(e=>{const t=e;return(e=>we(e.plugins,"rtc").bind(e=>B.from(e.setup)))(e).fold(()=>(t.rtcInstance=Mx(e),B.none()),e=>(t.rtcInstance=(()=>{const e=k(null),t=k("");return{init:{bindEvents:C},undoManager:{beforeChange:C,add:e,undo:e,redo:e,clear:C,reset:C,hasUndo:E,hasRedo:E,transact:e,ignore:C,extra:C},formatter:{match:E,matchAll:k([]),matchNode:k(void 0),canApply:E,closest:t,apply:C,remove:C,toggle:C,formatChanged:k({unbind:C})},editor:{getContent:t,setContent:k({content:"",html:""}),insertContent:k(""),addVisual:C},selection:{getContent:t},autocompleter:{addDecoration:C,removeDecoration:C},raw:{getModel:k(B.none())}}})(),B.some(()=>e().then(e=>(t.rtcInstance=(e=>{const t=e=>p(e)?e:{},{init:n,undoManager:r,formatter:o,editor:i,selection:a,autocompleter:s,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(e,t,n)=>r.transact(n),ignore:(e,t)=>r.ignore(t),extra:(e,t,n,o)=>r.extra(n,o)},formatter:{match:(e,n,r,i)=>o.match(e,t(n),i),matchAll:o.matchAll,matchNode:o.matchNode,canApply:e=>o.canApply(e),closest:e=>o.closest(e),apply:(e,n,r)=>o.apply(e,t(n)),remove:(e,n,r,i)=>o.remove(e,t(n)),toggle:(e,n,r)=>o.toggle(e,t(n)),formatChanged:(e,t,n,r,i)=>o.formatChanged(t,n,r,i)},editor:{getContent:e=>i.getContent(e),setContent:(e,t)=>({content:i.setContent(e,t),html:""}),insertContent:(e,t)=>(i.insertContent(e),""),addVisual:i.addVisual},selection:{getContent:(e,t)=>a.getContent(t)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>B.some(l.getRawModel())}}})(e),e.rtc.isRemote)))))})(e);(e=>{const t=e.getDoc(),n=e.getBody();(e=>{e.dispatch("PreInit")})(e),Wu(e)||(t.body.spellcheck=!1,DA.setAttrib(n,"spellcheck","false")),e.quirks=(e=>{const t=Nt.each,n=Jh.BACKSPACE,r=Jh.DELETE,o=e.dom,i=e.selection,a=e.parser,s=At.browser,l=s.isFirefox(),u=s.isChromium()||s.isSafari(),c=At.deviceType.isiPhone()||At.deviceType.isiPad(),d=At.os.isMacOS()||At.os.isiOS(),p=(t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},f=e=>e.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},m=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",t=>{let n;if(t.target===e.getDoc().documentElement)if(n=i.getRng(),e.getBody().focus(),"mousedown"===t.type){if(Oo(n.startContainer))return;i.placeCaretAt(t.clientX,t.clientY)}else i.setRng(n)})},v=()=>{Range.prototype.getClientRects||e.on("mousedown",t=>{if(!f(t)&&"HTML"===t.target.nodeName){const t=e.getBody();t.blur(),uf.setEditorTimeout(e,()=>{t.focus()})}})},y=()=>{const t=Ou(e);e.on("click",n=>{const r=n.target;/^(IMG|HR)$/.test(r.nodeName)&&o.isEditable(r)&&(n.preventDefault(),e.selection.select(r),e.nodeChanged()),"A"===r.nodeName&&o.hasClass(r,t)&&0===r.childNodes.length&&o.isEditable(r.parentNode)&&(n.preventDefault(),i.select(r))})},b=()=>{e.on("keydown",e=>{if(!f(e)&&e.keyCode===n&&i.isCollapsed()&&0===i.getRng().startOffset){const t=i.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0})},x=()=>{Iu(e)||e.on("BeforeExecCommand mousedown",()=>{p("StyleWithCSS",!1),p("enableInlineTableEditing",!1),au(e)||p("enableObjectResizing",!1)})},_=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},w=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},S=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",t=>{let n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())}))},M=()=>{d&&e.on("keydown",t=>{!Jh.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})},T=()=>{e.on("click",e=>{let t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",e=>{e.preventDefault()})})},I=C;return Tx(e)?(u&&(m(),y(),k(),g(),c&&(w(),S(),T())),l&&(v(),x(),_(),M())):(e.on("keydown",t=>{if(f(t)||t.keyCode!==Jh.BACKSPACE)return;let n=i.getRng();const r=n.startContainer,a=n.startOffset,s=o.getRoot();let l=r;if(n.collapsed&&0===a){for(;l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==s;)l=l.parentNode;"BLOCKQUOTE"===l.nodeName&&(e.formatter.toggle("blockquote",void 0,l),n=o.createRng(),n.setStart(r,0),n.setEnd(r,0),i.setRng(n))}}),(()=>{const t=e=>{const t=o.create("body"),n=e.cloneContents();return t.appendChild(n),i.serializer.serialize(t,{format:"html"})};e.on("keydown",i=>{const a=i.keyCode;if(!f(i)&&(a===r||a===n)&&e.selection.isEditable()){const n=e.selection.isCollapsed(),r=e.getBody();if(n&&!di(yn(r)))return;if(!n&&!(n=>{const r=t(n),i=o.createRng();return i.selectNode(e.getBody()),r===t(i)})(e.selection.getRng()))return;i.preventDefault(),e.setContent(""),r.firstChild&&o.isBlock(r.firstChild)?e.selection.setCursorLocation(r.firstChild,0):e.selection.setCursorLocation(r,0),e.nodeChanged()}})})(),At.windowsPhone||e.on("keyup focusin mouseup",t=>{Jh.modifierPressed(t)||(e=>{const t=e.getBody(),n=e.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===t&&0===n.startOffset&&n.endOffset===t.childNodes.length})(e)||i.normalize()},!0),u&&(m(),y(),e.on("init",()=>{p("DefaultParagraphSeparator",Nl(e))}),k(),b(),a.addNodeFilter("br",e=>{let t=e.length;for(;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),c?(w(),S(),T()):g()),l&&(e.on("keydown",t=>{if(!f(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(i.isCollapsed()&&0===i.getRng().startOffset){const e=i.getNode(),n=e.previousSibling;if("HR"===e.nodeName)return o.remove(e),void t.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(o.remove(n),t.preventDefault())}}}),v(),(()=>{const n=()=>{const n=o.getAttribs(i.getStart().cloneNode(!1));return()=>{const r=i.getStart();r!==e.getBody()&&(o.setAttrib(r,"style",null),t(n,e=>{r.setAttributeNode(e.cloneNode(!0))}))}},r=()=>!i.isCollapsed()&&o.getParent(i.getStart(),o.isBlock)!==o.getParent(i.getEnd(),o.isBlock);e.on("keypress",t=>{let o;return!(!(f(t)||8!==t.keyCode&&46!==t.keyCode)&&r()&&(o=n(),e.getDoc().execCommand("delete",!1),o(),t.preventDefault(),1))}),o.bind(e.getDoc(),"cut",t=>{if(!f(t)&&r()){const t=n();uf.setEditorTimeout(e,()=>{t()})}})})(),x(),e.on("SetContent ExecCommand",e=>{"setcontent"!==e.type&&"mceInsertLink"!==e.command||t(o.select("a:not([data-mce-block])"),e=>{var t;let n=e.parentNode;const r=o.getRoot();if((null==n?void 0:n.lastChild)===e){for(;n&&!o.isBlock(n);){if((null===(t=n.parentNode)||void 0===t?void 0:t.lastChild)!==n||n===r)return;n=n.parentNode}o.add(n,"br",{"data-mce-bogus":1})}})}),_(),M(),b(),e.on("drop",t=>{var n;const r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/html");h(r)&&/^<img[^>]*>$/.test(r)&&e.dispatch("dragend",new window.DragEvent("dragend",t))}))),{refreshContentEditable:I,isHidden:()=>{if(!l||e.removed)return!1;const t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}})(e),(e=>{e.dispatch("PostRender")})(e);const r=ou(e);void 0!==r&&(n.dir=r);const o=Gu(e);o&&e.on("BeforeSetContent",e=>{Nt.each(o,t=>{e.content=e.content.replace(t,e=>"\x3c!--mce:protected "+escape(e)+"--\x3e")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",t=>{e.composing="compositionstart"===t.type})})(e),i.fold(()=>{const t=(e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}})(e);OA(e).then(()=>{BA(e),t()})},t=>{e.setProgressState(!0),OA(e).then(()=>{t().then(t=>{e.setProgressState(!1),BA(e),Ax(e)},t=>{e.notificationManager.open({type:"error",text:String(t)}),BA(e),Ax(e)})})})},FA=O,VA=Oa.DOM,HA=Oa.DOM,WA=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),GA=e=>{const t=e.getElement();return e.inline?WA(null):(e=>{const t=HA.create("div");return HA.insertAfter(t,e),WA(t,t)})(t)},UA=async e=>{e.dispatch("ScriptsLoaded"),(e=>{const t=Nt.trim(Gl(e)),n=e.ui.registry.getAll().icons,r={...qx.get("default").icons,...qx.get(t).icons};fe(r,(t,r)=>{Se(n,r)||e.ui.registry.addIcon(r,t)})})(e),(e=>{const t=du(e);if(h(t)){const n=r_.get(t);e.theme=n(e,r_.urls[t])||{},_(e.theme.init)&&e.theme.init(e,r_.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}})(e),(e=>{const t=pu(e),n=Xx.get(t);e.model=n(e,Xx.urls[t])})(e),(e=>{const t=[];j(Pu(e),n=>{((e,t,n)=>{const r=n_.get(n),o=n_.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Nt.trim(n),r&&-1===Nt.inArray(t,n)){if(e.plugins[n])return;try{const i=r(e,o)||{};e.plugins[n]=i,_(i.init)&&(i.init(e,o),t.push(n))}catch(t){((e,t,n)=>{const r=Ga.translate(["Failed to initialize plugin: {0}",t]);Yh(e,"PluginLoadError",{message:r}),u_(r,n),a_(e,r)})(e,n,t)}}})(e,t,(e=>e.replace(/^\-/,""))(n))})})(e);const t=await(e=>{const t=e.getElement();return e.orgDisplay=t.style.display,h(du(e))?(e=>{const t=e.theme.renderUI;return t?t():GA(e)})(e):_(du(e))?(e=>{const t=e.getElement(),n=du(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n})(e):GA(e)})(e);((e,t)=>{const n={show:B.from(t.show).getOr(C),hide:B.from(t.hide).getOr(C),isEnabled:B.from(t.isEnabled).getOr(O),setEnabled:n=>{e.mode.isReadOnly()||B.from(t.setEnabled).each(e=>e(n))}};e.ui={...e.ui,...n}})(e,B.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(e=>{e.contentCSS=e.contentCSS.concat((e=>d_(e,tu(e)))(e),(e=>d_(e,ru(e)))(e))})(e),e.inline?zA(e):((e,t)=>{((e,t)=>{const n=e.translate("Rich Text Area"),r=en(yn(e.getElement()),"tabindex").bind($e),o=((e,t,n,r)=>{const o=mn("iframe");return r.each(e=>Kt(o,"tabindex",e)),Jt(o,n),Jt(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),cn(o,"tox-edit-area__iframe"),o})(e.id,n,Tl(e),r).dom;o.onload=()=>{o.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=o,e.iframeHTML=(e=>{let t=kl(e)+"<html><head>";Il(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Al(e),r=Dl(e),o=e.translate(Bu(e));return Pl(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Pl(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t})(e),VA.add(t.iframeContainer,o)})(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=VA.isHidden(t.editorContainer)),e.getElement().style.display="none",VA.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,(e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,zA(e)};if(cc(e)||At.browser.isFirefox()){const t=e.getDoc();t.open(),t.write(e.iframeHTML),t.close(),n()}else{const r=((e,t,n,r)=>((e,t,n,r,o)=>{const i=((e,t)=>n=>{e(n)&&t((e=>{const t=yn(jn(e).getOr(e.target)),n=()=>e.stopPropagation(),r=()=>e.preventDefault(),o=M(r,n);return((e,t,n,r,o,i,a)=>({target:e,x:t,y:n,stop:r,prevent:o,kill:i,raw:a}))(t,e.clientX,e.clientY,n,r,o,e)})(n))})(n,r);return e.dom.addEventListener(t,i,!1),{unbind:D(Cr,e,t,i,!1)}})(e,t,n,r))(yn(t),"load",FA,()=>{r.unbind(),n()});t.srcdoc=e.iframeHTML}})(e)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},jA=Oa.DOM,YA=e=>"-"===e.charAt(0),qA=(e,t,n)=>B.from(t).filter(e=>Xe(e)&&!qx.has(e)).map(t=>({url:`${e.editorManager.baseURL}/icons/${t}/icons${n}.js`,name:B.some(t)})),XA=wt().deviceType,ZA=XA.isPhone(),$A=XA.isTablet(),KA=e=>{if(b(e))return[];{const t=g(e)?e:e.split(/[ ,]/),n=U(t,je);return X(n,Xe)}},JA=(e,t)=>Se(e.sections(),t),QA=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:we(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),eD=(e,t)=>{var n;const r=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Nt.extend({},e.external_plugins,r):r},tD=(e,t,n,r,o)=>{var i;const a=e?{mobile:QA(null!==(i=o.mobile)&&void 0!==i?i:{},t)}:{},s=((e,t)=>{const n=((t,n)=>{const r={},o={};return ye(t,(t,n)=>W(e,n),ve(r),ve(o)),{t:r,f:o}})(t);return r=n.t,o=n.f,{sections:k(r),options:k(o)};var r,o})(["mobile"],pM(a,o)),l=Nt.extend(n,r,s.options(),((e,t)=>e&&JA(t,"mobile"))(e,s)?((e,t,n={})=>{const r=e.sections(),o=we(r,t).getOr({});return Nt.extend({},n,o)})(s,"mobile"):{},{external_plugins:eD(r,s.options())});return((e,t,n,r)=>{const o=KA(n.forced_plugins),i=KA(r.plugins),a=((e,t)=>JA(e,t)?e.sections()[t]:{})(t,"mobile"),s=((e,t,n,r)=>e&&JA(t,"mobile")?r:n)(e,t,i,a.plugins?KA(a.plugins):i),l=((e,t)=>[...KA(e),...KA(t)])(o,s);return Nt.extend(r,{forced_plugins:o,plugins:l})})(e,s,r,l)},nD=(e,t)=>{const n=e.selection,r=e.dom;return/^ | $/.test(t)?((e,t,n,r)=>{const o=yn(e.getRoot());return n=Gg(o,Hs.fromRangeStart(t),r)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),Ug(o,Hs.fromRangeEnd(t),r)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(r,n.getRng(),t,e.schema):t},rD=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:r}=(e=>{if("string"!=typeof e){const t=Nt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}})(t);ex(e,{...r,content:nD(e,n),format:"html",set:!1,selection:!0}).each(t=>{const n=((e,t,n)=>kx(e).editor.insertContent(t,n))(e,t.content,r);tx(e,n,t),e.addVisual()})}},oD={"font-size":"size","font-family":"face"},iD=Zt("font"),aD=e=>(t,n)=>B.from(n).map(yn).filter(jt).bind(n=>((e,t,n)=>vv(yn(n),t=>(t=>ur(t,e).orThunk(()=>iD(t)?we(oD,e).bind(e=>en(t,e)):B.none()))(t),e=>wn(yn(t),e)))(e,t,n.dom).or(((e,t)=>B.from(Oa.DOM.getStyle(t,e,!0)))(e,n.dom))).getOr(""),sD=aD("font-size"),lD=M(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),aD("font-family")),uD=e=>Md(e.getBody()).bind(e=>{const t=e.container();return B.from($r(t)?t.parentNode:t)}),cD=(e,t)=>((e,t)=>(e=>B.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&0===t.startOffset?B.none():B.from(e.selection.getStart(!0))}))(e).orThunk(D(uD,e)).map(yn).filter(jt).bind(t))(e,T(B.some,t)),dD=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const r=(e=>Nt.explode(e.options.get("font_size_style_values")))(e),o=(e=>Nt.explode(e.options.get("font_size_classes")))(e);return o.length>0?o[n-1]||t:r[n-1]||t}return t}return t},hD=e=>{const t=e.split(/\s*,\s*/);return U(t,e=>-1===e.indexOf(" ")||We(e,'"')||We(e,"'")?e:`'${e}'`).join(",")},pD=(e,t)=>{const n=e.dom,r=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),i=t?r.startContainer:r.endContainer,a=IT(n,i);if(!a||!a.isContentEditable)return;const s=t?hr:pr,l=Nl(e);((e,t,n,r)=>{const o=e.dom,i=e=>o.isBlock(e)&&e.parentElement===n,a=i(t)?t:o.getParent(r,i,n);return B.from(a).map(yn)})(e,o,a,i).each(t=>{const n=LT(e,i,t.dom,a,!1,l);s(t,yn(n)),e.selection.setCursorLocation(n,0),e.dispatch("NewBlock",{newBlock:n}),_T(e,"insertParagraph")})},fD=e=>{(e=>{(e=>{const t=t=>()=>{j("left,center,right,justify".split(","),n=>{t!==n&&e.formatter.remove("align"+n)}),"none"!==t&&((t,n)=>{e.formatter.toggle(t,void 0),e.nodeChanged()})("align"+t)};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(e),(e=>{const t=t=>()=>{const n=e.selection,r=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return G(r,n=>x(e.formatter.matchNode(n,t)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(e)})(e),(e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let r;try{n.execCommand(t)}catch(e){r=!0}if("paste"!==t||n.queryCommandEnabled(t)||(r=!0),r||!n.queryCommandSupported(t)){let t=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(At.os.isMacOS()||At.os.isiOS())&&(t=t.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:t,type:"error"})}}})})(e),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(e),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,r)=>{let o=0;e.dom.getParent(e.selection.getNode(),t=>!Vr(t)||o++!==r||(e.selection.select(t),!1),e.getBody())},mceSelectNode:(t,n,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),oo);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})})(e),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,r)=>{rD(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,r)=>{rD(e,e.dom.encode(r))},insertHTML:(t,n,r)=>{rD(e,r)},mceInsertContent:(t,n,r)=>{rD(e,r)},mceSetContent:(t,n,r)=>{e.setContent(r)},mceReplaceContent:(t,n,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Xu(e))}})})(e),(e=>{const t=(t,n,r)=>{const o=h(r)?{href:r}:r,i=e.dom.getParent(e.selection.getNode(),"a");p(o)&&h(o.href)&&(o.href=o.href.replace(/ /g,"%20"),i&&o.href||e.formatter.remove("link"),o.href&&e.formatter.apply("link",o,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(e),(e=>{e.editorCommands.addCommands({Indent:()=>{(e=>{jS(e,"indent")})(e)},Outdent:()=>{YS(e)}}),e.editorCommands.addCommands({Outdent:()=>WS(e)},"state")})(e),(e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{(e=>{pD(e,!0)})(e)},InsertNewBlockAfter:()=>{(e=>{pD(e,!1)})(e)}})})(e),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{dk(GT,e)},mceInsertNewLine:(t,n,r)=>{hk(e,r)},InsertLineBreak:(t,n,r)=>{dk(KT,e)}})})(e),(e=>{(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{e.getDoc().execCommand(t);const n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){const t=n.parentNode;if(t&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(t.nodeName)){const r=e.selection.getBookmark();e.dom.split(t,n),e.selection.moveToBookmark(r)}}}})})(e),(e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":t=>{const n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")})(e)})(e),(e=>{(e=>{const t=(t,n)=>{e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>{t(e)},"ForeColor,HiliteColor":(e,n,r)=>{t(e,{value:r})},BackColor:(e,n,r)=>{t("hilitecolor",{value:r})},FontName:(t,n,r)=>{((e,t)=>{const n=dD(e,t);e.formatter.toggle("fontname",{value:hD(n)}),e.nodeChanged()})(e,r)},FontSize:(t,n,r)=>{((e,t)=>{e.formatter.toggle("fontsize",{value:dD(e,t)}),e.nodeChanged()})(e,r)},LineHeight:(t,n,r)=>{((e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()})(e,r)},Lang:(e,n,r)=>{var o;t(e,{value:r.code,customValue:null!==(o=r.customCode)&&void 0!==o?o:null})},RemoveFormat:t=>{e.formatter.remove(t)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(e,n,r)=>{t(h(r)?r:"p")},mceToggleFormat:(e,n,r)=>{t(r)}})})(e),(e=>{const t=t=>e.formatter.match(t);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":e=>t(e),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>(e=>cD(e,t=>lD(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>(e=>cD(e,t=>sD(e.getBody(),t.dom)).getOr(""))(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>(e=>cD(e,t=>{const n=yn(e.getBody()),r=vv(t,e=>ur(e,"line-height"),D(wn,n));return r.getOrThunk(()=>{const e=parseFloat(sr(t,"line-height")),n=parseFloat(sr(t,"font-size"));return String(e/n)})}).getOr(""))(e))})(e)})(e),(e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,r)=>{const o=null!=r?r:e.selection.getNode();if(o!==e.getBody()){const t=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(t)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,r)=>{((e,t)=>{e.removed||(t?_f(e):(e=>{const t=e.selection,n=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable(),x(e.bookmark)&&!bf(e)&&sf(e).each(t=>{e.selection.setRng(t),r=t});const o=((e,t)=>e.dom.getParent(t,t=>"true"===e.dom.getContentEditable(t)))(e,t.getNode());if(o&&e.dom.isChildOf(o,n))return yf(o),vf(e,r),void _f(e);e.inline||(At.browser.isOpera()||yf(n),e.getWin().focus()),(At.browser.isFirefox()||e.inline)&&(yf(n),vf(e,r)),_f(e)})(e))})(e,!0===r)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(e)},gD=["toggleview"],mD=e=>W(gD,e.toLowerCase());class vD{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,t=!1,n,r){const o=this.editor,i=e.toLowerCase(),a=null==r?void 0:r.skip_focus;if(o.removed)return!1;if("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?(e=>{sf(e).each(t=>e.selection.setRng(t))})(o):o.focus()),o.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;const s=this.commands.exec[i];return!!_(s)&&(s(i,t,n),o.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}queryCommandState(e){if(!mD(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const t=e.toLowerCase(),n=this.commands.state[t];return!!_(n)&&n(t)}queryCommandValue(e){if(!mD(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const t=e.toLowerCase(),n=this.commands.value[t];return _(n)?n(t):""}addCommands(e,t="exec"){const n=this.commands;fe(e,(e,r)=>{j(r.toLowerCase().split(","),r=>{n[t][r]=e})})}addCommand(e,t,n){const r=e.toLowerCase();this.commands.exec[r]=(e,r,o)=>t.call(null!=n?n:this.editor,r,o)}queryCommandSupported(e){const t=e.toLowerCase();return!!this.commands.exec[t]}addQueryStateHandler(e,t,n){this.commands.state[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}addQueryValueHandler(e,t,n){this.commands.value[e.toLowerCase()]=()=>t.call(null!=n?n:this.editor)}}const yD="data-mce-contenteditable",bD=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch(e){}},xD=(e,t)=>{e.dom.contentEditable=t?"true":"false"},_D=e=>e.readonly,wD=e=>{e.parser.addAttributeFilter("contenteditable",t=>{_D(e)&&j(t,e=>{e.attr(yD,e.attr("contenteditable")),e.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(yD,t=>{_D(e)&&j(t,e=>{e.attr("contenteditable",e.attr(yD))})}),e.serializer.addTempAttr(yD)},SD=["copy"],CD=Nt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class MD{static isNative(e){return!!CD[e.toLowerCase()]}constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||E}fire(e,t){return this.dispatch(e,t)}dispatch(e,t){const n=e.toLowerCase(),r=xa(n,null!=t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const o=this.bindings[n];if(o)for(let e=0,t=o.length;e<t;e++){const t=o[e];if(!t.removed){if(t.once&&this.off(n,t.func),r.isImmediatePropagationStopped())return r;if(!1===t.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,t,n,r){if(!1===t&&(t=E),t){const o={func:t,removed:!1};r&&Nt.extend(o,r);const i=e.toLowerCase().split(" ");let a=i.length;for(;a--;){const e=i[a];let t=this.bindings[e];t||(t=[],this.toggleEvent(e,!0)),t=n?[o,...t]:[...t,o],this.bindings[e]=t}}return this}off(e,t){if(e){const n=e.toLowerCase().split(" ");let r=n.length;for(;r--;){const o=n[r];let i=this.bindings[o];if(!o)return fe(this.bindings,(e,t)=>{this.toggleEvent(t,!1),delete this.bindings[t]}),this;if(i){if(t){const e=q(i,e=>e.func===t);i=e.fail,this.bindings[o]=i,j(e.pass,e=>{e.removed=!0})}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[o])}}}else fe(this.bindings,(e,t)=>{this.toggleEvent(t,!1)}),this.bindings={};return this}once(e,t,n){return this.on(e,t,n,{once:!0})}has(e){e=e.toLowerCase();const t=this.bindings[e];return!(!t||0===t.length)}}const TD=e=>(e._eventDispatcher||(e._eventDispatcher=new MD({scope:e,toggleEvent:(t,n)=>{MD.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),kD={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const r=this;if(r.removed&&"remove"!==e&&"detach"!==e)return xa(e.toLowerCase(),null!=t?t:{},r);const o=TD(r).dispatch(e,t);if(!1!==n&&r.parent){let t=r.parent();for(;t&&!o.isPropagationStopped();)t.dispatch(e,o,!1),t=t.parent?t.parent():void 0}return o},on(e,t,n){return TD(this).on(e,t,n)},off(e,t){return TD(this).off(e,t)},once(e,t){return TD(this).once(e,t)},hasEventListeners(e){return TD(this).has(e)}},ID=Oa.DOM;let AD;const DD=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=uu(e);return n?(e.eventRoot||(e.eventRoot=ID.select(n)[0]),e.eventRoot):e.getBody()},PD=(e,t,n)=>{(e=>!e.hidden&&!_D(e))(e)?e.dispatch(t,n):_D(e)&&((e,t)=>{if((e=>"click"===e.type)(t)&&!Jh.metaKeyPressed(t)){const n=yn(t.target);((e,t)=>er(t,"a",t=>wn(t,yn(e.getBody()))).bind(e=>en(e,"href")))(e,n).each(n=>{if(t.preventDefault(),/^#/.test(n)){const t=e.dom.select(`${n},[name="${Ve(n,"#")}"]`);t.length&&e.selection.scrollIntoView(t[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else(e=>W(SD,e.type))(t)&&e.dispatch(t.type,t)})(e,n)},LD=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=DD(e,t);if(uu(e)){if(AD||(AD={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||AD&&(fe(AD,(t,n)=>{e.dom.unbind(DD(e,n))}),AD=null)})),AD[t])return;const r=n=>{const r=n.target,o=e.editorManager.get();let i=o.length;for(;i--;){const e=o[i].getBody();(e===r||ID.isChildOf(r,e))&&PD(o[i],t,n)}};AD[t]=r,ID.bind(n,t,r)}else{const r=n=>{PD(e,t,n)};ID.bind(n,t,r),e.delegates[t]=r}},ND={...kD,bindPendingEventDelegates(){const e=this;Nt.each(e._pendingNativeEvents,t=>{LD(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?LD(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(DD(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(fe(e.delegates,(t,n)=>{e.dom.unbind(DD(e,n),n,t)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},RD=e=>h(e)?{value:e.split(/[ ,]/),valid:!0}:S(e,h)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ED=(e,t)=>e+(Ze(t.message)?"":`. ${t.message}`),OD=e=>e.valid,BD=(e,t,n="")=>{const r=t(e);return v(r)?r?{value:e,valid:!0}:{valid:!1,message:n}:r},zD=["design","readonly"],FD=(e,t,n,r)=>{const o=n[t.get()],i=n[r];try{i.activate()}catch(e){return void console.error(`problem while activating editor mode ${r}:`,e)}o.deactivate(),o.editorReadOnly!==i.editorReadOnly&&((e,t)=>{const n=yn(e.getBody());((e,t,n)=>{pn(e,t)&&!n?hn(e,t):n&&cn(e,t)})(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),(e=>{B.from(e.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})})(e),e.readonly=!0,xD(n,!1),j(Er(n,'*[contenteditable="true"]'),e=>{Kt(e,yD,"true"),xD(e,!1)})):(e.readonly=!1,e.hasEditableRoot()&&xD(n,!0),j(Er(n,`*[${yD}="true"]`),e=>{nn(e,yD),xD(e,!0)}),bD(e,"StyleWithCSS",!1),bD(e,"enableInlineTableEditing",!1),bD(e,"enableObjectResizing",!1),xf(e)&&e.focus(),(e=>{e.selection.setRng(e.selection.getRng())})(e),e.nodeChanged())})(e,i.editorReadOnly),t.set(r),((e,t)=>{e.dispatch("SwitchMode",{mode:t})})(e,r)},VD=Nt.each,HD=Nt.explode,WD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},GD=Nt.makeMap("alt,ctrl,shift,meta,access"),UD=e=>{const t={},n=At.os.isMacOS()||At.os.isiOS();VD(HD(e.toLowerCase(),"+"),e=>{(e=>e in GD)(e)?t[e]=!0:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=WD[e]||e.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let o;for(o in GD)t[o]?r.push(o):t[o]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class jD{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const t=this;e.on("keyup keypress keydown",e=>{!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(VD(t.shortcuts,n=>{t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n))}),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}add(e,t,n,r){const o=this,i=o.normalizeCommandFunc(n);return VD(HD(Nt.trim(e)),e=>{const n=o.createShortcut(e,t,i,r);o.shortcuts[n.id]=n}),!0}remove(e){const t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}normalizeCommandFunc(e){const t=this,n=e;return"string"==typeof n?()=>{t.editor.execCommand(n,!1,null)}:Nt.isArray(n)?()=>{t.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(e,t,n,r){const o=Nt.map(HD(e,">"),UD);return o[o.length-1]=Nt.extend(o[o.length-1],{func:n,scope:r||this.editor}),Nt.extend(o[0],{desc:this.editor.translate(t),subpatterns:o.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const YD=()=>{const e=(()=>{const e={},t={},n={},r={},o={},i={},a={},s={},l=(e,t)=>(n,r)=>{e[n.toLowerCase()]={...r,type:t}};return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(i,"contexttoolbar"),addContextForm:l(i,"contextform"),addSidebar:l(a,"sidebar"),addView:l(s,"views"),addIcon:(e,t)=>r[e.toLowerCase()]=t,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:n,contextMenus:o,contextToolbars:i,sidebars:a,views:s})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},qD=Oa.DOM,XD=Nt.extend,ZD=Nt.each;class $D{constructor(e,t,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,XD(this,ND);const r=this;this.id=e,this.hidden=!1;const o=((e,t)=>tD(ZA||$A,ZA,t,e,t))(n.defaultOptions,t);this.options=((e,t)=>{const n={},r={},o=(e,t,n)=>{const o=BD(t,n);return OD(o)?(r[e]=o.value,!0):(console.warn(ED(`Invalid value passed for the ${e} option`,o)),!1)},i=e=>Se(n,e);return{register:(e,i)=>{const a=(e=>h(e.processor))(i)?(e=>{const t=(()=>{switch(e){case"array":return g;case"boolean":return v;case"function":return _;case"number":return w;case"object":return p;case"string":return h;case"string[]":return RD;case"object[]":return e=>S(e,p);case"regexp":return e=>d(e,RegExp);default:return O}})();return n=>BD(n,t,`The value must be a ${e}.`)})(i.processor):i.processor,s=((e,t,n)=>{if(!y(t)){const r=BD(t,n);if(OD(r))return r.value;console.error(ED(`Invalid default value passed for the "${e}" option`,r))}})(e,i.default,a);n[e]={...i,default:s,processor:a},we(r,e).orThunk(()=>we(t,e)).each(t=>o(e,t,a))},isRegistered:i,get:e=>we(r,e).orThunk(()=>we(n,e).map(e=>e.default)).getOrUndefined(),set:(e,t)=>{if(i(e)){const r=n[e];return r.immutable?(console.error(`"${e}" is an immutable option and cannot be updated`),!1):o(e,t,r.processor)}return console.warn(`"${e}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:e=>{const t=i(e);return t&&delete r[e],t},isSet:e=>Se(r,e)}})(0,o),(e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:Ml(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Ml(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:e=>{const t=h(e)&&Xe(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:e=>{const t=W(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:e=>v(e)||h(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:e=>{const t=!1===e||h(e)||S(e,h);return t?h(e)?{value:U(e.split(","),je),valid:t}:g(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:_u(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:e=>{const t=h(e)||S(e,h);return t?{value:g(e)?e:U(e.split(","),je),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:e=>{const t=v(e)||h(e);return t?!1===e||bl.isiPhone()||bl.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!xl}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:e=>!1===e||h(e)||_(e),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:e=>{const t=!1===e||h(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Cl}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Cl}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Cl}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:e=>h(e)||!0===e}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:e=>S(e,p)||!1===e?{value:yl(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:e=>{return _(e)?{value:(t=e,e=>{const n=t(e);return yl(n)}),valid:!0}:{valid:!1,message:"Must be a single function"};var t},default:e=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:e=>S(e,wl)?{value:e,valid:!0}:wl(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:e=>{const t=W(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:e=>{const t=W(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("force_hex_color",{processor:e=>{const t=["always","rgb_only","off"],n=W(t,e);return n?{value:e,valid:n}:{valid:!1,message:`Must be one of: ${t.join(", ")}.`}},default:"off"}),t("sandbox_iframes",{processor:"boolean",default:!1}),t("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Ga.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:_l.getAttrib(e.getElement(),"placeholder")})})})(r);const i=this.options.get;i("deprecation_warnings")&&((e,t)=>{((e,t)=>{const n=(e=>{const t=Wx(e,zx),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),ae(t)})(e),r=(e=>Gx(e,Vx))(t),o=r.length>0,i=n.length>0,a="mobile"===t.theme;if(o||i||a){const e="\n- ",t=a?`\n\nThemes:${e}mobile`:"",s=o?`\n\nPlugins:${e}${r.join(e)}`:"",l=i?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+t+s+l)}})(e,t),((e,t)=>{const n=(e=>Wx(e,Fx))(e),r=(e=>Gx(e,Hx.map(e=>e.name)))(t),o=r.length>0,i=n.length>0;if(o||i){const e="\n- ",t=o?`\n\nPlugins:${e}${r.map(Ux).join(e)}`:"",a=i?`\n\nOptions:${e}${n.join(e)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+t+a)}})(e,t)})(t,o);const a=i("suffix");a&&(n.suffix=a),this.suffix=n.suffix;const s=i("base_url");s&&n._setBaseUrl(s),this.baseUri=n.baseURI;const l=$l(r);l&&(za.ScriptLoader._setReferrerPolicy(l),Oa.DOM.styleSheetLoader._setReferrerPolicy(l));const u=Du(r);x(u)&&Oa.DOM.styleSheetLoader._setContentCssCors(u),Ua.languageLoad=i("language_load"),Ua.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Bb(Il(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=_u(r),this.hasVisual=Ru(r),this.shortcuts=new jD(this),this.editorCommands=new vD(this),fD(this);const c=i("cache_suffix");c&&(At.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:YD(),styleSheetLoader:void 0,show:C,hide:C,setEnabled:C,isEnabled:O},this.mode=(e=>{const t=Fa("design"),n=Fa({design:{activate:C,deactivate:C,editorReadOnly:!1},readonly:{activate:C,deactivate:C,editorReadOnly:!0}});return(e=>{e.serializer?wD(e):e.on("PreInit",()=>{wD(e)})})(e),(e=>{e.on("ShowCaret",t=>{_D(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{_D(e)&&t.preventDefault()})})(e),{isReadOnly:()=>_D(e),set:r=>((e,t,n,r)=>{if(r!==n.get()){if(!Se(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?FD(e,n,t,r):e.on("init",()=>FD(e,n,t,r))}})(e,n.get(),t,r),get:()=>t.get(),register:(e,t)=>{n.set(((e,t,n)=>{if(W(zD,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(e){console.error(`problem while deactivating editor mode ${t}:`,e)}}}}})(n.get(),e,t))}}})(r),n.dispatch("SetupEditor",{editor:this});const f=zu(r);_(f)&&f.call(r,r)}render(){(e=>{const t=e.id;Ga.setCode(Kl(e));const n=()=>{jA.unbind(window,"ready",n),e.render()};if(!Ta.Event.domLoaded)return void jA.bind(window,"ready",n);if(!e.getElement())return;const r=yn(e.getElement()),o=rn(r);e.on("remove",()=>{Y(r.dom.attributes,e=>nn(r,e.name)),Jt(r,o)}),e.ui.styleSheetLoader=((e,t)=>Ni.forElement(e,{contentCssCors:Du(t),referrerPolicy:$l(t)}))(r,e),_u(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const i=e.getElement().form||jA.getParent(t,"form");i&&(e.formElement=i,wu(e)&&!Zr(e.getElement())&&(jA.insertAfter(jA.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=t=>{e.dispatch(t.type,t)},jA.bind(i,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Su(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)))),e.windowManager=o_(e),e.notificationManager=t_(e),(e=>"xml"===e.options.get("encoding"))(e)&&e.on("GetContent",e=>{e.save&&(e.content=jA.encode(e.content))}),Cu(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Mu(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((e,t)=>{const n=za.ScriptLoader,r=()=>{!e.removed&&(e=>{const t=du(e);return!h(t)||x(r_.get(t))})(e)&&(e=>{const t=pu(e);return x(Xx.get(t))})(e)&&UA(e)};((e,t)=>{const n=du(e);if(h(n)&&!YA(n)&&!Se(r_.urls,n)){const r=hu(e),o=r?e.documentBaseURI.toAbsolute(r):`themes/${n}/theme${t}.js`;r_.load(n,o).catch(()=>{((e,t,n)=>{s_(e,"ThemeLoadError",l_("theme",t,n))})(e,o,n)})}})(e,t),((e,t)=>{const n=pu(e);if("plugin"!==n&&!Se(Xx.urls,n)){const r=fu(e),o=h(r)?e.documentBaseURI.toAbsolute(r):`models/${n}/model${t}.js`;Xx.load(n,o).catch(()=>{((e,t,n)=>{s_(e,"ModelLoadError",l_("model",t,n))})(e,o,n)})}})(e,t),((e,t)=>{const n=Kl(t),r=Jl(t);if(!Ga.hasCode(n)&&"en"!==n){const o=Xe(r)?r:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{((e,t,n)=>{s_(e,"LanguageLoadError",l_("language",t,n))})(t,o,n)})}})(n,e),((e,t,n)=>{const r=qA(t,"default",n),o=(e=>B.from(Ul(e)).filter(Xe).map(e=>({url:e,name:B.none()})))(t).orThunk(()=>qA(t,Gl(t),""));j((e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})([r,o]),n=>{e.add(n.url).catch(()=>{((e,t,n)=>{s_(e,"IconsLoadError",l_("icons",t,n))})(t,n.url,n.name.getOrUndefined())})})})(n,e,t),((e,t)=>{const n=(t,n)=>{n_.load(t,n).catch(()=>{((e,t,n)=>{s_(e,"PluginLoadError",l_("plugin",t,n))})(e,n,t)})};fe(Lu(e),(t,r)=>{n(r,t),e.options.set("plugins",Pu(e).concat(r))}),j(Pu(e),e=>{!(e=Nt.trim(e))||n_.urls[e]||YA(e)||n(e,`plugins/${e}/plugin${t}.js`)})})(e,t),n.loadQueue().then(r,r)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return bf(this)}translate(e){return Ga.translate(e)}getParam(e,t,n){const r=this.options;return r.isRegistered(e)||(x(n)?r.register(e,{processor:n,default:t}):r.register(e,{processor:O,default:t})),r.isSet(e)||y(t)?r.get(e):t}hasPlugin(e,t){return!(!W(Pu(this),e)||t&&void 0===n_.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}addShortcut(e,t,n,r){this.shortcuts.add(e,t,n,r)}execCommand(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(qD.show(e.getContainer()),qD.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(qD.hide(e.getContainer()),qD.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}load(e={}){const t=this,n=t.getElement();if(t.removed)return"";if(n){const r={...e,load:!0},o=Zr(n)?n.value:n.innerHTML,i=t.setContent(o,r);return r.no_events||t.dispatch("LoadContent",{...r,element:n}),i}return""}save(e={}){const t=this;let n=t.getElement();if(!n||!t.initialized||t.removed)return"";const r={...e,save:!0,element:n};let o=t.getContent(r);const i={...r,content:o};if(i.no_events||t.dispatch("SaveContent",i),"raw"===i.format&&t.dispatch("RawSaveContent",i),o=i.content,Zr(n))n.value=o;else{!e.is_removing&&t.inline||(n.innerHTML=o);const r=qD.getParent(t.id,"form");r&&ZD(r.elements,e=>e.name!==t.id||(e.value=o,!1))}return i.element=r.element=n=null,!1!==i.set_dirty&&t.setDirty(!1),o}setContent(e,t){return Bx(this,e,t)}getContent(e){return((e,t={})=>{const n=((e,t)=>({...e,format:t,get:!0,getInner:!0}))(t,t.format?t.format:"html");return Jb(e,n).fold(I,t=>{const n=((e,t)=>kx(e).editor.getContent(t))(e,t);return Qb(e,n,t)})})(this,e)}insertContent(e,t){t&&(e=XD({content:e},t)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Bx(this,this.startContent,{format:"raw"}):Bx(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||qD.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=qD.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}getBody(){var e,t;const n=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null==n?void 0:n.body)&&void 0!==t?t:null}convertURL(e,t,n){const r=this,o=r.options.get,i=Vu(r);if(_(i))return i.call(r,e,n,!0,t);if(!o("convert_urls")||"link"===n||p(n)&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length)return e;const a=new Bb(e);return"http"!==a.protocol&&"https"!==a.protocol&&""!==a.protocol?e:o("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,o("remove_script_host"))}addVisual(e){((e,t)=>{((e,t)=>{Ix(e).editor.addVisual(t)})(this,t)})(0,e)}setEditableRoot(e){((e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),((e,t)=>{e.dispatch("EditableRootStateChange",{state:t})})(e,t))})(this,e)}hasEditableRoot(){return this._editableRoot}remove(){(e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,r=e.getBody(),o=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&x(null==o?void 0:o.nextSibling)&&jx.remove(o.nextSibling),(e=>{e.dispatch("remove")})(e),e.editorManager.remove(e),!e.inline&&r&&(e=>{jx.setStyle(e.id,"display",e.orgDisplay)})(e),(e=>{e.dispatch("detach")})(e),jx.remove(e.getContainer()),Yx(t),Yx(n),e.destroy()}})(this)}destroy(e){((e,t)=>{const{selection:n,dom:r}=e;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Yx(n),Yx(r)),(e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),jx.unbind(t,"submit reset",e.formEventDelegate))})(e),(e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const e=n.dom;t.selection=n.win=n.dom=e.doc=null}})(e),e.destroyed=!0):e.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const KD=Oa.DOM,JD=Nt.each;let QD,eP=!1,tP=[];const nP=e=>{const t=e.type;JD(aP.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},rP=e=>{if(e!==eP){const t=Oa.DOM;e?(t.bind(window,"resize",nP),t.bind(window,"scroll",nP)):(t.unbind(window,"resize",nP),t.unbind(window,"scroll",nP)),eP=e}},oP=e=>{const t=tP;return tP=X(tP,t=>e!==t),aP.activeEditor===e&&(aP.activeEditor=tP.length>0?tP[0]:null),aP.focusedEditor===e&&(aP.focusedEditor=null),t.length!==tP.length},iP="CSS1Compat"!==document.compatMode,aP={...kD,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.0",releaseDate:"2023-11-22",i18n:Ga,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",r=Bb.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const e=document.getElementsByTagName("script");for(let r=0;r<e.length;r++){const o=e[r].src||"";if(""===o)continue;const i=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==i.indexOf(".min")&&(n=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}if(!t&&document.currentScript){const e=document.currentScript.src;-1!==e.indexOf(".min")&&(n=".min"),t=e.substring(0,e.lastIndexOf("/"))}}var i;e.baseURL=new Bb(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Bb(e.baseURL),e.suffix=n,(i=e).on("AddEditor",D(gf,i)),i.on("RemoveEditor",D(mf,i))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const r=e.plugin_base_urls;void 0!==r&&fe(r,(e,t)=>{Ua.PluginManager.urls[t]=e})},init(e){const t=this;let n;const r=Nt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let o=e=>{n=e};const i=()=>{let n=0;const a=[];let s;KD.unbind(window,"ready",i),(n=>{const r=e.onpageload;r&&r.apply(t,[])})(),s=((e,t)=>{const n=[],r=_(t)?e=>G(n,n=>t(n,e)):e=>W(n,e);for(let t=0,o=e.length;t<o;t++){const o=e[t];r(o)||n.push(o)}return n})((e=>At.browser.isIE()||At.browser.isEdge()?(u_("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):iP?(u_("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):h(e.selector)?KD.select(e.selector):x(e.target)?[e.target]:[])(e)),Nt.each(s,e=>{var n;(n=t.get(e.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(oP(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)}),s=Nt.grep(s,e=>!t.get(e.id)),0===s.length?o([]):JD(s,i=>{((e,t)=>e.inline&&t.tagName.toLowerCase()in r)(e,i)?u_("Could not initialize inline editor on invalid inline target element",i):((e,r,i)=>{const l=new $D(e,r,t);a.push(l),l.on("init",()=>{++n===s.length&&o(a)}),l.targetElm=l.targetElm||i,l.render()})((e=>{let t=e.id;return t||(t=we(e,"name").filter(e=>!KD.get(e)).getOrThunk(KD.uniqueId),e.setAttribute("id",t)),t})(i),e,i)})};return KD.bind(window,"ready",i),new Promise(e=>{n?e(n):o=t=>{e(t)}})},get(e){return 0===arguments.length?tP.slice(0):h(e)?J(tP,t=>t.id===e).getOr(null):w(e)&&tP[e]?tP[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&tP.push(e),rP(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),QD||(QD=e=>{const n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",QD))),e},createEditor(e,t){return this.add(new $D(e,t,this))},remove(e){const t=this;let n;if(e){if(!h(e))return n=e,m(t.get(n.id))?null:(oP(n)&&t.dispatch("RemoveEditor",{editor:n}),0===tP.length&&window.removeEventListener("beforeunload",QD),n.remove(),rP(tP.length>0),n);JD(KD.select(e),e=>{n=t.get(e.id),n&&t.remove(n)})}else for(let e=tP.length-1;e>=0;e--)t.remove(tP[e])},execCommand(e,t,n){var r;const o=this,i=p(n)?null!==(r=n.id)&&void 0!==r?r:n.index:n;switch(e){case"mceAddEditor":if(!o.get(i)){const e=n.options;new $D(i,e,o).render()}return!0;case"mceRemoveEditor":{const e=o.get(i);return e&&e.remove(),!0}case"mceToggleEditor":{const e=o.get(i);return e?(e.isHidden()?e.show():e.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:()=>{JD(tP,e=>{e.save()})},addI18n:(e,t)=>{Ga.add(e,t)},translate:e=>Ga.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Bb(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Bb(this.baseURL)}};aP.setup();const sP=(()=>{const e=Ya();return{FakeClipboardItem:e=>({items:e,types:he(e),getType:t=>we(e,t).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),lP=Math.min,uP=Math.max,cP=Math.round,dP=(e,t,n)=>{let r=t.x,o=t.y;const i=e.w,a=e.h,s=t.w,l=t.h,u=(n||"").split("");return"b"===u[0]&&(o+=l),"r"===u[1]&&(r+=s),"c"===u[0]&&(o+=cP(l/2)),"c"===u[1]&&(r+=cP(s/2)),"b"===u[3]&&(o-=a),"r"===u[4]&&(r-=i),"c"===u[3]&&(o-=cP(a/2)),"c"===u[4]&&(r-=cP(i/2)),hP(r,o,i,a)},hP=(e,t,n,r)=>({x:e,y:t,w:n,h:r}),pP={inflate:(e,t,n)=>hP(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:dP,findBestRelativePosition:(e,t,n,r)=>{for(let o=0;o<r.length;o++){const i=dP(e,t,r[o]);if(i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o]}return null},intersect:(e,t)=>{const n=uP(e.x,t.x),r=uP(e.y,t.y),o=lP(e.x+e.w,t.x+t.w),i=lP(e.y+e.h,t.y+t.h);return o-n<0||i-r<0?null:hP(n,r,o-n,i-r)},clamp:(e,t,n)=>{let r=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h;const s=t.x+t.w,l=t.y+t.h,u=uP(0,t.x-r),c=uP(0,t.y-o),d=uP(0,i-s),h=uP(0,a-l);return r+=u,o+=c,n&&(i+=u,a+=c,r-=d,o-=h),i-=d,a-=h,hP(r,o,i-r,a-o)},create:hP,fromClientRect:e=>hP(e.left,e.top,e.width,e.height)},fP=(()=>{const e={},t={},n={};return{load:(n,r)=>{const o=`Script at URL "${r}" failed to load`,i=`Script at URL "${r}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==e[n])return e[n];{const a=new Promise((e,a)=>{const s=((e,t,n=1e3)=>{let r=!1,o=null;const i=e=>(...t)=>{r||(r=!0,null!==o&&(clearTimeout(o),o=null),e.apply(null,t))},a=i(e),s=i(t);return{start:(...e)=>{r||null!==o||(o=setTimeout(()=>s.apply(null,e),n))},resolve:a,reject:s}})(e,a);t[n]=s.resolve,za.ScriptLoader.loadScript(r).then(()=>s.start(i),()=>s.reject(o))});return e[n]=a,a}},add:(r,o)=>{void 0!==t[r]&&(t[r](o),delete t[r]),e[r]=Promise.resolve(o),n[r]=o},has:e=>e in n,get:e=>n[e],unload:t=>{delete e[t]}}})();let gP;try{const e="__storage_test__";gP=window.localStorage,gP.setItem(e,e),gP.removeItem(e)}catch(e){gP=(()=>{let e={},t=[];const n={getItem:t=>e[t]||null,setItem:(n,r)=>{t.push(n),e[n]=String(r)},key:e=>t[e],removeItem:n=>{t=t.filter(e=>e===n),delete e[n]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})()}const mP={geom:{Rect:pP},util:{Delay:uf,Tools:Nt,VK:Jh,URI:Bb,EventDispatcher:MD,Observable:kD,I18n:Ga,LocalStorage:gP,ImageUploader:e=>{const t=h_(),n=g_(e,t);return{upload:(t,r=!0)=>n.upload(t,r?f_(e):void 0)}}},dom:{EventUtils:Ta,TreeWalker:Br,TextSeeker:hs,DOMUtils:Oa,ScriptLoader:za,RangeUtils:Ap,Serializer:Ox,StyleSheetLoader:Li,ControlSelection:rp,BookmarkManager:Uh,Selection:Rx,Event:Ta.Event},html:{Styles:va,Entities:$i,Node:Of,Schema:sa,DomParser:$b,Writer:Qf,Serializer:eg},Env:At,AddOnManager:Ua,Annotator:Gh,Formatter:k_,UndoManager:A_,EditorCommands:vD,WindowManager:o_,NotificationManager:t_,EditorObservable:ND,Shortcuts:jD,Editor:$D,FocusManager:lf,EditorManager:aP,DOM:Oa.DOM,ScriptLoader:za.ScriptLoader,PluginManager:n_,ThemeManager:r_,ModelManager:Xx,IconManager:qx,Resource:fP,FakeClipboard:sP,trim:Nt.trim,isArray:Nt.isArray,is:Nt.is,toArray:Nt.toArray,makeMap:Nt.makeMap,each:Nt.each,map:Nt.map,grep:Nt.grep,inArray:Nt.inArray,extend:Nt.extend,walk:Nt.walk,resolve:Nt.resolve,explode:Nt.explode,_addCacheSuffix:Nt._addCacheSuffix},vP=Nt.extend(aP,mP);(e=>{window.tinymce=e,window.tinyMCE=e})(vP),(e=>{if("object"==typeof module)try{module.exports=e}catch(e){}})(vP)}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,s=new Array(a),l=0;l<a;++l)s[l]=r(o[l]);var u=i.apply(null,s);if(void 0===u)throw"module ["+t+"] returned undefined";n.instance=u},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=n,i=function(e,t){o(e,[],function(){return t})};i("1",tinymce.Env),i("2",tinymce.EditorManager),i("3",tinymce.ThemeManager),i("8",tinymce.util.Tools),i("9",tinymce.ui.Factory),i("a",tinymce.DOM),o("b",["8","9"],function(e,t){var n=function(n,r,o){var i,a=[];if(r)return e.each(r.split(/[ ,]/),function(e){var r,s=function(){var t=n.selection;e.settings.stateSelector&&t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"==e?i=null:t.has(e)?(e={type:e,size:o},a.push(e),i=null):(i||(i={type:"buttongroup",items:[]},a.push(i)),n.buttons[e]&&(r=e,"function"==typeof(e=n.buttons[r])&&(e=e()),e.type=e.type||"button",e.size=o,e=t.create(e),i.items.push(e),n.initialized?s():n.on("init",s)))}),{type:"toolbar",layout:"flow",items:a}};return{createToolbar:n,createToolbars:function(t,r){var o=[],i=t.settings,a=function(e){if(e)return o.push(n(t,e,r)),!0};if(e.isArray(i.toolbar)){if(0===i.toolbar.length)return;e.each(i.toolbar,function(e,t){i["toolbar"+(t+1)]=e}),delete i.toolbar}for(var s=1;s<10&&a(i["toolbar"+s]);s++);if(o.length||!1===i.toolbar||a(i.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}}}}),o("c",["8"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){return"|"==t?{text:"|"}:e[t]},r=function(r,o,i){var a,s,l,u,c;if(c=e.makeMap((o.removed_menuitems||"").split(/[ ,]/)),o.menu?(s=o.menu[i],u=!0):s=t[i],s){a={text:s.title},l=[],e.each((s.items||"").split(/[ ,]/),function(e){n(r,e)&&!c[e]&&l.push(n(r,e))}),u||e.each(r,function(e){e.context==i&&("before"==e.separator&&l.push({text:"|"}),e.prependToContext?l.unshift(e):l.push(e),"after"==e.separator&&l.push({text:"|"}))});for(var d=0;d<l.length;d++)"|"==l[d].text&&(0!==d&&d!=l.length-1||l.splice(d,1));if(a.menu=l,!a.menu.length)return null}return a};return{createMenuButtons:function(e){var n,o=[],i=e.settings,a=[];if(i.menu)for(n in i.menu)a.push(n);else for(n in t)a.push(n);for(var s="string"==typeof i.menubar?i.menubar.split(/[ ,]/):a,l=0;l<s.length;l++){var u=s[l];(u=r(e.menuItems,e.settings,u))&&o.push(u)}return o}}}),i("j",tinymce.util.Delay),i("k",tinymce.geom.Rect),o("d",["a","8","j","b","9","k"],function(e,t,n,r,o,i){var a=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},s=function(e){t.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},l=function(e,t){e.moveTo(t.left,t.top)},u=function(e,n,r){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,o){e.classes.toggle("arrow-"+t,r(o,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,o){e.classes.toggle("arrow-"+t,r(o,n.substr(1,1)))})},c=function(e,t,n,r,o,i){return i=a({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:a(r),contentAreaRect:a(o),panelRect:i})),i};return{addContextualToolbars:function(a){var d,h=a.settings,p=function(){return a.contextToolbars||[]},f=function(t,n){var r,o,d,p,f,g,m,v=h.inline_toolbar_position_handler;if(!a.removed){if(!t||!t.toolbar.panel)return void s(a);m=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],f=t.toolbar.panel,n&&f.show(),d=function(t){var n,r,o;return n=e.getPos(a.getContentAreaContainer()),r=a.dom.getRect(t),"BODY"===(o=a.dom.getRoot()).nodeName&&(r.x-=o.ownerDocument.documentElement.scrollLeft||o.scrollLeft,r.y-=o.ownerDocument.documentElement.scrollTop||o.scrollTop),r.x+=n.x,r.y+=n.y,r}(t.element),o=e.getRect(f.getEl()),p=e.getRect(a.getContentAreaContainer()||a.getBody()),25,"inline"!==e.getStyle(t.element,"display",!0)&&(d.w=t.element.clientWidth,d.h=t.element.clientHeight),a.inline||(p.w=a.getDoc().documentElement.offsetWidth),a.selection.controlSelection.isResizable(t.element)&&d.w<25&&(d=i.inflate(d,0,8)),r=i.findBestRelativePosition(o,d,p,m),d=i.clamp(d,p),r?(g=i.relativePosition(o,d,r),l(f,c(v,g.x,g.y,d,p,o))):(p.h+=o.h,(d=i.intersect(p,d))?(r=i.findBestRelativePosition(o,d,p,["bc-tc","bl-tl","br-tr"]))?(g=i.relativePosition(o,d,r),l(f,c(v,g.x,g.y,d,p,o))):l(f,c(v,d.x,d.y,d,p,o)):f.hide()),u(f,r,function(e,t){return e===t})}},g=function(e){return function(){n.requestAnimationFrame(function(){a.selection&&f(y(a.selection.getNode()),e)})}},m=function(){d||(d=a.selection.getScrollContainer()||a.getWin(),e.bind(d,"scroll",g(!0)),a.on("remove",function(){e.unbind(d,"scroll")}))},v=function(){t.each(p(),function(e){e.panel&&e.panel.hide()})},y=function(e){var t,n,r,o=p();for(t=(r=a.$(e).parents().add(e)).length-1;t>=0;t--)for(n=o.length-1;n>=0;n--)if(o[n].predicate(r[t]))return{toolbar:o[n],element:r[t]};return null};a.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&n.setEditorTimeout(a,function(){var e;(e=y(a.selection.getNode()))?(v(),function(e){var t;e.toolbar.panel?(e.toolbar.panel.show(),f(e)):(m(),t=o.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:r.createToolbar(a,e.toolbar.items),oncancel:function(){a.focus()}}),e.toolbar.panel=t,t.renderTo(document.body).reflow(),f(e))}(e)):v()})}),a.on("blur hide contextmenu",v),a.on("ObjectResizeStart",function(){var e=y(a.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),a.on("ResizeEditor ResizeWindow",g(!0)),a.on("nodeChange",g(!1)),a.on("remove",function(){t.each(p(),function(e){e.panel&&e.panel.remove()}),a.contextToolbars={}}),a.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=y(a.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})}}}),o("e",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}};return{addKeys:function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})}}}),o("f",["8","9","1"],function(e,t,n){var r=function(e,t,n){var r=e.settings[n];r&&r(function(e){return{element:function(){return e}}}(t.getEl("body")))},o=function(t,n,o){e.each(o,function(e){var o=n.items().filter("#"+e.name)[0];o&&o.visible()&&e.name!==t&&(r(e,o,"onhide"),o.visible(!1))})},i=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},a=function(e,n,a){return function(s){var l=s.control,u=l.parents().filter("panel")[0],c=u.find("#"+n)[0],d=i(a,n);o(n,u,a),function(e){e.items().each(function(e){e.active(!1)})}(l.parent()),c&&c.visible()?(r(d,c,"onhide"),c.hide(),l.active(!1)):(c?(c.show(),r(d,c,"onshow")):(c=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),u.prepend(c),r(d,c,"onrender"),r(d,c,"onshow")),l.active(!0)),e.fire("ResizeEditor")}};return{hasSidebar:function(e){return!(n.ie&&!(n.ie>=11)||!e.sidebars)&&e.sidebars.length>0},createSidebar:function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:a(t,e.name,t.sidebars)}})}]}}}}),o("g",[],function(){return{fireSkinLoaded:function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}}}}),o("6",["a"],function(e){var t=function(e){return{width:e.clientWidth,height:e.clientHeight}},n=function(n,r,o){var i,a,s,l,u=n.settings;i=n.getContainer(),a=n.getContentAreaContainer().firstChild,s=t(i),l=t(a),null!==r&&(r=Math.max(u.min_width||100,r),r=Math.min(u.max_width||65535,r),e.setStyle(i,"width",r+(s.width-l.width)),e.setStyle(a,"width",r)),o=Math.max(u.min_height||100,o),o=Math.min(u.max_height||65535,o),e.setStyle(a,"height",o),n.fire("ResizeEditor")};return{resizeTo:n,resizeBy:function(e,t,r){var o=e.getContentAreaContainer();n(e,o.clientWidth+t,o.clientHeight+r)}}}),o("4",["8","9","a","b","c","d","e","f","g","6"],function(e,t,n,r,o,i,a,s,l,u){var c=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},d=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[c("0"),s.createSidebar(e)]}};return{render:function(e,h,p){var f,g,m,v=e.settings;return p.skinUiCss&&n.styleSheetLoader.load(p.skinUiCss,l.fireSkinLoaded(e)),f=h.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===v.menubar?null:{type:"menubar",border:"0 0 1 0",items:o.createMenuButtons(e)},r.createToolbars(e,v.toolbar_items_size),s.hasSidebar(e)?d(e):c("1 0 0 0")]}),!1!==v.resize&&(g={type:"resizehandle",direction:v.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;m={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===v.resize?u.resizeTo(e,m.width+t.deltaX,m.height+t.deltaY):u.resizeTo(e,null,m.height+t.deltaY)}}),!1!==v.statusbar&&f.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},g]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}}(f)),f.renderBefore(p.targetNode).reflow(),v.readonly&&e.setMode("readonly"),v.width&&n.setStyle(f.getEl(),"width",v.width),e.on("remove",function(){f.remove(),f=null}),a.addKeys(e,f),i.addContextualToolbars(e),{iframeContainer:f.find("#iframe")[0].getEl(),editorContainer:f.getEl()}}}}),i("h",tinymce.ui.FloatPanel),o("5",["8","9","a","h","b","c","d","e","g"],function(e,t,n,r,o,i,a,s,l){return{render:function(e,u,c){var d,h,p=e.settings;p.fixed_toolbar_container&&(h=n.select(p.fixed_toolbar_container)[0]);var f=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var t=e.selection.getScrollContainer(),r=e.getBody(),o=0,i=0;if(t){var a=n.getPos(r),s=n.getPos(t);o=Math.max(0,s.x-a.x),i=Math.max(0,s.y-a.y)}d.fixed(!1).moveRel(r,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,i)}},g=function(){d&&(d.show(),f(),n.addClass(e.getBody(),"mce-edit-focus"))},m=function(){d&&(d.hide(),r.hideAll(),n.removeClass(e.getBody(),"mce-edit-focus"))},v=function(){return d?void(d.visible()||g()):(d=u.panel=t.create({type:h?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!h,border:1,items:[!1===p.menubar?null:{type:"menubar",border:"0 0 1 0",items:i.createMenuButtons(e)},o.createToolbars(e,p.toolbar_items_size)]}),e.fire("BeforeRenderUI"),d.renderTo(h||document.body).reflow(),s.addKeys(e,d),g(),a.addContextualToolbars(e),e.on("nodeChange",f),e.on("activate",g),e.on("deactivate",m),void e.nodeChanged())};return p.content_editable=!0,e.on("focus",function(){c.skinUiCss?n.styleSheetLoader.load(c.skinUiCss,v,v):v()}),e.on("blur hide",m),e.on("remove",function(){d&&(d.remove(),d=null)}),c.skinUiCss&&n.styleSheetLoader.load(c.skinUiCss,l.fireSkinLoaded(e)),{}}}}),i("i",tinymce.ui.Throbber),o("7",["i"],function(e){return{setup:function(t,n){var r;t.on("ProgressState",function(t){r=r||new e(n.panel.getEl("body")),t.state?r.show(t.time):r.hide()})}}}),o("0",["1","2","3","4","5","6","7"],function(e,t,n,r,o,i,a){var s=function(n,i,s){var l=n.settings,u=!1!==l.skin&&(l.skin||"lightgray");if(u){var c=l.skin_url;c=c?n.documentBaseURI.toAbsolute(c):t.baseURL+"/skins/"+u,e.documentMode<=7?s.skinUiCss=c+"/skin.ie7.min.css":s.skinUiCss=c+"/skin.min.css",n.contentCSS.push(c+"/content"+(n.inline?".inline":"")+".min.css")}return a.setup(n,i),l.inline?o.render(n,i,s):r.render(n,i,s)};return n.add("modern",function(e){return{renderUI:function(t){return s(e,this,t)},resizeTo:function(t,n){return i.resizeTo(e,t,n)},resizeBy:function(t,n){return i.resizeBy(e,t,n)}}}),function(){}}),r("0")()}(),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(i=r.constructor)||void 0===i?void 0:i.name)===o.name)?"string":t;var n,r,o,i})(t)===e,n=e=>t=>typeof t===e,r=t("string"),o=t("object"),i=t("array"),a=e=>null===e,s=n("boolean"),l=e=>!(e=>null==e)(e),u=n("function"),c=(e,t)=>{if(i(e)){for(let n=0,r=e.length;n<r;++n)if(!t(e[n]))return!1;return!0}return!1},d=()=>{},h=(e,t)=>e===t;class p{constructor(e,t){this.tag=e,this.value=t}static some(e){return new p(!0,e)}static none(){return p.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?p.some(e(this.value)):p.none()}bind(e){return this.tag?e(this.value):p.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:p.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?p.some(e):p.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}p.singletonNone=new p(!1);const f=Array.prototype.indexOf,g=Array.prototype.push,m=e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);g.apply(t,e[n])}return t},v=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return p.none()},y=(e,t,n=h)=>e.exists(e=>n(e,t)),b=e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t},x=(e,t)=>e?p.some(t):p.none(),_=e=>t=>t.options.get(e),w=_("link_assume_external_targets"),S=_("link_context_toolbar"),C=_("link_list"),M=_("link_default_target"),T=_("link_default_protocol"),k=_("link_target_list"),I=_("link_rel_list"),A=_("link_class_list"),D=_("link_title"),P=_("allow_unsafe_link_target"),L=_("link_quicklink");var N=tinymce.util.Tools.resolve("tinymce.util.Tools");const R=e=>r(e.value)?e.value:"",E=(e,t)=>{const n=[];return N.each(e,e=>{const o=(e=>r(e.text)?e.text:r(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=E(e.menu,t);n.push({text:o,items:r})}else{const r=t(e);n.push({text:o,value:r})}}),n},O=(e=R)=>t=>p.from(t).map(t=>E(t,e)),B=e=>O(R)(e),z=O,F=(e,t)=>n=>({name:e,type:"listbox",label:t,items:n}),V=R,H=Object.keys,W=Object.hasOwnProperty,G=(e,t)=>W.call(e,t);var U=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),j=tinymce.util.Tools.resolve("tinymce.util.URI");const Y=e=>l(e)&&"a"===e.nodeName.toLowerCase(),q=e=>Y(e)&&!!$(e),X=(e,t)=>{if(e.collapsed)return[];{const n=e.cloneContents(),r=n.firstChild,o=new U(r,n),i=[];let a=r;do{t(a)&&i.push(a)}while(a=o.next());return i}},Z=e=>/^\w+:/i.test(e),$=e=>{var t,n;return null!==(n=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==n?n:""},K=(e,t)=>{const n=["noopener"],r=e?e.split(/\s+/):[],o=e=>e.filter(e=>-1===N.inArray(n,e)),i=t?(e=>(e=o(e)).length>0?e.concat(n):n)(r):o(r);return i.length>0?(e=>N.trim(e.sort().join(" ")))(i):""},J=(e,t)=>(t=t||te(e.selection.getRng())[0]||e.selection.getNode(),ie(t)?p.from(e.dom.select("a[href]",t)[0]):p.from(e.dom.getParent(t,"a[href]"))),Q=(e,t)=>J(e,t).isSome(),ee=(e,t)=>t.fold(()=>e.getContent({format:"text"}),e=>e.innerText||e.textContent||"").replace(/\uFEFF/g,""),te=e=>X(e,q),ne=e=>N.grep(e,q),re=e=>ne(e).length>0,oe=e=>{const t=e.schema.getTextInlineElements();if(J(e).exists(e=>e.hasAttribute("data-mce-block")))return!1;const n=e.selection.getRng();return!!n.collapsed||0===X(n,e=>1===e.nodeType&&!Y(e)&&!G(t,e.nodeName.toLowerCase())).length},ie=e=>l(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),ae=e=>{const{class:t,href:n,rel:r,target:o,text:i,title:s}=e;return((e,t)=>{const n={};var r;return((e,t,n,r)=>{((e,t)=>{const n=H(e);for(let r=0,o=n.length;r<o;r++){const o=n[r];t(e[o],o)}})(e,(e,t)=>{(((e,t)=>!1===a(e))(e)?n:r)(e,t)})})(e,0,(r=n,(e,t)=>{r[t]=e}),d),n})({class:t.getOrNull(),href:n,rel:r.getOrNull(),target:o.getOrNull(),text:i.getOrNull(),title:s.getOrNull()})},se=(e,t,n)=>{const r=((e,t)=>{const n=e.options.get,r={allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")},o=t.href;return{...t,href:j.isDomSafe(o,"a",r)?o:""}})(e,n);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ae(r)):((e,t,n)=>{const r=e.selection.getNode(),o=J(e,r),i=((e,t)=>{const n={...t};if(0===I(e).length&&!P(e)){const e=K(n.rel,"_blank"===n.target);n.rel=e||null}return p.from(n.target).isNone()&&!1===k(e)&&(n.target=M(e)),n.href=((e,t)=>"http"!==t&&"https"!==t||Z(e)?e:t+"://"+e)(n.href,w(e)),n})(e,(e=>{return t=["title","rel","class","target"],n=(t,n)=>(e[n].each(e=>{t[n]=e.length>0?e:null}),t),r={href:e.href},((e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)})(t,(e,t)=>{r=n(r,e)}),r;var t,n,r})(n));e.undoManager.transact(()=>{n.href===t.href&&t.attach(),o.fold(()=>{((e,t,n,r)=>{const o=e.dom;ie(t)?ce(o,t,r):n.fold(()=>{e.execCommand("mceInsertLink",!1,r)},t=>{e.insertContent(o.createHTML("a",r,o.encode(t)))})})(e,r,n.text,i)},t=>{e.focus(),((e,t,n,r)=>{n.each(e=>{G(t,"innerText")?t.innerText=e:t.textContent=e}),e.dom.setAttribs(t,r),e.selection.select(t)})(e,t,n.text,i)})})})(e,t,r)},le=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact(()=>{const t=e.selection.getNode();ie(t)?ue(e,t):(e=>{const t=e.dom,n=e.selection,r=n.getBookmark(),o=n.getRng().cloneRange(),i=t.getParent(o.startContainer,"a[href]",e.getBody()),a=t.getParent(o.endContainer,"a[href]",e.getBody());i&&o.setStartBefore(i),a&&o.setEndAfter(a),n.setRng(o),e.execCommand("unlink"),n.moveToBookmark(r)})(e),e.focus()})})(e)},ue=(e,t)=>{var n;const r=e.dom.select("img",t)[0];if(r){const o=e.dom.getParents(r,"a[href]",t)[0];o&&(null===(n=o.parentNode)||void 0===n||n.insertBefore(r,o),e.dom.remove(o))}},ce=(e,t,n)=>{var r;const o=e.select("img",t)[0];if(o){const t=e.create("a",n);null===(r=o.parentNode)||void 0===r||r.insertBefore(t,o),t.appendChild(o)}},de=(e,t)=>v(t,t=>(e=>{return G(t=e,n="items")&&void 0!==t[n]&&null!==t[n];var t,n})(t)?de(e,t.items):x(t.value===e,t));var he=tinymce.util.Tools.resolve("tinymce.util.Delay");const pe=e=>{const t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?p.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>({...e,href:"mailto:"+t})}):p.none()},fe=(e,t)=>n=>{const r=n.href;return 1===e&&!Z(r)||0===e&&/^\s*www(\.|\d\.)/i.test(r)?p.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${t}:// prefix?`,preprocess:e=>({...e,href:t+"://"+r})}):p.none()},ge=e=>{const t=e.dom.select("a:not([href])"),n=m(((e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++){const n=e[o];r[o]=t(n)}return r})(t,e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?p.some([{text:"None",value:""}].concat(n)):p.none()},me=e=>{const t=A(e);return t.length>0?B(t):p.none()},ve=e=>{try{return p.some(JSON.parse(e))}catch(e){return p.none()}},ye=(e,t)=>{const n=I(e);if(n.length>0){const r=y(t,"_blank"),o=e=>K(V(e),r);return(!1===P(e)?z(o):B)(n)}return p.none()},be=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],xe=e=>{const t=k(e);return i(t)?B(t).orThunk(()=>p.some(be)):!1===t?p.none():p.some(be)},_e=(e,t,n)=>{const r=e.getAttrib(t,n);return null!==r&&r.length>0?p.some(r):p.none()},we=e=>{const t=(e=>((e,t)=>(e=>{const t=t=>e.convertURL(t.value||t.url||"","href"),n=C(e);return new Promise(e=>{r(n)?fetch(n).then(e=>e.ok?e.text().then(ve):Promise.reject()).then(e,()=>e(p.none())):u(n)?n(t=>e(p.some(t))):e(p.from(n))}).then(e=>e.bind(z(t)).map(e=>e.length>0?[{text:"None",value:""}].concat(e):e))})(e).then(n=>{const r=((e,t)=>{const n=e.dom,r=oe(e)?p.some(ee(e.selection,t)):p.none(),o=t.bind(e=>p.from(n.getAttrib(e,"href"))),i=t.bind(e=>p.from(n.getAttrib(e,"target"))),a=t.bind(e=>_e(n,e,"rel")),s=t.bind(e=>_e(n,e,"class"));return{url:o,text:r,title:t.bind(e=>_e(n,e,"title")),target:i,rel:a,linkClass:s}})(e,t);return{anchor:r,catalogs:{targets:xe(e),rels:ye(e,r.target),classes:me(e),anchor:ge(e),link:n},optNode:t,flags:{titleEnabled:D(e)}}}))(e,J(e)))(e);t.then(t=>{const n=((e,t)=>n=>{const r=n.getData();if(!r.url.value)return le(e),void n.close();const o=e=>p.from(r[e]).filter(n=>!y(t.anchor[e],n)),i={href:r.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},a={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:d};((e,t)=>v([pe,fe(w(e),T(e))],e=>e(t)).fold(()=>Promise.resolve(t),n=>new Promise(r=>{((e,t,n)=>{const r=e.selection.getRng();he.setEditorTimeout(e,()=>{e.windowManager.confirm(t,t=>{e.selection.setRng(r),n(t)})})})(e,n.message,e=>{r(e?n.preprocess(t):t)})})))(e,i).then(t=>{se(e,a,t)}),n.close()})(e,t);return((e,t,n)=>{const r=e.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),o=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=((e,t)=>{const n=e.anchor,r=n.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:r,link:r,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}})(e,p.from(M(n))),a=e.catalogs,s=((e,t)=>{const n={text:e.text,title:e.title},r=(e,r)=>{const o=(i=t,a=r,"link"===a?i.link:"anchor"===a?i.anchor:p.none()).getOr([]);var i,a;return((e,t,n,r)=>{const o=r[t],i=e.length>0;return void 0!==o?de(o,n).map(t=>({url:{value:t.value,meta:{text:i?e:t.text,attach:d}},text:i?e:t.text})):p.none()})(n.text,r,o,e)};return{onChange:(e,t)=>{const o=t.name;return"url"===o?(e=>{const t=(r=e.url,x(n.text.length<=0,p.from(null===(o=r.meta)||void 0===o?void 0:o.text).getOr(r.value)));var r,o;const i=(e=>{var t;return x(n.title.length<=0,p.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))})(e.url);return t.isSome()||i.isSome()?p.some({...t.map(e=>({text:e})).getOr({}),...i.map(e=>({title:e})).getOr({})}):p.none()})(e()):((e,t)=>f.call(["anchor","link"],t))(0,o)>-1?r(e(),o):"text"===o||"title"===o?(n[o]=e()[o],p.none()):p.none()}}})(i,a);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:m([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],r,o,b([a.anchor.map(F("anchor","Anchors")),a.rels.map(F("rel","Rel")),a.targets.map(F("target","Open link in...")),a.link.map(F("link","Link list")),a.classes.map(F("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:(e,{name:t})=>{s.onChange(e.getData,{name:t}).each(t=>{e.setData(t)})},onSubmit:t}})(t,n,e)}).then(t=>{e.windowManager.open(t)})};var Se=tinymce.util.Tools.resolve("tinymce.util.VK");const Ce=(e,t)=>e.dom.getParent(t,"a[href]"),Me=e=>Ce(e,e.selection.getStart()),Te=(e,t)=>{if(t){const n=$(t);if(/^#/.test(n)){const t=e.dom.select(n);t.length&&e.selection.scrollIntoView(t[0],!0)}else(e=>{const t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)})(t,n)})(t.href)}},ke=e=>()=>{e.execCommand("mceLink",!1,{dialog:!0})},Ie=e=>()=>{Te(e,Me(e))},Ae=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),De=e=>t=>{const n=()=>{t.setActive(!e.mode.isReadOnly()&&Q(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return n(),Ae(e,n)},Pe=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return n(),Ae(e,n)},Le=e=>t=>{const n=()=>t.setEnabled((e=>1===(e.selection.isCollapsed()?ne(e.dom.getParents(e.selection.getStart())):te(e.selection.getRng())).length)(e));return n(),Ae(e,n)},Ne=e=>t=>{const n=e.dom.getParents(e.selection.getStart()),r=n=>{t.setEnabled((t=>{return re(t)||(n=e.selection.getRng(),te(n).length>0);var n})(n)&&e.selection.isEditable())};return r(n),Ae(e,e=>r(e.parents))};e.add("link",e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=r(e)||s(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>r(e)||u(e)||c(e,o)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>s(e)||c(e,o),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ke(e),onSetup:De(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ie(e),onSetup:Le(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>le(e),onSetup:Ne(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ie(e),onSetup:Le(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Pe(e),onAction:ke(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>le(e),onSetup:Ne(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:t=>e.dom.isEditable(t)?re(e.dom.getParents(t,"a"))?"link unlink openlink":"link":""})})(e),(e=>{const t=t=>{const n=e.selection.getNode();return t.setEnabled(Q(e,n)),d};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:De(e)},label:"Link",predicate:t=>S(e)&&Q(e,t),initValue:()=>J(e).fold(()=>"",$),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const n=e.selection.getNode();return t.setActive(Q(e,n)),De(e)(t)},onAction:t=>{const n=t.getValue(),r=(t=>{const n=J(e),r=oe(e);if(n.isNone()&&r){const r=ee(e.selection,n);return x(0===r.length,t)}return p.none()})(n);se(e,{href:n,attach:d},{href:n,text:r,title:p.none(),rel:p.none(),target:p.none(),class:p.none()}),(e=>{e.selection.collapse(!1)})(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{le(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Ie(e)(),t.hide()}}]})})(e),(e=>{e.on("click",t=>{const n=Ce(e,t.target);n&&Se.metaKeyPressed(t)&&(t.preventDefault(),Te(e,n))}),e.on("keydown",t=>{if(!t.isDefaultPrevented()&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)){const n=Me(e);n&&(t.preventDefault(),Te(e,n))}})})(e),(e=>{e.addCommand("mceLink",(t,n)=>{!0!==(null==n?void 0:n.dialog)&&L(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):we(e)})})(e),(e=>{e.addShortcut("Meta+K","",()=>{e.execCommand("mceLink")})})(e)})}(),function(e,t){"use strict";function n(e,t){for(var n,r=[],a=0;a<e.length;++a){if(!(n=i[e[a]]||o(e[a])))throw"module definition dependecy not found: "+e[a];r.push(n)}t.apply(null,r)}function r(e,r,o){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";n(r,function(){i[e]=o.apply(null,arguments)})}function o(t){for(var n=e,r=t.split(/[.\/]/),o=0;o<r.length;++o){if(!n[r[o]])return;n=n[r[o]]}return n}var i={};r("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,n){function r(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}var o=function(e){var t="\x3c!--StartFragment--\x3e",n="\x3c!--EndFragment--\x3e",r=e.indexOf(t);if(-1!==r){var o=e.substr(r+t.length),i=o.indexOf(n);if(-1!==i&&/^<\/(p|h[1-6]|li)>/i.test(o.substr(i+n.length,5)))return o.substr(0,i)}return e};return{filter:r,innerText:function(o){var i=new n,a=new t({},i),s="",l=i.getShortEndedElements(),u=e.makeMap("script noscript style textarea video audio iframe object"," "),c=i.getBlockElements();return o=r(o,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"!==n)if(l[n]&&(s+=" "),u[n])s+=" ";else{if(3==t.type&&(s+=t.value),!t.shortEnded&&(t=t.firstChild))do{e(t)}while(t=t.next);c[n]&&r.next&&(s+="\n","p"==n&&(s+="\n"))}else s+="\n"}(a.parse(o)),s},trimHtml:function(e){return r(o(e),[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}}}}),r("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},n=function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},r=function(e,n,r){return!(!1!==e.selection.isCollapsed()||!t(n))&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0}(e,n,r)},o=function(e,t,r){return!!n(t)&&function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0}(e,t,r)},i=function(e,t){return e.insertContent(t,{merge:!1!==e.settings.paste_merge_formats,paste:!0}),!0},a=function(t,n){e.each([r,o,i],function(e){return!0!==e(t,n,i)})};return{isImageUrl:n,isAbsoluteUrl:t,insertContent:function(e,t){!1===e.settings.smart_paste?i(e,t):a(e,t)}}}),r("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(e,t,n,r,o,i){return function(a){function s(e){var t,n=a.dom;if(t=a.fire("BeforePastePreProcess",{content:e}),e=(t=a.fire("PastePreProcess",t)).content,!t.isDefaultPrevented()){if(a.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var r=n.add(a.getBody(),"div",{style:"display:none"},e);t=a.fire("PastePostProcess",{node:r}),n.remove(r),e=t.node.innerHTML}t.isDefaultPrevented()||o.insertContent(a,e)}}function l(e){e=a.dom.encode(e).replace(/\r\n/g,"\n");var t,n=a.dom.getParent(a.selection.getStart(),a.dom.isBlock),o=a.settings.forced_root_block;o&&(t=(t=a.dom.createHTML(o,a.settings.forced_root_block_attrs)).substr(0,t.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!o?e=r.filter(e,[[/\n/g,"<br>"]]):-1!=(e=r.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]])).indexOf("<p>")&&(e=t+e),s(e)}function u(){var t,n=a.dom,r=a.getBody(),o=a.dom.getViewPort(a.getWin()).y,i=20;if(w=a.selection.getRng(),a.inline&&((t=a.selection.getScrollContainer())&&t.scrollTop>0&&(o=t.scrollTop)),w.getClientRects){var s=function(e){var t,r,o,i=e.startContainer;if((t=e.getClientRects()).length)return t[0];if(e.collapsed&&1==i.nodeType){for(o=i.childNodes[w.startOffset];o&&3==o.nodeType&&!o.data.length;)o=o.nextSibling;if(o)return"BR"==o.tagName&&(r=n.doc.createTextNode("\ufeff"),o.parentNode.insertBefore(r,o),(e=n.createRng()).setStartBefore(r),e.setEndAfter(r),t=e.getClientRects(),n.remove(r)),t.length?t[0]:void 0}}(w);if(s)i=o+(s.top-n.getPos(r).y);else{i=o;var l=w.startContainer;l&&(3==l.nodeType&&l.parentNode!=r&&(l=l.parentNode),1==l.nodeType&&(i=n.getPos(l,t||r).y))}}_=n.add(a.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+i+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},k),(e.ie||e.gecko)&&n.setStyle(_,"left","rtl"==n.getStyle(r,"direction",!0)?65535:-65535),n.bind(_,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),_.focus(),a.selection.select(_,!0)}function c(){if(_){for(var e;e=a.dom.get("mcepastebin");)a.dom.remove(e),a.dom.unbind(e);w&&a.selection.setRng(w)}_=w=null}function d(){var e,t,n,r,o="";for(e=a.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)(n=e[t]).firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),r=n.innerHTML,o!=k&&(o+=r);return o}function h(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1==n.indexOf(I)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];t[o]=e.getData(o)}}return t}function p(e){return h(e.clipboardData||a.getDoc().dataTransfer)}function f(e){return y(e,"text/html")||y(e,"text/plain")}function g(e,t,n){e&&(a.selection.setRng(e),e=null);var r=t.result,o=function(e){var t;return-1!==(t=e.indexOf(","))?e.substr(t+1):null}(r),i=new Image;if(i.src=r,function(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}(a.settings,i)){var l,u,c=a.editorUpload.blobCache;u=c.findFirst(function(e){return e.base64()===o}),u?l=u:(l=c.create(A(),n,o),c.add(l)),s('<img src="'+l.blobUri()+'">')}else s('<img src="'+r+'">')}function m(e,t){function n(n){var r,o,i,a=!1;if(n)for(r=0;r<n.length;r++)if(o=n[r],/^image\/(jpeg|png|gif|bmp)$/.test(o.type)){var s=o.getAsFile?o.getAsFile():o;(i=new FileReader).onload=g.bind(null,t,i,s),i.readAsDataURL(s),e.preventDefault(),a=!0}return a}var r=e.clipboardData||e.dataTransfer;if(a.settings.paste_data_images&&r)return n(r.items)||n(r.files)}function v(e){return t.getCaretRangeFromPoint(e.clientX,e.clientY,a.getDoc())}function y(e,t){return t in e&&e[t].length>0}function b(e){return n.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function x(){function t(e,t,n){var o;return y(e,"text/html")?o=e["text/html"]:(o=d())==k&&(n=!0),o=r.trimHtml(o),_&&_.firstChild&&"mcepastebin"===_.firstChild.id&&(n=!0),c(),o.length||(n=!0),n&&(o=y(e,"text/plain")&&-1==o.indexOf("</p>")?e["text/plain"]:r.innerText(o)),o==k?void(t||a.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?l(o):s(o))}a.on("keydown",function(t){function n(e){b(e)&&!e.isDefaultPrevented()&&c()}if(b(t)&&!t.isDefaultPrevented()){if((S=t.shiftKey&&86==t.keyCode)&&e.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),M=(new Date).getTime(),e.ie&&S)return t.preventDefault(),void a.fire("paste",{ieFake:!0});c(),u(),a.once("keyup",n),a.once("paste",function(){a.off("keyup",n)})}});a.on("paste",function(n){var r=(new Date).getTime(),o=p(n),s=(new Date).getTime()-r,l=(new Date).getTime()-M-s<1e3,h="text"==C.pasteFormat||S;return S=!1,n.isDefaultPrevented()||function(e){var t=e.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}(n)||!f(o)&&m(n,w||a.selection.getRng())?void c():(l||n.preventDefault(),!e.ie||l&&!n.ieFake||(u(),a.dom.bind(_,"paste",function(e){e.stopPropagation()}),a.getDoc().execCommand("Paste",!1,null),o["text/html"]=d()),void(y(o,"text/html")?(n.preventDefault(),t(o,l,h)):i.setEditorTimeout(a,function(){t(o,l,h)},0)))}),a.on("dragstart dragend",function(e){T="dragstart"==e.type}),a.on("drop",function(e){var t,n;if(n=v(e),!e.isDefaultPrevented()&&!T&&((f(t=h(e.dataTransfer))&&!function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}(t)||!m(e,n))&&n&&!1!==a.settings.paste_filter_drop)){var o=t["mce-internal"]||t["text/html"]||t["text/plain"];o&&(e.preventDefault(),i.setEditorTimeout(a,function(){a.undoManager.transact(function(){t["mce-internal"]&&a.execCommand("Delete"),a.selection.setRng(n),o=r.trimHtml(o),t["text/html"]?s(o):l(o)})}))}}),a.on("dragover dragend",function(e){a.settings.paste_data_images&&e.preventDefault()})}var _,w,S,C=this,M=0,T=!1,k="%MCEPASTEBIN%",I="data:text/mce-internal,",A=r.createIdGenerator("mceclip");C.pasteHtml=s,C.pasteText=l,C.pasteImageData=m,a.on("preInit",function(){x(),a.parser.addNodeFilter("img",function(t,n,r){function o(t){t.attr("data-mce-object")||u===e.transparentSrc||t.remove()}function i(e){return 0===e.indexOf("webkit-fake-url")}function s(e){return 0===e.indexOf("data:")}if(!a.settings.paste_data_images&&function(e){return e.data&&!0===e.data.paste}(r))for(var l=t.length;l--;){var u=t[l].attributes.map.src;u&&(i(u)||!a.settings.allow_html_data_urls&&s(u))&&o(t[l])}})})}}),r("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,n,r,o,i){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function s(t){var n,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(r,function(e){if(e.test(t))return n=!0,!1}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function u(u){var c=u.settings;u.on("BeforePastePreProcess",function(d){function h(t,n){var r,i={},a=u.dom.parseStyle(n);return e.each(a,function(e,o){switch(o){case"mso-list":(r=/\w+ \w+([0-9]+)/i.exec(n))&&(t._listLevel=parseInt(r[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(i[o]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===o.indexOf("mso-comment")?void t.remove():void(0!==o.indexOf("mso-")&&("all"==p||f&&f[o])&&(i[o]=e))}),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],t.wrap(new o("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],t.wrap(new o("i",1))),(i=u.dom.serializeStyle(i,t.name))||null}var p,f,g=d.content;if(g=(g=g.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"")).replace(/<br class="?Apple-interchange-newline"?>/gi,""),(p=c.paste_retain_style_properties)&&(f=e.makeMap(p.split(/[, ]/))),!1!==c.paste_enable_default_filters&&a(d.content)){d.wordContent=!0,g=i.filter(g,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var m=c.paste_word_valid_elements;m||(m="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var v=new n({valid_elements:m,valid_children:"-li[p]"});e.each(v.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var y=new t({},v);y.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",h(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),y.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),y.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),y.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)if(n=(t=e[o]).attr("href"),r=t.attr("name"),n&&-1!=n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&((n=n.split("#")[1])&&(n="#"+n)),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var b=y.parse(g);!1!==c.paste_convert_word_fake_lists&&function(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do{n+=t(e)}while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!n(e,t))return!1}while(e=e.next);return!0}function r(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{r(e)}while(e=e.next)}function i(e,t,i){var s=e._listLevel||c;s!=c&&(s<c?a&&(a=a.parent.parent):(u=a,a=null)),a&&a.name==t?a.append(e):(u=u||a,a=new o(t,1),i>1&&a.attr("start",""+i),e.wrap(a)),e.name="li",s>c&&u&&u.lastChild.append(a),c=s,r(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var a,u,c=1,d=[],h=e.firstChild;null!=h;)if(d.push(h),null!==(h=h.walk()))for(;void 0!==h&&h.parent!==e;)h=h.walk();for(var p=0;p<d.length;p++)if("p"==(e=d[p]).name&&e.firstChild){var f=t(e);if(l(f)){i(e,"ul");continue}if(s(f)){var g=/([0-9]+)\./.exec(f),m=1;g&&(m=parseInt(g[1],10)),i(e,"ol",m);continue}if(e._listLevel){i(e,"ul",1);continue}a=null}else u=a,a=null}(b),d.content=new r({validate:c.validate},v).serialize(b)}})}return u.isWordContent=a,u}),r("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,r){return function(o){function i(e){o.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}e.webkit&&i(function(e){if(n.isWordContent(e))return e;var t=o.settings.paste_webkit_styles;if(!1===o.settings.paste_remove_styles_if_webkit||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var r=o.dom,i=o.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,o,a){var s=r.parseStyle(o,"span"),l={};if("none"===t)return n+a;for(var u=0;u<t.length;u++){var c=s[t[u]],d=r.getStyle(i,t[u],!0);/color/.test(t[u])&&(c=r.toHex(c),d=r.toHex(d)),d!=c&&(l[t[u]]=c)}return(l=r.serializeStyle(l,"span"))?n+' style="'+l+'"'+a:n+a})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}),e.ie&&(i(function(e){if(!n.isWordContent(e))return e;var i=[];t.each(o.schema.getBlockElements(),function(e,t){i.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=r.filter(e,[[a,"$1"]]),r.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}),function(e){o.on("PastePostProcess",function(t){e(t.node)})}(function(e){o.$("a",e).find("font,u").each(function(e,t){o.dom.remove(t,!0)})}))}}),r("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,n,r){var o;e.add("paste",function(i){function a(){if("text"==l.pasteFormat)l.pasteFormat="html",i.fire("PastePlainTextToggle",{state:!1});else if(l.pasteFormat="text",i.fire("PastePlainTextToggle",{state:!0}),!o&&!1!==i.settings.paste_plaintext_inform){var e=i.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");i.notificationManager.open({text:e,type:"info"}),o=!0}i.focus()}function s(){var e=this;e.active("text"===l.pasteFormat),i.on("PastePlainTextToggle",function(t){e.active(t.state)})}var l,u=this,c=i.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(c.plugins)&&e.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(u.clipboard=l=new t(i),u.quirks=new r(i),u.wordFilter=new n(i),i.settings.paste_as_text&&(u.clipboard.pasteFormat="text"),c.paste_preprocess&&i.on("PastePreProcess",function(e){c.paste_preprocess.call(u,u,e)}),c.paste_postprocess&&i.on("PastePostProcess",function(e){c.paste_postprocess.call(u,u,e)}),i.addCommand("mceInsertClipboardContent",function(e,t){t.content&&u.clipboard.pasteHtml(t.content),t.text&&u.clipboard.pasteText(t.text)}),i.settings.paste_block_drop&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),i.settings.paste_data_images||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),i.addCommand("mceTogglePlainTextPaste",a),i.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:a,onPostRender:s}),void i.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:l.pasteFormat,onclick:a,onPostRender:s}))})}),function(n){var r,o,a,s,l;for(r=0;r<n.length;r++){o=e,s=(a=n[r]).split(/[.\/]/);for(var u=0;u<s.length-1;++u)o[s[u]]===t&&(o[s[u]]={}),o=o[s[u]];o[s[s.length-1]]=i[a]}if(e.AMDLC_TESTS){for(a in l=e.privateModules||{},i)l[a]=i[a];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}(["tinymce/pasteplugin/Utils"])}(window),function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,(o=String).prototype.isPrototypeOf(n)||(null===(i=r.constructor)||void 0===i?void 0:i.name)===o.name)?"string":t;var n,r,o,i})(t)===e,n=e=>t=>typeof t===e,r=t("string"),o=t("array"),i=n("boolean"),a=e=>void 0===e,s=e=>!(e=>null==e)(e),l=n("function"),u=n("number"),c=()=>{},d=e=>()=>e,h=e=>e,p=(e,t)=>e===t;function f(e,...t){return(...n)=>{const r=t.concat(n);return e.apply(null,r)}}const g=e=>{e()},m=d(!1),v=d(!0);class y{constructor(e,t){this.tag=e,this.value=t}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return s(e)?y.some(e):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);const b=Object.keys,x=Object.hasOwnProperty,_=(e,t)=>{const n=b(e);for(let r=0,o=n.length;r<o;r++){const o=n[r];t(e[o],o)}},w=(e,t)=>{const n={};var r;return((e,t,n,r)=>{_(e,(e,o)=>{(t(e,o)?n:r)(e,o)})})(e,t,(r=n,(e,t)=>{r[t]=e}),c),n},S=e=>b(e).length,C=(e,t)=>M(e,t)?y.from(e[t]):y.none(),M=(e,t)=>x.call(e,t),T=(e,t)=>M(e,t)&&void 0!==e[t]&&null!==e[t],k=Array.prototype.indexOf,I=Array.prototype.push,A=(e,t)=>((e,t)=>k.call(e,t))(e,t)>-1,D=(e,t)=>{for(let n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},P=(e,t)=>{const n=[];for(let r=0;r<e;r++)n.push(t(r));return n},L=(e,t)=>{const n=e.length,r=new Array(n);for(let o=0;o<n;o++){const n=e[o];r[o]=t(n,o)}return r},N=(e,t)=>{for(let n=0,r=e.length;n<r;n++)t(e[n],n)},R=(e,t)=>{const n=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];t(o,r)&&n.push(o)}return n},E=(e,t,n)=>(N(e,(e,r)=>{n=t(n,e,r)}),n),O=(e,t)=>((e,t,n)=>{for(let r=0,o=e.length;r<o;r++){const o=e[r];if(t(o,r))return y.some(o);if(n(o,r))break}return y.none()})(e,t,m),B=(e,t)=>(e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!o(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);I.apply(t,e[n])}return t})(L(e,t)),z=(e,t)=>{for(let n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},F=(e,t)=>t>=0&&t<e.length?y.some(e[t]):y.none(),V=(e,t)=>{for(let n=0;n<e.length;n++){const r=t(e[n],n);if(r.isSome())return r}return y.none()},H=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},W={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return H(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return H(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return H(n)},fromDom:H,fromPoint:(e,t,n)=>y.from(e.dom.elementFromPoint(t,n)).map(H)},G=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},U=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,j=(e,t)=>e.dom===t.dom,Y=G;"undefined"!=typeof window?window:Function("return this;")();const q=e=>e.dom.nodeName.toLowerCase(),X=e=>e.dom.nodeType,Z=e=>t=>X(t)===e,$=Z(1),K=Z(3),J=Z(9),Q=Z(11),ee=e=>t=>$(t)&&q(t)===e,te=e=>J(e)?e:W.fromDom(e.dom.ownerDocument),ne=e=>y.from(e.dom.parentNode).map(W.fromDom),re=e=>y.from(e.dom.nextSibling).map(W.fromDom),oe=e=>L(e.dom.childNodes,W.fromDom),ie=l(Element.prototype.attachShadow)&&l(Node.prototype.getRootNode)?e=>W.fromDom(e.dom.getRootNode()):te,ae=e=>W.fromDom(e.dom.host),se=e=>{const t=K(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(e=>{const t=ie(e);return Q(n=t)&&s(n.dom.host)?y.some(t):y.none();var n})(W.fromDom(t)).fold(()=>n.body.contains(t),(r=se,o=ae,e=>r(o(e))));var r,o};var le=(e,t,n,r,o)=>e(n,r)?y.some(n):l(o)&&o(n)?y.none():t(n,r,o);const ue=(e,t,n)=>{let r=e.dom;const o=l(n)?n:m;for(;r.parentNode;){r=r.parentNode;const e=W.fromDom(r);if(t(e))return y.some(e);if(o(e))break}return y.none()},ce=(e,t,n)=>ue(e,e=>G(e,t),n),de=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return U(n)?y.none():y.from(n.querySelector(e)).map(W.fromDom)})(t,e),he=(e,t,n)=>le((e,t)=>G(e,t),ce,e,t,n),pe=(e,t=!1)=>{return se(e)?e.dom.isContentEditable:(n=e,he(n,"[contenteditable]")).fold(d(t),e=>"true"===fe(e));var n},fe=e=>e.dom.contentEditable,ge=e=>t=>j(t,(e=>W.fromDom(e.getBody()))(e)),me=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,ve=e=>W.fromDom(e.selection.getStart()),ye=(e,t)=>{let n=[];return N(oe(e),e=>{t(e)&&(n=n.concat([e])),n=n.concat(ye(e,t))}),n},be=(e,t)=>((e,n)=>R(oe(e),e=>G(e,t)))(e),xe=(e,t)=>((e,t)=>{const n=void 0===t?document:t.dom;return U(n)?[]:L(n.querySelectorAll(e),W.fromDom)})(t,e),_e=(e,t,n)=>{if(!(r(n)||i(n)||u(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},we=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Se=(e,t)=>y.from(we(e,t)),Ce=(e,t)=>{e.dom.removeAttribute(t)},Me=(e,t,n=p)=>e.exists(e=>n(e,t)),Te=(e,t,n)=>e.isSome()&&t.isSome()?y.some(n(e.getOrDie(),t.getOrDie())):y.none(),ke=(e,t)=>((e,t,n)=>""===t||e.length>=t.length&&e.substr(0,0+t.length)===t)(e,t),Ie=(Ae=/^\s+|\s+$/g,e=>e.replace(Ae,""));var Ae;const De=e=>e.length>0,Pe=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?y.none():y.some(n)},Le=e=>void 0!==e.style&&l(e.style.getPropertyValue),Ne=(e,t)=>{const n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||se(e)?r:Re(n,t)},Re=(e,t)=>Le(e)?e.style.getPropertyValue(t):"",Ee=(e,t)=>{const n=e.dom,r=Re(n,t);return y.from(r).filter(e=>e.length>0)},Oe=(e,t,n=0)=>Se(e,t).map(e=>parseInt(e,10)).getOr(n),Be=(e,t)=>ze(e,t,v),ze=(e,t,n)=>B(oe(e),e=>G(e,t)?n(e)?[e]:[]:ze(e,t,n)),Fe=["tfoot","thead","tbody","colgroup"],Ve=(e,t,n)=>({element:e,rowspan:t,colspan:n}),He=(e,t,n)=>({element:e,cells:t,section:n}),We=(e,t)=>he(e,"table",t),Ge=e=>Be(e,"tr"),Ue=e=>We(e).fold(d([]),e=>be(e,"colgroup")),je=e=>ne(e).map(e=>{const t=q(e);return(e=>A(Fe,e))(t)?t:"tbody"}).getOr("tbody"),Ye=e=>Se(e,"data-snooker-locked-cols").bind(e=>y.from(e.match(/\d+/g))).map(e=>((e,t)=>{const n={};for(let r=0,o=e.length;r<o;r++){const o=e[r];n[String(o)]=t(o,r)}return n})(e,v)),qe=(e,t)=>e+","+t,Xe=e=>{const t=(e=>{const t=Ge(e);return((e,t)=>L(e,e=>{if("colgroup"===q(e)){const t=L((e=>G(e,"colgroup")?be(e,"col"):B(Ue(e),e=>be(e,"col")))(e),e=>{const t=Oe(e,"span",1);return Ve(e,1,t)});return He(e,t,"colgroup")}{const n=L((e=>Be(e,"th,td"))(e),e=>{const t=Oe(e,"rowspan",1),n=Oe(e,"colspan",1);return Ve(e,t,n)});return He(e,n,t(e))}}))([...Ue(e),...t],je)})(e);return(e=>{const t={},n=[];var r;const o=(r=e,F(r,0)).map(e=>e.element).bind(We).bind(Ye).getOr({});let i=0,a=0,s=0;const{pass:l,fail:u}=((e,t)=>{const n=[],r=[];for(let t=0,i=e.length;t<i;t++){const i=e[t];(o=i,"colgroup"===o.section?n:r).push(i)}var o;return{pass:n,fail:r}})(e);N(u,e=>{const r=[];N(e.cells,e=>{let n=0;for(;void 0!==t[qe(s,n)];)n++;const i=T(o,n.toString()),l=((e,t,n,r,o,i)=>({element:e,rowspan:t,colspan:n,row:r,column:o,isLocked:i}))(e.element,e.rowspan,e.colspan,s,n,i);for(let r=0;r<e.colspan;r++)for(let o=0;o<e.rowspan;o++){const e=n+r,i=qe(s+o,e);t[i]=l,a=Math.max(a,e+1)}r.push(l)}),i++,n.push(He(e.element,r,e.section)),s++});const{columns:c,colgroups:d}=(e=>F(e,e.length-1))(l).map(e=>{const t=(e=>{const t={};let n=0;return N(e.cells,e=>{const r=e.colspan;P(r,o=>{const i=n+o;t[i]=((e,t,n)=>({element:e,colspan:t,column:n}))(e.element,r,i)}),n+=r}),t})(e),n=((e,t)=>({element:e,columns:t}))(e.element,((e,t)=>{const n=[];return _(e,(e,r)=>{n.push(t(e,r))}),n})(t,h));return{colgroups:[n],columns:t}}).getOrThunk(()=>({colgroups:[],columns:{}})),p=((e,t)=>({rows:e,columns:t}))(i,a);return{grid:p,access:t,all:n,columns:c,colgroups:d}})(t)},Ze=(e,t,n)=>y.from(e.access[qe(t,n)]),$e=(e,t,n)=>{const r=((e,t)=>{const n=B(e.all,e=>e.cells);return R(n,t)})(e,e=>n(t,e.element));return r.length>0?y.some(r[0]):y.none()},Ke=(e,t)=>y.from(e.columns[t]);var Je=tinymce.util.Tools.resolve("tinymce.util.Tools");const Qe=(e,t,n)=>{const r=e.select("td,th",t);let o;for(let t=0;t<r.length;t++){const i=e.getStyle(r[t],n);if(a(o)&&(o=i),o!==i)return""}return o},et=(e,t,n)=>{Je.each("left center right".split(" "),r=>{r!==n&&e.formatter.remove("align"+r,{},t)}),n&&e.formatter.apply("align"+n,{},t)},tt=(e,t,n)=>{e.dispatch("TableModified",{...n,table:t})},nt=(e,t,n)=>((e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?y.none():y.some(t)})(e).getOr(t))(Ne(e,t),n);var rt=tinymce.util.Tools.resolve("tinymce.Env");const ot=P(5,e=>{const t=`${e+1}px`;return{title:t,value:t}}),it=L(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],e=>({title:e,value:e.toLowerCase()})),at="100%",st=e=>{var t;const n=e.dom,r=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return(e=>((e,t)=>{const n=e.dom;return((e,t,n,r)=>t-nt(e,"padding-left",0)-nt(e,`padding-${r}`,0)-nt(e,"border-left-width",0)-nt(e,`border-${r}-width`,0))(e,n.getBoundingClientRect().width||n.offsetWidth,0,"right")})(e))(W.fromDom(r))+"px"},lt=e=>t=>t.options.get(e),ut=lt("table_sizing_mode"),ct=lt("table_border_widths"),dt=lt("table_border_styles"),ht=lt("table_cell_advtab"),pt=lt("table_row_advtab"),ft=lt("table_advtab"),gt=lt("table_appearance_options"),mt=lt("table_grid"),vt=lt("table_style_by_css"),yt=lt("table_cell_class_list"),bt=lt("table_row_class_list"),xt=lt("table_class_list"),_t=lt("table_toolbar"),wt=lt("table_background_color_map"),St=lt("table_border_color_map"),Ct=e=>"fixed"===ut(e),Mt=e=>"responsive"===ut(e),Tt=e=>{const t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:((e,t)=>Mt(e)||!vt(e)?t:Ct(e)?{...t,width:st(e)}:{...t,width:at})(e,n)},kt=e=>{const t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:((e,t)=>Mt(e)||vt(e)?t:Ct(e)?{...t,width:st(e)}:{...t,width:at})(e,n)},It=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,At=Xe,Dt=(e,t)=>{ne(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Pt=(e,t)=>{re(e).fold(()=>{ne(e).each(e=>{Lt(e,t)})},e=>{Dt(e,t)})},Lt=(e,t)=>{e.dom.appendChild(t.dom)},Nt=(e,t)=>{N(t,(n,r)=>{const o=0===r?e:t[r-1];Pt(o,n)})},Rt=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Et=((e,t)=>{const n=t=>e(t)?y.from(t.dom.nodeValue):y.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return n(t).getOr("")},getOption:n,set:(t,n)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=n}}})(K);var Ot=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Bt=(e,t,n,r)=>{const o=t(e,n);return i=(n,r)=>{const o=t(e,r);return zt(e,n,o)},a=o,((e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)})(r,(e,t)=>{a=i(a,e)}),a;var i,a},zt=(e,t,n)=>t.bind(t=>n.filter(f(e.eq,t))),Ft={up:d({selector:ce,closest:he,predicate:ue,all:(e,t)=>{const n=l(t)?t:m;let r=e.dom;const o=[];for(;null!==r.parentNode&&void 0!==r.parentNode;){const e=r.parentNode,t=W.fromDom(e);if(o.push(t),!0===n(t))break;r=e}return o}}),down:d({selector:xe,predicate:ye}),styles:d({get:Ne,getRaw:Ee,set:(e,t,n)=>{((e,t,n)=>{if(!r(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Le(e)&&e.style.setProperty(t,n)})(e.dom,t,n)},remove:(e,t)=>{((e,t)=>{Le(e)&&e.style.removeProperty(t)})(e.dom,t),Me(Se(e,"style").map(Ie),"")&&Ce(e,"style")}}),attrs:d({get:we,set:(e,t,n)=>{_e(e.dom,t,n)},remove:Ce,copyTo:(e,t)=>{((e,t)=>{const n=e.dom;_(t,(e,t)=>{_e(n,t,e)})})(t,E(e.dom.attributes,(e,t)=>(e[t.name]=t.value,e),{}))}}),insert:d({before:Dt,after:Pt,afterAll:Nt,append:Lt,appendAll:(e,t)=>{N(t,t=>{Lt(e,t)})},prepend:(e,t)=>{(e=>((e,t)=>{const n=e.dom.childNodes;return y.from(n[0]).map(W.fromDom)})(e))(e).fold(()=>{Lt(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},wrap:(e,t)=>{Dt(e,t),Lt(t,e)}}),remove:d({unwrap:e=>{const t=oe(e);t.length>0&&Nt(e,t),Rt(e)},remove:Rt}),create:d({nu:W.fromTag,clone:e=>W.fromDom(e.dom.cloneNode(!1)),text:W.fromText}),query:d({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:e=>y.from(e.dom.previousSibling).map(W.fromDom),nextSibling:re}),property:d({children:oe,name:q,parent:ne,document:e=>te(e).dom,isText:K,isComment:e=>8===X(e)||"#comment"===q(e),isElement:$,isSpecial:e=>{const t=q(e);return A(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>$(e)?Se(e,"lang"):y.none(),getText:e=>Et.get(e),setText:(e,t)=>Et.set(e,t),isBoundary:e=>!!$(e)&&("body"===q(e)||A(Ot,q(e))),isEmptyTag:e=>!!$(e)&&A(["br","img","hr","input"],q(e)),isNonEditable:e=>$(e)&&"false"===we(e,"contenteditable")}),eq:j,is:Y},Vt=e=>ce(e,"table"),Ht=e=>L(e,W.fromDom),Wt="data-mce-selected",Gt="data-mce-first-selected",Ut="data-mce-last-selected",jt={selected:Wt,selectedSelector:"td["+Wt+"],th["+Wt+"]",firstSelected:Gt,firstSelectedSelector:"td["+Gt+"],th["+Gt+"]",lastSelected:Ut,lastSelectedSelector:"td["+Ut+"],th["+Ut+"]"},Yt=e=>(t,n)=>{const r=q(t),o="col"===r||"colgroup"===r?We(i=t).bind(e=>((e,t)=>((e,t)=>{const n=xe(e,t);return n.length>0?y.some(n):y.none()})(e,t))(e,jt.firstSelectedSelector)).fold(d(i),e=>e[0]):t;var i;return he(o,e,n)},qt=Yt("th,td,caption"),Xt=Yt("th,td"),Zt=e=>Ht(e.model.table.getSelectedCells()),$t=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Kt=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Jt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Qt=e=>{return(t=e,ke(t,"#")?((e,t)=>e.substring(1))(t):t).toUpperCase();var t},en=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},tn=e=>{return t=en(e.red)+en(e.green)+en(e.blue),{value:Qt(t)};var t},nn=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,rn=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,on=(e,t,n,r)=>({red:e,green:t,blue:n,alpha:r}),an=(e,t,n,r)=>{const o=parseInt(e,10),i=parseInt(t,10),a=parseInt(n,10),s=parseFloat(r);return on(o,i,a,s)},sn=e=>{if("transparent"===e)return y.some(on(0,0,0,0));const t=nn.exec(e);if(null!==t)return y.some(an(t[1],t[2],t[3],"1"));const n=rn.exec(e);return null!==n?y.some(an(n[1],n[2],n[3],n[4])):y.none()},ln=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},un=(e,t,n)=>r=>{const o=(e=>{const t=ln(y.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(y.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{n(),t.set(y.some(e))}}})(e=>e.unbind()),i=!De(n),a=()=>{const a=Zt(e),s=r=>e.formatter.match(t,{value:n},r.dom,i);i?(r.setActive(!D(a,s)),o.set(e.formatter.formatChanged(t,e=>r.setActive(!e),!0))):(r.setActive(z(a,s)),o.set(e.formatter.formatChanged(t,r.setActive,!1,{value:n})))};return e.initialized?a():e.on("init",a),o.clear},cn=e=>T(e,"menu"),dn=e=>L(e,e=>{const t=e.text||e.title||"";return cn(e)?{text:t,items:dn(e.menu)}:{text:t,value:e.value}}),hn=(e,t,n,r)=>L(t,t=>{const o=t.text||t.title;return cn(t)?{type:"nestedmenuitem",text:o,getSubmenuItems:()=>hn(e,t.menu,n,r)}:{text:o,type:"togglemenuitem",onAction:()=>r(t.value),onSetup:un(e,n,t.value)}}),pn=(e,t)=>n=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:n})},fn=e=>B(e,e=>cn(e)?[{...e,menu:fn(e.menu)}]:De(e.value)?[e]:[]),gn=(e,t,n,r)=>o=>o(hn(e,t,n,r)),mn=(e,t,n)=>{const r=L(t,e=>{return{text:e.title,value:"#"+(n=e.value,(t=n,(e=>Kt.test(e)||Jt.test(e))(t)?y.some({value:Qt(t)}):y.none()).orThunk(()=>sn(n).map(tn)).getOrThunk(()=>{const e=document.createElement("canvas");e.height=1,e.width=1;const t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="#FFFFFF",t.fillStyle=n,t.fillRect(0,0,1,1);const r=t.getImageData(0,0,1,1).data,o=r[0],i=r[1],a=r[2],s=r[3];return tn(on(o,i,a,s))})).value,type:"choiceitem"};var t,n});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:t=>{const r="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[n]:r})}}]},vn=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},yn=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},bn=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:$t}],xn=e=>bn.concat((e=>{const t=dn(yt(e));return t.length>0?y.some({name:"class",type:"listbox",label:"Class",items:t}):y.none()})(e).toArray()),_n=(e,t)=>{const n=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(dn(dt(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(n):n}},wn=(e,t)=>{const n=e.dom;return{setAttrib:(e,r)=>{n.setAttrib(t,e,r)},setStyle:(e,r)=>{n.setStyle(t,e,r)},setFormat:(n,r)=>{""===r?e.formatter.remove(n,{value:null},t,!0):e.formatter.apply(n,{value:r},t)}}},Sn=ee("th"),Cn=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Mn=(e,t)=>V(e.all,e=>O(e.cells,e=>j(t,e.element))),Tn=(e,t)=>((e,t,n)=>{const r=(e=>{const t=[],n=e=>{t.push(e)};for(let t=0;t<e.length;t++)e[t].each(n);return t})(L(t.selection,t=>{return(r=t,((e,t,n=m)=>n(t)?y.none():A(e,q(t))?y.some(t):ce(t,e.join(","),e=>G(e,"table")||n(e)))(["td","th"],r,void 0)).bind(t=>Mn(e,t)).filter(n);var r}));return o=r,r.length>0?y.some(o):y.none();var o})(e,t,v),kn=(e,t)=>z(t,t=>((e,t)=>Mn(e,t).exists(e=>!e.isLocked))(e,t)),In=(e,t)=>((e,t)=>t.mergable)(0,t).filter(t=>kn(e,t.cells)),An=(e,t)=>((e,t)=>t.unmergable)(0,t).filter(t=>kn(e,t)),Dn=((e=>{if(!o(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};N(e,(r,i)=>{const a=b(r);if(1!==a.length)throw new Error("one and only one name per case");const s=a[0],l=r[s];if(void 0!==n[s])throw new Error("duplicate key detected:"+s);if("cata"===s)throw new Error("cannot have a case named cata (sorry)");if(!o(l))throw new Error("case arguments must be an array");t.push(s),n[s]=(...n)=>{const r=n.length;if(r!==l.length)throw new Error("Wrong number of arguments to case "+s+". Expected "+l.length+" ("+l+"), got "+r);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[i].apply(null,n)},match:e=>{const r=b(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!z(t,e=>A(r,e)))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[s].apply(null,n)},log:e=>{console.log(e,{constructors:t,constructor:s,params:n})}}}})})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),(e,t)=>{const n=Xe(e);return Tn(n,t).bind(e=>{const t=e[e.length-1],r=e[0].row,o=t.row+t.rowspan;return(e=>{const t=L(e,e=>(e=>{const t="thead"===e.section,n=Me((e=>{const t=R(e,e=>Sn(e.element));return 0===t.length?y.some("td"):t.length===e.length?y.some("th"):y.none()})(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Cn(t,n)}:{type:"body"}})(e).type),n=A(t,"header"),r=A(t,"footer");if(n||r){const e=A(t,"body");return!n||e||r?n||e||!r?y.none():y.some("footer"):y.some("header")}return y.some("body")})(n.all.slice(r,o))}).getOr("")}),Pn=e=>{return ke(e,"rgb")?sn(t=e).map(tn).map(e=>"#"+e.value).getOr(t):e;var t},Ln=e=>{const t=W.fromDom(e);return{borderwidth:Ee(t,"border-width").getOr(""),borderstyle:Ee(t,"border-style").getOr(""),bordercolor:Ee(t,"border-color").map(Pn).getOr(""),backgroundcolor:Ee(t,"background-color").map(Pn).getOr("")}},Nn=e=>{const t=e[0],n=e.slice(1);return N(n,e=>{N(b(t),n=>{_(e,(e,r)=>{const o=t[n];""!==o&&n===r&&o!==e&&(t[n]="")})})}),t},Rn=(e,t,n,r)=>O(e,e=>!a(n.formatter.matchNode(r,t+e))).getOr(""),En=f(Rn,["left","center","right"],"align"),On=f(Rn,["top","middle","bottom"],"valign"),Bn=e=>We(W.fromDom(e)).map(t=>{const n={selection:Ht(e.cells)};return Dn(t,n)}).getOr(""),zn=(e,t)=>{const n=Xe(e),r=(e=>B(e.all,e=>e.cells))(n),o=R(r,e=>D(t,t=>j(e.element,t)));return L(o,e=>({element:e.element.dom,column:Ke(n,e.column).map(e=>e.element.dom)}))},Fn=(e,t,n,r)=>{const o=r.getData();r.close(),e.undoManager.transact(()=>{((e,t,n,r)=>{const o=w(r,(e,t)=>n[t]!==e);S(o)>0&&t.length>=1&&We(t[0]).each(n=>{const i=zn(n,t),a=S(w(o,(e,t)=>"scope"!==t&&"celltype"!==t))>0,s=M(o,"celltype");(a||M(o,"scope"))&&((e,t,n,r)=>{const o=1===t.length;N(t,t=>{const i=t.element,a=o?v:r,s=wn(e,i);((e,t,n,r)=>{r("scope")&&e.setAttrib("scope",n.scope),r("class")&&e.setAttrib("class",n.class),r("height")&&e.setStyle("height",me(n.height)),r("width")&&t.setStyle("width",me(n.width))})(s,t.column.map(t=>wn(e,t)).getOr(s),n,a),ht(e)&&((e,t,n)=>{n("backgroundcolor")&&e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),n("bordercolor")&&e.setFormat("tablecellbordercolor",t.bordercolor),n("borderstyle")&&e.setFormat("tablecellborderstyle",t.borderstyle),n("borderwidth")&&e.setFormat("tablecellborderwidth",me(t.borderwidth))})(s,n,a),r("halign")&&et(e,i,n.halign),r("valign")&&((e,t,n)=>{Je.each("top middle bottom".split(" "),r=>{r!==n&&e.formatter.remove("valign"+r,{},t)}),n&&e.formatter.apply("valign"+n,{},t)})(e,i,n.valign)})})(e,i,r,f(M,o)),s&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,r),tt(e,n.dom,{structure:s,style:a})})})(e,t,n,o),e.focus()})},Vn=e=>{const t=Zt(e);if(0===t.length)return;const n=((e,t)=>{const n=We(t[0]).map(n=>L(zn(n,t),t=>((e,t,n,r)=>{const o=e.dom,i=(e,t)=>o.getStyle(e,t)||o.getAttrib(e,t);return{width:i(r.getOr(t),"width"),height:i(t,"height"),scope:o.getAttrib(t,"scope"),celltype:(a=t,a.nodeName.toLowerCase()),class:o.getAttrib(t,"class",""),halign:En(e,t),valign:On(e,t),...n?Ln(t):{}};var a})(e,t.element,ht(e),t.column)));return Nn(n.getOrDie())})(e,t),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:xn(e)},_n(e,"cell")]},o={type:"panel",items:[{type:"grid",columns:2,items:xn(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:ht(e)?r:o,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:f(Fn,e,t,n)})},Hn=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Wn=e=>Hn.concat((e=>{const t=dn(bt(e));return t.length>0?y.some({name:"class",type:"listbox",label:"Class",items:t}):y.none()})(e).toArray()),Gn=(e,t,n,r)=>{const o=r.getData();r.close(),e.undoManager.transact(()=>{((e,t,n,r)=>{const o=w(r,(e,t)=>n[t]!==e);if(S(o)>0){const n=M(o,"type"),i=!n||S(o)>1;i&&((e,t,n,r)=>{const o=1===t.length?v:r;N(t,t=>{const i=wn(e,t);((e,t,n)=>{n("class")&&e.setAttrib("class",t.class),n("height")&&e.setStyle("height",me(t.height))})(i,n,o),pt(e)&&((e,t,n)=>{n("backgroundcolor")&&e.setStyle("background-color",t.backgroundcolor),n("bordercolor")&&e.setStyle("border-color",t.bordercolor),n("borderstyle")&&e.setStyle("border-style",t.borderstyle)})(i,n,o),r("align")&&et(e,t,n.align)})})(e,t,r,f(M,o)),n&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,r),We(W.fromDom(t[0])).each(t=>tt(e,t.dom,{structure:n,style:i}))}})(e,t,n,o),e.focus()})},Un=e=>{const t=((e,t)=>{const n=Xt(e),r=n.bind(e=>We(e)).map(e=>Ge(e));return Te(n,r,(e,n)=>R(n,n=>D(Ht(n.dom.cells),n=>"1"===we(n,t)||j(n,e)))).getOr([])})(ve(e),jt.selected);if(0===t.length)return;const n=L(t,t=>((e,t,n)=>{const r=e.dom;return{height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:Bn(t),align:En(e,t),...n?Ln(t):{}}})(e,t.dom,pt(e))),r=Nn(n),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Wn(e)},_n(e,"row")]},i={type:"panel",items:[{type:"grid",columns:2,items:Wn(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:pt(e)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:f(Gn,e,L(t,e=>e.dom),r)})},jn=(e,t,n)=>{const r=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=gt(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},Yn=(e,t,n,o)=>{if("TD"===t.tagName||"TH"===t.tagName)r(n)&&s(o)?e.setStyle(t,n,o):e.setStyles(t,n);else if(t.children)for(let r=0;r<t.children.length;r++)Yn(e,t.children[r],n,o)},qn=(e,t,n,r)=>{const o=e.dom,i=r.getData(),s=w(i,(e,t)=>n[t]!==e);r.close(),""===i.class&&delete i.class,e.undoManager.transact(()=>{if(!t){const n=Pe(i.cols).getOr(1),r=Pe(i.rows).getOr(1);e.execCommand("mceInsertTable",!1,{rows:r,columns:n}),t=Xt(ve(e),ge(e)).bind(t=>We(t,ge(e))).map(e=>e.dom).getOrDie()}if(S(s)>0){const n={border:M(s,"border"),bordercolor:M(s,"bordercolor"),cellpadding:M(s,"cellpadding")};((e,t,n,r)=>{const o=e.dom,i={},s={},l=vt(e),u=ft(e);if(a(n.class)||(i.class=n.class),s.height=me(n.height),l?s.width=me(n.width):o.getAttrib(t,"width")&&(i.width=(e=>e?e.replace(/px$/,""):"")(n.width)),l?(s["border-width"]=me(n.border),s["border-spacing"]=me(n.cellspacing)):(i.border=n.border,i.cellpadding=n.cellpadding,i.cellspacing=n.cellspacing),l&&t.children){const e={};if(r.border&&(e["border-width"]=me(n.border)),r.cellpadding&&(e.padding=me(n.cellpadding)),u&&r.bordercolor&&(e["border-color"]=n.bordercolor),!(e=>{for(const t in e)if(x.call(e,t))return!1;return!0})(e))for(let n=0;n<t.children.length;n++)Yn(o,t.children[n],e)}if(u){const e=n;s["background-color"]=e.backgroundcolor,s["border-color"]=e.bordercolor,s["border-style"]=e.borderstyle}o.setStyles(t,{...Tt(e),...s}),o.setAttribs(t,{...kt(e),...i})})(e,t,i,n);const r=o.select("caption",t)[0];(r&&!i.caption||!r&&i.caption)&&e.execCommand("mceTableToggleCaption"),et(e,t,i.align)}if(e.focus(),e.addVisual(),S(s)>0){const n=M(s,"caption"),r=!n||S(s)>1;tt(e,t,{structure:n,style:r})}})},Xn=(e,t)=>{const n=e.dom;let r,o=((e,t)=>{const n=Tt(e),r=kt(e),o=t?{borderstyle:C(n,"border-style").getOr(""),bordercolor:Pn(C(n,"border-color").getOr("")),backgroundcolor:Pn(C(n,"background-color").getOr(""))}:{};return{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:"",...n,...r,...o,...(()=>{const t=n["border-width"];return vt(e)&&t?{border:t}:C(r,"border").fold(()=>({}),e=>({border:e}))})(),...{...C(n,"border-spacing").or(C(r,"cellspacing")).fold(()=>({}),e=>({cellspacing:e})),...C(n,"border-padding").or(C(r,"cellpadding")).fold(()=>({}),e=>({cellpadding:e}))}}})(e,ft(e));t?(o.cols="1",o.rows="1",ft(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(r=n.getParent(e.selection.getStart(),"table",e.getBody()),r?o=((e,t,n)=>{const r=e.dom,o=vt(e)?r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"):r.getAttrib(t,"cellspacing")||r.getStyle(t,"border-spacing"),i=vt(e)?Qe(r,t,"padding")||r.getAttrib(t,"cellpadding"):r.getAttrib(t,"cellpadding")||Qe(r,t,"padding");return{width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:null!=o?o:"",cellpadding:null!=i?i:"",border:((t,n)=>{const r=Ee(W.fromDom(n),"border-width");return vt(e)&&r.isSome()?r.getOr(""):t.getAttrib(n,"border")||Qe(e.dom,n,"border-width")||Qe(e.dom,n,"border")||""})(r,t),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class",""),align:En(e,t),...n?Ln(t):{}}})(e,r,ft(e)):ft(e)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));const i=dn(xt(e));i.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));const a={type:"grid",columns:2,items:jn(e,i,t)},s=ft(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},_n(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:s,onSubmit:f(qn,e,r,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Zn=h,$n=e=>{const t=(e,t)=>Se(e,t).exists(e=>parseInt(e,10)>1);return e.length>0&&z(e,e=>t(e,"rowspan")||t(e,"colspan"))?y.some(e):y.none()},Kn=(e,t,n)=>{return t.length<=1?y.none():(r=e,o=n.firstSelectedSelector,i=n.lastSelectedSelector,((e,t,n)=>de(e,t).bind(t=>de(e,n).bind(e=>{return(n=Vt,r=[t,e],((e,t,n)=>n.length>0?((e,t,n,r)=>r(e,t,n[0],n.slice(1)))(e,t,n,Bt):y.none())(Ft,(e,t)=>n(t),r)).map(n=>({first:t,last:e,table:n}));var n,r})))(r,o,i).bind(e=>{const t=e=>j(r,e),n="thead,tfoot,tbody,table",o=ce(e.first,n,t),i=ce(e.last,n,t);return o.bind(t=>i.bind(n=>j(t,n)?((e,t,n)=>((e,t,n)=>((e,t,n)=>{const r=$e(e,t,j),o=$e(e,n,j);return r.bind(e=>o.map(t=>{return n=e,r=t,{startRow:Math.min(n.row,r.row),startCol:Math.min(n.column,r.column),finishRow:Math.max(n.row+n.rowspan-1,r.row+r.rowspan-1),finishCol:Math.max(n.column+n.colspan-1,r.column+r.colspan-1)};var n,r}))})(e,t,n).bind(t=>((e,t)=>{let n=!0;const r=f(It,t);for(let o=t.startRow;o<=t.finishRow;o++)for(let i=t.startCol;i<=t.finishCol;i++)n=n&&Ze(e,o,i).exists(r);return n?y.some(t):y.none()})(e,t)))(At(e),t,n))(e.table,e.first,e.last):y.none()))})).map(e=>({bounds:e,cells:t}));var r,o,i},Jn=e=>{const t=ln(y.none()),n=ln([]);let r=y.none();const o=ee("caption"),i=e=>r.forall(t=>!t[e]),a=()=>qt(ve(e),ge(e)).bind(t=>{return n=Te(We(t),qt((e=>W.fromDom(e.selection.getEnd()))(e),ge(e)).bind(We),(n,r)=>j(n,r)?o(t)?y.some((e=>({element:e,mergable:y.none(),unmergable:y.none(),selection:[e]}))(t)):y.some(((e,t,n)=>({element:n,mergable:Kn(t,e,jt),unmergable:$n(e),selection:Zn(e)}))(Zt(e),n,t)):y.none()),n.bind(h);var n}),s=e=>We(e.element).map(t=>{const n=Xe(t),r=Tn(n,e).getOr([]),o=E(r,(e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=n.grid.columns&&(e.onLast=!0)),e),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:In(n,e).isSome(),unmergeable:An(n,e).isSome(),locked:o}}),l=()=>{t.set((e=>{let t,n=!1;return(...r)=>(n||(n=!0,t=e.apply(null,r)),t)})(a)()),r=t.get().bind(s),N(n.get(),g)},u=e=>(e(),n.set(n.get().concat([e])),()=>{n.set(R(n.get(),t=>t!==e))}),c=(n,r)=>u(()=>t.get().fold(()=>{n.setEnabled(!1)},t=>{n.setEnabled(!r(t)&&e.selection.isEditable())})),d=(n,r,o)=>u(()=>t.get().fold(()=>{n.setEnabled(!1),n.setActive(!1)},t=>{n.setEnabled(!r(t)&&e.selection.isEditable()),n.setActive(o(t))})),p=e=>r.exists(t=>t.locked[e]),f=(t,n)=>r=>d(r,e=>o(e.element),()=>e.queryCommandValue(t)===n),v=f("mceTableRowType","header"),b=f("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",l),{onSetupTable:e=>c(e,e=>!1),onSetupCellOrRow:e=>c(e,e=>o(e.element)),onSetupColumn:e=>t=>c(t,t=>o(t.element)||p(e)),onSetupPasteable:e=>t=>c(t,t=>o(t.element)||e().isNone()),onSetupPasteableColumn:(e,t)=>n=>c(n,n=>o(n.element)||e().isNone()||p(t)),onSetupMergeable:e=>c(e,e=>i("mergeable")),onSetupUnmergeable:e=>c(e,e=>i("unmergeable")),resetTargets:l,onSetupTableWithCaption:t=>d(t,m,t=>We(t.element,ge(e)).exists(e=>((e,t)=>((e,n)=>O(e.dom.childNodes,e=>{return n=W.fromDom(e),G(n,t);var n}).map(W.fromDom))(e))(e,"caption").isSome())),onSetupTableRowHeaders:v,onSetupTableColumnHeaders:b,targets:t.get}};var Qn=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const er=e=>{var t;const n=null!==(t=Qn.read())&&void 0!==t?t:[];return V(n,t=>y.from(t.getType(e)))},tr=()=>er("x-tinymce/dom-table-rows"),nr=()=>er("x-tinymce/dom-table-columns"),rr=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}},or=e=>t=>{const n=()=>{t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),()=>{e.off("NodeChange",n)}};e.add("table",e=>{const t=Jn(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:ot}),t("table_border_styles",{processor:"object[]",default:it}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!rt.deviceType.isTouch()}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),(e=>{_({mceTableProps:f(Xn,e,!1),mceTableRowProps:f(Un,e),mceTableCellProps:f(Vn,e),mceInsertTableDialog:f(Xn,e,!0)},(t,n)=>e.addCommand(n,()=>{return n=t,void((e=>{return(t=e,n=ee("table"),le((e,t)=>t(e),ue,t,n,void 0)).forall(pe);var t,n})(ve(e))&&n());var n}))})(e),((e,t)=>{const n=t=>()=>e.execCommand(t),r=(t,r)=>!!e.queryCommandSupported(r.command)&&(e.ui.registry.addMenuItem(t,{...r,onAction:l(r.onAction)?r.onAction:n(r.command)}),!0),o=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addToggleMenuItem(t,{...r,onAction:l(r.onAction)?r.onAction:n(r.command)})},i=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},a=[r("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),r("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),r("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),r("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),r("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),r("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),r("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(tr)}),r("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(tr)})],s=[r("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),r("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),r("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),r("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),r("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),r("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(nr,"onFirst")}),r("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(nr,"onLast")})],u=[r("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),r("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),r("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];mt(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}],onSetup:or(e)}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:n("mceInsertTableDialog"),onSetup:or(e)}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:n("mceInsertTableDialog"),onSetup:or(e)}),r("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),r("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),A(a,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:d("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),A(s,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:d("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),A(u,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:d("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(d(""),e=>"caption"===q(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const c=fn(xt(e));0!==c.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>hn(e,c,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});const h=fn(yt(e));0!==h.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>hn(e,h,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>hn(e,$t,"tablecellverticalalign",pn(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>hn(e,ct(e),"tablecellborderwidth",pn(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>hn(e,dt(e),"tablecellborderstyle",pn(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>mn(e,wt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>mn(e,St(e),"border-color"),onSetup:t.onSetupCellOrRow})),o("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),o("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:vn(e),onSetup:t.onSetupTableRowHeaders}),o("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:yn(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:rr(e),fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const n=t=>()=>e.execCommand(t),r=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addButton(t,{...r,onAction:l(r.onAction)?r.onAction:n(r.command)})},o=(t,r)=>{e.queryCommandSupported(r.command)&&e.ui.registry.addToggleButton(t,{...r,onAction:l(r.onAction)?r.onAction:n(r.command)})};r("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),r("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),r("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),r("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),r("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),r("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),r("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),r("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),r("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),r("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),r("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),r("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),r("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),r("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),r("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(tr)}),r("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(tr)}),r("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),r("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),r("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(nr,"onFirst")}),r("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(nr,"onLast")}),r("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:rr(e)});const i=fn(xt(e));0!==i.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:gn(e,i,"tableclass",t=>e.execCommand("mceTableToggleClass",!1,t)),onSetup:t.onSetupTable});const a=fn(yt(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:gn(e,a,"tablecellclass",t=>e.execCommand("mceTableCellToggleClass",!1,t)),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:gn(e,$t,"tablecellverticalalign",pn(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:gn(e,ct(e),"tablecellborderwidth",pn(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:gn(e,dt(e),"tablecellborderstyle",pn(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t(mn(e,wt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t(mn(e,St(e),"border-color")),onSetup:t.onSetupCellOrRow})),o("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),o("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:vn(e),onSetup:t.onSetupTableRowHeaders}),o("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:yn(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=_t(e);t.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t=>e.dom.is(t,"table")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:t,scope:"node",position:"node"})})(e)})}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).echarts={})}(this,function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},o=new function(){this.browser=new r,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(o.wxa=!0,o.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?o.worker=!0:"undefined"==typeof navigator?(o.node=!0,o.svgSupported=!0):function(e,t){var n=t.browser,r=e.match(/Firefox\/([\d.]+)/),o=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),i=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);r&&(n.firefox=!0,n.version=r[1]),o&&(n.ie=!0,n.version=o[1]),i&&(n.edge=!0,n.version=i[1],n.newEdge=+i[1].split(".")[0]>18),a&&(n.weChat=!0),t.svgSupported="undefined"!=typeof SVGRect,t.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,t.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),t.domSupported="undefined"!=typeof document;var s=document.documentElement.style;t.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||n.ie&&+n.version>=9}(navigator.userAgent,o);var i,a,s="sans-serif",l="12px "+s,u=function(e){var t={};if("undefined"==typeof JSON)return t;for(var n=0;n<e.length;n++){var r=String.fromCharCode(n+32),o=(e.charCodeAt(n)-20)/100;t[r]=o}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),c={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(e,t){if(!i){var n=c.createCanvas();i=n&&n.getContext("2d")}if(i)return a!==t&&(a=i.font=t||l),i.measureText(e);e=e||"";var r=/(\d+)px/.exec(t=t||l),o=r&&+r[1]||12,s=0;if(t.indexOf("mono")>=0)s=o*e.length;else for(var d=0;d<e.length;d++){var h=u[e[d]];s+=null==h?o:h*o}return{width:s}},loadImage:function(e,t,n){var r=new Image;return r.onload=t,r.onerror=n,r.src=e,r}};function d(e){for(var t in c)e[t]&&(c[t]=e[t])}var h=z(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),p=z(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),f=Object.prototype.toString,g=Array.prototype,m=g.forEach,v=g.filter,y=g.slice,b=g.map,x=function(){}.constructor,_=x?x.prototype:null,w="__proto__",S=2311;function C(){return S++}function M(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];"undefined"!=typeof console&&console.error.apply(console,e)}function T(e){if(null==e||"object"!=typeof e)return e;var t=e,n=f.call(e);if("[object Array]"===n){if(!he(e)){t=[];for(var r=0,o=e.length;r<o;r++)t[r]=T(e[r])}}else if(p[n]){if(!he(e)){var i=e.constructor;if(i.from)t=i.from(e);else for(t=new i(e.length),r=0,o=e.length;r<o;r++)t[r]=e[r]}}else if(!h[n]&&!he(e)&&!J(e))for(var a in t={},e)e.hasOwnProperty(a)&&a!==w&&(t[a]=T(e[a]));return t}function k(e,t,n){if(!Z(t)||!Z(e))return n?T(t):e;for(var r in t)if(t.hasOwnProperty(r)&&r!==w){var o=e[r],i=t[r];!Z(i)||!Z(o)||U(i)||U(o)||J(i)||J(o)||$(i)||$(o)||he(i)||he(o)?!n&&r in e||(e[r]=T(t[r])):k(o,i,n)}return e}function I(e,t){for(var n=e[0],r=1,o=e.length;r<o;r++)n=k(n,e[r],t);return n}function A(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)t.hasOwnProperty(n)&&n!==w&&(e[n]=t[n]);return e}function D(e,t,n){for(var r=H(t),o=0;o<r.length;o++){var i=r[o];(n?null!=t[i]:null==e[i])&&(e[i]=t[i])}return e}var P=c.createCanvas;function L(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1}function N(e,t){var n=e.prototype;function r(){}for(var o in r.prototype=t.prototype,e.prototype=new r,n)n.hasOwnProperty(o)&&(e.prototype[o]=n[o]);e.prototype.constructor=e,e.superClass=t}function R(e,t,n){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var i=r[o];"constructor"!==i&&(n?null!=t[i]:null==e[i])&&(e[i]=t[i])}else D(e,t,n)}function E(e){return!!e&&"string"!=typeof e&&"number"==typeof e.length}function O(e,t,n){if(e&&t)if(e.forEach&&e.forEach===m)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function B(e,t,n){if(!e)return[];if(!t)return ae(e);if(e.map&&e.map===b)return e.map(t,n);for(var r=[],o=0,i=e.length;o<i;o++)r.push(t.call(n,e[o],o,e));return r}function z(e,t,n,r){if(e&&t){for(var o=0,i=e.length;o<i;o++)n=t.call(r,n,e[o],o,e);return n}}function F(e,t,n){if(!e)return[];if(!t)return ae(e);if(e.filter&&e.filter===v)return e.filter(t,n);for(var r=[],o=0,i=e.length;o<i;o++)t.call(n,e[o],o,e)&&r.push(e[o]);return r}function V(e,t,n){if(e&&t)for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return e[r]}function H(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}var W=_&&j(_.bind)?_.call.bind(_.bind):function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return e.apply(t,n.concat(y.call(arguments)))}};function G(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(this,t.concat(y.call(arguments)))}}function U(e){return Array.isArray?Array.isArray(e):"[object Array]"===f.call(e)}function j(e){return"function"==typeof e}function Y(e){return"string"==typeof e}function q(e){return"[object String]"===f.call(e)}function X(e){return"number"==typeof e}function Z(e){var t=typeof e;return"function"===t||!!e&&"object"===t}function $(e){return!!h[f.call(e)]}function K(e){return!!p[f.call(e)]}function J(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function Q(e){return null!=e.colorStops}function ee(e){return null!=e.image}function te(e){return"[object RegExp]"===f.call(e)}function ne(e){return e!=e}function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++)if(null!=e[n])return e[n]}function oe(e,t){return null!=e?e:t}function ie(e,t,n){return null!=e?e:null!=t?t:n}function ae(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return y.apply(e,t)}function se(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function le(e,t){if(!e)throw new Error(t)}function ue(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var ce="__ec_primitive__";function de(e){e[ce]=!0}function he(e){return e[ce]}var pe=function(){function e(){this.data={}}return e.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},e.prototype.has=function(e){return this.data.hasOwnProperty(e)},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.data[e]=t,this},e.prototype.keys=function(){return H(this.data)},e.prototype.forEach=function(e){var t=this.data;for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},e}(),fe="function"==typeof Map,ge=function(){function e(t){var n=U(t);this.data=fe?new Map:new pe;var r=this;function o(e,t){n?r.set(e,t):r.set(t,e)}t instanceof e?t.each(o):t&&O(t,o)}return e.prototype.hasKey=function(e){return this.data.has(e)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.set=function(e,t){return this.data.set(e,t),t},e.prototype.each=function(e,t){this.data.forEach(function(n,r){e.call(t,n,r)})},e.prototype.keys=function(){var e=this.data.keys();return fe?Array.from(e):e},e.prototype.removeKey=function(e){this.data.delete(e)},e}();function me(e){return new ge(e)}function ve(e,t){for(var n=new e.constructor(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];var o=e.length;for(r=0;r<t.length;r++)n[r+o]=t[r];return n}function ye(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&A(n,t),n}function be(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function xe(e,t){return e.hasOwnProperty(t)}function _e(){}var we=180/Math.PI,Se=Object.freeze({__proto__:null,guid:C,logError:M,clone:T,merge:k,mergeAll:I,extend:A,defaults:D,createCanvas:P,indexOf:L,inherits:N,mixin:R,isArrayLike:E,each:O,map:B,reduce:z,filter:F,find:V,keys:H,bind:W,curry:G,isArray:U,isFunction:j,isString:Y,isStringSafe:q,isNumber:X,isObject:Z,isBuiltInObject:$,isTypedArray:K,isDom:J,isGradientObject:Q,isImagePatternObject:ee,isRegExp:te,eqNaN:ne,retrieve:re,retrieve2:oe,retrieve3:ie,slice:ae,normalizeCssArray:se,assert:le,trim:ue,setAsPrimitive:de,isPrimitive:he,HashMap:ge,createHashMap:me,concatArray:ve,createObject:ye,disableUserSelect:be,hasOwn:xe,noop:_e,RADIAN_TO_DEGREE:we});function Ce(e,t){return null==e&&(e=0),null==t&&(t=0),[e,t]}function Me(e,t){return e[0]=t[0],e[1]=t[1],e}function Te(e){return[e[0],e[1]]}function ke(e,t,n){return e[0]=t,e[1]=n,e}function Ie(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Ae(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function De(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Pe(e){return Math.sqrt(Ne(e))}var Le=Pe;function Ne(e){return e[0]*e[0]+e[1]*e[1]}var Re=Ne;function Ee(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Oe(e,t){var n=Pe(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function Be(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var ze=Be;function Fe(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Ve=Fe;function He(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}function We(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e}function Ge(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function Ue(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var je=Object.freeze({__proto__:null,create:Ce,copy:Me,clone:Te,set:ke,add:Ie,scaleAndAdd:Ae,sub:De,len:Pe,length:Le,lenSquare:Ne,lengthSquare:Re,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:Ee,normalize:Oe,distance:Be,dist:ze,distanceSquare:Fe,distSquare:Ve,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:He,applyTransform:We,min:Ge,max:Ue}),Ye=function(e,t){this.target=e,this.topTarget=t&&t.topTarget},qe=function(){function e(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Ye(t,e),"dragstart",e.event))},e.prototype._drag=function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,r=e.offsetY,o=n-this._x,i=r-this._y;this._x=n,this._y=r,t.drift(o,i,e),this.handler.dispatchToElement(new Ye(t,e),"drag",e.event);var a=this.handler.findHover(n,r,t).target,s=this._dropTarget;this._dropTarget=a,t!==a&&(s&&a!==s&&this.handler.dispatchToElement(new Ye(s,e),"dragleave",e.event),a&&a!==s&&this.handler.dispatchToElement(new Ye(a,e),"dragenter",e.event))}},e.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Ye(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Ye(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},e}(),Xe=function(){function e(e){e&&(this._$eventProcessor=e)}return e.prototype.on=function(e,t,n,r){this._$handlers||(this._$handlers={});var o=this._$handlers;if("function"==typeof t&&(r=n,n=t,t=null),!n||!e)return this;var i=this._$eventProcessor;null!=t&&i&&i.normalizeQuery&&(t=i.normalizeQuery(t)),o[e]||(o[e]=[]);for(var a=0;a<o[e].length;a++)if(o[e][a].h===n)return this;var s={h:n,query:t,ctx:r||this,callAtLast:n.zrEventfulCallAtLast},l=o[e].length-1,u=o[e][l];return u&&u.callAtLast?o[e].splice(l,0,s):o[e].push(s),this},e.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},e.prototype.off=function(e,t){var n=this._$handlers;if(!n)return this;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var r=[],o=0,i=n[e].length;o<i;o++)n[e][o].h!==t&&r.push(n[e][o]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[e],o=this._$eventProcessor;if(r)for(var i=t.length,a=r.length,s=0;s<a;s++){var l=r[s];if(!o||!o.filter||null==l.query||o.filter(e,l.query))switch(i){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,t[0]);break;case 2:l.h.call(l.ctx,t[0],t[1]);break;default:l.h.apply(l.ctx,t)}}return o&&o.afterTrigger&&o.afterTrigger(e),this},e.prototype.triggerWithContext=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this._$handlers)return this;var r=this._$handlers[e],o=this._$eventProcessor;if(r)for(var i=t.length,a=t[i-1],s=r.length,l=0;l<s;l++){var u=r[l];if(!o||!o.filter||null==u.query||o.filter(e,u.query))switch(i){case 0:u.h.call(a);break;case 1:u.h.call(a,t[0]);break;case 2:u.h.call(a,t[0],t[1]);break;default:u.h.apply(a,t.slice(1,i-1))}}return o&&o.afterTrigger&&o.afterTrigger(e),this},e}(),Ze=Math.log(2);function $e(e,t,n,r,o,i){var a=r+"-"+o,s=e.length;if(i.hasOwnProperty(a))return i[a];if(1===t){var l=Math.round(Math.log((1<<s)-1&~o)/Ze);return e[n][l]}for(var u=r|1<<n,c=n+1;r&1<<c;)c++;for(var d=0,h=0,p=0;h<s;h++){var f=1<<h;f&o||(d+=(p%2?-1:1)*e[n][h]*$e(e,t-1,c,u,o|f,i),p++)}return i[a]=d,d}function Ke(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},o=$e(n,8,0,0,0,r);if(0!==o){for(var i=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==i[s]&&(i[s]=0),i[s]+=((a+s)%2?-1:1)*$e(n,7,0===a?1:0,1<<a,1<<s,r)/o*t[a];return function(e,t,n){var r=t*i[6]+n*i[7]+1;e[0]=(t*i[0]+n*i[1]+i[2])/r,e[1]=(t*i[3]+n*i[4]+i[5])/r}}}var Je="___zrEVENTSAVED",Qe=[];function et(e,t,n,r,i){if(t.getBoundingClientRect&&o.domSupported&&!tt(t)){var a=t[Je]||(t[Je]={}),s=function(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var r=["left","right"],o=["top","bottom"],i=0;i<4;i++){var a=document.createElement("div"),s=i%2,l=(i>>1)%2;a.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[s]+":0",o[l]+":0",r[1-s]+":auto",o[1-l]+":auto",""].join("!important;"),e.appendChild(a),n.push(a)}return n}(t,a),l=function(e,t,n){for(var r=n?"invTrans":"trans",o=t[r],i=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),d=2*u,h=c.left,p=c.top;a.push(h,p),l=l&&i&&h===i[d]&&p===i[d+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&o?o:(t.srcCoords=a,t[r]=n?Ke(s,a):Ke(a,s))}(s,a,i);if(l)return l(e,n,r),!0}return!1}function tt(e){return"CANVAS"===e.nodeName.toUpperCase()}var nt=/([&<>"'])/g,rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ot(e){return null==e?"":(e+"").replace(nt,function(e,t){return rt[t]})}var it=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,at=[],st=o.browser.firefox&&+o.browser.version.split(".")[0]<39;function lt(e,t,n,r){return n=n||{},r?ut(e,t,n):st&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):ut(e,t,n),n}function ut(e,t,n){if(o.domSupported&&e.getBoundingClientRect){var r=t.clientX,i=t.clientY;if(tt(e)){var a=e.getBoundingClientRect();return n.zrX=r-a.left,void(n.zrY=i-a.top)}if(et(at,e,r,i))return n.zrX=at[0],void(n.zrY=at[1])}n.zrX=n.zrY=0}function ct(e){return e||window.event}function dt(e,t,n){if(null!=(t=ct(t)).zrX)return t;var r=t.type;if(r&&r.indexOf("touch")>=0){var o="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];o&&lt(e,o,t,n)}else{lt(e,t,t,n);var i=function(e){var t=e.wheelDelta;if(t)return t;var n=e.deltaX,r=e.deltaY;return null==n||null==r?t:3*(0!==r?Math.abs(r):Math.abs(n))*(r>0?-1:r<0?1:n>0?-1:1)}(t);t.zrDelta=i?i/120:-(t.detail||0)/3}var a=t.button;return null==t.which&&void 0!==a&&it.test(t.type)&&(t.which=1&a?1:2&a?3:4&a?2:0),t}function ht(e,t,n,r){e.addEventListener(t,n,r)}var pt=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function ft(e){return 2===e.which||3===e.which}var gt=function(){function e(){this._track=[]}return e.prototype.recognize=function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(e,t,n){var r=e.touches;if(r){for(var o={points:[],touches:[],target:t,event:e},i=0,a=r.length;i<a;i++){var s=r[i],l=lt(n,s,{});o.points.push([l.zrX,l.zrY]),o.touches.push(s)}this._track.push(o)}},e.prototype._recognize=function(e){for(var t in vt)if(vt.hasOwnProperty(t)){var n=vt[t](this._track,e);if(n)return n}},e}();function mt(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}var vt={pinch:function(e,t){var n=e.length;if(n){var r,o=(e[n-1]||{}).points,i=(e[n-2]||{}).points||o;if(i&&i.length>1&&o&&o.length>1){var a=mt(o)/mt(i);!isFinite(a)&&(a=1),t.pinchScale=a;var s=[((r=o)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}};function yt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function bt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function xt(e,t,n){var r=t[0]*n[0]+t[2]*n[1],o=t[1]*n[0]+t[3]*n[1],i=t[0]*n[2]+t[2]*n[3],a=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e}function _t(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function wt(e,t,n){var r=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=-r*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*i+u*l,e[5]=c*l-u*i,e}function St(e,t,n){var r=n[0],o=n[1];return e[0]=t[0]*r,e[1]=t[1]*o,e[2]=t[2]*r,e[3]=t[3]*o,e[4]=t[4]*r,e[5]=t[5]*o,e}function Ct(e,t){var n=t[0],r=t[2],o=t[4],i=t[1],a=t[3],s=t[5],l=n*a-i*r;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-a*o)*l,e[5]=(i*o-n*s)*l,e):null}function Mt(e){var t=[1,0,0,1,0,0];return bt(t,e),t}var Tt=Object.freeze({__proto__:null,create:function(){return[1,0,0,1,0,0]},identity:yt,copy:bt,mul:xt,translate:_t,rotate:wt,scale:St,invert:Ct,clone:Mt}),kt=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(e,t){return this.x=e,this.y=t,this},e.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},e.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},e.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.dot=function(e){return this.x*e.x+this.y*e.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},e.prototype.distance=function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)},e.prototype.distanceSquare=function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(e){if(e){var t=this.x,n=this.y;return this.x=e[0]*t+e[2]*n+e[4],this.y=e[1]*t+e[3]*n+e[5],this}},e.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},e.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},e.set=function(e,t,n){e.x=t,e.y=n},e.copy=function(e,t){e.x=t.x,e.y=t.y},e.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.lenSquare=function(e){return e.x*e.x+e.y*e.y},e.dot=function(e,t){return e.x*t.x+e.y*t.y},e.add=function(e,t,n){e.x=t.x+n.x,e.y=t.y+n.y},e.sub=function(e,t,n){e.x=t.x-n.x,e.y=t.y-n.y},e.scale=function(e,t,n){e.x=t.x*n,e.y=t.y*n},e.scaleAndAdd=function(e,t,n,r){e.x=t.x+n.x*r,e.y=t.y+n.y*r},e.lerp=function(e,t,n,r){var o=1-r;e.x=o*t.x+r*n.x,e.y=o*t.y+r*n.y},e}(),It=Math.min,At=Math.max,Dt=new kt,Pt=new kt,Lt=new kt,Nt=new kt,Rt=new kt,Et=new kt,Ot=function(){function e(e,t,n,r){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r),this.x=e,this.y=t,this.width=n,this.height=r}return e.prototype.union=function(e){var t=It(e.x,this.x),n=It(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=At(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=At(e.y+e.height,this.y+this.height)-n:this.height=e.height,this.x=t,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(e){var t=this,n=e.width/t.width,r=e.height/t.height,o=[1,0,0,1,0,0];return _t(o,o,[-t.x,-t.y]),St(o,o,[n,r]),_t(o,o,[e.x,e.y]),o},e.prototype.intersect=function(t,n){if(!t)return!1;t instanceof e||(t=e.create(t));var r=this,o=r.x,i=r.x+r.width,a=r.y,s=r.y+r.height,l=t.x,u=t.x+t.width,c=t.y,d=t.y+t.height,h=!(i<l||u<o||s<c||d<a);if(n){var p=1/0,f=0,g=Math.abs(i-l),m=Math.abs(u-o),v=Math.abs(s-c),y=Math.abs(d-a),b=Math.min(g,m),x=Math.min(v,y);i<l||u<o?b>f&&(f=b,g<m?kt.set(Et,-g,0):kt.set(Et,m,0)):b<p&&(p=b,g<m?kt.set(Rt,g,0):kt.set(Rt,-m,0)),s<c||d<a?x>f&&(f=x,v<y?kt.set(Et,0,-v):kt.set(Et,0,y)):b<p&&(p=b,v<y?kt.set(Rt,0,v):kt.set(Rt,0,-y))}return n&&kt.copy(n,h?Rt:Et),h},e.prototype.contain=function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return 0===this.width||0===this.height},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},e.applyTransform=function(t,n,r){if(r){if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var o=r[0],i=r[3],a=r[4],s=r[5];return t.x=n.x*o+a,t.y=n.y*i+s,t.width=n.width*o,t.height=n.height*i,t.width<0&&(t.x+=t.width,t.width=-t.width),void(t.height<0&&(t.y+=t.height,t.height=-t.height))}Dt.x=Lt.x=n.x,Dt.y=Nt.y=n.y,Pt.x=Nt.x=n.x+n.width,Pt.y=Lt.y=n.y+n.height,Dt.transform(r),Nt.transform(r),Pt.transform(r),Lt.transform(r),t.x=It(Dt.x,Pt.x,Lt.x,Nt.x),t.y=It(Dt.y,Pt.y,Lt.y,Nt.y);var l=At(Dt.x,Pt.x,Lt.x,Nt.x),u=At(Dt.y,Pt.y,Lt.y,Nt.y);t.width=l-t.x,t.height=u-t.y}else t!==n&&e.copy(t,n)},e}(),Bt="silent";function zt(){pt(this.event)}var Ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handler=null,t}return n(t,e),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Xe),Vt=function(e,t){this.x=e,this.y=t},Ht=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Wt=new Ot(0,0,0,0),Gt=function(e){function t(t,n,r,o,i){var a=e.call(this)||this;return a._hovered=new Vt(0,0),a.storage=t,a.painter=n,a.painterRoot=o,a._pointerSize=i,r=r||new Ft,a.proxy=null,a.setHandlerProxy(r),a._draggingMgr=new qe(a),a}return n(t,e),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(O(Ht,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var t=e.zrX,n=e.zrY,r=Yt(this,t,n),o=this._hovered,i=o.target;i&&!i.__zr&&(i=(o=this.findHover(o.x,o.y)).target);var a=this._hovered=r?new Vt(t,n):this.findHover(t,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),i&&s!==i&&this.dispatchToElement(o,"mouseout",e),this.dispatchToElement(a,"mousemove",e),s&&s!==i&&this.dispatchToElement(a,"mouseover",e)},t.prototype.mouseout=function(e){var t=e.zrEventControl;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new Vt(0,0)},t.prototype.dispatch=function(e,t){var n=this[e];n&&n.call(this,t)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},t.prototype.dispatchToElement=function(e,t,n){var r=(e=e||{}).target;if(!r||!r.silent){for(var o="on"+t,i=function(e,t,n){return{type:e,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:zt}}(t,e,n);r&&(r[o]&&(i.cancelBubble=!!r[o].call(r,i)),r.trigger(t,i),r=r.__hostTarget?r.__hostTarget:r.parent,!i.cancelBubble););i.cancelBubble||(this.trigger(t,i),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(e){"function"==typeof e[o]&&e[o].call(e,i),e.trigger&&e.trigger(t,i)}))}},t.prototype.findHover=function(e,t,n){var r=this.storage.getDisplayList(),o=new Vt(e,t);if(jt(r,o,e,t,n),this._pointerSize&&!o.target){for(var i=[],a=this._pointerSize,s=a/2,l=new Ot(e-s,t-s,a,a),u=r.length-1;u>=0;u--){var c=r[u];c===n||c.ignore||c.ignoreCoarsePointer||c.parent&&c.parent.ignoreCoarsePointer||(Wt.copy(c.getBoundingRect()),c.transform&&Wt.applyTransform(c.transform),Wt.intersect(l)&&i.push(c))}if(i.length)for(var d=Math.PI/12,h=2*Math.PI,p=0;p<s;p+=4)for(var f=0;f<h;f+=d)if(jt(i,o,e+p*Math.cos(f),t+p*Math.sin(f),n),o.target)return o}return o},t.prototype.processGesture=function(e,t){this._gestureMgr||(this._gestureMgr=new gt);var n=this._gestureMgr;"start"===t&&n.clear();var r=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),r){var o=r.type;e.gestureEvent=o;var i=new Vt;i.target=r.target,this.dispatchToElement(i,o,r.event)}},t}(Xe);function Ut(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var r=e,o=void 0,i=!1;r;){if(r.ignoreClip&&(i=!0),!i){var a=r.getClipPath();if(a&&!a.contain(t,n))return!1;r.silent&&(o=!0)}r=r.__hostTarget||r.parent}return!o||Bt}return!1}function jt(e,t,n,r,o){for(var i=e.length-1;i>=0;i--){var a=e[i],s=void 0;if(a!==o&&!a.ignore&&(s=Ut(a,n,r))&&(!t.topTarget&&(t.topTarget=a),s!==Bt)){t.target=a;break}}}function Yt(e,t,n){var r=e.painter;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}function qt(e,t,n,r){var o=t+1;if(o===n)return 1;if(r(e[o++],e[t])<0){for(;o<n&&r(e[o],e[o-1])<0;)o++;!function(e,t,n){for(n--;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}}(e,t,o)}else for(;o<n&&r(e[o],e[o-1])>=0;)o++;return o-t}function Xt(e,t,n,r,o){for(r===t&&r++;r<n;r++){for(var i,a=e[r],s=t,l=r;s<l;)o(a,e[i=s+l>>>1])<0?l=i:s=i+1;var u=r-s;switch(u){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;u>0;)e[s+u]=e[s+u-1],u--}e[s]=a}}function Zt(e,t,n,r,o,i){var a=0,s=0,l=1;if(i(e,t[n+o])>0){for(s=r-o;l<s&&i(e,t[n+o+l])>0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=o,l+=o}else{for(s=o+1;l<s&&i(e,t[n+o-l])<=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=a;a=o-l,l=o-u}for(a++;a<l;){var c=a+(l-a>>>1);i(e,t[n+c])>0?a=c+1:l=c}return l}function $t(e,t,n,r,o,i){var a=0,s=0,l=1;if(i(e,t[n+o])<0){for(s=o+1;l<s&&i(e,t[n+o-l])<0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=a;a=o-l,l=o-u}else{for(s=r-o;l<s&&i(e,t[n+o+l])>=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=o,l+=o}for(a++;a<l;){var c=a+(l-a>>>1);i(e,t[n+c])<0?l=c:a=c+1}return l}function Kt(e,t,n,r){n||(n=0),r||(r=e.length);var o=r-n;if(!(o<2)){var i=0;if(o<32)Xt(e,n,r,n+(i=qt(e,n,r,t)),t);else{var a=function(e,t){var n,r,o=7,i=0;e.length;var a=[];function s(s){var l=n[s],u=r[s],c=n[s+1],d=r[s+1];r[s]=u+d,s===i-3&&(n[s+1]=n[s+2],r[s+1]=r[s+2]),i--;var h=$t(e[c],e,l,u,0,t);l+=h,0!=(u-=h)&&0!==(d=Zt(e[l+u-1],e,c,d,d-1,t))&&(u<=d?function(n,r,i,s){var l=0;for(l=0;l<r;l++)a[l]=e[n+l];var u=0,c=i,d=n;if(e[d++]=e[c++],0!=--s)if(1!==r){for(var h,p,f,g=o;;){h=0,p=0,f=!1;do{if(t(e[c],a[u])<0){if(e[d++]=e[c++],p++,h=0,0==--s){f=!0;break}}else if(e[d++]=a[u++],h++,p=0,1==--r){f=!0;break}}while((h|p)<g);if(f)break;do{if(0!==(h=$t(e[c],a,u,r,0,t))){for(l=0;l<h;l++)e[d+l]=a[u+l];if(d+=h,u+=h,(r-=h)<=1){f=!0;break}}if(e[d++]=e[c++],0==--s){f=!0;break}if(0!==(p=Zt(a[u],e,c,s,0,t))){for(l=0;l<p;l++)e[d+l]=e[c+l];if(d+=p,c+=p,0==(s-=p)){f=!0;break}}if(e[d++]=a[u++],1==--r){f=!0;break}g--}while(h>=7||p>=7);if(f)break;g<0&&(g=0),g+=2}if((o=g)<1&&(o=1),1===r){for(l=0;l<s;l++)e[d+l]=e[c+l];e[d+s]=a[u]}else{if(0===r)throw new Error;for(l=0;l<r;l++)e[d+l]=a[u+l]}}else{for(l=0;l<s;l++)e[d+l]=e[c+l];e[d+s]=a[u]}else for(l=0;l<r;l++)e[d+l]=a[u+l]}(l,u,c,d):function(n,r,i,s){var l=0;for(l=0;l<s;l++)a[l]=e[i+l];var u=n+r-1,c=s-1,d=i+s-1,h=0,p=0;if(e[d--]=e[u--],0!=--r)if(1!==s){for(var f=o;;){var g=0,m=0,v=!1;do{if(t(a[c],e[u])<0){if(e[d--]=e[u--],g++,m=0,0==--r){v=!0;break}}else if(e[d--]=a[c--],m++,g=0,1==--s){v=!0;break}}while((g|m)<f);if(v)break;do{if(0!=(g=r-$t(a[c],e,n,r,r-1,t))){for(r-=g,p=1+(d-=g),h=1+(u-=g),l=g-1;l>=0;l--)e[p+l]=e[h+l];if(0===r){v=!0;break}}if(e[d--]=a[c--],1==--s){v=!0;break}if(0!=(m=s-Zt(e[u],a,0,s,s-1,t))){for(s-=m,p=1+(d-=m),h=1+(c-=m),l=0;l<m;l++)e[p+l]=a[h+l];if(s<=1){v=!0;break}}if(e[d--]=e[u--],0==--r){v=!0;break}f--}while(g>=7||m>=7);if(v)break;f<0&&(f=0),f+=2}if((o=f)<1&&(o=1),1===s){for(p=1+(d-=r),h=1+(u-=r),l=r-1;l>=0;l--)e[p+l]=e[h+l];e[d]=a[c]}else{if(0===s)throw new Error;for(h=d-(s-1),l=0;l<s;l++)e[h+l]=a[l]}}else{for(p=1+(d-=r),h=1+(u-=r),l=r-1;l>=0;l--)e[p+l]=e[h+l];e[d]=a[c]}else for(h=d-(s-1),l=0;l<s;l++)e[h+l]=a[l]}(l,u,c,d))}return n=[],r=[],{mergeRuns:function(){for(;i>1;){var e=i-2;if(e>=1&&r[e-1]<=r[e]+r[e+1]||e>=2&&r[e-2]<=r[e]+r[e-1])r[e-1]<r[e+1]&&e--;else if(r[e]>r[e+1])break;s(e)}},forceMergeRuns:function(){for(;i>1;){var e=i-2;e>0&&r[e-1]<r[e+1]&&e--,s(e)}},pushRun:function(e,t){n[i]=e,r[i]=t,i+=1}}}(e,t),s=function(e){for(var t=0;e>=32;)t|=1&e,e>>=1;return e+t}(o);do{if((i=qt(e,n,r,t))<s){var l=o;l>s&&(l=s),Xt(e,n,n+l,n+i,t),i=l}a.pushRun(n,i),a.mergeRuns(),o-=i,n+=i}while(0!==o);a.forceMergeRuns()}}}O(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Gt.prototype[e]=function(t){var n,r,o=t.zrX,i=t.zrY,a=Yt(this,o,i);if("mouseup"===e&&a||(r=(n=this.findHover(o,i)).target),"mousedown"===e)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===e)this._upEl=r;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||ze(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,e,t)}});var Jt=!1;function Qt(){Jt||(Jt=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function en(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var tn=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=en}return e.prototype.traverse=function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},e.prototype.getDisplayList=function(e,t){t=t||!1;var n=this._displayList;return!e&&n.length||this.updateDisplayList(t),n},e.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,r=0,o=t.length;r<o;r++)this._updateAndAddDisplayable(t[r],null,e);n.length=this._displayListLen,Kt(n,en)},e.prototype._updateAndAddDisplayable=function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.update(),e.afterUpdate();var r=e.getClipPath();if(e.ignoreClip)t=null;else if(r){t=t?t.slice():[];for(var o=r,i=e;o;)o.parent=i,o.updateTransform(),t.push(o),i=o,o=o.getClipPath()}if(e.childrenRef){for(var a=e.childrenRef(),s=0;s<a.length;s++){var l=a[s];e.__dirty&&(l.__dirty|=1),this._updateAndAddDisplayable(l,t,n)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(Qt(),u.z=0),isNaN(u.z2)&&(Qt(),u.z2=0),isNaN(u.zlevel)&&(Qt(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var c=e.getDecalElement&&e.getDecalElement();c&&this._updateAndAddDisplayable(c,t,n);var d=e.getTextGuideLine();d&&this._updateAndAddDisplayable(d,t,n);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,t,n)}},e.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},e.prototype.delRoot=function(e){if(e instanceof Array)for(var t=0,n=e.length;t<n;t++)this.delRoot(e[t]);else{var r=L(this._roots,e);r>=0&&this._roots.splice(r,1)}},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),nn=o.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)},rn={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-rn.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*rn.bounceIn(2*e):.5*rn.bounceOut(2*e-1)+.5}},on=Math.pow,an=Math.sqrt,sn=1e-4,ln=an(3),un=1/3,cn=Ce(),dn=Ce(),hn=Ce();function pn(e){return e>-1e-8&&e<1e-8}function fn(e){return e>1e-8||e<-1e-8}function gn(e,t,n,r,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*r+3*i*n)}function mn(e,t,n,r,o){var i=1-o;return 3*(((t-e)*i+2*(n-t)*o)*i+(r-n)*o*o)}function vn(e,t,n,r,o,i){var a=r+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,d=s*l-9*a*u,h=l*l-3*s*u,p=0;if(pn(c)&&pn(d))pn(s)?i[0]=0:(C=-l/s)>=0&&C<=1&&(i[p++]=C);else{var f=d*d-4*c*h;if(pn(f)){var g=d/c,m=-g/2;(C=-s/a+g)>=0&&C<=1&&(i[p++]=C),m>=0&&m<=1&&(i[p++]=m)}else if(f>0){var v=an(f),y=c*s+1.5*a*(-d+v),b=c*s+1.5*a*(-d-v);(C=(-s-((y=y<0?-on(-y,un):on(y,un))+(b=b<0?-on(-b,un):on(b,un))))/(3*a))>=0&&C<=1&&(i[p++]=C)}else{var x=(2*c*s-3*a*d)/(2*an(c*c*c)),_=Math.acos(x)/3,w=an(c),S=Math.cos(_),C=(-s-2*w*S)/(3*a),M=(m=(-s+w*(S+ln*Math.sin(_)))/(3*a),(-s+w*(S-ln*Math.sin(_)))/(3*a));C>=0&&C<=1&&(i[p++]=C),m>=0&&m<=1&&(i[p++]=m),M>=0&&M<=1&&(i[p++]=M)}}return p}function yn(e,t,n,r,o){var i=6*n-12*t+6*e,a=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(pn(a))fn(i)&&(c=-s/i)>=0&&c<=1&&(o[l++]=c);else{var u=i*i-4*a*s;if(pn(u))o[0]=-i/(2*a);else if(u>0){var c,d=an(u),h=(-i-d)/(2*a);(c=(-i+d)/(2*a))>=0&&c<=1&&(o[l++]=c),h>=0&&h<=1&&(o[l++]=h)}}return l}function bn(e,t,n,r,o,i){var a=(t-e)*o+e,s=(n-t)*o+t,l=(r-n)*o+n,u=(s-a)*o+a,c=(l-s)*o+s,d=(c-u)*o+u;i[0]=e,i[1]=a,i[2]=u,i[3]=d,i[4]=d,i[5]=c,i[6]=l,i[7]=r}function xn(e,t,n,r,o,i,a,s,l,u,c){var d,h,p,f,g,m=.005,v=1/0;cn[0]=l,cn[1]=u;for(var y=0;y<1;y+=.05)dn[0]=gn(e,n,o,a,y),dn[1]=gn(t,r,i,s,y),(f=Ve(cn,dn))<v&&(d=y,v=f);v=1/0;for(var b=0;b<32&&!(m<sn);b++)h=d-m,p=d+m,dn[0]=gn(e,n,o,a,h),dn[1]=gn(t,r,i,s,h),f=Ve(dn,cn),h>=0&&f<v?(d=h,v=f):(hn[0]=gn(e,n,o,a,p),hn[1]=gn(t,r,i,s,p),g=Ve(hn,cn),p<=1&&g<v?(d=p,v=g):m*=.5);return c&&(c[0]=gn(e,n,o,a,d),c[1]=gn(t,r,i,s,d)),an(v)}function _n(e,t,n,r,o,i,a,s,l){for(var u=e,c=t,d=0,h=1/l,p=1;p<=l;p++){var f=p*h,g=gn(e,n,o,a,f),m=gn(t,r,i,s,f),v=g-u,y=m-c;d+=Math.sqrt(v*v+y*y),u=g,c=m}return d}function wn(e,t,n,r){var o=1-r;return o*(o*e+2*r*t)+r*r*n}function Sn(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function Cn(e,t,n){var r=e+n-2*t;return 0===r?.5:(e-t)/r}function Mn(e,t,n,r,o){var i=(t-e)*r+e,a=(n-t)*r+t,s=(a-i)*r+i;o[0]=e,o[1]=i,o[2]=s,o[3]=s,o[4]=a,o[5]=n}function Tn(e,t,n,r,o,i,a,s,l){var u,c=.005,d=1/0;cn[0]=a,cn[1]=s;for(var h=0;h<1;h+=.05)dn[0]=wn(e,n,o,h),dn[1]=wn(t,r,i,h),(m=Ve(cn,dn))<d&&(u=h,d=m);d=1/0;for(var p=0;p<32&&!(c<sn);p++){var f=u-c,g=u+c;dn[0]=wn(e,n,o,f),dn[1]=wn(t,r,i,f);var m=Ve(dn,cn);if(f>=0&&m<d)u=f,d=m;else{hn[0]=wn(e,n,o,g),hn[1]=wn(t,r,i,g);var v=Ve(hn,cn);g<=1&&v<d?(u=g,d=v):c*=.5}}return l&&(l[0]=wn(e,n,o,u),l[1]=wn(t,r,i,u)),an(d)}function kn(e,t,n,r,o,i,a){for(var s=e,l=t,u=0,c=1/a,d=1;d<=a;d++){var h=d*c,p=wn(e,n,o,h),f=wn(t,r,i,h),g=p-s,m=f-l;u+=Math.sqrt(g*g+m*m),s=p,l=f}return u}var In=/cubic-bezier\(([0-9,\.e ]+)\)/;function An(e){var t=e&&In.exec(e);if(t){var n=t[1].split(","),r=+ue(n[0]),o=+ue(n[1]),i=+ue(n[2]),a=+ue(n[3]);if(isNaN(r+o+i+a))return;var s=[];return function(e){return e<=0?0:e>=1?1:vn(0,r,i,1,e,s)&&gn(0,o,a,1,s[0])}}}var Dn=function(){function e(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||_e,this.ondestroy=e.ondestroy||_e,this.onrestart=e.onrestart||_e,e.easing&&this.setEasing(e.easing)}return e.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),!this._paused){var n=this._life,r=e-this._startTime-this._pausedTime,o=r/n;o<0&&(o=0),o=Math.min(o,1);var i=this.easingFunc,a=i?i(o):o;if(this.onframe(a),1===o){if(!this.loop)return!0;var s=r%n;this._startTime=e-s,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=t},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(e){this.easing=e,this.easingFunc=j(e)?e:rn[e]||An(e)},e}(),Pn=function(e){this.value=e},Ln=function(){function e(){this._len=0}return e.prototype.insert=function(e){var t=new Pn(e);return this.insertEntry(t),t},e.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},e.prototype.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),Nn=function(){function e(e){this._list=new Ln,this._maxSize=10,this._map={},this._maxSize=e}return e.prototype.put=function(e,t){var n=this._list,r=this._map,o=null;if(null==r[e]){var i=n.len(),a=this._lastRemovedEntry;if(i>=this._maxSize&&i>0){var s=n.head;n.remove(s),delete r[s.key],o=s.value,this._lastRemovedEntry=s}a?a.value=t:a=new Pn(t),a.key=e,n.insertEntry(a),r[e]=a}return o},e.prototype.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),Rn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function En(e){return(e=Math.round(e))<0?0:e>255?255:e}function On(e){return e<0?0:e>1?1:e}function Bn(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?En(parseFloat(t)/100*255):En(parseInt(t,10))}function zn(e){var t=e;return t.length&&"%"===t.charAt(t.length-1)?On(parseFloat(t)/100):On(parseFloat(t))}function Fn(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Vn(e,t,n){return e+(t-e)*n}function Hn(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e}function Wn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Gn=new Nn(20),Un=null;function jn(e,t){Un&&Wn(Un,t),Un=Gn.put(e,Un||t.slice())}function Yn(e,t){if(e){t=t||[];var n=Gn.get(e);if(n)return Wn(t,n);var r=(e+="").replace(/ /g,"").toLowerCase();if(r in Rn)return Wn(t,Rn[r]),jn(e,t),t;var o,i=r.length;if("#"===r.charAt(0))return 4===i||5===i?(o=parseInt(r.slice(1,4),16))>=0&&o<=4095?(Hn(t,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,5===i?parseInt(r.slice(4),16)/15:1),jn(e,t),t):void Hn(t,0,0,0,1):7===i||9===i?(o=parseInt(r.slice(1,7),16))>=0&&o<=16777215?(Hn(t,(16711680&o)>>16,(65280&o)>>8,255&o,9===i?parseInt(r.slice(7),16)/255:1),jn(e,t),t):void Hn(t,0,0,0,1):void 0;var a=r.indexOf("("),s=r.indexOf(")");if(-1!==a&&s+1===i){var l=r.substr(0,a),u=r.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(4!==u.length)return 3===u.length?Hn(t,+u[0],+u[1],+u[2],1):Hn(t,0,0,0,1);c=zn(u.pop());case"rgb":return u.length>=3?(Hn(t,Bn(u[0]),Bn(u[1]),Bn(u[2]),3===u.length?c:zn(u[3])),jn(e,t),t):void Hn(t,0,0,0,1);case"hsla":return 4!==u.length?void Hn(t,0,0,0,1):(u[3]=zn(u[3]),qn(u,t),jn(e,t),t);case"hsl":return 3!==u.length?void Hn(t,0,0,0,1):(qn(u,t),jn(e,t),t);default:return}}Hn(t,0,0,0,1)}}function qn(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=zn(e[1]),o=zn(e[2]),i=o<=.5?o*(r+1):o+r-o*r,a=2*o-i;return Hn(t=t||[],En(255*Fn(a,i,n+1/3)),En(255*Fn(a,i,n)),En(255*Fn(a,i,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Xn(e,t){var n=Yn(e);if(n){for(var r=0;r<3;r++)n[r]=t<0?n[r]*(1-t)|0:(255-n[r])*t+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return tr(n,4===n.length?"rgba":"rgb")}}function Zn(e,t,n){if(t&&t.length&&e>=0&&e<=1){n=n||[];var r=e*(t.length-1),o=Math.floor(r),i=Math.ceil(r),a=t[o],s=t[i],l=r-o;return n[0]=En(Vn(a[0],s[0],l)),n[1]=En(Vn(a[1],s[1],l)),n[2]=En(Vn(a[2],s[2],l)),n[3]=On(Vn(a[3],s[3],l)),n}}var $n=Zn;function Kn(e,t,n){if(t&&t.length&&e>=0&&e<=1){var r=e*(t.length-1),o=Math.floor(r),i=Math.ceil(r),a=Yn(t[o]),s=Yn(t[i]),l=r-o,u=tr([En(Vn(a[0],s[0],l)),En(Vn(a[1],s[1],l)),En(Vn(a[2],s[2],l)),On(Vn(a[3],s[3],l))],"rgba");return n?{color:u,leftIndex:o,rightIndex:i,value:r}:u}}var Jn=Kn;function Qn(e,t,n,r){var o=Yn(e);if(e)return o=function(e){if(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a,u=(s+a)/2;if(0===l)t=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,d=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;r===s?t=h-d:o===s?t=1/3+c-h:i===s&&(t=2/3+d-c),t<0&&(t+=1),t>1&&(t-=1)}var p=[360*t,n,u];return null!=e[3]&&p.push(e[3]),p}}(o),null!=t&&(o[0]=function(e){return(e=Math.round(e))<0?0:e>360?360:e}(t)),null!=n&&(o[1]=zn(n)),null!=r&&(o[2]=zn(r)),tr(qn(o),"rgba")}function er(e,t){var n=Yn(e);if(n&&null!=t)return n[3]=On(t),tr(n,"rgba")}function tr(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}function nr(e,t){var n=Yn(e);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*t:0}var rr=Object.freeze({__proto__:null,parse:Yn,lift:Xn,toHex:function(e){var t=Yn(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)},fastLerp:Zn,fastMapToColor:$n,lerp:Kn,mapToColor:Jn,modifyHSL:Qn,modifyAlpha:er,stringify:tr,lum:nr,random:function(){return tr([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}}),or=Math.round;function ir(e){var t;if(e&&"transparent"!==e){if("string"==typeof e&&e.indexOf("rgba")>-1){var n=Yn(e);n&&(e="rgb("+n[0]+","+n[1]+","+n[2]+")",t=n[3])}}else e="none";return{color:e,opacity:null==t?1:t}}function ar(e){return e<1e-4&&e>-1e-4}function sr(e){return or(1e3*e)/1e3}function lr(e){return or(1e4*e)/1e4}var ur={left:"start",right:"end",center:"middle",middle:"middle"};function cr(e){return e&&!!e.image}function dr(e){return cr(e)||function(e){return e&&!!e.svgElement}(e)}function hr(e){return"linear"===e.type}function pr(e){return"radial"===e.type}function fr(e){return e&&("linear"===e.type||"radial"===e.type)}function gr(e){return"url(#"+e+")"}function mr(e){var t=e.getGlobalScale(),n=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function vr(e){var t=e.x||0,n=e.y||0,r=(e.rotation||0)*we,o=oe(e.scaleX,1),i=oe(e.scaleY,1),a=e.skewX||0,s=e.skewY||0,l=[];return(t||n)&&l.push("translate("+t+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),1===o&&1===i||l.push("scale("+o+","+i+")"),(a||s)&&l.push("skew("+or(a*we)+"deg, "+or(s*we)+"deg)"),l.join(" ")}var yr=o.hasGlobalWindow&&j(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:"undefined"!=typeof Buffer?function(e){return Buffer.from(e).toString("base64")}:function(e){return null},br=Array.prototype.slice;function xr(e,t,n){return(t-e)*n+e}function _r(e,t,n,r){for(var o=t.length,i=0;i<o;i++)e[i]=xr(t[i],n[i],r);return e}function wr(e,t,n,r){for(var o=t.length,i=0;i<o;i++)e[i]=t[i]+n[i]*r;return e}function Sr(e,t,n,r){for(var o=t.length,i=o&&t[0].length,a=0;a<o;a++){e[a]||(e[a]=[]);for(var s=0;s<i;s++)e[a][s]=t[a][s]+n[a][s]*r}return e}function Cr(e,t){for(var n=e.length,r=t.length,o=n>r?t:e,i=Math.min(n,r),a=o[i-1]||{color:[0,0,0,0],offset:0},s=i;s<Math.max(n,r);s++)o.push({offset:a.offset,color:a.color.slice()})}function Mr(e,t,n){var r=e,o=t;if(r.push&&o.push){var i=r.length,a=o.length;if(i!==a)if(i>a)r.length=a;else for(var s=i;s<a;s++)r.push(1===n?o[s]:br.call(o[s]));var l=r[0]&&r[0].length;for(s=0;s<r.length;s++)if(1===n)isNaN(r[s])&&(r[s]=o[s]);else for(var u=0;u<l;u++)isNaN(r[s][u])&&(r[s][u]=o[s][u])}}function Tr(e){if(E(e)){var t=e.length;if(E(e[0])){for(var n=[],r=0;r<t;r++)n.push(br.call(e[r]));return n}return br.call(e)}return e}function kr(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=null==e[3]?1:e[3],"rgba("+e.join(",")+")"}function Ir(e){return 4===e||5===e}function Ar(e){return 1===e||2===e}var Dr=[0,0,0,0],Pr=function(){function e(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(e,t,n){this._needsSort=!0;var r=this.keyframes,o=r.length,i=!1,a=6,s=t;if(E(t)){var l=function(e){return E(e&&e[0])?2:1}(t);a=l,(1===l&&!X(t[0])||2===l&&!X(t[0][0]))&&(i=!0)}else if(X(t)&&!ne(t))a=0;else if(Y(t))if(isNaN(+t)){var u=Yn(t);u&&(s=u,a=3)}else a=0;else if(Q(t)){var c=A({},s);c.colorStops=B(t.colorStops,function(e){return{offset:e.offset,color:Yn(e.color)}}),hr(t)?a=4:pr(t)&&(a=5),s=c}0===o?this.valType=a:a===this.valType&&6!==a||(i=!0),this.discrete=this.discrete||i;var d={time:e,value:s,rawValue:t,percent:0};return n&&(d.easing=n,d.easingFunc=j(n)?n:rn[n]||An(n)),r.push(d),d},e.prototype.prepare=function(e,t){var n=this.keyframes;this._needsSort&&n.sort(function(e,t){return e.time-t.time});for(var r=this.valType,o=n.length,i=n[o-1],a=this.discrete,s=Ar(r),l=Ir(r),u=0;u<o;u++){var c=n[u],d=c.value,h=i.value;c.percent=c.time/e,a||(s&&u!==o-1?Mr(d,h,r):l&&Cr(d.colorStops,h.colorStops))}if(!a&&5!==r&&t&&this.needsAnimate()&&t.needsAnimate()&&r===t.valType&&!t._finished){this._additiveTrack=t;var p=n[0].value;for(u=0;u<o;u++)0===r?n[u].additiveValue=n[u].value-p:3===r?n[u].additiveValue=wr([],n[u].value,p,-1):Ar(r)&&(n[u].additiveValue=1===r?wr([],n[u].value,p,-1):Sr([],n[u].value,p,-1))}},e.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,r,o,i=null!=this._additiveTrack,a=i?"additiveValue":"value",s=this.valType,l=this.keyframes,u=l.length,c=this.propName,d=3===s,h=this._lastFr,p=Math.min;if(1===u)r=o=l[0];else{if(t<0)n=0;else if(t<this._lastFrP){for(n=p(h+1,u-1);n>=0&&!(l[n].percent<=t);n--);n=p(n,u-2)}else{for(n=h;n<u&&!(l[n].percent>t);n++);n=p(n-1,u-2)}o=l[n+1],r=l[n]}if(r&&o){this._lastFr=n,this._lastFrP=t;var f=o.percent-r.percent,g=0===f?1:p((t-r.percent)/f,1);o.easingFunc&&(g=o.easingFunc(g));var m=i?this._additiveValue:d?Dr:e[c];if(!Ar(s)&&!d||m||(m=this._additiveValue=[]),this.discrete)e[c]=g<1?r.rawValue:o.rawValue;else if(Ar(s))1===s?_r(m,r[a],o[a],g):function(e,t,n,r){for(var o=t.length,i=o&&t[0].length,a=0;a<o;a++){e[a]||(e[a]=[]);for(var s=0;s<i;s++)e[a][s]=xr(t[a][s],n[a][s],r)}}(m,r[a],o[a],g);else if(Ir(s)){var v=r[a],y=o[a],b=4===s;e[c]={type:b?"linear":"radial",x:xr(v.x,y.x,g),y:xr(v.y,y.y,g),colorStops:B(v.colorStops,function(e,t){var n=y.colorStops[t];return{offset:xr(e.offset,n.offset,g),color:kr(_r([],e.color,n.color,g))}}),global:y.global},b?(e[c].x2=xr(v.x2,y.x2,g),e[c].y2=xr(v.y2,y.y2,g)):e[c].r=xr(v.r,y.r,g)}else if(d)_r(m,r[a],o[a],g),i||(e[c]=kr(m));else{var x=xr(r[a],o[a],g);i?this._additiveValue=x:e[c]=x}i&&this._addToTarget(e)}}},e.prototype._addToTarget=function(e){var t=this.valType,n=this.propName,r=this._additiveValue;0===t?e[n]=e[n]+r:3===t?(Yn(e[n],Dr),wr(Dr,Dr,r,1),e[n]=kr(Dr)):1===t?wr(e[n],e[n],r,1):2===t&&Sr(e[n],e[n],r,1)},e}(),Lr=function(){function e(e,t,n,r){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r?M("Can' use additive animation on looped animation."):(this._additiveAnimators=r,this._allowDiscrete=n)}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(e){this._target=e},e.prototype.when=function(e,t,n){return this.whenWithKeys(e,t,H(t),n)},e.prototype.whenWithKeys=function(e,t,n,r){for(var o=this._tracks,i=0;i<n.length;i++){var a=n[i],s=o[a];if(!s){s=o[a]=new Pr(a);var l=void 0,u=this._getAdditiveTrack(a);if(u){var c=u.keyframes,d=c[c.length-1];l=d&&d.value,3===u.valType&&l&&(l=kr(l))}else l=this._target[a];if(null==l)continue;e>0&&s.addKeyframe(0,Tr(l),r),this._trackKeys.push(a)}s.addKeyframe(e,Tr(t[a]),r)}return this._maxTime=Math.max(this._maxTime,e),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,n=0;n<t;n++)e[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var n=0;n<t.length;n++)t[n].call(this)},e.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,n=0;n<t.length;n++)e[t[n]].setFinished()},e.prototype._getAdditiveTrack=function(e){var t,n=this._additiveAnimators;if(n)for(var r=0;r<n.length;r++){var o=n[r].getTrack(e);o&&(t=o)}return t},e.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,n=[],r=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var i=this._trackKeys[o],a=this._tracks[i],s=this._getAdditiveTrack(i),l=a.keyframes,u=l.length;if(a.prepare(r,s),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var c=l[u-1];c&&(t._target[a.propName]=c.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var d=new Dn({life:r,loop:this._loop,delay:this._delay||0,onframe:function(e){t._started=2;var r=t._additiveAnimators;if(r){for(var o=!1,i=0;i<r.length;i++)if(r[i]._clip){o=!0;break}o||(t._additiveAnimators=null)}for(i=0;i<n.length;i++)n[i].step(t._target,e);var a=t._onframeCbs;if(a)for(i=0;i<a.length;i++)a[i](t._target,e)},ondestroy:function(){t._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},e.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},e.prototype.delay=function(e){return this._delay=e,this},e.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},e.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},e.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(e){return this._tracks[e]},e.prototype.getTracks=function(){var e=this;return B(this._trackKeys,function(t){return e._tracks[t]})},e.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var n=this._tracks,r=this._trackKeys,o=0;o<e.length;o++){var i=n[e[o]];i&&!i.isFinished()&&(t?i.step(this._target,1):1===this._started&&i.step(this._target,0),i.setFinished())}var a=!0;for(o=0;o<r.length;o++)if(!n[r[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},e.prototype.saveTo=function(e,t,n){if(e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var o=t[r],i=this._tracks[o];if(i&&!i.isFinished()){var a=i.keyframes,s=a[n?0:a.length-1];s&&(e[o]=Tr(s.rawValue))}}}},e.prototype.__changeFinalValue=function(e,t){t=t||H(e);for(var n=0;n<t.length;n++){var r=t[n],o=this._tracks[r];if(o){var i=o.keyframes;if(i.length>1){var a=i.pop();o.addKeyframe(a.time,e[r]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();function Nr(){return(new Date).getTime()}var Rr,Er,Or=function(e){function t(t){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,t=t||{},n.stage=t.stage||{},n}return n(t,e),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var t=e.getClip();t&&this.addClip(t)},t.prototype.removeClip=function(e){if(e.animation){var t=e.prev,n=e.next;t?t.next=n:this._head=n,n?n.prev=t:this._tail=t,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var t=e.getClip();t&&this.removeClip(t),e.animation=null},t.prototype.update=function(e){for(var t=Nr()-this._pausedTime,n=t-this._time,r=this._head;r;){var o=r.next;r.step(t,n)?(r.ondestroy(),this.removeClip(r),r=o):r=o}this._time=t,e||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0,nn(function t(){e._running&&(nn(t),!e._paused&&e.update())})},t.prototype.start=function(){this._running||(this._time=Nr(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Nr(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Nr()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var t=e.next;e.prev=e.next=e.animation=null,e=t}this._head=this._tail=null},t.prototype.isFinished=function(){return null==this._head},t.prototype.animate=function(e,t){t=t||{},this.start();var n=new Lr(e,t.loop);return this.addAnimator(n),n},t}(Xe),Br=o.domSupported,zr=(Er={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Rr=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:B(Rr,function(e){var t=e.replace("mouse","pointer");return Er.hasOwnProperty(t)?t:e})}),Fr=["mousemove","mouseup"],Vr=["pointermove","pointerup"],Hr=!1;function Wr(e){var t=e.pointerType;return"pen"===t||"touch"===t}function Gr(e){e&&(e.zrByTouch=!0)}function Ur(e,t){for(var n=t,r=!1;n&&9!==n.nodeType&&!(r=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return r}var jr=function(e,t){this.stopPropagation=_e,this.stopImmediatePropagation=_e,this.preventDefault=_e,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},Yr={mousedown:function(e){e=dt(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=dt(this.dom,e);var t=this.__mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=dt(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){Ur(this,(e=dt(this.dom,e)).toElement||e.relatedTarget)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){Hr=!0,e=dt(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){Hr||(e=dt(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){Gr(e=dt(this.dom,e)),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Yr.mousemove.call(this,e),Yr.mousedown.call(this,e)},touchmove:function(e){Gr(e=dt(this.dom,e)),this.handler.processGesture(e,"change"),Yr.mousemove.call(this,e)},touchend:function(e){Gr(e=dt(this.dom,e)),this.handler.processGesture(e,"end"),Yr.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<300&&Yr.click.call(this,e)},pointerdown:function(e){Yr.mousedown.call(this,e)},pointermove:function(e){Wr(e)||Yr.mousemove.call(this,e)},pointerup:function(e){Yr.mouseup.call(this,e)},pointerout:function(e){Wr(e)||Yr.mouseout.call(this,e)}};O(["click","dblclick","contextmenu"],function(e){Yr[e]=function(t){t=dt(this.dom,t),this.trigger(e,t)}});var qr={pointermove:function(e){Wr(e)||qr.mousemove.call(this,e)},pointerup:function(e){qr.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Xr(e,t,n,r){e.mounted[t]=n,e.listenerOpts[t]=r,ht(e.domTarget,t,n,r)}function Zr(e){var t,n,r,o,i=e.mounted;for(var a in i)i.hasOwnProperty(a)&&(t=e.domTarget,n=a,r=i[a],o=e.listenerOpts[a],t.removeEventListener(n,r,o));e.mounted={}}var $r=function(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t},Kr=function(e){function t(t,n){var r=e.call(this)||this;return r.__pointerCapturing=!1,r.dom=t,r.painterRoot=n,r._localHandlerScope=new $r(t,Yr),Br&&(r._globalHandlerScope=new $r(document,qr)),function(e,t){var n=t.domHandlers;o.pointerEventsSupported?O(zr.pointer,function(r){Xr(t,r,function(t){n[r].call(e,t)})}):(o.touchEventsSupported&&O(zr.touch,function(r){Xr(t,r,function(o){n[r].call(e,o),function(e){e.touching=!0,null!=e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}(t)})}),O(zr.mouse,function(r){Xr(t,r,function(o){o=ct(o),t.touching||n[r].call(e,o)})}))}(r,r._localHandlerScope),r}return n(t,e),t.prototype.dispose=function(){Zr(this._localHandlerScope),Br&&Zr(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,Br&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var t=this._globalHandlerScope;e?function(e,t){function n(n){Xr(t,n,function(r){r=ct(r),Ur(e,r.target)||(r=function(e,t){return dt(e.dom,new jr(e,t),!0)}(e,r),t.domHandlers[n].call(e,r))},{capture:!0})}o.pointerEventsSupported?O(Vr,n):o.touchEventsSupported||O(Fr,n)}(this,t):Zr(t)}},t}(Xe),Jr=1;o.hasGlobalWindow&&(Jr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Qr=Jr,eo="#333",to="#ccc",no=yt;function ro(e){return e>5e-5||e<-5e-5}var oo=[],io=[],ao=[1,0,0,1,0,0],so=Math.abs,lo=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},e.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},e.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},e.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},e.prototype.needLocalTransform=function(){return ro(this.rotation)||ro(this.x)||ro(this.y)||ro(this.scaleX-1)||ro(this.scaleY-1)||ro(this.skewX)||ro(this.skewY)},e.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),n=this.transform;t||e?(n=n||[1,0,0,1,0,0],t?this.getLocalTransform(n):no(n),e&&(t?xt(n,e,n):bt(n,e)),this.transform=n,this._resolveGlobalScaleRatio(n)):n&&(no(n),this.invTransform=null)},e.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(null!=t&&1!==t){this.getGlobalScale(oo);var n=oo[0]<0?-1:1,r=oo[1]<0?-1:1,o=((oo[0]-n)*t+n)/oo[0]||0,i=((oo[1]-r)*t+r)/oo[1]||0;e[0]*=o,e[1]*=o,e[2]*=i,e[3]*=i}this.invTransform=this.invTransform||[1,0,0,1,0,0],Ct(this.invTransform,e)},e.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},e.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],r=Math.atan2(e[1],e[0]),o=Math.PI/2+r-Math.atan2(e[3],e[2]);n=Math.sqrt(n)*Math.cos(o),t=Math.sqrt(t),this.skewX=o,this.skewY=0,this.rotation=-r,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(xt(io,e.invTransform,t),t=io);var n=this.originX,r=this.originY;(n||r)&&(ao[4]=n,ao[5]=r,xt(io,t,ao),io[4]-=n,io[5]-=r,t=io),this.setLocalTransform(t)}},e.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},e.prototype.transformCoordToLocal=function(e,t){var n=[e,t],r=this.invTransform;return r&&We(n,n,r),n},e.prototype.transformCoordToGlobal=function(e,t){var n=[e,t],r=this.transform;return r&&We(n,n,r),n},e.prototype.getLineScale=function(){var e=this.transform;return e&&so(e[0]-1)>1e-10&&so(e[3]-1)>1e-10?Math.sqrt(so(e[0]*e[3]-e[2]*e[1])):1},e.prototype.copyTransform=function(e){co(this,e)},e.getLocalTransform=function(e,t){t=t||[];var n=e.originX||0,r=e.originY||0,o=e.scaleX,i=e.scaleY,a=e.anchorX,s=e.anchorY,l=e.rotation||0,u=e.x,c=e.y,d=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(n||r||a||s){var p=n+a,f=r+s;t[4]=-p*o-d*f*i,t[5]=-f*i-h*p*o}else t[4]=t[5]=0;return t[0]=o,t[3]=i,t[1]=h*o,t[2]=d*i,l&&wt(t,t,l),t[4]+=n+u,t[5]+=r+c,t},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),uo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function co(e,t){for(var n=0;n<uo.length;n++){var r=uo[n];e[r]=t[r]}}var ho={};function po(e,t){var n=ho[t=t||l];n||(n=ho[t]=new Nn(500));var r=n.get(e);return null==r&&(r=c.measureText(e,t).width,n.put(e,r)),r}function fo(e,t,n,r){var o=po(e,t),i=yo(t),a=mo(0,o,n),s=vo(0,i,r);return new Ot(a,s,o,i)}function go(e,t,n,r){var o=((e||"")+"").split("\n");if(1===o.length)return fo(o[0],t,n,r);for(var i=new Ot(0,0,0,0),a=0;a<o.length;a++){var s=fo(o[a],t,n,r);0===a?i.copy(s):i.union(s)}return i}function mo(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function vo(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function yo(e){return po("\u56fd",e)}function bo(e,t){return"string"==typeof e?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function xo(e,t,n){var r=t.position||"inside",o=null!=t.distance?t.distance:5,i=n.height,a=n.width,s=i/2,l=n.x,u=n.y,c="left",d="top";if(r instanceof Array)l+=bo(r[0],n.width),u+=bo(r[1],n.height),c=null,d=null;else switch(r){case"left":l-=o,u+=s,c="right",d="middle";break;case"right":l+=o+a,u+=s,d="middle";break;case"top":l+=a/2,u-=o,c="center",d="bottom";break;case"bottom":l+=a/2,u+=i+o,c="center";break;case"inside":l+=a/2,u+=s,c="center",d="middle";break;case"insideLeft":l+=o,u+=s,d="middle";break;case"insideRight":l+=a-o,u+=s,c="right",d="middle";break;case"insideTop":l+=a/2,u+=o,c="center";break;case"insideBottom":l+=a/2,u+=i-o,c="center",d="bottom";break;case"insideTopLeft":l+=o,u+=o;break;case"insideTopRight":l+=a-o,u+=o,c="right";break;case"insideBottomLeft":l+=o,u+=i-o,d="bottom";break;case"insideBottomRight":l+=a-o,u+=i-o,c="right",d="bottom"}return(e=e||{}).x=l,e.y=u,e.align=c,e.verticalAlign=d,e}var _o="__zr_normal__",wo=uo.concat(["ignore"]),So=z(uo,function(e,t){return e[t]=!0,e},{ignore:!1}),Co={},Mo=new Ot(0,0,0,0),To=function(){function e(e){this.id=C(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return e.prototype._init=function(e){this.attr(e)},e.prototype.drift=function(e,t,n){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=e,r[5]+=t,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var n=this.textConfig,r=n.local,o=t.innerTransformable,i=void 0,a=void 0,s=!1;o.parent=r?this:null;var l=!1;if(o.copyTransform(t),null!=n.position){var u=Mo;n.layoutRect?u.copy(n.layoutRect):u.copy(this.getBoundingRect()),r||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Co,n,u):xo(Co,n,u),o.x=Co.x,o.y=Co.y,i=Co.align,a=Co.verticalAlign;var c=n.origin;if(c&&null!=n.rotation){var d=void 0,h=void 0;"center"===c?(d=.5*u.width,h=.5*u.height):(d=bo(c[0],u.width),h=bo(c[1],u.height)),l=!0,o.originX=-o.x+d+(r?0:u.x),o.originY=-o.y+h+(r?0:u.y)}}null!=n.rotation&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],l||(o.originX=-p[0],o.originY=-p[1]));var f=null==n.inside?"string"==typeof n.position&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,v=void 0,y=void 0;f&&this.canBeInsideText()?(m=n.insideFill,v=n.insideStroke,null!=m&&"auto"!==m||(m=this.getInsideTextFill()),null!=v&&"auto"!==v||(v=this.getInsideTextStroke(m),y=!0)):(m=n.outsideFill,v=n.outsideStroke,null!=m&&"auto"!==m||(m=this.getOutsideFill()),null!=v&&"auto"!==v||(v=this.getOutsideStroke(m),y=!0)),(m=m||"#000")===g.fill&&v===g.stroke&&y===g.autoStroke&&i===g.align&&a===g.verticalAlign||(s=!0,g.fill=m,g.stroke=v,g.autoStroke=y,g.align=i,g.verticalAlign=a,t.setDefaultTextStyle(g)),t.__dirty|=1,s&&t.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(e){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?to:eo},e.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),n="string"==typeof t&&Yn(t);n||(n=[255,255,255,1]);for(var r=n[3],o=this.__zr.isDarkMode(),i=0;i<3;i++)n[i]=n[i]*r+(o?0:255)*(1-r);return n[3]=1,tr(n,"rgba")},e.prototype.traverse=function(e,t){},e.prototype.attrKV=function(e,t){"textConfig"===e?this.setTextConfig(t):"textContent"===e?this.setTextContent(t):"clipPath"===e?this.setClipPath(t):"extra"===e?(this.extra=this.extra||{},A(this.extra,t)):this[e]=t},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(Z(e))for(var n=H(e),r=0;r<n.length;r++){var o=n[r];this.attrKV(o,e[o])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,n=0;n<this.animators.length;n++){var r=this.animators[n],o=r.__fromStateTransition;if(!(r.getLoop()||o&&o!==_o)){var i=r.targetName,a=i?t[i]:t;r.saveTo(a)}}},e.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,wo)},e.prototype._savePrimaryToNormal=function(e,t,n){for(var r=0;r<n.length;r++){var o=n[r];null==e[o]||o in t||(t[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(e){return this.states[e]},e.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},e.prototype.clearStates=function(e){this.useState(_o,!1,e)},e.prototype.useState=function(e,t,n,r){var o=e===_o;if(this.hasState()||!o){var i=this.currentStates,a=this.stateTransition;if(!(L(i,e)>=0)||!t&&1!==i.length){var s;if(this.stateProxy&&!o&&(s=this.stateProxy(e)),s||(s=this.states&&this.states[e]),s||o){o||this.saveCurrentToNormalState(s);var l=!!(s&&s.hoverLayer||r);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,s,this._normalState,t,!n&&!this.__inHover&&a&&a.duration>0,a);var u=this._textContent,c=this._textGuide;return u&&u.useState(e,t,n,l),c&&c.useState(e,t,n,l),o?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),s}M("State "+e+" not exists.")}}},e.prototype.useStates=function(e,t,n){if(e.length){var r=[],o=this.currentStates,i=e.length,a=i===o.length;if(a)for(var s=0;s<i;s++)if(e[s]!==o[s]){a=!1;break}if(a)return;for(s=0;s<i;s++){var l=e[s],u=void 0;this.stateProxy&&(u=this.stateProxy(l,e)),u||(u=this.states[l]),u&&r.push(u)}var c=r[i-1],d=!!(c&&c.hoverLayer||n);d&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(r),p=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var f=this._textContent,g=this._textGuide;f&&f.useStates(e,t,d),g&&g.useStates(e,t,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},e.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},e.prototype.removeState=function(e){var t=L(this.currentStates,e);if(t>=0){var n=this.currentStates.slice();n.splice(t,1),this.useStates(n)}},e.prototype.replaceState=function(e,t,n){var r=this.currentStates.slice(),o=L(r,e),i=L(r,t)>=0;o>=0?i?r.splice(o,1):r[o]=t:n&&!i&&r.push(t),this.useStates(r)},e.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},e.prototype._mergeStates=function(e){for(var t,n={},r=0;r<e.length;r++){var o=e[r];A(n,o),o.textConfig&&A(t=t||{},o.textConfig)}return t&&(n.textConfig=t),n},e.prototype._applyStateObj=function(e,t,n,r,o,i){var a=!(t&&r);t&&t.textConfig?(this.textConfig=A({},r?this.textConfig:n.textConfig),A(this.textConfig,t.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var s={},l=!1,u=0;u<wo.length;u++){var c=wo[u],d=o&&So[c];t&&null!=t[c]?d?(l=!0,s[c]=t[c]):this[c]=t[c]:a&&null!=n[c]&&(d?(l=!0,s[c]=n[c]):this[c]=n[c])}if(!o)for(u=0;u<this.animators.length;u++){var h=this.animators[u],p=h.targetName;h.getLoop()||h.__changeFinalValue(p?(t||n)[p]:t||n)}l&&this._transitionState(e,s,i)},e.prototype._attachComponent=function(e){if((!e.__zr||e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},e.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},e.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new lo,this._attachComponent(e),this._textContent=e,this.markRedraw())},e.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),A(this.textConfig,e),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=1;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,n=this._textGuide;t&&(t.__inHover=e),n&&(n.__inHover=e)},e.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},e.prototype.animate=function(e,t,n){var r=e?this[e]:this,o=new Lr(r,t,n);return e&&(o.targetName=e),this.addAnimator(o,e),o},e.prototype.addAnimator=function(e,t){var n=this.__zr,r=this;e.during(function(){r.updateDuringAnimation(t)}).done(function(){var t=r.animators,n=L(t,e);n>=0&&t.splice(n,1)}),this.animators.push(e),n&&n.animation.addAnimator(e),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(e){this.markRedraw()},e.prototype.stopAnimation=function(e,t){for(var n=this.animators,r=n.length,o=[],i=0;i<r;i++){var a=n[i];e&&e!==a.scope?o.push(a):a.stop(t)}return this.animators=o,this},e.prototype.animateTo=function(e,t,n){ko(this,e,t,n)},e.prototype.animateFrom=function(e,t,n){ko(this,e,t,n,!0)},e.prototype._transitionState=function(e,t,n,r){for(var o=ko(this,t,n,r),i=0;i<o.length;i++)o[i].__fromStateTransition=e},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;function n(e,n,r,o){function i(e,t){Object.defineProperty(t,0,{get:function(){return e[r]},set:function(t){e[r]=t}}),Object.defineProperty(t,1,{get:function(){return e[o]},set:function(t){e[o]=t}})}Object.defineProperty(t,e,{get:function(){return this[n]||i(this,this[n]=[]),this[n]},set:function(e){this[r]=e[0],this[o]=e[1],this[n]=e,i(this,e)}})}t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=1,Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();function ko(e,t,n,r,o){var i=[];Do(e,"",e,t,n=n||{},r,i,o);var a=i.length,s=!1,l=n.done,u=n.aborted,c=function(){s=!0,--a<=0&&(s?l&&l():u&&u())},d=function(){--a<=0&&(s?l&&l():u&&u())};a||l&&l(),i.length>0&&n.during&&i[0].during(function(e,t){n.during(t)});for(var h=0;h<i.length;h++){var p=i[h];c&&p.done(c),d&&p.aborted(d),n.force&&p.duration(n.duration),p.start(n.easing)}return i}function Io(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function Ao(e,t,n){if(E(t[n]))if(E(e[n])||(e[n]=[]),K(t[n])){var r=t[n].length;e[n].length!==r&&(e[n]=new t[n].constructor(r),Io(e[n],t[n],r))}else{var o=t[n],i=e[n],a=o.length;if(E(o[0]))for(var s=o[0].length,l=0;l<a;l++)i[l]?Io(i[l],o[l],s):i[l]=Array.prototype.slice.call(o[l]);else Io(i,o,a);i.length=o.length}else e[n]=t[n]}function Do(e,t,n,r,o,i,a,s){for(var l=H(r),u=o.duration,c=o.delay,d=o.additive,h=o.setToFinal,p=!Z(i),f=e.animators,g=[],m=0;m<l.length;m++){var v=l[m],y=r[v];if(null!=y&&null!=n[v]&&(p||i[v]))if(!Z(y)||E(y)||Q(y))g.push(v);else{if(t){s||(n[v]=y,e.updateDuringAnimation(t));continue}Do(e,v,n[v],y,o,i&&i[v],a,s)}else s||(n[v]=y,e.updateDuringAnimation(t),g.push(v))}var b=g.length;if(!d&&b)for(var x=0;x<f.length;x++)if((w=f[x]).targetName===t&&w.stopTracks(g)){var _=L(f,w);f.splice(_,1)}if(o.force||(g=F(g,function(e){return!((t=r[e])===(o=n[e])||E(t)&&E(o)&&function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(t,o));var t,o}),b=g.length),b>0||o.force&&!a.length){var w,S=void 0,C=void 0,M=void 0;if(s)for(C={},h&&(S={}),x=0;x<b;x++)C[v=g[x]]=n[v],h?S[v]=r[v]:n[v]=r[v];else if(h)for(M={},x=0;x<b;x++)M[v=g[x]]=Tr(n[v]),Ao(n,r,v);(w=new Lr(n,!1,!1,d?F(f,function(e){return e.targetName===t}):null)).targetName=t,o.scope&&(w.scope=o.scope),h&&S&&w.whenWithKeys(0,S,g),M&&w.whenWithKeys(0,M,g),w.whenWithKeys(null==u?500:u,s?C:r,g).delay(c||0),e.addAnimator(w,t),a.push(w)}}R(To,Xe),R(To,lo);var Po=function(e){function t(t){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(t),n}return n(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,r=n.indexOf(t);r>=0&&(n.splice(r,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,t){var n=L(this._children,e);return n>=0&&this.replaceAt(t,n),this},t.prototype.replaceAt=function(e,t){var n=this._children,r=n[t];if(e&&e!==this&&e.parent!==this&&e!==r){n[t]=e,r.parent=null;var o=this.__zr;o&&r.removeSelfFromZr(o),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var t=this.__zr;t&&t!==e.__zr&&e.addSelfToZr(t),t&&t.refresh()},t.prototype.remove=function(e){var t=this.__zr,n=this._children,r=L(n,e);return r<0||(n.splice(r,1),e.parent=null,t&&e.removeSelfFromZr(t),t&&t.refresh()),this},t.prototype.removeAll=function(){for(var e=this._children,t=this.__zr,n=0;n<e.length;n++){var r=e[n];t&&r.removeSelfFromZr(t),r.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,t){for(var n=this._children,r=0;r<n.length;r++){var o=n[r];e.call(t,o,r)}return this},t.prototype.traverse=function(e,t){for(var n=0;n<this._children.length;n++){var r=this._children[n],o=e.call(t,r);r.isGroup&&!o&&r.traverse(e,t)}return this},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].addSelfToZr(t)},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].removeSelfFromZr(t)},t.prototype.getBoundingRect=function(e){for(var t=new Ot(0,0,0,0),n=e||this._children,r=[],o=null,i=0;i<n.length;i++){var a=n[i];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(r);l?(Ot.applyTransform(t,s,l),(o=o||t.clone()).union(t)):(o=o||s.clone()).union(s)}}return o||t},t}(To);Po.prototype.type="group";
/*!
    * ZRender, a high performance 2d drawing library.
    *
    * Copyright (c) 2013, Baidu Inc.
    * All rights reserved.
    *
    * LICENSE
    * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
    */
var Lo={},No={},Ro=function(){function e(e,t,n){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=t,this.id=e;var i=new tn,a=n.renderer||"canvas";Lo[a]||(a=H(Lo)[0]),n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var s=new Lo[a](t,i,n,e),l=n.ssr||s.ssrOnly;this.storage=i,this.painter=s;var u,c=o.node||o.worker||l?null:new Kr(s.getViewportRoot(),s.root),d=n.useCoarsePointer;(null==d||"auto"===d?o.touchEventsSupported:!!d)&&(u=oe(n.pointerSize,44)),this.handler=new Gt(i,s,c,s.root,u),this.animation=new Or({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},e.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},e.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=function(e){if(!e)return!1;if("string"==typeof e)return nr(e,1)<.4;if(e.colorStops){for(var t=e.colorStops,n=0,r=t.length,o=0;o<r;o++)n+=nr(t[o].color,1);return(n/=r)<.4}return!1}(e)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(e){this._darkMode=e},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(e){var t,n=Nr();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var r=Nr();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},e.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},e.prototype.findHover=function(e,t){return this.handler.findHover(e,t)},e.prototype.on=function(e,t,n){return this.handler.on(e,t,n),this},e.prototype.off=function(e,t){this.handler.off(e,t)},e.prototype.trigger=function(e,t){this.handler.trigger(e,t)},e.prototype.clear=function(){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Po&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){var e;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,e=this.id,delete No[e]},e}();function Eo(e,t){var n=new Ro(C(),e,t);return No[n.id]=n,n}function Oo(e,t){Lo[e]=t}var Bo=Object.freeze({__proto__:null,init:Eo,dispose:function(e){e.dispose()},disposeAll:function(){for(var e in No)No.hasOwnProperty(e)&&No[e].dispose();No={}},getInstance:function(e){return No[e]},registerPainter:Oo,version:"5.4.4"});function zo(e,t,n,r){var o=t[0],i=t[1],a=n[0],s=n[1],l=i-o,u=s-a;if(0===l)return 0===u?a:(a+s)/2;if(r)if(l>0){if(e<=o)return a;if(e>=i)return s}else{if(e>=o)return a;if(e<=i)return s}else{if(e===o)return a;if(e===i)return s}return(e-o)/l*u+a}function Fo(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return Y(e)?(n=e,n.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e;var n}function Vo(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function Ho(e){return e.sort(function(e,t){return e-t}),e}function Wo(e){if(e=+e,isNaN(e))return 0;if(e>1e-14)for(var t=1,n=0;n<15;n++,t*=10)if(Math.round(e*t)/t===e)return n;return Go(e)}function Go(e){var t=e.toString().toLowerCase(),n=t.indexOf("e"),r=n>0?+t.slice(n+1):0,o=n>0?n:t.length,i=t.indexOf("."),a=i<0?0:o-1-i;return Math.max(0,a-r)}function Uo(e,t){var n=Math.log,r=Math.LN10,o=Math.floor(n(e[1]-e[0])/r),i=Math.round(n(Math.abs(t[1]-t[0]))/r),a=Math.min(Math.max(-o+i,0),20);return isFinite(a)?a:20}function jo(e,t){var n=z(e,function(e,t){return e+(isNaN(t)?0:t)},0);if(0===n)return[];for(var r=Math.pow(10,t),o=B(e,function(e){return(isNaN(e)?0:e)/n*r*100}),i=100*r,a=B(o,function(e){return Math.floor(e)}),s=z(a,function(e,t){return e+t},0),l=B(o,function(e,t){return e-a[t]});s<i;){for(var u=Number.NEGATIVE_INFINITY,c=null,d=0,h=l.length;d<h;++d)l[d]>u&&(u=l[d],c=d);++a[c],l[c]=0,++s}return B(a,function(e){return e/r})}function Yo(e,t){var n=Math.max(Wo(e),Wo(t)),r=e+t;return n>20?r:Vo(r,n)}var qo=9007199254740991;function Xo(e){var t=2*Math.PI;return(e%t+t)%t}function Zo(e){return e>-1e-4&&e<1e-4}var $o=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ko(e){if(e instanceof Date)return e;if(Y(e)){var t=$o.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}return null==e?new Date(NaN):new Date(Math.round(e))}function Jo(e){return Math.pow(10,Qo(e))}function Qo(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function ei(e,t){var n=Qo(e),r=Math.pow(10,n),o=e/r;return e=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*r,n>=-20?+e.toFixed(n<0?-n:0):e}function ti(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),o=+e[r-1],i=n-r;return i?o+i*(e[r]-o):o}function ni(e){e.sort(function(e,t){return s(e,t,0)?-1:1});for(var t=-1/0,n=1,r=0;r<e.length;){for(var o=e[r].interval,i=e[r].close,a=0;a<2;a++)o[a]<=t&&(o[a]=t,i[a]=a?1:1-n),t=o[a],n=i[a];o[0]===o[1]&&i[0]*i[1]!=1?e.splice(r,1):r++}return e;function s(e,t,n){return e.interval[n]<t.interval[n]||e.interval[n]===t.interval[n]&&(e.close[n]-t.close[n]==(n?-1:1)||!n&&s(e,t,1))}}function ri(e){var t=parseFloat(e);return t==e&&(0!==t||!Y(e)||e.indexOf("x")<=0)?t:NaN}function oi(e){return!isNaN(ri(e))}function ii(){return Math.round(9*Math.random())}function ai(e,t){return 0===t?e:ai(t,e%t)}function si(e,t){return null==e?t:null==t?e:e*t/ai(e,t)}function li(e){throw new Error(e)}function ui(e,t,n){return(t-e)*n+e}"undefined"!=typeof console&&console.warn&&console.log;var ci="series\0",di="\0_ec_\0";function hi(e){return e instanceof Array?e:null==e?[]:[e]}function pi(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,o=n.length;r<o;r++){var i=n[r];!e.emphasis[t].hasOwnProperty(i)&&e[t].hasOwnProperty(i)&&(e.emphasis[t][i]=e[t][i])}}}var fi=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function gi(e){return!Z(e)||U(e)||e instanceof Date?e:e.value}function mi(e){return Z(e)&&!(e instanceof Array)}function vi(e,t,n){var r="normalMerge"===n,o="replaceMerge"===n,i="replaceAll"===n;e=e||[],t=(t||[]).slice();var a=me();O(t,function(e,n){Z(e)||(t[n]=null)});var s,l,u=function(e,t,n){var r=[];if("replaceAll"===n)return r;for(var o=0;o<e.length;o++){var i=e[o];i&&null!=i.id&&t.set(i.id,o),r.push({existing:"replaceMerge"===n||wi(i)?null:i,newOption:null,keyInfo:null,brandNew:null})}return r}(e,a,n);return(r||o)&&function(e,t,n,r){O(r,function(o,i){if(o&&null!=o.id){var a=bi(o.id),s=n.get(a);if(null!=s){var l=e[s];le(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=o,l.existing=t[s],r[i]=null}}})}(u,e,a,t),r&&function(e,t){O(t,function(n,r){if(n&&null!=n.name)for(var o=0;o<e.length;o++){var i=e[o].existing;if(!e[o].newOption&&i&&(null==i.id||null==n.id)&&!wi(n)&&!wi(i)&&yi("name",i,n))return e[o].newOption=n,void(t[r]=null)}})}(u,t),r||o?function(e,t,n){O(t,function(t){if(t){for(var r,o=0;(r=e[o])&&(r.newOption||wi(r.existing)||r.existing&&null!=t.id&&!yi("id",t,r.existing));)o++;r?(r.newOption=t,r.brandNew=n):e.push({newOption:t,brandNew:n,existing:null,keyInfo:null}),o++}})}(u,t,o):i&&function(e,t){O(t,function(t){e.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}(u,t),s=u,l=me(),O(s,function(e){var t=e.existing;t&&l.set(t.id,e)}),O(s,function(e){var t=e.newOption;le(!t||null==t.id||!l.get(t.id)||l.get(t.id)===e,"id duplicates: "+(t&&t.id)),t&&null!=t.id&&l.set(t.id,e),!e.keyInfo&&(e.keyInfo={})}),O(s,function(e,t){var n=e.existing,r=e.newOption,o=e.keyInfo;if(Z(r)){if(o.name=null!=r.name?bi(r.name):n?n.name:ci+t,n)o.id=bi(n.id);else if(null!=r.id)o.id=bi(r.id);else{var i=0;do{o.id="\0"+o.name+"\0"+i++}while(l.get(o.id))}l.set(o.id,e)}}),u}function yi(e,t,n){var r=xi(t[e],null),o=xi(n[e],null);return null!=r&&null!=o&&r===o}function bi(e){return xi(e,"")}function xi(e,t){return null==e?t:Y(e)?e:X(e)||q(e)?e+"":t}function _i(e){var t=e.name;return!(!t||!t.indexOf(ci))}function wi(e){return e&&null!=e.id&&0===bi(e.id).indexOf(di)}function Si(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?U(t.dataIndex)?B(t.dataIndex,function(t){return e.indexOfRawIndex(t)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?U(t.name)?B(t.name,function(t){return e.indexOfName(t)}):e.indexOfName(t.name):void 0}function Ci(){var e="__ec_inner_"+Mi++;return function(t){return t[e]||(t[e]={})}}var Mi=ii();function Ti(e,t,n){var r=ki(t,n),o=r.mainTypeSpecified,i=r.queryOptionMap,a=r.others,s=n?n.defaultMainType:null;return!o&&s&&i.set(s,{}),i.each(function(t,r){var o=Di(e,r,t,{useDefault:s===r,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});a[r+"Models"]=o.models,a[r+"Model"]=o.models[0]}),a}function ki(e,t){var n;if(Y(e)){var r={};r[e+"Index"]=0,n=r}else n=e;var o=me(),i={},a=!1;return O(n,function(e,n){if("dataIndex"!==n&&"dataIndexInside"!==n){var r=n.match(/^(\w+)(Index|Id|Name)$/)||[],s=r[1],l=(r[2]||"").toLowerCase();!s||!l||t&&t.includeMainTypes&&L(t.includeMainTypes,s)<0||(a=a||!!s,(o.get(s)||o.set(s,{}))[l]=e)}else i[n]=e}),{mainTypeSpecified:a,queryOptionMap:o,others:i}}var Ii={useDefault:!0,enableAll:!1,enableNone:!1},Ai={useDefault:!1,enableAll:!0,enableNone:!0};function Di(e,t,n,r){r=r||Ii;var o=n.index,i=n.id,a=n.name,s={models:null,specified:null!=o||null!=i||null!=a};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=e.getComponent(t))?[l]:[],s}return"none"===o||!1===o?(le(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):("all"===o&&(le(r.enableAll,'`"all"` is not a valid value on index option.'),o=i=a=null),s.models=e.queryComponents({mainType:t,index:o,id:i,name:a}),s)}function Pi(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function Li(e,t){var n=me(),r=[];return O(e,function(e){var o=t(e);(n.get(o)||(r.push(o),n.set(o,[]))).push(e)}),{keys:r,buckets:n}}function Ni(e,t,n,r,o){var i=null==t||"auto"===t;if(null==r)return r;if(X(r))return Vo(f=ui(n||0,r,o),i?Math.max(Wo(n||0),Wo(r)):t);if(Y(r))return o<1?n:r;for(var a=[],s=n,l=r,u=Math.max(s?s.length:0,l.length),c=0;c<u;++c){var d=e.getDimensionInfo(c);if(d&&"ordinal"===d.type)a[c]=(o<1&&s?s:l)[c];else{var h=s&&s[c]?s[c]:0,p=l[c],f=ui(h,p,o);a[c]=Vo(f,i?Math.max(Wo(h),Wo(p)):t)}}return a}var Ri="___EC__COMPONENT__CONTAINER___",Ei="___EC__EXTENDED_CLASS___";function Oi(e){var t={main:"",sub:""};if(e){var n=e.split(".");t.main=n[0]||"",t.sub=n[1]||""}return t}function Bi(e,t){e.$constructor=e,e.extend=function(e){var t,r,o=this;return j(r=o)&&/^class\s/.test(Function.prototype.toString.call(r))?t=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(o):(t=function(){(e.$constructor||o).apply(this,arguments)},N(t,this)),A(t.prototype,e),t[Ei]=!0,t.extend=this.extend,t.superCall=Vi,t.superApply=Hi,t.superClass=o,t}}function zi(e,t){e.extend=t.extend}var Fi=Math.round(10*Math.random());function Vi(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[t].apply(e,n)}function Hi(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Wi(e){var t={};e.registerClass=function(e){var n,r=e.type||e.prototype.type;if(r){le(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n=r),'componentType "'+n+'" illegal'),e.prototype.type=r;var o=Oi(r);if(o.sub){if(o.sub!==Ri){var i=function(e){var n=t[e.main];return n&&n[Ri]||((n=t[e.main]={})[Ri]=!0),n}(o);i[o.sub]=e}}else t[o.main]=e}return e},e.getClass=function(e,n,r){var o=t[e];if(o&&o[Ri]&&(o=n?o[n]:null),r&&!o)throw new Error(n?"Component "+e+"."+(n||"")+" is used but not imported.":e+".type should be specified.");return o},e.getClassesByMainType=function(e){var n=Oi(e),r=[],o=t[n.main];return o&&o[Ri]?O(o,function(e,t){t!==Ri&&r.push(e)}):r.push(o),r},e.hasClass=function(e){var n=Oi(e);return!!t[n.main]},e.getAllClassMainTypes=function(){var e=[];return O(t,function(t,n){e.push(n)}),e},e.hasSubTypes=function(e){var n=Oi(e),r=t[n.main];return r&&r[Ri]}}function Gi(e,t){for(var n=0;n<e.length;n++)e[n][1]||(e[n][1]=e[n][0]);return t=t||!1,function(n,r,o){for(var i={},a=0;a<e.length;a++){var s=e[a][1];if(!(r&&L(r,s)>=0||o&&L(o,s)<0)){var l=n.getShallow(s,t);null!=l&&(i[e[a][0]]=l)}}return i}}var Ui=Gi([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),ji=function(){function e(){}return e.prototype.getAreaStyle=function(e,t){return Ui(this,e,t)},e}(),Yi=new Nn(50);function qi(e){if("string"==typeof e){var t=Yi.get(e);return t&&t.image}return e}function Xi(e,t,n,r,o){if(e){if("string"==typeof e){if(t&&t.__zrImageSrc===e||!n)return t;var i=Yi.get(e),a={hostEl:n,cb:r,cbPayload:o};return i?!$i(t=i.image)&&i.pending.push(a):((t=c.loadImage(e,Zi,Zi)).__zrImageSrc=e,Yi.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}return e}return t}function Zi(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function $i(e){return e&&e.width&&e.height}var Ki=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Ji(e,t,n,r,o){if(!t)return"";var i=(e+"").split("\n");o=Qi(t,n,r,o);for(var a=0,s=i.length;a<s;a++)i[a]=ea(i[a],o);return i.join("\n")}function Qi(e,t,n,r){var o=A({},r=r||{});o.font=t,n=oe(n,"..."),o.maxIterations=oe(r.maxIterations,2);var i=o.minChar=oe(r.minChar,0);o.cnCharWidth=po("\u56fd",t);var a=o.ascCharWidth=po("a",t);o.placeholder=oe(r.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<i&&s>=a;l++)s-=a;var u=po(n,t);return u>s&&(n="",u=0),s=e-u,o.ellipsis=n,o.ellipsisWidth=u,o.contentWidth=s,o.containerWidth=e,o}function ea(e,t){var n=t.containerWidth,r=t.font,o=t.contentWidth;if(!n)return"";var i=po(e,r);if(i<=n)return e;for(var a=0;;a++){if(i<=o||a>=t.maxIterations){e+=t.ellipsis;break}var s=0===a?ta(e,o,t.ascCharWidth,t.cnCharWidth):i>0?Math.floor(e.length*o/i):0;i=po(e=e.substr(0,s),r)}return""===e&&(e=t.placeholder),e}function ta(e,t,n,r){for(var o=0,i=0,a=e.length;i<a&&o<t;i++){var s=e.charCodeAt(i);o+=0<=s&&s<=127?n:r}return i}var na=function(){},ra=function(e){this.tokens=[],e&&(this.tokens=e)},oa=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function ia(e,t,n,r,o){var i,a,s=""===t,l=o&&n.rich[o]||{},u=e.lines,c=l.font||n.font,d=!1;if(r){var h=l.padding,p=h?h[1]+h[3]:0;if(null!=l.width&&"auto"!==l.width){var f=bo(l.width,r.width)+p;u.length>0&&f+r.accumWidth>r.width&&(i=t.split("\n"),d=!0),r.accumWidth=f}else{var g=la(t,c,r.width,r.breakAll,r.accumWidth);r.accumWidth=g.accumWidth+p,a=g.linesWidths,i=g.lines}}else i=t.split("\n");for(var m=0;m<i.length;m++){var v=i[m],y=new na;if(y.styleName=o,y.text=v,y.isLineHolder=!v&&!s,"number"==typeof l.width?y.width=l.width:y.width=a?a[m]:po(v,c),m||d)u.push(new ra([y]));else{var b=(u[u.length-1]||(u[0]=new ra)).tokens,x=b.length;1===x&&b[0].isLineHolder?b[0]=y:(v||!x||s)&&b.push(y)}}}var aa=z(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function sa(e){return!function(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}(e)||!!aa[e]}function la(e,t,n,r,o){for(var i=[],a=[],s="",l="",u=0,c=0,d=0;d<e.length;d++){var h=e.charAt(d);if("\n"!==h){var p=po(h,t),f=!r&&!sa(h);(i.length?c+p>n:o+c+p>n)?c?(s||l)&&(f?(s||(s=l,l="",c=u=0),i.push(s),a.push(c-u),l+=h,s="",c=u+=p):(l&&(s+=l,l="",u=0),i.push(s),a.push(c),s=h,c=p)):f?(i.push(l),a.push(u),l=h,u=p):(i.push(h),a.push(p)):(c+=p,f?(l+=h,u+=p):(l&&(s+=l,l="",u=0),s+=h))}else l&&(s+=l,c+=u),i.push(s),a.push(c),s="",l="",u=0,c=0}return i.length||s||(s=e,l="",u=0),l&&(s+=l),s&&(i.push(s),a.push(c)),1===i.length&&(c+=o),{accumWidth:c,lines:i,linesWidths:a}}var ua="__zr_style_"+Math.round(10*Math.random()),ca={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},da={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ca[ua]=!0;var ha=["z","z2","invisible"],pa=["invisible"],fa=function(e){function t(t){return e.call(this,t)||this}var r;return n(t,e),t.prototype._init=function(t){for(var n=H(t),r=0;r<n.length;r++){var o=n[r];"style"===o?this.useStyle(t[o]):e.prototype.attrKV.call(this,o,t[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(e,t,n,r){var o=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(e,t,n){return ga.copy(e.getBoundingRect()),e.transform&&ga.applyTransform(e.transform),ma.width=t,ma.height=n,!ga.intersect(ma)}(this,e,t)||o&&!o[0]&&!o[3])return!1;if(n&&this.__clipPaths)for(var i=0;i<this.__clipPaths.length;++i)if(this.__clipPaths[i].isZeroArea())return!1;if(r&&this.parent)for(var a=this.parent;a;){if(a.ignore)return!1;a=a.parent}return!0},t.prototype.contain=function(e,t){return this.rectContain(e,t)},t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.rectContain=function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},t.prototype.getPaintRect=function(){var e=this._paintRect;if(!this._paintRect||this.__dirty){var t=this.transform,n=this.getBoundingRect(),r=this.style,o=r.shadowBlur||0,i=r.shadowOffsetX||0,a=r.shadowOffsetY||0;e=this._paintRect||(this._paintRect=new Ot(0,0,0,0)),t?Ot.applyTransform(e,n,t):e.copy(n),(o||i||a)&&(e.width+=2*o+Math.abs(i),e.height+=2*o+Math.abs(a),e.x=Math.min(e.x,e.x+i-o),e.y=Math.min(e.y,e.y+a-o));var s=this.dirtyRectTolerance;e.isZero()||(e.x=Math.floor(e.x-s),e.y=Math.floor(e.y-s),e.width=Math.ceil(e.width+1+2*s),e.height=Math.ceil(e.height+1+2*s))}return e},t.prototype.setPrevPaintRect=function(e){e?(this._prevPaintRect=this._prevPaintRect||new Ot(0,0,0,0),this._prevPaintRect.copy(e)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(e){return this.animate("style",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(t,n){"style"!==t?e.prototype.attrKV.call(this,t,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(e,t){return"string"==typeof e?this.style[e]=t:A(this.style,e),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(e){e||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(2&this.__dirty)},t.prototype.styleUpdated=function(){this.__dirty&=-3},t.prototype.createStyle=function(e){return ye(ca,e)},t.prototype.useStyle=function(e){e[ua]||(e=this.createStyle(e)),this.__inHover?this.__hoverStyle=e:this.style=e,this.dirtyStyle()},t.prototype.isStyleObject=function(e){return e[ua]},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,n,ha)},t.prototype._applyStateObj=function(t,n,r,o,i,a){e.prototype._applyStateObj.call(this,t,n,r,o,i,a);var s,l=!(n&&o);if(n&&n.style?i?o?s=n.style:(s=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(s,n.style)):(s=this._mergeStyle(this.createStyle(),o?this.style:r.style),this._mergeStyle(s,n.style)):l&&(s=r.style),s)if(i){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var c=H(u),d=0;d<c.length;d++)(p=c[d])in s&&(s[p]=s[p],this.style[p]=u[p]);var h=H(s);for(d=0;d<h.length;d++){var p=h[d];this.style[p]=this.style[p]}this._transitionState(t,{style:s},a,this.getAnimationStyleProps())}else this.useStyle(s);var f=this.__inHover?pa:ha;for(d=0;d<f.length;d++)p=f[d],n&&null!=n[p]?this[p]=n[p]:l&&null!=r[p]&&(this[p]=r[p])},t.prototype._mergeStates=function(t){for(var n,r=e.prototype._mergeStates.call(this,t),o=0;o<t.length;o++){var i=t[o];i.style&&(n=n||{},this._mergeStyle(n,i.style))}return n&&(r.style=n),r},t.prototype._mergeStyle=function(e,t){return A(e,t),e},t.prototype.getAnimationStyleProps=function(){return da},t.initDefaultProps=((r=t.prototype).type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,void(r.__dirty=3)),t}(To),ga=new Ot(0,0,0,0),ma=new Ot(0,0,0,0),va=Math.min,ya=Math.max,ba=Math.sin,xa=Math.cos,_a=2*Math.PI,wa=Ce(),Sa=Ce(),Ca=Ce();function Ma(e,t,n){if(0!==e.length){for(var r=e[0],o=r[0],i=r[0],a=r[1],s=r[1],l=1;l<e.length;l++)r=e[l],o=va(o,r[0]),i=ya(i,r[0]),a=va(a,r[1]),s=ya(s,r[1]);t[0]=o,t[1]=a,n[0]=i,n[1]=s}}function Ta(e,t,n,r,o,i){o[0]=va(e,n),o[1]=va(t,r),i[0]=ya(e,n),i[1]=ya(t,r)}var ka=[],Ia=[];function Aa(e,t,n,r,o,i,a,s,l,u){var c=yn,d=gn,h=c(e,n,o,a,ka);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var p=0;p<h;p++){var f=d(e,n,o,a,ka[p]);l[0]=va(f,l[0]),u[0]=ya(f,u[0])}for(h=c(t,r,i,s,Ia),p=0;p<h;p++){var g=d(t,r,i,s,Ia[p]);l[1]=va(g,l[1]),u[1]=ya(g,u[1])}l[0]=va(e,l[0]),u[0]=ya(e,u[0]),l[0]=va(a,l[0]),u[0]=ya(a,u[0]),l[1]=va(t,l[1]),u[1]=ya(t,u[1]),l[1]=va(s,l[1]),u[1]=ya(s,u[1])}function Da(e,t,n,r,o,i,a,s){var l=Cn,u=wn,c=ya(va(l(e,n,o),1),0),d=ya(va(l(t,r,i),1),0),h=u(e,n,o,c),p=u(t,r,i,d);a[0]=va(e,o,h),a[1]=va(t,i,p),s[0]=ya(e,o,h),s[1]=ya(t,i,p)}function Pa(e,t,n,r,o,i,a,s,l){var u=Ge,c=Ue,d=Math.abs(o-i);if(d%_a<1e-4&&d>1e-4)return s[0]=e-n,s[1]=t-r,l[0]=e+n,void(l[1]=t+r);if(wa[0]=xa(o)*n+e,wa[1]=ba(o)*r+t,Sa[0]=xa(i)*n+e,Sa[1]=ba(i)*r+t,u(s,wa,Sa),c(l,wa,Sa),(o%=_a)<0&&(o+=_a),(i%=_a)<0&&(i+=_a),o>i&&!a?i+=_a:o<i&&a&&(o+=_a),a){var h=i;i=o,o=h}for(var p=0;p<i;p+=Math.PI/2)p>o&&(Ca[0]=xa(p)*n+e,Ca[1]=ba(p)*r+t,u(s,Ca,s),c(l,Ca,l))}var La={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Na=[],Ra=[],Ea=[],Oa=[],Ba=[],za=[],Fa=Math.min,Va=Math.max,Ha=Math.cos,Wa=Math.sin,Ga=Math.abs,Ua=Math.PI,ja=2*Ua,Ya="undefined"!=typeof Float32Array,qa=[];function Xa(e){return Math.round(e/Ua*1e8)/1e8%2*Ua}function Za(e,t){var n=Xa(e[0]);n<0&&(n+=ja);var r=n-e[0],o=e[1];o+=r,!t&&o-n>=ja?o=n+ja:t&&n-o>=ja?o=n-ja:!t&&n>o?o=n+(ja-Xa(n-o)):t&&n<o&&(o=n-(ja-Xa(o-n))),e[0]=n,e[1]=o}var $a=function(){function e(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(e,t,n){(n=n||0)>0&&(this._ux=Ga(n/Qr/e)||0,this._uy=Ga(n/Qr/t)||0)},e.prototype.setDPR=function(e){this.dpr=e},e.prototype.setContext=function(e){this._ctx=e},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(La.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},e.prototype.lineTo=function(e,t){var n=Ga(e-this._xi),r=Ga(t-this._yi),o=n>this._ux||r>this._uy;if(this.addData(La.L,e,t),this._ctx&&o&&this._ctx.lineTo(e,t),o)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var i=n*n+r*r;i>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=i)}return this},e.prototype.bezierCurveTo=function(e,t,n,r,o,i){return this._drawPendingPt(),this.addData(La.C,e,t,n,r,o,i),this._ctx&&this._ctx.bezierCurveTo(e,t,n,r,o,i),this._xi=o,this._yi=i,this},e.prototype.quadraticCurveTo=function(e,t,n,r){return this._drawPendingPt(),this.addData(La.Q,e,t,n,r),this._ctx&&this._ctx.quadraticCurveTo(e,t,n,r),this._xi=n,this._yi=r,this},e.prototype.arc=function(e,t,n,r,o,i){this._drawPendingPt(),qa[0]=r,qa[1]=o,Za(qa,i),r=qa[0];var a=(o=qa[1])-r;return this.addData(La.A,e,t,n,n,r,a,0,i?0:1),this._ctx&&this._ctx.arc(e,t,n,r,o,i),this._xi=Ha(o)*n+e,this._yi=Wa(o)*n+t,this},e.prototype.arcTo=function(e,t,n,r,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,n,r,o),this},e.prototype.rect=function(e,t,n,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,n,r),this.addData(La.R,e,t,n,r),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(La.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&e.closePath(),this._xi=t,this._yi=n,this},e.prototype.fill=function(e){e&&e.fill(),this.toStatic()},e.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(e){var t=e.length;this.data&&this.data.length===t||!Ya||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},e.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,r=this._len,o=0;o<t;o++)n+=e[o].len();for(Ya&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n)),o=0;o<t;o++)for(var i=e[o].data,a=0;a<i.length;a++)this.data[r++]=i[a];this._len=r},e.prototype.addData=function(e,t,n,r,o,i,a,s,l){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var c=0;c<arguments.length;c++)u[this._len++]=arguments[c]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,Ya&&this._len>11&&(this.data=new Float32Array(e)))}},e.prototype.getBoundingRect=function(){Ea[0]=Ea[1]=Ba[0]=Ba[1]=Number.MAX_VALUE,Oa[0]=Oa[1]=za[0]=za[1]=-Number.MAX_VALUE;var e,t=this.data,n=0,r=0,o=0,i=0;for(e=0;e<this._len;){var a=t[e++],s=1===e;switch(s&&(o=n=t[e],i=r=t[e+1]),a){case La.M:n=o=t[e++],r=i=t[e++],Ba[0]=o,Ba[1]=i,za[0]=o,za[1]=i;break;case La.L:Ta(n,r,t[e],t[e+1],Ba,za),n=t[e++],r=t[e++];break;case La.C:Aa(n,r,t[e++],t[e++],t[e++],t[e++],t[e],t[e+1],Ba,za),n=t[e++],r=t[e++];break;case La.Q:Da(n,r,t[e++],t[e++],t[e],t[e+1],Ba,za),n=t[e++],r=t[e++];break;case La.A:var l=t[e++],u=t[e++],c=t[e++],d=t[e++],h=t[e++],p=t[e++]+h;e+=1;var f=!t[e++];s&&(o=Ha(h)*c+l,i=Wa(h)*d+u),Pa(l,u,c,d,h,p,f,Ba,za),n=Ha(p)*c+l,r=Wa(p)*d+u;break;case La.R:Ta(o=n=t[e++],i=r=t[e++],o+t[e++],i+t[e++],Ba,za);break;case La.Z:n=o,r=i}Ge(Ea,Ea,Ba),Ue(Oa,Oa,za)}return 0===e&&(Ea[0]=Ea[1]=Oa[0]=Oa[1]=0),new Ot(Ea[0],Ea[1],Oa[0]-Ea[0],Oa[1]-Ea[1])},e.prototype._calculateLength=function(){var e=this.data,t=this._len,n=this._ux,r=this._uy,o=0,i=0,a=0,s=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,u=0,c=0,d=0;d<t;){var h=e[d++],p=1===d;p&&(a=o=e[d],s=i=e[d+1]);var f=-1;switch(h){case La.M:o=a=e[d++],i=s=e[d++];break;case La.L:var g=e[d++],m=(b=e[d++])-i;(Ga(A=g-o)>n||Ga(m)>r||d===t-1)&&(f=Math.sqrt(A*A+m*m),o=g,i=b);break;case La.C:var v=e[d++],y=e[d++],b=(g=e[d++],e[d++]),x=e[d++],_=e[d++];f=_n(o,i,v,y,g,b,x,_,10),o=x,i=_;break;case La.Q:f=kn(o,i,v=e[d++],y=e[d++],g=e[d++],b=e[d++],10),o=g,i=b;break;case La.A:var w=e[d++],S=e[d++],C=e[d++],M=e[d++],T=e[d++],k=e[d++],I=k+T;d+=1,e[d++],p&&(a=Ha(T)*C+w,s=Wa(T)*M+S),f=Va(C,M)*Fa(ja,Math.abs(k)),o=Ha(I)*C+w,i=Wa(I)*M+S;break;case La.R:a=o=e[d++],s=i=e[d++],f=2*e[d++]+2*e[d++];break;case La.Z:var A=a-o;m=s-i,f=Math.sqrt(A*A+m*m),o=a,i=s}f>=0&&(l[c++]=f,u+=f)}return this._pathLen=u,u},e.prototype.rebuildPath=function(e,t){var n,r,o,i,a,s,l,u,c,d,h=this.data,p=this._ux,f=this._uy,g=this._len,m=t<1,v=0,y=0,b=0;if(!m||(this._pathSegLen||this._calculateLength(),l=this._pathSegLen,u=t*this._pathLen))e:for(var x=0;x<g;){var _=h[x++],w=1===x;switch(w&&(n=o=h[x],r=i=h[x+1]),_!==La.L&&b>0&&(e.lineTo(c,d),b=0),_){case La.M:n=o=h[x++],r=i=h[x++],e.moveTo(o,i);break;case La.L:a=h[x++],s=h[x++];var S=Ga(a-o),C=Ga(s-i);if(S>p||C>f){if(m){if(v+(X=l[y++])>u){var M=(u-v)/X;e.lineTo(o*(1-M)+a*M,i*(1-M)+s*M);break e}v+=X}e.lineTo(a,s),o=a,i=s,b=0}else{var T=S*S+C*C;T>b&&(c=a,d=s,b=T)}break;case La.C:var k=h[x++],I=h[x++],A=h[x++],D=h[x++],P=h[x++],L=h[x++];if(m){if(v+(X=l[y++])>u){bn(o,k,A,P,M=(u-v)/X,Na),bn(i,I,D,L,M,Ra),e.bezierCurveTo(Na[1],Ra[1],Na[2],Ra[2],Na[3],Ra[3]);break e}v+=X}e.bezierCurveTo(k,I,A,D,P,L),o=P,i=L;break;case La.Q:if(k=h[x++],I=h[x++],A=h[x++],D=h[x++],m){if(v+(X=l[y++])>u){Mn(o,k,A,M=(u-v)/X,Na),Mn(i,I,D,M,Ra),e.quadraticCurveTo(Na[1],Ra[1],Na[2],Ra[2]);break e}v+=X}e.quadraticCurveTo(k,I,A,D),o=A,i=D;break;case La.A:var N=h[x++],R=h[x++],E=h[x++],O=h[x++],B=h[x++],z=h[x++],F=h[x++],V=!h[x++],H=E>O?E:O,W=Ga(E-O)>.001,G=B+z,U=!1;if(m&&(v+(X=l[y++])>u&&(G=B+z*(u-v)/X,U=!0),v+=X),W&&e.ellipse?e.ellipse(N,R,E,O,F,B,G,V):e.arc(N,R,H,B,G,V),U)break e;w&&(n=Ha(B)*E+N,r=Wa(B)*O+R),o=Ha(G)*E+N,i=Wa(G)*O+R;break;case La.R:n=o=h[x],r=i=h[x+1],a=h[x++],s=h[x++];var j=h[x++],Y=h[x++];if(m){if(v+(X=l[y++])>u){var q=u-v;e.moveTo(a,s),e.lineTo(a+Fa(q,j),s),(q-=j)>0&&e.lineTo(a+j,s+Fa(q,Y)),(q-=Y)>0&&e.lineTo(a+Va(j-q,0),s+Y),(q-=j)>0&&e.lineTo(a,s+Va(Y-q,0));break e}v+=X}e.rect(a,s,j,Y);break;case La.Z:if(m){var X;if(v+(X=l[y++])>u){M=(u-v)/X,e.lineTo(o*(1-M)+n*M,i*(1-M)+r*M);break e}v+=X}e.closePath(),o=n,i=r}}},e.prototype.clone=function(){var t=new e,n=this.data;return t.data=n.slice?n.slice():Array.prototype.slice.call(n),t._len=this._len,t},e.CMD=La,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function Ka(e,t,n,r,o,i,a){if(0===o)return!1;var s,l=o;if(a>t+l&&a>r+l||a<t-l&&a<r-l||i>e+l&&i>n+l||i<e-l&&i<n-l)return!1;if(e===n)return Math.abs(i-e)<=l/2;var u=(s=(t-r)/(e-n))*i-a+(e*r-n*t)/(e-n);return u*u/(s*s+1)<=l/2*l/2}function Ja(e,t,n,r,o,i,a,s,l,u,c){if(0===l)return!1;var d=l;return!(c>t+d&&c>r+d&&c>i+d&&c>s+d||c<t-d&&c<r-d&&c<i-d&&c<s-d||u>e+d&&u>n+d&&u>o+d&&u>a+d||u<e-d&&u<n-d&&u<o-d&&u<a-d)&&xn(e,t,n,r,o,i,a,s,u,c,null)<=d/2}function Qa(e,t,n,r,o,i,a,s,l){if(0===a)return!1;var u=a;return!(l>t+u&&l>r+u&&l>i+u||l<t-u&&l<r-u&&l<i-u||s>e+u&&s>n+u&&s>o+u||s<e-u&&s<n-u&&s<o-u)&&Tn(e,t,n,r,o,i,s,l,null)<=u/2}var es=2*Math.PI;function ts(e){return(e%=es)<0&&(e+=es),e}var ns=2*Math.PI;function rs(e,t,n,r,o,i,a,s,l){if(0===a)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(r-o)%ns<1e-4)return!0;if(i){var d=r;r=ts(o),o=ts(d)}else r=ts(r),o=ts(o);r>o&&(o+=ns);var h=Math.atan2(l,s);return h<0&&(h+=ns),h>=r&&h<=o||h+ns>=r&&h+ns<=o}function os(e,t,n,r,o,i){if(i>t&&i>r||i<t&&i<r)return 0;if(r===t)return 0;var a=(i-t)/(r-t),s=r<t?1:-1;1!==a&&0!==a||(s=r<t?.5:-.5);var l=a*(n-e)+e;return l===o?1/0:l>o?s:0}var is=$a.CMD,as=2*Math.PI,ss=[-1,-1,-1],ls=[-1,-1];function us(e,t,n,r,o,i,a,s,l,u){if(u>t&&u>r&&u>i&&u>s||u<t&&u<r&&u<i&&u<s)return 0;var c,d=vn(t,r,i,s,u,ss);if(0===d)return 0;for(var h=0,p=-1,f=void 0,g=void 0,m=0;m<d;m++){var v=ss[m],y=0===v||1===v?.5:1;gn(e,n,o,a,v)<l||(p<0&&(p=yn(t,r,i,s,ls),ls[1]<ls[0]&&p>1&&(void 0,c=ls[0],ls[0]=ls[1],ls[1]=c),f=gn(t,r,i,s,ls[0]),p>1&&(g=gn(t,r,i,s,ls[1]))),2===p?v<ls[0]?h+=f<t?y:-y:v<ls[1]?h+=g<f?y:-y:h+=s<g?y:-y:v<ls[0]?h+=f<t?y:-y:h+=s<f?y:-y)}return h}function cs(e,t,n,r,o,i,a,s){if(s>t&&s>r&&s>i||s<t&&s<r&&s<i)return 0;var l=function(e,t,n,r,o){var i=e-2*t+n,a=2*(t-e),s=e-r,l=0;if(pn(i))fn(a)&&(c=-s/a)>=0&&c<=1&&(o[l++]=c);else{var u=a*a-4*i*s;if(pn(u))(c=-a/(2*i))>=0&&c<=1&&(o[l++]=c);else if(u>0){var c,d=an(u),h=(-a-d)/(2*i);(c=(-a+d)/(2*i))>=0&&c<=1&&(o[l++]=c),h>=0&&h<=1&&(o[l++]=h)}}return l}(t,r,i,s,ss);if(0===l)return 0;var u=Cn(t,r,i);if(u>=0&&u<=1){for(var c=0,d=wn(t,r,i,u),h=0;h<l;h++){var p=0===ss[h]||1===ss[h]?.5:1;wn(e,n,o,ss[h])<a||(ss[h]<u?c+=d<t?p:-p:c+=i<d?p:-p)}return c}return p=0===ss[0]||1===ss[0]?.5:1,wn(e,n,o,ss[0])<a?0:i<t?p:-p}function ds(e,t,n,r,o,i,a,s){if((s-=t)>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);ss[0]=-l,ss[1]=l;var u=Math.abs(r-o);if(u<1e-4)return 0;if(u>=as-1e-4){r=0,o=as;var c=i?1:-1;return a>=ss[0]+e&&a<=ss[1]+e?c:0}if(r>o){var d=r;r=o,o=d}r<0&&(r+=as,o+=as);for(var h=0,p=0;p<2;p++){var f=ss[p];if(f+e>a){var g=Math.atan2(s,f);c=i?1:-1,g<0&&(g=as+g),(g>=r&&g<=o||g+as>=r&&g+as<=o)&&(g>Math.PI/2&&g<1.5*Math.PI&&(c=-c),h+=c)}}return h}function hs(e,t,n,r,o){for(var i,a,s,l,u=e.data,c=e.len(),d=0,h=0,p=0,f=0,g=0,m=0;m<c;){var v=u[m++],y=1===m;switch(v===is.M&&m>1&&(n||(d+=os(h,p,f,g,r,o))),y&&(f=h=u[m],g=p=u[m+1]),v){case is.M:h=f=u[m++],p=g=u[m++];break;case is.L:if(n){if(Ka(h,p,u[m],u[m+1],t,r,o))return!0}else d+=os(h,p,u[m],u[m+1],r,o)||0;h=u[m++],p=u[m++];break;case is.C:if(n){if(Ja(h,p,u[m++],u[m++],u[m++],u[m++],u[m],u[m+1],t,r,o))return!0}else d+=us(h,p,u[m++],u[m++],u[m++],u[m++],u[m],u[m+1],r,o)||0;h=u[m++],p=u[m++];break;case is.Q:if(n){if(Qa(h,p,u[m++],u[m++],u[m],u[m+1],t,r,o))return!0}else d+=cs(h,p,u[m++],u[m++],u[m],u[m+1],r,o)||0;h=u[m++],p=u[m++];break;case is.A:var b=u[m++],x=u[m++],_=u[m++],w=u[m++],S=u[m++],C=u[m++];m+=1;var M=!!(1-u[m++]);i=Math.cos(S)*_+b,a=Math.sin(S)*w+x,y?(f=i,g=a):d+=os(h,p,i,a,r,o);var T=(r-b)*w/_+b;if(n){if(rs(b,x,w,S,S+C,M,t,T,o))return!0}else d+=ds(b,x,w,S,S+C,M,T,o);h=Math.cos(S+C)*_+b,p=Math.sin(S+C)*w+x;break;case is.R:if(f=h=u[m++],g=p=u[m++],i=f+u[m++],a=g+u[m++],n){if(Ka(f,g,i,g,t,r,o)||Ka(i,g,i,a,t,r,o)||Ka(i,a,f,a,t,r,o)||Ka(f,a,f,g,t,r,o))return!0}else d+=os(i,g,i,a,r,o),d+=os(f,a,f,g,r,o);break;case is.Z:if(n){if(Ka(h,p,f,g,t,r,o))return!0}else d+=os(h,p,f,g,r,o);h=f,p=g}}return n||(s=p,l=g,Math.abs(s-l)<1e-4)||(d+=os(h,p,f,g,r,o)||0),0!==d}var ps=D({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ca),fs={style:D({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},da.style)},gs=uo.concat(["invisible","culling","z","z2","zlevel","parent"]),ms=function(e){function t(t){return e.call(this,t)||this}var r;return n(t,e),t.prototype.update=function(){var n=this;e.prototype.update.call(this);var r=this.style;if(r.decal){var o=this._decalEl=this._decalEl||new t;o.buildPath===t.prototype.buildPath&&(o.buildPath=function(e){n.buildPath(e,n.shape)}),o.silent=!0;var i=o.style;for(var a in r)i[a]!==r[a]&&(i[a]=r[a]);i.fill=r.fill?r.decal:null,i.decal=null,i.shadowColor=null,r.strokeFirst&&(i.stroke=null);for(var s=0;s<gs.length;++s)o[gs[s]]=this[gs[s]];o.__dirty|=1}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(t){var n=H(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var o=0;o<n.length;o++){var i=n[o],a=t[i];"style"===i?this.style?A(this.style,a):this.useStyle(a):"shape"===i?A(this.shape,a):e.prototype.attrKV.call(this,i,a)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var e=this.style.fill;if("none"!==e){if(Y(e)){var t=nr(e,0);return t>.5?eo:t>.2?"#eee":to}if(e)return to}return eo},t.prototype.getInsideTextStroke=function(e){var t=this.style.fill;if(Y(t)){var n=this.__zr;if(!(!n||!n.isDarkMode())==nr(e,0)<.4)return t}},t.prototype.buildPath=function(e,t,n){},t.prototype.pathUpdated=function(){this.__dirty&=-5},t.prototype.getUpdatedPathProxy=function(e){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,e),this.path},t.prototype.createPathProxy=function(){this.path=new $a(!1)},t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.getBoundingRect=function(){var e=this._rect,t=this.style,n=!e;if(n){var r=!1;this.path||(r=!0,this.createPathProxy());var o=this.path;(r||4&this.__dirty)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),e=o.getBoundingRect()}if(this._rect=e,this.hasStroke()&&this.path&&this.path.len()>0){var i=this._rectStroke||(this._rectStroke=e.clone());if(this.__dirty||n){i.copy(e);var a=t.strokeNoScale?this.getLineScale():1,s=t.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;s=Math.max(s,null==l?4:l)}a>1e-10&&(i.width+=s/a,i.height+=s/a,i.x-=s/a/2,i.y-=s/a/2)}return i}return e},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect(),o=this.style;if(e=n[0],t=n[1],r.contain(e,t)){var i=this.path;if(this.hasStroke()){var a=o.lineWidth,s=o.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(this.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(e,t,n,r){return hs(e,t,!0,n,r)}(i,a/s,e,t)))return!0}if(this.hasFill())return function(e,t,n){return hs(e,0,!1,t,n)}(i,e,t)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(e){return this.animate("shape",e)},t.prototype.updateDuringAnimation=function(e){"style"===e?this.dirtyStyle():"shape"===e?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(t,n){"shape"===t?this.setShape(n):e.prototype.attrKV.call(this,t,n)},t.prototype.setShape=function(e,t){var n=this.shape;return n||(n=this.shape={}),"string"==typeof e?n[e]=t:A(n,e),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(4&this.__dirty)},t.prototype.createStyle=function(e){return ye(ps,e)},t.prototype._innerSaveToNormal=function(t){e.prototype._innerSaveToNormal.call(this,t);var n=this._normalState;t.shape&&!n.shape&&(n.shape=A({},this.shape))},t.prototype._applyStateObj=function(t,n,r,o,i,a){e.prototype._applyStateObj.call(this,t,n,r,o,i,a);var s,l=!(n&&o);if(n&&n.shape?i?o?s=n.shape:(s=A({},r.shape),A(s,n.shape)):(s=A({},o?this.shape:r.shape),A(s,n.shape)):l&&(s=r.shape),s)if(i){this.shape=A({},this.shape);for(var u={},c=H(s),d=0;d<c.length;d++){var h=c[d];"object"==typeof s[h]?this.shape[h]=s[h]:u[h]=s[h]}this._transitionState(t,{shape:u},a)}else this.shape=s,this.dirtyShape()},t.prototype._mergeStates=function(t){for(var n,r=e.prototype._mergeStates.call(this,t),o=0;o<t.length;o++){var i=t[o];i.shape&&(n=n||{},this._mergeStyle(n,i.shape))}return n&&(r.shape=n),r},t.prototype.getAnimationStyleProps=function(){return fs},t.prototype.isZeroArea=function(){return!1},t.extend=function(e){var r=function(t){function r(n){var r=t.call(this,n)||this;return e.init&&e.init.call(r,n),r}return n(r,t),r.prototype.getDefaultStyle=function(){return T(e.style)},r.prototype.getDefaultShape=function(){return T(e.shape)},r}(t);for(var o in e)"function"==typeof e[o]&&(r.prototype[o]=e[o]);return r},t.initDefaultProps=((r=t.prototype).type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,void(r.__dirty=7)),t}(fa),vs=D({strokeFirst:!0,font:l,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ps),ys=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.hasStroke=function(){var e=this.style,t=e.stroke;return null!=t&&"none"!==t&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return ye(vs,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var t=e.text;null!=t?t+="":t="";var n=go(t,e.font,e.textAlign,e.textBaseline);if(n.x+=e.x||0,n.y+=e.y||0,this.hasStroke()){var r=e.lineWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(fa);ys.prototype.type="tspan";var bs=D({x:0,y:0},ca),xs={style:D({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},da.style)},_s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.createStyle=function(e){return ye(bs,e)},t.prototype._getSize=function(e){var t=this.style,n=t[e];if(null!=n)return n;var r,o=(r=t.image)&&"string"!=typeof r&&r.width&&r.height?t.image:this.__image;if(!o)return 0;var i="width"===e?"height":"width",a=t[i];return null==a?o[e]:o[e]/o[i]*a},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return xs},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new Ot(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(fa);_s.prototype.type="image";var ws=Math.round;function Ss(e,t,n){if(t){var r=t.x1,o=t.x2,i=t.y1,a=t.y2;e.x1=r,e.x2=o,e.y1=i,e.y2=a;var s=n&&n.lineWidth;return s?(ws(2*r)===ws(2*o)&&(e.x1=e.x2=Ms(r,s,!0)),ws(2*i)===ws(2*a)&&(e.y1=e.y2=Ms(i,s,!0)),e):e}}function Cs(e,t,n){if(t){var r=t.x,o=t.y,i=t.width,a=t.height;e.x=r,e.y=o,e.width=i,e.height=a;var s=n&&n.lineWidth;return s?(e.x=Ms(r,s,!0),e.y=Ms(o,s,!0),e.width=Math.max(Ms(r+i,s,!1)-e.x,0===i?0:1),e.height=Math.max(Ms(o+a,s,!1)-e.y,0===a?0:1),e):e}}function Ms(e,t,n){if(!t)return e;var r=ws(2*e);return(r+ws(t))%2==0?r/2:(r+(n?1:-1))/2}var Ts=function(){this.x=0,this.y=0,this.width=0,this.height=0},ks={},Is=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new Ts},t.prototype.buildPath=function(e,t){var n,r,o,i;if(this.subPixelOptimize){var a=Cs(ks,t,this.style);n=a.x,r=a.y,o=a.width,i=a.height,a.r=t.r,t=a}else n=t.x,r=t.y,o=t.width,i=t.height;t.r?function(e,t){var n,r,o,i,a,s=t.x,l=t.y,u=t.width,c=t.height,d=t.r;u<0&&(s+=u,u=-u),c<0&&(l+=c,c=-c),"number"==typeof d?n=r=o=i=d:d instanceof Array?1===d.length?n=r=o=i=d[0]:2===d.length?(n=o=d[0],r=i=d[1]):3===d.length?(n=d[0],r=i=d[1],o=d[2]):(n=d[0],r=d[1],o=d[2],i=d[3]):n=r=o=i=0,n+r>u&&(n*=u/(a=n+r),r*=u/a),o+i>u&&(o*=u/(a=o+i),i*=u/a),r+o>c&&(r*=c/(a=r+o),o*=c/a),n+i>c&&(n*=c/(a=n+i),i*=c/a),e.moveTo(s+n,l),e.lineTo(s+u-r,l),0!==r&&e.arc(s+u-r,l+r,r,-Math.PI/2,0),e.lineTo(s+u,l+c-o),0!==o&&e.arc(s+u-o,l+c-o,o,0,Math.PI/2),e.lineTo(s+i,l+c),0!==i&&e.arc(s+i,l+c-i,i,Math.PI/2,Math.PI),e.lineTo(s,l+n),0!==n&&e.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}(e,t):e.rect(n,r,o,i)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(ms);Is.prototype.type="rect";var As={fill:"#000"},Ds={style:D({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},da.style)},Ps=function(e){function t(t){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=As,n.attr(t),n}return n(t,e),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var n=this._children[t];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(t){var n=this.innerTransformable;return n?n.getLocalTransform(t):e.prototype.getLocalTransform.call(this,t)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){var e;this._childCursor=0,zs(e=this.style),O(e.rich,zs),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(t){e.prototype.addSelfToZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=t},t.prototype.removeSelfFromZr=function(t){e.prototype.removeSelfFromZr.call(this,t);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Ot(0,0,0,0),t=this._children,n=[],r=null,o=0;o<t.length;o++){var i=t[o],a=i.getBoundingRect(),s=i.getLocalTransform(n);s?(e.copy(a),e.applyTransform(s),(r=r||e.clone()).union(e)):(r=r||a.clone()).union(a)}this._rect=r||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||As},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,t){if(!t)return e;var n=t.rich,r=e.rich||n&&{};return A(e,t),n&&r?(this._mergeRich(r,n),e.rich=r):r&&(e.rich=r),e},t.prototype._mergeRich=function(e,t){for(var n=H(t),r=0;r<n.length;r++){var o=n[r];e[o]=e[o]||{},A(e[o],t[o])}},t.prototype.getAnimationStyleProps=function(){return Ds},t.prototype._getOrCreateChild=function(e){var t=this._children[this._childCursor];return t&&t instanceof e||(t=new e),this._children[this._childCursor++]=t,t.__zr=this.__zr,t.parent=this,t},t.prototype._updatePlainTexts=function(){var e=this.style,t=e.font||l,n=e.padding,r=function(e,t){null!=e&&(e+="");var n,r=t.overflow,o=t.padding,i=t.font,a="truncate"===r,s=yo(i),l=oe(t.lineHeight,s),u=!!t.backgroundColor,c="truncate"===t.lineOverflow,d=t.width,h=(n=null==d||"break"!==r&&"breakAll"!==r?e?e.split("\n"):[]:e?la(e,t.font,d,"breakAll"===r,0).lines:[]).length*l,p=oe(t.height,h);if(h>p&&c){var f=Math.floor(p/l);n=n.slice(0,f)}if(e&&a&&null!=d)for(var g=Qi(d,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<n.length;m++)n[m]=ea(n[m],g);var v=p,y=0;for(m=0;m<n.length;m++)y=Math.max(po(n[m],i),y);null==d&&(d=y);var b=y;return o&&(v+=o[0]+o[2],b+=o[1]+o[3],d+=o[1]+o[3]),u&&(b=d),{lines:n,height:p,outerWidth:b,outerHeight:v,lineHeight:l,calculatedLineHeight:s,contentWidth:y,contentHeight:h,width:d}}(Ws(e),e),o=Gs(e),i=!!e.backgroundColor,a=r.outerHeight,s=r.outerWidth,u=r.contentWidth,c=r.lines,d=r.lineHeight,h=this._defaultStyle,p=e.x||0,f=e.y||0,g=e.align||h.align||"left",m=e.verticalAlign||h.verticalAlign||"top",v=p,y=vo(f,r.contentHeight,m);if(o||n){var b=mo(p,s,g),x=vo(f,a,m);o&&this._renderBackground(e,e,b,x,s,a)}y+=d/2,n&&(v=Hs(p,g,n),"top"===m?y+=n[0]:"bottom"===m&&(y-=n[2]));for(var _=0,w=!1,S=(Vs("fill"in e?e.fill:(w=!0,h.fill))),C=(Fs("stroke"in e?e.stroke:i||h.autoStroke&&!w?null:(_=2,h.stroke))),M=e.textShadowBlur>0,T=null!=e.width&&("truncate"===e.overflow||"break"===e.overflow||"breakAll"===e.overflow),k=r.calculatedLineHeight,I=0;I<c.length;I++){var A=this._getOrCreateChild(ys),D=A.createStyle();A.useStyle(D),D.text=c[I],D.x=v,D.y=y,g&&(D.textAlign=g),D.textBaseline="middle",D.opacity=e.opacity,D.strokeFirst=!0,M&&(D.shadowBlur=e.textShadowBlur||0,D.shadowColor=e.textShadowColor||"transparent",D.shadowOffsetX=e.textShadowOffsetX||0,D.shadowOffsetY=e.textShadowOffsetY||0),D.stroke=C,D.fill=S,C&&(D.lineWidth=e.lineWidth||_,D.lineDash=e.lineDash,D.lineDashOffset=e.lineDashOffset||0),D.font=t,Os(D,e),y+=d,T&&A.setBoundingRect(new Ot(mo(D.x,e.width,D.textAlign),vo(D.y,k,D.textBaseline),u,k))}},t.prototype._updateRichTexts=function(){var e=this.style,t=function(e,t){var n=new oa;if(null!=e&&(e+=""),!e)return n;for(var r,o=t.width,i=t.height,a=t.overflow,s="break"!==a&&"breakAll"!==a||null==o?null:{width:o,accumWidth:0,breakAll:"breakAll"===a},l=Ki.lastIndex=0;null!=(r=Ki.exec(e));){var u=r.index;u>l&&ia(n,e.substring(l,u),t,s),ia(n,r[2],t,s,r[1]),l=Ki.lastIndex}l<e.length&&ia(n,e.substring(l,e.length),t,s);var c=[],d=0,h=0,p=t.padding,f="truncate"===a,g="truncate"===t.lineOverflow;function m(e,t,n){e.width=t,e.lineHeight=n,d+=n,h=Math.max(h,t)}e:for(var v=0;v<n.lines.length;v++){for(var y=n.lines[v],b=0,x=0,_=0;_<y.tokens.length;_++){var w=(L=y.tokens[_]).styleName&&t.rich[L.styleName]||{},S=L.textPadding=w.padding,C=S?S[1]+S[3]:0,M=L.font=w.font||t.font;L.contentHeight=yo(M);var T=oe(w.height,L.contentHeight);if(L.innerHeight=T,S&&(T+=S[0]+S[2]),L.height=T,L.lineHeight=ie(w.lineHeight,t.lineHeight,T),L.align=w&&w.align||t.align,L.verticalAlign=w&&w.verticalAlign||"middle",g&&null!=i&&d+L.lineHeight>i){_>0?(y.tokens=y.tokens.slice(0,_),m(y,x,b),n.lines=n.lines.slice(0,v+1)):n.lines=n.lines.slice(0,v);break e}var k=w.width,I=null==k||"auto"===k;if("string"==typeof k&&"%"===k.charAt(k.length-1))L.percentWidth=k,c.push(L),L.contentWidth=po(L.text,M);else{if(I){var A=w.backgroundColor,D=A&&A.image;D&&$i(D=qi(D))&&(L.width=Math.max(L.width,D.width*T/D.height))}var P=f&&null!=o?o-x:null;null!=P&&P<L.width?!I||P<C?(L.text="",L.width=L.contentWidth=0):(L.text=Ji(L.text,P-C,M,t.ellipsis,{minChar:t.truncateMinChar}),L.width=L.contentWidth=po(L.text,M)):L.contentWidth=po(L.text,M)}L.width+=C,x+=L.width,w&&(b=Math.max(b,L.lineHeight))}m(y,x,b)}for(n.outerWidth=n.width=oe(o,h),n.outerHeight=n.height=oe(i,d),n.contentHeight=d,n.contentWidth=h,p&&(n.outerWidth+=p[1]+p[3],n.outerHeight+=p[0]+p[2]),v=0;v<c.length;v++){var L,N=(L=c[v]).percentWidth;L.width=parseInt(N,10)/100*n.width}return n}(Ws(e),e),n=t.width,r=t.outerWidth,o=t.outerHeight,i=e.padding,a=e.x||0,s=e.y||0,l=this._defaultStyle,u=e.align||l.align,c=e.verticalAlign||l.verticalAlign,d=mo(a,r,u),h=vo(s,o,c),p=d,f=h;i&&(p+=i[3],f+=i[0]);var g=p+n;Gs(e)&&this._renderBackground(e,e,d,h,r,o);for(var m=!!e.backgroundColor,v=0;v<t.lines.length;v++){for(var y=t.lines[v],b=y.tokens,x=b.length,_=y.lineHeight,w=y.width,S=0,C=p,M=g,T=x-1,k=void 0;S<x&&(!(k=b[S]).align||"left"===k.align);)this._placeToken(k,e,_,f,C,"left",m),w-=k.width,C+=k.width,S++;for(;T>=0&&"right"===(k=b[T]).align;)this._placeToken(k,e,_,f,M,"right",m),w-=k.width,M-=k.width,T--;for(C+=(n-(C-p)-(g-M)-w)/2;S<=T;)k=b[S],this._placeToken(k,e,_,f,C+k.width/2,"center",m),C+=k.width,S++;f+=_}},t.prototype._placeToken=function(e,t,n,r,o,i,a){var s=t.rich[e.styleName]||{};s.text=e.text;var u=e.verticalAlign,c=r+n/2;"top"===u?c=r+e.height/2:"bottom"===u&&(c=r+n-e.height/2),!e.isLineHolder&&Gs(s)&&this._renderBackground(s,t,"right"===i?o-e.width:"center"===i?o-e.width/2:o,c-e.height/2,e.width,e.height);var d=!!s.backgroundColor,h=e.textPadding;h&&(o=Hs(o,i,h),c-=e.height/2-h[0]-e.innerHeight/2);var p=this._getOrCreateChild(ys),f=p.createStyle();p.useStyle(f);var g=this._defaultStyle,m=!1,v=0,y=Vs("fill"in s?s.fill:"fill"in t?t.fill:(m=!0,g.fill)),b=Fs("stroke"in s?s.stroke:"stroke"in t?t.stroke:d||a||g.autoStroke&&!m?null:(v=2,g.stroke)),x=s.textShadowBlur>0||t.textShadowBlur>0;f.text=e.text,f.x=o,f.y=c,x&&(f.shadowBlur=s.textShadowBlur||t.textShadowBlur||0,f.shadowColor=s.textShadowColor||t.textShadowColor||"transparent",f.shadowOffsetX=s.textShadowOffsetX||t.textShadowOffsetX||0,f.shadowOffsetY=s.textShadowOffsetY||t.textShadowOffsetY||0),f.textAlign=i,f.textBaseline="middle",f.font=e.font||l,f.opacity=ie(s.opacity,t.opacity,1),Os(f,s),b&&(f.lineWidth=ie(s.lineWidth,t.lineWidth,v),f.lineDash=oe(s.lineDash,t.lineDash),f.lineDashOffset=t.lineDashOffset||0,f.stroke=b),y&&(f.fill=y);var _=e.contentWidth,w=e.contentHeight;p.setBoundingRect(new Ot(mo(f.x,_,f.textAlign),vo(f.y,w,f.textBaseline),_,w))},t.prototype._renderBackground=function(e,t,n,r,o,i){var a,s,l,u=e.backgroundColor,c=e.borderWidth,d=e.borderColor,h=u&&u.image,p=u&&!h,f=e.borderRadius,g=this;if(p||e.lineHeight||c&&d){(a=this._getOrCreateChild(Is)).useStyle(a.createStyle()),a.style.fill=null;var m=a.shape;m.x=n,m.y=r,m.width=o,m.height=i,m.r=f,a.dirtyShape()}if(p)(l=a.style).fill=u||null,l.fillOpacity=oe(e.fillOpacity,1);else if(h){(s=this._getOrCreateChild(_s)).onload=function(){g.dirtyStyle()};var v=s.style;v.image=u.image,v.x=n,v.y=r,v.width=o,v.height=i}c&&d&&((l=a.style).lineWidth=c,l.stroke=d,l.strokeOpacity=oe(e.strokeOpacity,1),l.lineDash=e.borderDash,l.lineDashOffset=e.borderDashOffset||0,a.strokeContainThreshold=0,a.hasFill()&&a.hasStroke()&&(l.strokeFirst=!0,l.lineWidth*=2));var y=(a||s).style;y.shadowBlur=e.shadowBlur||0,y.shadowColor=e.shadowColor||"transparent",y.shadowOffsetX=e.shadowOffsetX||0,y.shadowOffsetY=e.shadowOffsetY||0,y.opacity=ie(e.opacity,t.opacity,1)},t.makeFont=function(e){var t="";return Bs(e)&&(t=[e.fontStyle,e.fontWeight,Es(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),t&&ue(t)||e.textFont||e.font},t}(fa),Ls={left:!0,right:1,center:1},Ns={top:1,bottom:1,middle:1},Rs=["fontStyle","fontWeight","fontSize","fontFamily"];function Es(e){return"string"!=typeof e||-1===e.indexOf("px")&&-1===e.indexOf("rem")&&-1===e.indexOf("em")?isNaN(+e)?"12px":e+"px":e}function Os(e,t){for(var n=0;n<Rs.length;n++){var r=Rs[n],o=t[r];null!=o&&(e[r]=o)}}function Bs(e){return null!=e.fontSize||e.fontFamily||e.fontWeight}function zs(e){if(e){e.font=Ps.makeFont(e);var t=e.align;"middle"===t&&(t="center"),e.align=null==t||Ls[t]?t:"left";var n=e.verticalAlign;"center"===n&&(n="middle"),e.verticalAlign=null==n||Ns[n]?n:"top",e.padding&&(e.padding=se(e.padding))}}function Fs(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function Vs(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function Hs(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function Ws(e){var t=e.text;return null!=t&&(t+=""),t}function Gs(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var Us=Ci(),js=function(e,t,n,r){if(r){var o=Us(r);o.dataIndex=n,o.dataType=t,o.seriesIndex=e,"group"===r.type&&r.traverse(function(r){var o=Us(r);o.seriesIndex=e,o.dataIndex=n,o.dataType=t})}},Ys=1,qs={},Xs=Ci(),Zs=Ci(),$s=["emphasis","blur","select"],Ks=["normal","emphasis","blur","select"],Js="highlight",Qs="downplay",el="select",tl="unselect",nl="toggleSelect";function rl(e){return null!=e&&"none"!==e}var ol=new Nn(100);function il(e){if(Y(e)){var t=ol.get(e);return t||(t=Xn(e,-.1),ol.put(e,t)),t}if(Q(e)){var n=A({},e);return n.colorStops=B(e.colorStops,function(e){return{offset:e.offset,color:Xn(e.color,-.1)}}),n}return e}function al(e,t,n){e.onHoverStateChange&&(e.hoverState||0)!==n&&e.onHoverStateChange(t),e.hoverState=n}function sl(e){al(e,"emphasis",2)}function ll(e){2===e.hoverState&&al(e,"normal",0)}function ul(e){al(e,"blur",1)}function cl(e){1===e.hoverState&&al(e,"normal",0)}function dl(e){e.selected=!0}function hl(e){e.selected=!1}function pl(e,t,n){t(e,n)}function fl(e,t,n){pl(e,t,n),e.isGroup&&e.traverse(function(e){pl(e,t,n)})}function gl(e,t){switch(t){case"emphasis":e.hoverState=2;break;case"normal":e.hoverState=0;break;case"blur":e.hoverState=1;break;case"select":e.selected=!0}}function ml(e,t){var n=this.states[e];if(this.style){if("emphasis"===e)return function(e,t,n,r){var o=n&&L(n,"select")>=0,i=!1;if(e instanceof ms){var a=Xs(e),s=o&&a.selectFill||a.normalFill,l=o&&a.selectStroke||a.normalStroke;if(rl(s)||rl(l)){var u=(r=r||{}).style||{};"inherit"===u.fill?(i=!0,r=A({},r),(u=A({},u)).fill=s):!rl(u.fill)&&rl(s)?(i=!0,r=A({},r),(u=A({},u)).fill=il(s)):!rl(u.stroke)&&rl(l)&&(i||(r=A({},r),u=A({},u)),u.stroke=il(l)),r.style=u}}if(r&&null==r.z2){i||(r=A({},r));var c=e.z2EmphasisLift;r.z2=e.z2+(null!=c?c:10)}return r}(this,0,t,n);if("blur"===e)return function(e,t,n){var r=L(e.currentStates,t)>=0,o=e.style.opacity,i=r?null:function(e,t,n,r){for(var o=e.style,i={},a=0;a<t.length;a++){var s=t[a],l=o[s];i[s]=null==l?r&&r[s]:l}for(a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(n)<0&&"style"===u.targetName&&u.saveTo(i,t)}return i}(e,["opacity"],t,{opacity:1}),a=(n=n||{}).style||{};return null==a.opacity&&(n=A({},n),a=A({opacity:r?o:.1*i.opacity},a),n.style=a),n}(this,e,n);if("select"===e)return function(e,t,n){if(n&&null==n.z2){n=A({},n);var r=e.z2SelectLift;n.z2=e.z2+(null!=r?r:9)}return n}(this,0,n)}return n}function vl(e){e.stateProxy=ml;var t=e.getTextContent(),n=e.getTextGuideLine();t&&(t.stateProxy=ml),n&&(n.stateProxy=ml)}function yl(e,t){!Tl(e,t)&&!e.__highByOuter&&fl(e,sl)}function bl(e,t){!Tl(e,t)&&!e.__highByOuter&&fl(e,ll)}function xl(e,t){e.__highByOuter|=1<<(t||0),fl(e,sl)}function _l(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&fl(e,ll)}function wl(e){fl(e,ul)}function Sl(e){fl(e,cl)}function Cl(e){fl(e,dl)}function Ml(e){fl(e,hl)}function Tl(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function kl(e){var t=e.getModel(),n=[],r=[];t.eachComponent(function(t,o){var i=Zs(o),a="series"===t,s=a?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!a&&r.push(s),i.isBlured&&(s.group.traverse(function(e){cl(e)}),a&&n.push(o)),i.isBlured=!1}),O(r,function(e){e&&e.toggleBlurSeries&&e.toggleBlurSeries(n,!1,t)})}function Il(e,t,n,r){var o=r.getModel();function i(e,t){for(var n=0;n<t.length;n++){var r=e.getItemGraphicEl(t[n]);r&&Sl(r)}}if(n=n||"coordinateSystem",null!=e&&t&&"none"!==t){var a=o.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];o.eachSeries(function(e){var o=a===e,u=e.coordinateSystem;if(u&&u.master&&(u=u.master),!("series"===n&&!o||"coordinateSystem"===n&&!(u&&s?u===s:o)||"series"===t&&o)){if(r.getViewOfSeriesModel(e).group.traverse(function(e){e.__highByOuter&&o&&"self"===t||ul(e)}),E(t))i(e.getData(),t);else if(Z(t))for(var c=H(t),d=0;d<c.length;d++)i(e.getData(c[d]),t[c[d]]);l.push(e),Zs(e).isBlured=!0}}),o.eachComponent(function(e,t){if("series"!==e){var n=r.getViewOfComponentModel(t);n&&n.toggleBlurSeries&&n.toggleBlurSeries(l,!0,o)}})}}function Al(e,t,n){if(null!=e&&null!=t){var r=n.getModel().getComponent(e,t);if(r){Zs(r).isBlured=!0;var o=n.getViewOfComponentModel(r);o&&o.focusBlurEnabled&&o.group.traverse(function(e){ul(e)})}}}function Dl(e,t,n,r){var o={focusSelf:!1,dispatchers:null};if(null==e||"series"===e||null==t||null==n)return o;var i=r.getModel().getComponent(e,t);if(!i)return o;var a=r.getViewOfComponentModel(i);if(!a||!a.findHighDownDispatchers)return o;for(var s,l=a.findHighDownDispatchers(n),u=0;u<l.length;u++)if("self"===Us(l[u]).focus){s=!0;break}return{focusSelf:s,dispatchers:l}}function Pl(e){O(e.getAllData(),function(t){var n=t.data,r=t.type;n.eachItemGraphicEl(function(t,n){e.isSelected(n,r)?Cl(t):Ml(t)})})}function Ll(e){var t=[];return e.eachSeries(function(e){O(e.getAllData(),function(n){n.data;var r=n.type,o=e.getSelectedDataIndices();if(o.length>0){var i={dataIndex:o,seriesIndex:e.seriesIndex};null!=r&&(i.dataType=r),t.push(i)}})}),t}function Nl(e,t,n){Fl(e,!0),fl(e,vl),El(e,t,n)}function Rl(e,t,n,r){r?function(e){Fl(e,!1)}(e):Nl(e,t,n)}function El(e,t,n){var r=Us(e);null!=t?(r.focus=t,r.blurScope=n):r.focus&&(r.focus=null)}var Ol=["emphasis","blur","select"],Bl={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function zl(e,t,n,r){n=n||"itemStyle";for(var o=0;o<Ol.length;o++){var i=Ol[o],a=t.getModel([i,n]);e.ensureState(i).style=r?r(a):a[Bl[n]]()}}function Fl(e,t){var n=!1===t,r=e;e.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=e.highDownSilentOnTouch),n&&!r.__highDownDispatcher||(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function Vl(e){return!(!e||!e.__highDownDispatcher)}function Hl(e){var t=e.type;return t===el||t===tl||t===nl}function Wl(e){var t=e.type;return t===Js||t===Qs}var Gl=$a.CMD,Ul=[[],[],[]],jl=Math.sqrt,Yl=Math.atan2;function ql(e,t){if(t){var n,r,o,i,a,s,l=e.data,u=e.len(),c=Gl.M,d=Gl.C,h=Gl.L,p=Gl.R,f=Gl.A,g=Gl.Q;for(o=0,i=0;o<u;){switch(n=l[o++],i=o,r=0,n){case c:case h:r=1;break;case d:r=3;break;case g:r=2;break;case f:var m=t[4],v=t[5],y=jl(t[0]*t[0]+t[1]*t[1]),b=jl(t[2]*t[2]+t[3]*t[3]),x=Yl(-t[1]/b,t[0]/y);l[o]*=y,l[o++]+=m,l[o]*=b,l[o++]+=v,l[o++]*=y,l[o++]*=b,l[o++]+=x,l[o++]+=x,i=o+=2;break;case p:s[0]=l[o++],s[1]=l[o++],We(s,s,t),l[i++]=s[0],l[i++]=s[1],s[0]+=l[o++],s[1]+=l[o++],We(s,s,t),l[i++]=s[0],l[i++]=s[1]}for(a=0;a<r;a++){var _=Ul[a];_[0]=l[o++],_[1]=l[o++],We(_,_,t),l[i++]=_[0],l[i++]=_[1]}}e.increaseVersion()}}var Xl=Math.sqrt,Zl=Math.sin,$l=Math.cos,Kl=Math.PI;function Jl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ql(e,t){return(e[0]*t[0]+e[1]*t[1])/(Jl(e)*Jl(t))}function eu(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Ql(e,t))}function tu(e,t,n,r,o,i,a,s,l,u,c){var d=l*(Kl/180),h=$l(d)*(e-n)/2+Zl(d)*(t-r)/2,p=-1*Zl(d)*(e-n)/2+$l(d)*(t-r)/2,f=h*h/(a*a)+p*p/(s*s);f>1&&(a*=Xl(f),s*=Xl(f));var g=(o===i?-1:1)*Xl((a*a*(s*s)-a*a*(p*p)-s*s*(h*h))/(a*a*(p*p)+s*s*(h*h)))||0,m=g*a*p/s,v=g*-s*h/a,y=(e+n)/2+$l(d)*m-Zl(d)*v,b=(t+r)/2+Zl(d)*m+$l(d)*v,x=eu([1,0],[(h-m)/a,(p-v)/s]),_=[(h-m)/a,(p-v)/s],w=[(-1*h-m)/a,(-1*p-v)/s],S=eu(_,w);if(Ql(_,w)<=-1&&(S=Kl),Ql(_,w)>=1&&(S=0),S<0){var C=Math.round(S/Kl*1e6)/1e6;S=2*Kl+C%2*Kl}c.addData(u,y,b,a,s,x,S,d,i)}var nu=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,ru=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.applyTransform=function(e){},t}(ms);function iu(e){return null!=e.setData}function au(e,t){var n=function(e){var t=new $a;if(!e)return t;var n,r=0,o=0,i=r,a=o,s=$a.CMD,l=e.match(nu);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],d=c.charAt(0),h=void 0,p=c.match(ru)||[],f=p.length,g=0;g<f;g++)p[g]=parseFloat(p[g]);for(var m=0;m<f;){var v=void 0,y=void 0,b=void 0,x=void 0,_=void 0,w=void 0,S=void 0,C=r,M=o,T=void 0,k=void 0;switch(d){case"l":r+=p[m++],o+=p[m++],h=s.L,t.addData(h,r,o);break;case"L":r=p[m++],o=p[m++],h=s.L,t.addData(h,r,o);break;case"m":r+=p[m++],o+=p[m++],h=s.M,t.addData(h,r,o),i=r,a=o,d="l";break;case"M":r=p[m++],o=p[m++],h=s.M,t.addData(h,r,o),i=r,a=o,d="L";break;case"h":r+=p[m++],h=s.L,t.addData(h,r,o);break;case"H":r=p[m++],h=s.L,t.addData(h,r,o);break;case"v":o+=p[m++],h=s.L,t.addData(h,r,o);break;case"V":o=p[m++],h=s.L,t.addData(h,r,o);break;case"C":h=s.C,t.addData(h,p[m++],p[m++],p[m++],p[m++],p[m++],p[m++]),r=p[m-2],o=p[m-1];break;case"c":h=s.C,t.addData(h,p[m++]+r,p[m++]+o,p[m++]+r,p[m++]+o,p[m++]+r,p[m++]+o),r+=p[m-2],o+=p[m-1];break;case"S":v=r,y=o,T=t.len(),k=t.data,n===s.C&&(v+=r-k[T-4],y+=o-k[T-3]),h=s.C,C=p[m++],M=p[m++],r=p[m++],o=p[m++],t.addData(h,v,y,C,M,r,o);break;case"s":v=r,y=o,T=t.len(),k=t.data,n===s.C&&(v+=r-k[T-4],y+=o-k[T-3]),h=s.C,C=r+p[m++],M=o+p[m++],r+=p[m++],o+=p[m++],t.addData(h,v,y,C,M,r,o);break;case"Q":C=p[m++],M=p[m++],r=p[m++],o=p[m++],h=s.Q,t.addData(h,C,M,r,o);break;case"q":C=p[m++]+r,M=p[m++]+o,r+=p[m++],o+=p[m++],h=s.Q,t.addData(h,C,M,r,o);break;case"T":v=r,y=o,T=t.len(),k=t.data,n===s.Q&&(v+=r-k[T-4],y+=o-k[T-3]),r=p[m++],o=p[m++],h=s.Q,t.addData(h,v,y,r,o);break;case"t":v=r,y=o,T=t.len(),k=t.data,n===s.Q&&(v+=r-k[T-4],y+=o-k[T-3]),r+=p[m++],o+=p[m++],h=s.Q,t.addData(h,v,y,r,o);break;case"A":b=p[m++],x=p[m++],_=p[m++],w=p[m++],S=p[m++],tu(C=r,M=o,r=p[m++],o=p[m++],w,S,b,x,_,h=s.A,t);break;case"a":b=p[m++],x=p[m++],_=p[m++],w=p[m++],S=p[m++],tu(C=r,M=o,r+=p[m++],o+=p[m++],w,S,b,x,_,h=s.A,t)}}"z"!==d&&"Z"!==d||(h=s.Z,t.addData(h),r=i,o=a),n=h}return t.toStatic(),t}(e),r=A({},t);return r.buildPath=function(e){if(iu(e))e.setData(n.data),(t=e.getContext())&&e.rebuildPath(t,1);else{var t=e;n.rebuildPath(t,1)}},r.applyTransform=function(e){ql(n,e),this.dirtyShape()},r}function su(e,t){return new ou(au(e,t))}function lu(e,t){t=t||{};var n=new ms;return e.shape&&n.setShape(e.shape),n.setStyle(e.style),t.bakeTransform?ql(n.path,e.getComputedTransform()):t.toLocal?n.setLocalTransform(e.getComputedTransform()):n.copyTransform(e),n.buildPath=e.buildPath,n.applyTransform=n.applyTransform,n.z=e.z,n.z2=e.z2,n.zlevel=e.zlevel,n}var uu=function(){this.cx=0,this.cy=0,this.r=0},cu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new uu},t.prototype.buildPath=function(e,t){e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI)},t}(ms);cu.prototype.type="circle";var du=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},hu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new du},t.prototype.buildPath=function(e,t){var n=.5522848,r=t.cx,o=t.cy,i=t.rx,a=t.ry,s=i*n,l=a*n;e.moveTo(r-i,o),e.bezierCurveTo(r-i,o-l,r-s,o-a,r,o-a),e.bezierCurveTo(r+s,o-a,r+i,o-l,r+i,o),e.bezierCurveTo(r+i,o+l,r+s,o+a,r,o+a),e.bezierCurveTo(r-s,o+a,r-i,o+l,r-i,o),e.closePath()},t}(ms);hu.prototype.type="ellipse";var pu=Math.PI,fu=2*pu,gu=Math.sin,mu=Math.cos,vu=Math.acos,yu=Math.atan2,bu=Math.abs,xu=Math.sqrt,_u=Math.max,wu=Math.min,Su=1e-4;function Cu(e,t,n,r,o,i,a){var s=e-n,l=t-r,u=(a?i:-i)/xu(s*s+l*l),c=u*l,d=-u*s,h=e+c,p=t+d,f=n+c,g=r+d,m=(h+f)/2,v=(p+g)/2,y=f-h,b=g-p,x=y*y+b*b,_=o-i,w=h*g-f*p,S=(b<0?-1:1)*xu(_u(0,_*_*x-w*w)),C=(w*b-y*S)/x,M=(-w*y-b*S)/x,T=(w*b+y*S)/x,k=(-w*y+b*S)/x,I=C-m,A=M-v,D=T-m,P=k-v;return I*I+A*A>D*D+P*P&&(C=T,M=k),{cx:C,cy:M,x0:-c,y0:-d,x1:C*(o/_-1),y1:M*(o/_-1)}}var Mu=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Tu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new Mu},t.prototype.buildPath=function(e,t){!function(e,t){var n,r=_u(t.r,0),o=_u(t.r0||0,0),i=r>0;if(i||o>0){if(i||(r=o,o=0),o>r){var a=r;r=o,o=a}var s=t.startAngle,l=t.endAngle;if(!isNaN(s)&&!isNaN(l)){var u=t.cx,c=t.cy,d=!!t.clockwise,h=bu(l-s),p=h>fu&&h%fu;if(p>Su&&(h=p),r>Su)if(h>fu-Su)e.moveTo(u+r*mu(s),c+r*gu(s)),e.arc(u,c,r,s,l,!d),o>Su&&(e.moveTo(u+o*mu(l),c+o*gu(l)),e.arc(u,c,o,l,s,d));else{var f=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,x=void 0,_=void 0,w=void 0,S=void 0,C=void 0,M=void 0,T=void 0,k=void 0,I=void 0,A=void 0,D=r*mu(s),P=r*gu(s),L=o*mu(l),N=o*gu(l),R=h>Su;if(R){var E=t.cornerRadius;E&&(n=function(e){var t;if(U(e)){var n=e.length;if(!n)return e;t=1===n?[e[0],e[0],0,0]:2===n?[e[0],e[0],e[1],e[1]]:3===n?e.concat(e[2]):e}else t=[e,e,e,e];return t}(E),f=n[0],g=n[1],m=n[2],v=n[3]);var O=bu(r-o)/2;if(y=wu(O,m),b=wu(O,v),x=wu(O,f),_=wu(O,g),C=w=_u(y,b),M=S=_u(x,_),(w>Su||S>Su)&&(T=r*mu(l),k=r*gu(l),I=o*mu(s),A=o*gu(s),h<pu)){var B=function(e,t,n,r,o,i,a,s){var l=n-e,u=r-t,c=a-o,d=s-i,h=d*l-c*u;if(!(h*h<Su))return[e+(h=(c*(t-i)-d*(e-o))/h)*l,t+h*u]}(D,P,I,A,T,k,L,N);if(B){var z=D-B[0],F=P-B[1],V=T-B[0],H=k-B[1],W=1/gu(vu((z*V+F*H)/(xu(z*z+F*F)*xu(V*V+H*H)))/2),G=xu(B[0]*B[0]+B[1]*B[1]);C=wu(w,(r-G)/(W+1)),M=wu(S,(o-G)/(W-1))}}}if(R)if(C>Su){var j=wu(m,C),Y=wu(v,C),q=Cu(I,A,D,P,r,j,d),X=Cu(T,k,L,N,r,Y,d);e.moveTo(u+q.cx+q.x0,c+q.cy+q.y0),C<w&&j===Y?e.arc(u+q.cx,c+q.cy,C,yu(q.y0,q.x0),yu(X.y0,X.x0),!d):(j>0&&e.arc(u+q.cx,c+q.cy,j,yu(q.y0,q.x0),yu(q.y1,q.x1),!d),e.arc(u,c,r,yu(q.cy+q.y1,q.cx+q.x1),yu(X.cy+X.y1,X.cx+X.x1),!d),Y>0&&e.arc(u+X.cx,c+X.cy,Y,yu(X.y1,X.x1),yu(X.y0,X.x0),!d))}else e.moveTo(u+D,c+P),e.arc(u,c,r,s,l,!d);else e.moveTo(u+D,c+P);o>Su&&R?M>Su?(j=wu(f,M),q=Cu(L,N,T,k,o,-(Y=wu(g,M)),d),X=Cu(D,P,I,A,o,-j,d),e.lineTo(u+q.cx+q.x0,c+q.cy+q.y0),M<S&&j===Y?e.arc(u+q.cx,c+q.cy,M,yu(q.y0,q.x0),yu(X.y0,X.x0),!d):(Y>0&&e.arc(u+q.cx,c+q.cy,Y,yu(q.y0,q.x0),yu(q.y1,q.x1),!d),e.arc(u,c,o,yu(q.cy+q.y1,q.cx+q.x1),yu(X.cy+X.y1,X.cx+X.x1),d),j>0&&e.arc(u+X.cx,c+X.cy,j,yu(X.y1,X.x1),yu(X.y0,X.x0),!d))):(e.lineTo(u+L,c+N),e.arc(u,c,o,l,s,d)):e.lineTo(u+L,c+N)}else e.moveTo(u,c);e.closePath()}}}(e,t)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(ms);Tu.prototype.type="sector";var ku=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},Iu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new ku},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,o=2*Math.PI;e.moveTo(n+t.r,r),e.arc(n,r,t.r,0,o,!1),e.moveTo(n+t.r0,r),e.arc(n,r,t.r0,0,o,!0)},t}(ms);function Au(e,t,n){var r=t.smooth,o=t.points;if(o&&o.length>=2){if(r){var i=function(e,t,n,r){var o,i,a,s,l=[],u=[],c=[],d=[];if(r){a=[1/0,1/0],s=[-1/0,-1/0];for(var h=0,p=e.length;h<p;h++)Ge(a,a,e[h]),Ue(s,s,e[h]);Ge(a,a,r[0]),Ue(s,s,r[1])}for(h=0,p=e.length;h<p;h++){var f=e[h];if(n)o=e[h?h-1:p-1],i=e[(h+1)%p];else{if(0===h||h===p-1){l.push(Te(e[h]));continue}o=e[h-1],i=e[h+1]}De(u,i,o),Ee(u,u,t);var g=Be(f,o),m=Be(f,i),v=g+m;0!==v&&(g/=v,m/=v),Ee(c,u,-g),Ee(d,u,m);var y=Ie([],f,c),b=Ie([],f,d);r&&(Ue(y,y,a),Ge(y,y,s),Ue(b,b,a),Ge(b,b,s)),l.push(y),l.push(b)}return n&&l.push(l.shift()),l}(o,r,n,t.smoothConstraint);e.moveTo(o[0][0],o[0][1]);for(var a=o.length,s=0;s<(n?a:a-1);s++){var l=i[2*s],u=i[2*s+1],c=o[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(o[0][0],o[0][1]),s=1;for(var d=o.length;s<d;s++)e.lineTo(o[s][0],o[s][1])}n&&e.closePath()}}Iu.prototype.type="ring";var Du=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Pu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new Du},t.prototype.buildPath=function(e,t){Au(e,t,!0)},t}(ms);Pu.prototype.type="polygon";var Lu=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},Nu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Lu},t.prototype.buildPath=function(e,t){Au(e,t,!1)},t}(ms);Nu.prototype.type="polyline";var Ru={},Eu=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},Ou=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Eu},t.prototype.buildPath=function(e,t){var n,r,o,i;if(this.subPixelOptimize){var a=Ss(Ru,t,this.style);n=a.x1,r=a.y1,o=a.x2,i=a.y2}else n=t.x1,r=t.y1,o=t.x2,i=t.y2;var s=t.percent;0!==s&&(e.moveTo(n,r),s<1&&(o=n*(1-s)+o*s,i=r*(1-s)+i*s),e.lineTo(o,i))},t.prototype.pointAt=function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]},t}(ms);Ou.prototype.type="line";var Bu=[],zu=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Fu(e,t,n){var r=e.cpx2,o=e.cpy2;return null!=r||null!=o?[(n?mn:gn)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?mn:gn)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?Sn:wn)(e.x1,e.cpx1,e.x2,t),(n?Sn:wn)(e.y1,e.cpy1,e.y2,t)]}var Vu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new zu},t.prototype.buildPath=function(e,t){var n=t.x1,r=t.y1,o=t.x2,i=t.y2,a=t.cpx1,s=t.cpy1,l=t.cpx2,u=t.cpy2,c=t.percent;0!==c&&(e.moveTo(n,r),null==l||null==u?(c<1&&(Mn(n,a,o,c,Bu),a=Bu[1],o=Bu[2],Mn(r,s,i,c,Bu),s=Bu[1],i=Bu[2]),e.quadraticCurveTo(a,s,o,i)):(c<1&&(bn(n,a,l,o,c,Bu),a=Bu[1],l=Bu[2],o=Bu[3],bn(r,s,u,i,c,Bu),s=Bu[1],u=Bu[2],i=Bu[3]),e.bezierCurveTo(a,s,l,u,o,i)))},t.prototype.pointAt=function(e){return Fu(this.shape,e,!1)},t.prototype.tangentAt=function(e){var t=Fu(this.shape,e,!0);return Oe(t,t)},t}(ms);Vu.prototype.type="bezier-curve";var Hu=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},Wu=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Hu},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r,0),i=t.startAngle,a=t.endAngle,s=t.clockwise,l=Math.cos(i),u=Math.sin(i);e.moveTo(l*o+n,u*o+r),e.arc(n,r,o,i,a,!s)},t}(ms);Wu.prototype.type="arc";var Gu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="compound",t}return n(t,e),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,t=this.shapeChanged(),n=0;n<e.length;n++)t=t||e[n].shapeChanged();t&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,t){for(var n=t.paths||[],r=0;r<n.length;r++)n[r].buildPath(e,n[r].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ms.prototype.getBoundingRect.call(this)},t}(ms),Uu=function(){function e(e){this.colorStops=e||[]}return e.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},e}(),ju=function(e){function t(t,n,r,o,i,a){var s=e.call(this,i)||this;return s.x=null==t?0:t,s.y=null==n?0:n,s.x2=null==r?1:r,s.y2=null==o?0:o,s.type="linear",s.global=a||!1,s}return n(t,e),t}(Uu),Yu=function(e){function t(t,n,r,o,i){var a=e.call(this,o)||this;return a.x=null==t?.5:t,a.y=null==n?.5:n,a.r=null==r?.5:r,a.type="radial",a.global=i||!1,a}return n(t,e),t}(Uu),qu=[0,0],Xu=[0,0],Zu=new kt,$u=new kt,Ku=function(){function e(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new kt;for(n=0;n<2;n++)this._axes[n]=new kt;e&&this.fromBoundingRect(e,t)}return e.prototype.fromBoundingRect=function(e,t){var n=this._corners,r=this._axes,o=e.x,i=e.y,a=o+e.width,s=i+e.height;if(n[0].set(o,i),n[1].set(a,i),n[2].set(a,s),n[3].set(o,s),t)for(var l=0;l<4;l++)n[l].transform(t);for(kt.sub(r[0],n[1],n[0]),kt.sub(r[1],n[3],n[0]),r[0].normalize(),r[1].normalize(),l=0;l<2;l++)this._origin[l]=r[l].dot(n[0])},e.prototype.intersect=function(e,t){var n=!0,r=!t;return Zu.set(1/0,1/0),$u.set(0,0),!this._intersectCheckOneSide(this,e,Zu,$u,r,1)&&(n=!1,r)||!this._intersectCheckOneSide(e,this,Zu,$u,r,-1)&&(n=!1,r)||r||kt.copy(t,n?Zu:$u),n},e.prototype._intersectCheckOneSide=function(e,t,n,r,o,i){for(var a=!0,s=0;s<2;s++){var l=this._axes[s];if(this._getProjMinMaxOnAxis(s,e._corners,qu),this._getProjMinMaxOnAxis(s,t._corners,Xu),qu[1]<Xu[0]||qu[0]>Xu[1]){if(a=!1,o)return a;var u=Math.abs(Xu[0]-qu[1]),c=Math.abs(qu[0]-Xu[1]);Math.min(u,c)>r.len()&&(u<c?kt.scale(r,l,-u*i):kt.scale(r,l,c*i))}else n&&(u=Math.abs(Xu[0]-qu[1]),c=Math.abs(qu[0]-Xu[1]),Math.min(u,c)<n.len()&&(u<c?kt.scale(n,l,u*i):kt.scale(n,l,-c*i)))}return a},e.prototype._getProjMinMaxOnAxis=function(e,t,n){for(var r=this._axes[e],o=this._origin,i=t[0].dot(r)+o[e],a=i,s=i,l=1;l<t.length;l++){var u=t[l].dot(r)+o[e];a=Math.min(u,a),s=Math.max(u,s)}n[0]=a,n[1]=s},e}(),Ju=[],Qu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return n(t,e),t.prototype.traverse=function(e,t){e.call(t,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Ot(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(Ju)),e.union(r)}this._rect=e}return this._rect},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++)if(this._displayables[r].contain(e,t))return!0;return!1},t}(fa),ec=Ci();function tc(e,t,n,r,o){var i;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();i=a&&a.animation}var s="update"===e;if(t&&t.isAnimationEnabled()){var l=void 0,u=void 0,c=void 0;return r?(l=oe(r.duration,200),u=oe(r.easing,"cubicOut"),c=0):(l=t.getShallow(s?"animationDurationUpdate":"animationDuration"),u=t.getShallow(s?"animationEasingUpdate":"animationEasing"),c=t.getShallow(s?"animationDelayUpdate":"animationDelay")),i&&(null!=i.duration&&(l=i.duration),null!=i.easing&&(u=i.easing),null!=i.delay&&(c=i.delay)),j(c)&&(c=c(n,o)),j(l)&&(l=l(n)),{duration:l||0,delay:c,easing:u}}return null}function nc(e,t,n,r,o,i,a){var s,l=!1;j(o)?(a=i,i=o,o=null):Z(o)&&(i=o.cb,a=o.during,l=o.isFrom,s=o.removeOpt,o=o.dataIndex);var u="leave"===e;u||t.stopAnimation("leave");var c=tc(e,r,o,u?s||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,o):null);if(c&&c.duration>0){var d={duration:c.duration,delay:c.delay||0,easing:c.easing,done:i,force:!!i||!!a,setToFinal:!u,scope:e,during:a};l?t.animateFrom(n,d):t.animateTo(n,d)}else t.stopAnimation(),!l&&t.attr(n),a&&a(1),i&&i()}function rc(e,t,n,r,o,i){nc("update",e,t,n,r,o,i)}function oc(e,t,n,r,o,i){nc("enter",e,t,n,r,o,i)}function ic(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++)if("leave"===e.animators[t].scope)return!0;return!1}function ac(e,t,n,r,o,i){ic(e)||nc("leave",e,t,n,r,o,i)}function sc(e,t,n,r){e.removeTextContent(),e.removeTextGuideLine(),ac(e,{style:{opacity:0}},t,n,r)}function lc(e,t,n){function r(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(e){e.isGroup||sc(e,t,n,r)}):sc(e,t,n,r)}function uc(e){ec(e).oldStyle=e.style}var cc=Math.max,dc=Math.min,hc={};function pc(e){return ms.extend(e)}function fc(e,t){return function(e,t){var r=au(e,t);return function(e){function t(t){var n=e.call(this,t)||this;return n.applyTransform=r.applyTransform,n.buildPath=r.buildPath,n}return n(t,e),t}(ou)}(e,t)}function gc(e,t){hc[e]=t}function mc(e){if(hc.hasOwnProperty(e))return hc[e]}function vc(e,t,n,r){var o=su(e,t);return n&&("center"===r&&(n=bc(n,o.getBoundingRect())),_c(o,n)),o}function yc(e,t,n){var r=new _s({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===n){var o={width:e.width,height:e.height};r.setStyle(bc(t,o))}}});return r}function bc(e,t){var n,r=t.width/t.height,o=e.height*r;return n=o<=e.width?e.height:(o=e.width)/r,{x:e.x+e.width/2-o/2,y:e.y+e.height/2-n/2,width:o,height:n}}var xc=function(e,t){for(var n=[],r=e.length,o=0;o<r;o++){var i=e[o];n.push(i.getUpdatedPathProxy(!0))}var a=new ms(t);return a.createPathProxy(),a.buildPath=function(e){if(iu(e)){e.appendPath(n);var t=e.getContext();t&&e.rebuildPath(t,1)}},a};function _c(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}function wc(e,t){return Ss(e,e,{lineWidth:t}),e}var Sc=Ms;function Cc(e,t){for(var n=yt([]);e&&e!==t;)xt(n,e.getLocalTransform(),n),e=e.parent;return n}function Mc(e,t,n){return t&&!E(t)&&(t=lo.getLocalTransform(t)),n&&(t=Ct([],t)),We([],e,t)}function Tc(e,t,n){var r=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),i=["left"===e?-r:"right"===e?r:0,"top"===e?-o:"bottom"===e?o:0];return i=Mc(i,t,n),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function kc(e){return!e.isGroup}function Ic(e,t,n){if(e&&t){var r,o=(r={},e.traverse(function(e){kc(e)&&e.anid&&(r[e.anid]=e)}),r);t.traverse(function(e){if(kc(e)&&e.anid){var t=o[e.anid];if(t){var r=i(e);e.attr(i(t)),rc(e,r,n,Us(e).dataIndex)}}})}function i(e){var t={x:e.x,y:e.y,rotation:e.rotation};return function(e){return null!=e.shape}(e)&&(t.shape=A({},e.shape)),t}}function Ac(e,t){return B(e,function(e){var n=e[0];n=cc(n,t.x),n=dc(n,t.x+t.width);var r=e[1];return r=cc(r,t.y),[n,r=dc(r,t.y+t.height)]})}function Dc(e,t){var n=cc(e.x,t.x),r=dc(e.x+e.width,t.x+t.width),o=cc(e.y,t.y),i=dc(e.y+e.height,t.y+t.height);if(r>=n&&i>=o)return{x:n,y:o,width:r-n,height:i-o}}function Pc(e,t,n){var r=A({rectHover:!0},t),o=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(o.image=e.slice(8),D(o,n),new _s(r)):vc(e.replace("path://",""),r,n,"center")}function Lc(e,t,n,r,o){for(var i=0,a=o[o.length-1];i<o.length;i++){var s=o[i];if(Nc(e,t,n,r,s[0],s[1],a[0],a[1]))return!0;a=s}}function Nc(e,t,n,r,o,i,a,s){var l,u=n-e,c=r-t,d=a-o,h=s-i,p=Rc(d,h,u,c);if((l=p)<=1e-6&&l>=-1e-6)return!1;var f=e-o,g=t-i,m=Rc(f,g,u,c)/p;if(m<0||m>1)return!1;var v=Rc(f,g,d,h)/p;return!(v<0||v>1)}function Rc(e,t,n,r){return e*r-n*t}function Ec(e){var t=e.itemTooltipOption,n=e.componentModel,r=e.itemName,o=Y(t)?{formatter:t}:t,i=n.mainType,a=n.componentIndex,s={componentType:i,name:r,$vars:["name"]};s[i+"Index"]=a;var l=e.formatterParamsExtra;l&&O(H(l),function(e){xe(s,e)||(s[e]=l[e],s.$vars.push(e))});var u=Us(e.el);u.componentMainType=i,u.componentIndex=a,u.tooltipConfig={name:r,option:D({content:r,formatterParams:s},o)}}function Oc(e,t){var n;e.isGroup&&(n=t(e)),n||e.traverse(t)}function Bc(e,t){if(e)if(U(e))for(var n=0;n<e.length;n++)Oc(e[n],t);else Oc(e,t)}gc("circle",cu),gc("ellipse",hu),gc("sector",Tu),gc("ring",Iu),gc("polygon",Pu),gc("polyline",Nu),gc("rect",Is),gc("line",Ou),gc("bezierCurve",Vu),gc("arc",Wu);var zc=Object.freeze({__proto__:null,updateProps:rc,initProps:oc,removeElement:ac,removeElementWithFadeOut:lc,isElementRemoved:ic,extendShape:pc,extendPath:fc,registerShape:gc,getShapeClass:mc,makePath:vc,makeImage:yc,mergePath:xc,resizePath:_c,subPixelOptimizeLine:wc,subPixelOptimizeRect:function(e){return Cs(e.shape,e.shape,e.style),e},subPixelOptimize:Sc,getTransform:Cc,applyTransform:Mc,transformDirection:Tc,groupTransition:Ic,clipPointsByRect:Ac,clipRectByRect:Dc,createIcon:Pc,linePolygonIntersect:Lc,lineLineIntersect:Nc,setTooltipConfig:Ec,traverseElements:Bc,Group:Po,Image:_s,Text:Ps,Circle:cu,Ellipse:hu,Sector:Tu,Ring:Iu,Polygon:Pu,Polyline:Nu,Rect:Is,Line:Ou,BezierCurve:Vu,Arc:Wu,IncrementalDisplayable:Qu,CompoundPath:Gu,LinearGradient:ju,RadialGradient:Yu,BoundingRect:Ot,OrientedBoundingRect:Ku,Point:kt,Path:ms}),Fc={};function Vc(e,t){for(var n=0;n<$s.length;n++){var r=$s[n],o=t[r],i=e.ensureState(r);i.style=i.style||{},i.style.text=o}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function Hc(e,t,n){var r,o=e.labelFetcher,i=e.labelDataIndex,a=e.labelDimIndex,s=t.normal;o&&(r=o.getFormattedLabel(i,"normal",null,a,s&&s.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==r&&(r=j(e.defaultText)?e.defaultText(i,e,n):e.defaultText);for(var l={normal:r},u=0;u<$s.length;u++){var c=$s[u],d=t[c];l[c]=oe(o?o.getFormattedLabel(i,c,null,a,d&&d.get("formatter")):null,r)}return l}function Wc(e,t,n,r){n=n||Fc;for(var o=e instanceof Ps,i=!1,a=0;a<Ks.length;a++)if((h=t[Ks[a]])&&h.getShallow("show")){i=!0;break}var s=o?e:e.getTextContent();if(i){o||(s||(s=new Ps,e.setTextContent(s)),e.stateProxy&&(s.stateProxy=e.stateProxy));var l=Hc(n,t),u=t.normal,c=!!u.getShallow("show"),d=Uc(u,r&&r.normal,n,!1,!o);for(d.text=l.normal,o||e.setTextConfig(jc(u,n,!1)),a=0;a<$s.length;a++){var h,p=$s[a];if(h=t[p]){var f=s.ensureState(p),g=!!oe(h.getShallow("show"),c);g!==c&&(f.ignore=!g),f.style=Uc(h,r&&r[p],n,!0,!o),f.style.text=l[p],o||(e.ensureState(p).textConfig=jc(h,n,!0))}}s.silent=!!u.getShallow("silent"),null!=s.style.x&&(d.x=s.style.x),null!=s.style.y&&(d.y=s.style.y),s.ignore=!c,s.useStyle(d),s.dirty(),n.enableTextSetter&&(Kc(s).setLabelText=function(e){var r=Hc(n,t,e);Vc(s,r)})}else s&&(s.ignore=!0);e.dirty()}function Gc(e,t){t=t||"label";for(var n={normal:e.getModel(t)},r=0;r<$s.length;r++){var o=$s[r];n[o]=e.getModel([o,t])}return n}function Uc(e,t,n,r,o){var i={};return function(e,t,n,r,o){n=n||Fc;var i,a=t.ecModel,s=a&&a.option.textStyle,l=function(e){for(var t;e&&e!==e.ecModel;){var n=(e.option||Fc).rich;if(n){t=t||{};for(var r=H(n),o=0;o<r.length;o++)t[r[o]]=1}e=e.parentModel}return t}(t);if(l)for(var u in i={},l)if(l.hasOwnProperty(u)){var c=t.getModel(["rich",u]);Zc(i[u]={},c,s,n,r,o,!1,!0)}i&&(e.rich=i);var d=t.get("overflow");d&&(e.overflow=d);var h=t.get("minMargin");null!=h&&(e.margin=h),Zc(e,t,s,n,r,o,!0,!1)}(i,e,n,r,o),t&&A(i,t),i}function jc(e,t,n){t=t||{};var r,o={},i=e.getShallow("rotate"),a=oe(e.getShallow("distance"),n?null:5),s=e.getShallow("offset");return"outside"===(r=e.getShallow("position")||(n?null:"inside"))&&(r=t.defaultOutsidePosition||"top"),null!=r&&(o.position=r),null!=s&&(o.offset=s),null!=i&&(i*=Math.PI/180,o.rotation=i),null!=a&&(o.distance=a),o.outsideFill="inherit"===e.get("color")?t.inheritColor||null:"auto",o}var Yc=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],qc=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Xc=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Zc(e,t,n,r,o,i,a,s){n=!o&&n||Fc;var l=r&&r.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),d=oe(t.getShallow("opacity"),n.opacity);"inherit"!==u&&"auto"!==u||(u=l||null),"inherit"!==c&&"auto"!==c||(c=l||null),i||(u=u||n.color,c=c||n.textBorderColor),null!=u&&(e.fill=u),null!=c&&(e.stroke=c);var h=oe(t.getShallow("textBorderWidth"),n.textBorderWidth);null!=h&&(e.lineWidth=h);var p=oe(t.getShallow("textBorderType"),n.textBorderType);null!=p&&(e.lineDash=p);var f=oe(t.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=f&&(e.lineDashOffset=f),o||null!=d||s||(d=r&&r.defaultOpacity),null!=d&&(e.opacity=d),o||i||null==e.fill&&r.inheritColor&&(e.fill=r.inheritColor);for(var g=0;g<Yc.length;g++){var m=Yc[g];null!=(y=oe(t.getShallow(m),n[m]))&&(e[m]=y)}for(g=0;g<qc.length;g++)m=qc[g],null!=(y=t.getShallow(m))&&(e[m]=y);if(null==e.verticalAlign){var v=t.getShallow("baseline");null!=v&&(e.verticalAlign=v)}if(!a||!r.disableBox){for(g=0;g<Xc.length;g++){var y;m=Xc[g],null!=(y=t.getShallow(m))&&(e[m]=y)}var b=t.getShallow("borderType");null!=b&&(e.borderDash=b),"auto"!==e.backgroundColor&&"inherit"!==e.backgroundColor||!l||(e.backgroundColor=l),"auto"!==e.borderColor&&"inherit"!==e.borderColor||!l||(e.borderColor=l)}}function $c(e,t){var n=t&&t.getModel("textStyle");return ue([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var Kc=Ci();function Jc(e,t,n,r){if(e){var o=Kc(e);o.prevValue=o.value,o.value=n;var i=t.normal;o.valueAnimation=i.get("valueAnimation"),o.valueAnimation&&(o.precision=i.get("precision"),o.defaultInterpolatedText=r,o.statesModels=t)}}function Qc(e,t,n,r,o){var i=Kc(e);if(i.valueAnimation&&i.prevValue!==i.value){var a=i.defaultInterpolatedText,s=oe(i.interpolatedValue,i.prevValue),l=i.value;e.percent=0,(null==i.prevValue?oc:rc)(e,{percent:1},r,t,null,function(r){var u=Ni(n,i.precision,s,l,r);i.interpolatedValue=1===r?null:u;var c=Hc({labelDataIndex:t,labelFetcher:o,defaultText:a?a(u):u+""},i.statesModels,u);Vc(e,c)})}}var ed,td,nd=["textStyle","color"],rd=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],od=new Ps,id=function(){function e(){}return e.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(nd):null)},e.prototype.getFont=function(){return $c({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<rd.length;n++)t[rd[n]]=this.getShallow(rd[n]);return od.useStyle(t),od.update(),od.getBoundingRect()},e}(),ad=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],sd=Gi(ad),ld=function(){function e(){}return e.prototype.getLineStyle=function(e){return sd(this,e)},e}(),ud=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],cd=Gi(ud),dd=function(){function e(){}return e.prototype.getItemStyle=function(e,t){return cd(this,e,t)},e}(),hd=function(){function e(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}return e.prototype.init=function(e,t,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o]},e.prototype.mergeOption=function(e,t){k(this.option,e,!0)},e.prototype.get=function(e,t){return null==e?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},e.prototype.getShallow=function(e,t){var n=this.option,r=null==n?n:n[e];if(null==r&&!t){var o=this.parentModel;o&&(r=o.getShallow(e))}return r},e.prototype.getModel=function(t,n){var r=null!=t,o=r?this.parsePath(t):null;return new e(r?this._doGet(o):this.option,n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),this.ecModel)},e.prototype.isEmpty=function(){return null==this.option},e.prototype.restoreData=function(){},e.prototype.clone=function(){return new(0,this.constructor)(T(this.option))},e.prototype.parsePath=function(e){return"string"==typeof e?e.split("."):e},e.prototype.resolveParentPath=function(e){return e},e.prototype.isAnimationEnabled=function(){if(!o.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(e,t){var n=this.option;if(!e)return n;for(var r=0;r<e.length&&(!e[r]||null!=(n=n&&"object"==typeof n?n[e[r]]:null));r++);return null==n&&t&&(n=t._doGet(this.resolveParentPath(e),t.parentModel)),n},e}();Bi(hd),ed=hd,td=["__\0is_clz",Fi++].join("_"),ed.prototype[td]=!0,ed.isInstance=function(e){return!(!e||!e[td])},R(hd,ld),R(hd,dd),R(hd,ji),R(hd,id);var pd=Math.round(10*Math.random());function fd(e){return[e||"",pd++].join("_")}function gd(e,t){return k(k({},e,!0),t,!0)}var md="ZH",vd="EN",yd=vd,bd={},xd={},_d=o.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf(md)>-1?md:yd;function wd(e,t){e=e.toUpperCase(),xd[e]=new hd(t),bd[e]=t}function Sd(e){return xd[e]}wd(vd,{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),wd(md,{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}});var Cd=36e5,Md=864e5,Td=31536e6,kd={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Id="{yyyy}-{MM}-{dd}",Ad={year:"{yyyy}",month:"{yyyy}-{MM}",day:Id,hour:Id+" "+kd.hour,minute:Id+" "+kd.minute,second:Id+" "+kd.second,millisecond:kd.none},Dd=["year","month","day","hour","minute","second","millisecond"],Pd=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Ld(e,t){return"0000".substr(0,t-(e+="").length)+e}function Nd(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function Rd(e){return e===Nd(e)}function Ed(e,t,n,r){var o=Ko(e),i=o[zd(n)](),a=o[Fd(n)]()+1,s=Math.floor((a-1)/3)+1,l=o[Vd(n)](),u=o["get"+(n?"UTC":"")+"Day"](),c=o[Hd(n)](),d=(c-1)%12+1,h=o[Wd(n)](),p=o[Gd(n)](),f=o[Ud(n)](),g=(r instanceof hd?r:Sd(r||_d)||xd.EN).getModel("time"),m=g.get("month"),v=g.get("monthAbbr"),y=g.get("dayOfWeek"),b=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,Ld(i%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,v[a-1]).replace(/{MM}/g,Ld(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Ld(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[u]).replace(/{ee}/g,b[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Ld(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Ld(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Ld(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,Ld(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,Ld(f,3)).replace(/{S}/g,f+"")}function Od(e,t){var n=Ko(e),r=n[Fd(t)]()+1,o=n[Vd(t)](),i=n[Hd(t)](),a=n[Wd(t)](),s=n[Gd(t)](),l=0===n[Ud(t)](),u=l&&0===s,c=u&&0===a,d=c&&0===i,h=d&&1===o;return h&&1===r?"year":h?"month":d?"day":c?"hour":u?"minute":l?"second":"millisecond"}function Bd(e,t,n){var r=X(e)?Ko(e):e;switch(t=t||Od(e,n)){case"year":return r[zd(n)]();case"half-year":return r[Fd(n)]()>=6?1:0;case"quarter":return Math.floor((r[Fd(n)]()+1)/4);case"month":return r[Fd(n)]();case"day":return r[Vd(n)]();case"half-day":return r[Hd(n)]()/24;case"hour":return r[Hd(n)]();case"minute":return r[Wd(n)]();case"second":return r[Gd(n)]();case"millisecond":return r[Ud(n)]()}}function zd(e){return e?"getUTCFullYear":"getFullYear"}function Fd(e){return e?"getUTCMonth":"getMonth"}function Vd(e){return e?"getUTCDate":"getDate"}function Hd(e){return e?"getUTCHours":"getHours"}function Wd(e){return e?"getUTCMinutes":"getMinutes"}function Gd(e){return e?"getUTCSeconds":"getSeconds"}function Ud(e){return e?"getUTCMilliseconds":"getMilliseconds"}function jd(e){return e?"setUTCFullYear":"setFullYear"}function Yd(e){return e?"setUTCMonth":"setMonth"}function qd(e){return e?"setUTCDate":"setDate"}function Xd(e){return e?"setUTCHours":"setHours"}function Zd(e){return e?"setUTCMinutes":"setMinutes"}function $d(e){return e?"setUTCSeconds":"setSeconds"}function Kd(e){return e?"setUTCMilliseconds":"setMilliseconds"}function Jd(e){if(!oi(e))return Y(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function Qd(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var eh=se;function th(e,t,n){function r(e){return e&&ue(e)?e:"-"}function o(e){return!(null==e||isNaN(e)||!isFinite(e))}var i="time"===t,a=e instanceof Date;if(i||a){var s=i?Ko(e):e;if(!isNaN(+s))return Ed(s,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",n);if(a)return"-"}if("ordinal"===t)return q(e)?r(e):X(e)&&o(e)?e+"":"-";var l=ri(e);return o(l)?Jd(l):q(e)?r(e):"boolean"==typeof e?e+"":"-"}var nh=["a","b","c","d","e","f","g"],rh=function(e,t){return"{"+e+(null==t?"":t)+"}"};function oh(e,t,n){U(t)||(t=[t]);var r=t.length;if(!r)return"";for(var o=t[0].$vars||[],i=0;i<o.length;i++){var a=nh[i];e=e.replace(rh(a),rh(a,0))}for(var s=0;s<r;s++)for(var l=0;l<o.length;l++){var u=t[s][o[l]];e=e.replace(rh(nh[l],s),n?ot(u):u)}return e}function ih(e,t){var n=Y(e)?{color:e,extraCssText:t}:e||{},r=n.color,o=n.type;t=n.extraCssText;var i=n.renderMode||"html";return r?"html"===i?"subItem"===o?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ot(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ot(r)+";"+(t||"")+'"></span>':{renderMode:i,content:"{"+(n.markerId||"markerX")+"|}  ",style:"subItem"===o?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}:""}function ah(e,t){return t=t||"transparent",Y(e)?e:Z(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function sh(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location.href=e}else window.open(e,t)}var lh=O,uh=["left","right","top","bottom","width","height"],ch=[["width","left","right"],["height","top","bottom"]];function dh(e,t,n,r,o){var i=0,a=0;null==r&&(r=1/0),null==o&&(o=1/0);var s=0;t.eachChild(function(l,u){var c,d,h=l.getBoundingRect(),p=t.childAt(u+1),f=p&&p.getBoundingRect();if("horizontal"===e){var g=h.width+(f?-f.x+h.x:0);(c=i+g)>r||l.newline?(i=0,c=g,a+=s+n,s=h.height):s=Math.max(s,h.height)}else{var m=h.height+(f?-f.y+h.y:0);(d=a+m)>o||l.newline?(i+=s+n,a=0,d=m,s=h.width):s=Math.max(s,h.width)}l.newline||(l.x=i,l.y=a,l.markRedraw(),"horizontal"===e?i=c+n:a=d+n)})}var hh=dh;function ph(e,t,n){n=eh(n||0);var r=t.width,o=t.height,i=Fo(e.left,r),a=Fo(e.top,o),s=Fo(e.right,r),l=Fo(e.bottom,o),u=Fo(e.width,r),c=Fo(e.height,o),d=n[2]+n[0],h=n[1]+n[3],p=e.aspect;switch(isNaN(u)&&(u=r-s-h-i),isNaN(c)&&(c=o-l-d-a),null!=p&&(isNaN(u)&&isNaN(c)&&(p>r/o?u=.8*r:c=.8*o),isNaN(u)&&(u=p*c),isNaN(c)&&(c=u/p)),isNaN(i)&&(i=r-s-u-h),isNaN(a)&&(a=o-l-c-d),e.left||e.right){case"center":i=r/2-u/2-n[3];break;case"right":i=r-u-h}switch(e.top||e.bottom){case"middle":case"center":a=o/2-c/2-n[0];break;case"bottom":a=o-c-d}i=i||0,a=a||0,isNaN(u)&&(u=r-h-i-(s||0)),isNaN(c)&&(c=o-d-a-(l||0));var f=new Ot(i+n[3],a+n[0],u,c);return f.margin=n,f}function fh(e,t,n,r,o,i){var a,s=!o||!o.hv||o.hv[0],l=!o||!o.hv||o.hv[1],u=o&&o.boundingMode||"all";if((i=i||e).x=e.x,i.y=e.y,!s&&!l)return!1;if("raw"===u)a="group"===e.type?new Ot(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(a=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();(a=a.clone()).applyTransform(c)}var d=ph(D({width:a.width,height:a.height},t),n,r),h=s?d.x-a.x:0,p=l?d.y-a.y:0;return"raw"===u?(i.x=h,i.y=p):(i.x+=h,i.y+=p),i===e&&e.markRedraw(),!0}function gh(e){var t=e.layoutMode||e.constructor.layoutMode;return Z(t)?t:t?{type:t}:null}function mh(e,t,n){var r=n&&n.ignoreSize;!U(r)&&(r=[r,r]);var o=a(ch[0],0),i=a(ch[1],1);function a(n,o){var i={},a=0,u={},c=0;if(lh(n,function(t){u[t]=e[t]}),lh(n,function(e){s(t,e)&&(i[e]=u[e]=t[e]),l(i,e)&&a++,l(u,e)&&c++}),r[o])return l(t,n[1])?u[n[2]]=null:l(t,n[2])&&(u[n[1]]=null),u;if(2!==c&&a){if(a>=2)return i;for(var d=0;d<n.length;d++){var h=n[d];if(!s(i,h)&&s(e,h)){i[h]=e[h];break}}return i}return u}function s(e,t){return e.hasOwnProperty(t)}function l(e,t){return null!=e[t]&&"auto"!==e[t]}function u(e,t,n){lh(e,function(e){t[e]=n[e]})}u(ch[0],e,o),u(ch[1],e,i)}function vh(e){return yh({},e)}function yh(e,t){return t&&e&&lh(uh,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}G(dh,"vertical"),G(dh,"horizontal");var bh=Ci(),xh=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.uid=fd("ec_cpt_model"),o}return n(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},t.prototype.mergeDefaultAndTheme=function(e,t){var n=gh(this),r=n?vh(e):{};k(e,t.getTheme().get(this.mainType)),k(e,this.getDefaultOption()),n&&mh(e,r,n)},t.prototype.mergeOption=function(e,t){k(this.option,e,!0);var n=gh(this);n&&mh(this.option,e,n)},t.prototype.optionUpdated=function(e,t){},t.prototype.getDefaultOption=function(){var e=this.constructor;if(!function(e){return!(!e||!e[Ei])}(e))return e.defaultOption;var t=bh(this);if(!t.defaultOption){for(var n=[],r=e;r;){var o=r.prototype.defaultOption;o&&n.push(o),r=r.superClass}for(var i={},a=n.length-1;a>=0;a--)i=k(i,n[a],!0);t.defaultOption=i}return t.defaultOption},t.prototype.getReferringComponents=function(e,t){var n=e+"Index",r=e+"Id";return Di(this.ecModel,e,{index:this.get(n,!0),id:this.get(r,!0)},t)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=function(){var e=t.prototype;e.type="component",e.id="",e.name="",e.mainType="",e.subType="",e.componentIndex=0}(),t}(hd);zi(xh,hd),Wi(xh),function(e){var t={};e.registerSubTypeDefaulter=function(e,n){var r=Oi(e);t[r.main]=n},e.determineSubType=function(n,r){var o=r.type;if(!o){var i=Oi(n).main;e.hasSubTypes(n)&&t[i]&&(o=t[i](r))}return o}}(xh),function(e,t){function n(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}e.topologicalTravel=function(e,t,r,o){if(e.length){var i=function(e){var t={},r=[];return O(e,function(o){var i=n(t,o),a=function(e,t){var n=[];return O(e,function(e){L(t,e)>=0&&n.push(e)}),n}(i.originalDeps=function(e){var t=[];return O(xh.getClassesByMainType(e),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=B(t,function(e){return Oi(e).main}),"dataset"!==e&&L(t,"dataset")<=0&&t.unshift("dataset"),t}(o),e);i.entryCount=a.length,0===i.entryCount&&r.push(o),O(a,function(e){L(i.predecessor,e)<0&&i.predecessor.push(e);var r=n(t,e);L(r.successor,e)<0&&r.successor.push(o)})}),{graph:t,noEntryList:r}}(t),a=i.graph,s=i.noEntryList,l={};for(O(e,function(e){l[e]=!0});s.length;){var u=s.pop(),c=a[u],d=!!l[u];d&&(r.call(o,u,c.originalDeps.slice()),delete l[u]),O(c.successor,d?p:h)}O(l,function(){throw new Error("")})}function h(e){a[e].entryCount--,0===a[e].entryCount&&s.push(e)}function p(e){l[e]=!0,h(e)}}}(xh);var _h="";"undefined"!=typeof navigator&&(_h=navigator.platform||"");var wh="rgba(0, 0, 0, 0.2)",Sh={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:wh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:wh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:wh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:wh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:wh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:wh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:_h.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Ch=me(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Mh="original",Th="arrayRows",kh="objectRows",Ih="keyedColumns",Ah="typedArray",Dh="unknown",Ph="column",Lh="row",Nh=Ci();function Rh(e,t,n){var r={},o=Oh(t);if(!o||!e)return r;var i,a,s=[],l=[],u=t.ecModel,c=Nh(u).datasetMap,d=o.uid+"_"+n.seriesLayoutBy;O(e=e.slice(),function(t,n){var o=Z(t)?t:e[n]={name:t};"ordinal"===o.type&&null==i&&(i=n,a=f(o)),r[o.name]=[]});var h=c.get(d)||c.set(d,{categoryWayDim:a,valueWayDim:0});function p(e,t,n){for(var r=0;r<n;r++)e.push(t+r)}function f(e){var t=e.dimsDef;return t?t.length:1}return O(e,function(e,t){var n=e.name,o=f(e);if(null==i){var a=h.valueWayDim;p(r[n],a,o),p(l,a,o),h.valueWayDim+=o}else i===t?(p(r[n],0,o),p(s,0,o)):(a=h.categoryWayDim,p(r[n],a,o),p(l,a,o),h.categoryWayDim+=o)}),s.length&&(r.itemName=s),l.length&&(r.seriesName=l),r}function Eh(e,t,n){var r={};if(!Oh(e))return r;var o,i=t.sourceFormat,a=t.dimensionsDefine;i!==kh&&i!==Ih||O(a,function(e,t){"name"===(Z(e)?e.name:e)&&(o=t)});var s=function(){for(var e={},r={},s=[],l=0,u=Math.min(5,n);l<u;l++){var c=zh(t.data,i,t.seriesLayoutBy,a,t.startIndex,l);s.push(c);var d=3===c;if(d&&null==e.v&&l!==o&&(e.v=l),(null==e.n||e.n===e.v||!d&&3===s[e.n])&&(e.n=l),h(e)&&3!==s[e.n])return e;d||(2===c&&null==r.v&&l!==o&&(r.v=l),null!=r.n&&r.n!==r.v||(r.n=l))}function h(e){return null!=e.v&&null!=e.n}return h(e)?e:h(r)?r:null}();if(s){r.value=[s.v];var l=null!=o?o:s.n;r.itemName=[l],r.seriesName=[l]}return r}function Oh(e){if(!e.get("data",!0))return Di(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Ii).models[0]}function Bh(e,t){return zh(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function zh(e,t,n,r,o,i){var a,s,l;if(K(e))return 3;if(r){var u=r[i];Z(u)?(s=u.name,l=u.type):Y(u)&&(s=u)}if(null!=l)return"ordinal"===l?1:3;if(t===Th){var c=e;if(n===Lh){for(var d=c[i],h=0;h<(d||[]).length&&h<5;h++)if(null!=(a=y(d[o+h])))return a}else for(h=0;h<c.length&&h<5;h++){var p=c[o+h];if(p&&null!=(a=y(p[i])))return a}}else if(t===kh){var f=e;if(!s)return 3;for(h=0;h<f.length&&h<5;h++)if((m=f[h])&&null!=(a=y(m[s])))return a}else if(t===Ih){if(!s)return 3;if(!(d=e[s])||K(d))return 3;for(h=0;h<d.length&&h<5;h++)if(null!=(a=y(d[h])))return a}else if(t===Mh){var g=e;for(h=0;h<g.length&&h<5;h++){var m,v=gi(m=g[h]);if(!U(v))return 3;if(null!=(a=y(v[i])))return a}}function y(e){var t=Y(e);return null!=e&&isFinite(e)&&""!==e?t?2:3:t&&"-"!==e?1:void 0}return 3}var Fh,Vh,Hh,Wh=me(),Gh=Ci(),Uh=Ci(),jh=function(){function e(){}return e.prototype.getColorFromPalette=function(e,t,n){var r=hi(this.get("color",!0)),o=this.get("colorLayer",!0);return qh(this,Gh,r,o,e,t,n)},e.prototype.clearColorPalette=function(){!function(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}(this,Gh)},e}();function Yh(e,t,n,r){var o=hi(e.get(["aria","decal","decals"]));return qh(e,Uh,o,null,t,n,r)}function qh(e,t,n,r,o,i,a){var s=t(i=i||e),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(o))return u[o];var c=null!=a&&r?function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].length>t)return e[r];return e[n-1]}(r,a):n;if((c=c||n)&&c.length){var d=c[l];return o&&(u[o]=d),s.paletteIdx=(l+1)%c.length,d}}var Xh="\0_ec_inner",Zh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(e,t,n,r,o,i){r=r||{},this.option=null,this._theme=new hd(r),this._locale=new hd(o),this._optionManager=i},t.prototype.setOption=function(e,t,n){var r=Jh(t);this._optionManager.setOption(e,n,r),this._resetOption(null,r)},t.prototype.resetOption=function(e,t){return this._resetOption(e,Jh(t))},t.prototype._resetOption=function(e,t){var n=!1,r=this._optionManager;if(!e||"recreate"===e){var o=r.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(o,t)):Hh(this,o),n=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var i=r.getTimelineOption(this);i&&(n=!0,this._mergeOption(i,t))}if(!e||"recreate"===e||"media"===e){var a=r.getMediaOption(this);a.length&&O(a,function(e){n=!0,this._mergeOption(e,t)},this)}return n},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,t){var n=this.option,r=this._componentsMap,o=this._componentsCount,i=[],a=me(),s=t&&t.replaceMergeMainTypeMap;Nh(this).datasetMap=me(),O(e,function(e,t){null!=e&&(xh.hasClass(t)?t&&(i.push(t),a.set(t,!0)):n[t]=null==n[t]?T(e):k(n[t],e,!0))}),s&&s.each(function(e,t){xh.hasClass(t)&&!a.get(t)&&(i.push(t),a.set(t,!0))}),xh.topologicalTravel(i,xh.getAllClassMainTypes(),function(t){var i=function(e,t,n){var r=Wh.get(t);if(!r)return n;var o=r(e);return o?n.concat(o):n}(this,t,hi(e[t])),a=r.get(t),l=vi(a,i,a?s&&s.get(t)?"replaceMerge":"normalMerge":"replaceAll");(function(e,t,n){O(e,function(e){var r=e.newOption;Z(r)&&(e.keyInfo.mainType=t,e.keyInfo.subType=function(e,t,n,r){return t.type?t.type:n?n.subType:r.determineSubType(e,t)}(t,r,e.existing,n))})})(l,t,xh),n[t]=null,r.set(t,null),o.set(t,0);var u,c=[],d=[],h=0;O(l,function(e,n){var r=e.existing,o=e.newOption;if(o){var i="series"===t,a=xh.getClass(t,e.keyInfo.subType,!i);if(!a)return;if("tooltip"===t){if(u)return;u=!0}if(r&&r.constructor===a)r.name=e.keyInfo.name,r.mergeOption(o,this),r.optionUpdated(o,!1);else{var s=A({componentIndex:n},e.keyInfo);A(r=new a(o,this,this,s),s),e.brandNew&&(r.__requireNewView=!0),r.init(o,this,this),r.optionUpdated(null,!0)}}else r&&(r.mergeOption({},this),r.optionUpdated({},!1));r?(c.push(r.option),d.push(r),h++):(c.push(void 0),d.push(void 0))},this),n[t]=c,r.set(t,d),o.set(t,h),"series"===t&&Fh(this)},this),this._seriesIndices||Fh(this)},t.prototype.getOption=function(){var e=T(this.option);return O(e,function(t,n){if(xh.hasClass(n)){for(var r=hi(t),o=r.length,i=!1,a=o-1;a>=0;a--)r[a]&&!wi(r[a])?i=!0:(r[a]=null,!i&&o--);r.length=o,e[n]=r}}),delete e[Xh],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,t){var n=this._componentsMap.get(e);if(n){var r=n[t||0];if(r)return r;if(null==t)for(var o=0;o<n.length;o++)if(n[o])return n[o]}},t.prototype.queryComponents=function(e){var t=e.mainType;if(!t)return[];var n,r=e.index,o=e.id,i=e.name,a=this._componentsMap.get(t);return a&&a.length?(null!=r?(n=[],O(hi(r),function(e){a[e]&&n.push(a[e])})):n=null!=o?$h("id",o,a):null!=i?$h("name",i,a):F(a,function(e){return!!e}),Kh(n,e)):[]},t.prototype.findComponents=function(e){var t,n,r,o,i,a=e.query,s=e.mainType,l=(n=s+"Index",r=s+"Id",o=s+"Name",!(t=a)||null==t[n]&&null==t[r]&&null==t[o]?null:{mainType:s,index:t[n],id:t[r],name:t[o]}),u=l?this.queryComponents(l):F(this._componentsMap.get(s),function(e){return!!e});return i=Kh(u,e),e.filter?F(i,e.filter):i},t.prototype.eachComponent=function(e,t,n){var r=this._componentsMap;if(j(e)){var o=t,i=e;r.each(function(e,t){for(var n=0;e&&n<e.length;n++){var r=e[n];r&&i.call(o,t,r,r.componentIndex)}})}else for(var a=Y(e)?r.get(e):Z(e)?this.findComponents(e):null,s=0;a&&s<a.length;s++){var l=a[s];l&&t.call(n,l,l.componentIndex)}},t.prototype.getSeriesByName=function(e){var t=xi(e,null);return F(this._componentsMap.get("series"),function(e){return!!e&&null!=t&&e.name===t})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return F(this._componentsMap.get("series"),function(t){return!!t&&t.subType===e})},t.prototype.getSeries=function(){return F(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,t){Vh(this),O(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];e.call(t,r,n)},this)},t.prototype.eachRawSeries=function(e,t){O(this._componentsMap.get("series"),function(n){n&&e.call(t,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(e,t,n){Vh(this),O(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];o.subType===e&&t.call(n,o,r)},this)},t.prototype.eachRawSeriesByType=function(e,t,n){return O(this.getSeriesByType(e),t,n)},t.prototype.isSeriesFiltered=function(e){return Vh(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,t){Vh(this);var n=[];O(this._seriesIndices,function(r){var o=this._componentsMap.get("series")[r];e.call(t,o,r)&&n.push(r)},this),this._seriesIndices=n,this._seriesIndicesMap=me(n)},t.prototype.restoreData=function(e){Fh(this);var t=this._componentsMap,n=[];t.each(function(e,t){xh.hasClass(t)&&n.push(t)}),xh.topologicalTravel(n,xh.getAllClassMainTypes(),function(n){O(t.get(n),function(t){!t||"series"===n&&function(e,t){if(t){var n=t.seriesIndex,r=t.seriesId,o=t.seriesName;return null!=n&&e.componentIndex!==n||null!=r&&e.id!==r||null!=o&&e.name!==o}}(t,e)||t.restoreData()})})},t.internalField=(Fh=function(e){var t=e._seriesIndices=[];O(e._componentsMap.get("series"),function(e){e&&t.push(e.componentIndex)}),e._seriesIndicesMap=me(t)},Vh=function(e){},void(Hh=function(e,t){e.option={},e.option[Xh]=1,e._componentsMap=me({series:[]}),e._componentsCount=me();var n=t.aria;Z(n)&&null==n.enabled&&(n.enabled=!0),function(e,t){var n=e.color&&!e.colorLayer;O(t,function(t,r){"colorLayer"===r&&n||xh.hasClass(r)||("object"==typeof t?e[r]=e[r]?k(e[r],t,!1):T(t):null==e[r]&&(e[r]=t))})}(t,e._theme.option),k(t,Sh,!1),e._mergeOption(t,null)})),t}(hd);function $h(e,t,n){if(U(t)){var r=me();return O(t,function(e){null!=e&&null!=xi(e,null)&&r.set(e,!0)}),F(n,function(t){return t&&r.get(t[e])})}var o=xi(t,null);return F(n,function(t){return t&&null!=o&&t[e]===o})}function Kh(e,t){return t.hasOwnProperty("subType")?F(e,function(e){return e&&e.subType===t.subType}):e}function Jh(e){var t=me();return e&&O(hi(e.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}R(Zh,jh);var Qh=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ep=function(e){O(Qh,function(t){this[t]=W(e[t],e)},this)},tp={},np=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(e,t){var n=[];O(tp,function(r,o){var i=r.create(e,t);n=n.concat(i||[])}),this._coordinateSystems=n},e.prototype.update=function(e,t){O(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(e,t){tp[e]=t},e.get=function(e){return tp[e]},e}(),rp=/^(min|max)?(.+)$/,op=function(){function e(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return e.prototype.setOption=function(e,t,n){e&&(O(hi(e.series),function(e){e&&e.data&&K(e.data)&&de(e.data)}),O(hi(e.dataset),function(e){e&&e.source&&K(e.source)&&de(e.source)})),e=T(e);var r=this._optionBackup,o=function(e,t,n){var r,o,i=[],a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,d=!!(l||s||a&&a.timeline);function h(e){O(t,function(t){t(e,n)})}return a?(o=a).timeline||(o.timeline=s):((d||c)&&(e.options=e.media=null),o=e),c&&U(u)&&O(u,function(e){e&&e.option&&(e.query?i.push(e):r||(r=e))}),h(o),O(l,function(e){return h(e)}),O(i,function(e){return h(e.option)}),{baseOption:o,timelineOptions:l||[],mediaDefault:r,mediaList:i}}(e,t,!r);this._newBaseOption=o.baseOption,r?(o.timelineOptions.length&&(r.timelineOptions=o.timelineOptions),o.mediaList.length&&(r.mediaList=o.mediaList),o.mediaDefault&&(r.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],T(e?t.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(e){var t,n=this._timelineOptions;if(n.length){var r=e.getComponent("timeline");r&&(t=T(n[r.getCurrentIndex()]))}return t},e.prototype.getMediaOption=function(e){var t,n,r=this._api.getWidth(),o=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,s=[],l=[];if(!i.length&&!a)return l;for(var u=0,c=i.length;u<c;u++)ip(i[u].query,r,o)&&s.push(u);return!s.length&&a&&(s=[-1]),s.length&&(t=s,n=this._currentMediaIndices,t.join(",")!==n.join(","))&&(l=B(s,function(e){return T(-1===e?a.option:i[e].option)})),this._currentMediaIndices=s,l},e}();function ip(e,t,n){var r={width:t,height:n,aspectratio:t/n},o=!0;return O(e,function(e,t){var n=t.match(rp);if(n&&n[1]&&n[2]){var i=n[1],a=n[2].toLowerCase();(function(e,t,n){return"min"===n?e>=t:"max"===n?e<=t:e===t})(r[a],e,i)||(o=!1)}}),o}var ap=O,sp=Z,lp=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function up(e){var t=e&&e.itemStyle;if(t)for(var n=0,r=lp.length;n<r;n++){var o=lp[n],i=t.normal,a=t.emphasis;i&&i[o]&&(e[o]=e[o]||{},e[o].normal?k(e[o].normal,i[o]):e[o].normal=i[o],i[o]=null),a&&a[o]&&(e[o]=e[o]||{},e[o].emphasis?k(e[o].emphasis,a[o]):e[o].emphasis=a[o],a[o]=null)}}function cp(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,o=e[t].emphasis;r&&(n?(e[t].normal=e[t].emphasis=null,D(e[t],r)):e[t]=r),o&&(e.emphasis=e.emphasis||{},e.emphasis[t]=o,o.focus&&(e.emphasis.focus=o.focus),o.blurScope&&(e.emphasis.blurScope=o.blurScope))}}function dp(e){cp(e,"itemStyle"),cp(e,"lineStyle"),cp(e,"areaStyle"),cp(e,"label"),cp(e,"labelLine"),cp(e,"upperLabel"),cp(e,"edgeLabel")}function hp(e,t){var n=sp(e)&&e[t],r=sp(n)&&n.textStyle;if(r)for(var o=0,i=fi.length;o<i;o++){var a=fi[o];r.hasOwnProperty(a)&&(n[a]=r[a])}}function pp(e){e&&(dp(e),hp(e,"label"),e.emphasis&&hp(e.emphasis,"label"))}function fp(e){return U(e)?e:e?[e]:[]}function gp(e){return(U(e)?e[0]:e)||{}}function mp(e){e&&O(vp,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var vp=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],yp=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],bp=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function xp(e){var t=e&&e.itemStyle;if(t)for(var n=0;n<bp.length;n++){var r=bp[n][1],o=bp[n][0];null!=t[r]&&(t[o]=t[r])}}function _p(e){e&&"edge"===e.alignTo&&null!=e.margin&&null==e.edgeDistance&&(e.edgeDistance=e.margin)}function wp(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function Sp(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n]),e[n]&&Sp(e[n].children,t)}function Cp(e,t){(function(e,t){ap(fp(e.series),function(e){sp(e)&&function(e){if(sp(e)){up(e),dp(e),hp(e,"label"),hp(e,"upperLabel"),hp(e,"edgeLabel"),e.emphasis&&(hp(e.emphasis,"label"),hp(e.emphasis,"upperLabel"),hp(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(up(t),pp(t));var n=e.markLine;n&&(up(n),pp(n));var r=e.markArea;r&&pp(r);var o=e.data;if("graph"===e.type){o=o||e.nodes;var i=e.links||e.edges;if(i&&!K(i))for(var a=0;a<i.length;a++)pp(i[a]);O(e.categories,function(e){dp(e)})}if(o&&!K(o))for(a=0;a<o.length;a++)pp(o[a]);if((t=e.markPoint)&&t.data){var s=t.data;for(a=0;a<s.length;a++)pp(s[a])}if((n=e.markLine)&&n.data){var l=n.data;for(a=0;a<l.length;a++)U(l[a])?(pp(l[a][0]),pp(l[a][1])):pp(l[a])}"gauge"===e.type?(hp(e,"axisLabel"),hp(e,"title"),hp(e,"detail")):"treemap"===e.type?(cp(e.breadcrumb,"itemStyle"),O(e.levels,function(e){dp(e)})):"tree"===e.type&&dp(e.leaves)}}(e)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),ap(n,function(t){ap(fp(e[t]),function(e){e&&(hp(e,"axisLabel"),hp(e.axisPointer,"label"))})}),ap(fp(e.parallel),function(e){var t=e&&e.parallelAxisDefault;hp(t,"axisLabel"),hp(t&&t.axisPointer,"label")}),ap(fp(e.calendar),function(e){cp(e,"itemStyle"),hp(e,"dayLabel"),hp(e,"monthLabel"),hp(e,"yearLabel")}),ap(fp(e.radar),function(e){hp(e,"name"),e.name&&null==e.axisName&&(e.axisName=e.name,delete e.name),null!=e.nameGap&&null==e.axisNameGap&&(e.axisNameGap=e.nameGap,delete e.nameGap)}),ap(fp(e.geo),function(e){sp(e)&&(pp(e),ap(fp(e.regions),function(e){pp(e)}))}),ap(fp(e.timeline),function(e){pp(e),cp(e,"label"),cp(e,"itemStyle"),cp(e,"controlStyle",!0);var t=e.data;U(t)&&O(t,function(e){Z(e)&&(cp(e,"label"),cp(e,"itemStyle"))})}),ap(fp(e.toolbox),function(e){cp(e,"iconStyle"),ap(e.feature,function(e){cp(e,"iconStyle")})}),hp(gp(e.axisPointer),"label"),hp(gp(e.tooltip).axisPointer,"label")})(e,t),e.series=hi(e.series),O(e.series,function(e){if(Z(e)){var t=e.type;if("line"===t)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===t||"gauge"===t){if(null!=e.clockWise&&(e.clockwise=e.clockWise),_p(e.label),(o=e.data)&&!K(o))for(var n=0;n<o.length;n++)_p(o[n]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if("gauge"===t){var r=function(e,t){for(var n="pointer.color".split(","),r=e,o=0;o<n.length&&null!=(r=r&&r[n[o]]);o++);return r}(e);null!=r&&function(e,t,n,r){for(var o,i="itemStyle.color".split(","),a=e,s=0;s<i.length-1;s++)null==a[o=i[s]]&&(a[o]={}),a=a[o];null==a[i[s]]&&(a[i[s]]=n)}(e,0,r)}else if("bar"===t){var o;if(xp(e),xp(e.backgroundStyle),xp(e.emphasis),(o=e.data)&&!K(o))for(n=0;n<o.length;n++)"object"==typeof o[n]&&(xp(o[n]),xp(o[n]&&o[n].emphasis))}else if("sunburst"===t){var i=e.highlightPolicy;i&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=i)),wp(e),Sp(e.data,wp)}else"graph"===t||"sankey"===t?function(e){e&&null!=e.focusNodeAdjacency&&(e.emphasis=e.emphasis||{},null==e.emphasis.focus&&(e.emphasis.focus="adjacency"))}(e):"map"===t&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&D(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),mp(e)}}),e.dataRange&&(e.visualMap=e.dataRange),O(yp,function(t){var n=e[t];n&&(U(n)||(n=[n]),O(n,function(e){mp(e)}))})}function Mp(e){O(e,function(t,n){var r=[],o=[NaN,NaN],i=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(i,function(i,u,c){var d,h,p=a.get(t.stackedDimension,c);if(isNaN(p))return o;s?h=a.getRawIndex(c):d=a.get(t.stackedByDimension,c);for(var f=NaN,g=n-1;g>=0;g--){var m=e[g];if(s||(h=m.data.rawIndexOf(m.stackedByDimension,d)),h>=0){var v=m.data.getByRawIndex(m.stackResultDimension,h);if("all"===l||"positive"===l&&v>0||"negative"===l&&v<0||"samesign"===l&&p>=0&&v>0||"samesign"===l&&p<=0&&v<0){p=Yo(p,v),f=v;break}}}return r[0]=p,r[1]=f,r})})}var Tp,kp,Ip,Ap,Dp,Pp=function(e){this.data=e.data||(e.sourceFormat===Ih?{}:[]),this.sourceFormat=e.sourceFormat||Dh,this.seriesLayoutBy=e.seriesLayoutBy||Ph,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var n=0;n<t.length;n++){var r=t[n];null==r.type&&1===Bh(this,n)&&(r.type="ordinal")}};function Lp(e){return e instanceof Pp}function Np(e,t,n){n=n||Ep(e);var r=t.seriesLayoutBy,o=function(e,t,n,r,o){var i,a;if(!e)return{dimensionsDefine:Op(o),startIndex:a,dimensionsDetectedCount:i};if(t===Th){var s=e;"auto"===r||null==r?Bp(function(e){null!=e&&"-"!==e&&(Y(e)?null==a&&(a=1):a=0)},n,s,10):a=X(r)?r:r?1:0,o||1!==a||(o=[],Bp(function(e,t){o[t]=null!=e?e+"":""},n,s,1/0)),i=o?o.length:n===Lh?s.length:s[0]?s[0].length:null}else if(t===kh)o||(o=function(e){for(var t,n=0;n<e.length&&!(t=e[n++]););if(t)return H(t)}(e));else if(t===Ih)o||(o=[],O(e,function(e,t){o.push(t)}));else if(t===Mh){var l=gi(e[0]);i=U(l)&&l.length||1}return{startIndex:a,dimensionsDefine:Op(o),dimensionsDetectedCount:i}}(e,n,r,t.sourceHeader,t.dimensions);return new Pp({data:e,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:T(t)})}function Rp(e){return new Pp({data:e,sourceFormat:K(e)?Ah:Mh})}function Ep(e){var t=Dh;if(K(e))t=Ah;else if(U(e)){0===e.length&&(t=Th);for(var n=0,r=e.length;n<r;n++){var o=e[n];if(null!=o){if(U(o)){t=Th;break}if(Z(o)){t=kh;break}}}}else if(Z(e))for(var i in e)if(xe(e,i)&&E(e[i])){t=Ih;break}return t}function Op(e){if(e){var t=me();return B(e,function(e,n){var r={name:(e=Z(e)?e:{name:e}).name,displayName:e.displayName,type:e.type};if(null==r.name)return r;r.name+="",null==r.displayName&&(r.displayName=r.name);var o=t.get(r.name);return o?r.name+="-"+o.count++:t.set(r.name,{count:1}),r})}}function Bp(e,t,n,r){if(t===Lh)for(var o=0;o<n.length&&o<r;o++)e(n[o]?n[o][0]:null,o);else{var i=n[0]||[];for(o=0;o<i.length&&o<r;o++)e(i[o],o)}}function zp(e){var t=e.sourceFormat;return t===kh||t===Ih}var Fp=function(){function e(e,t){var n=Lp(e)?e:Rp(e);this._source=n;var r=this._data=n.data;n.sourceFormat===Ah&&(this._offset=0,this._dimSize=t,this._data=r),Dp(this,r,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(e,t){},e.prototype.appendData=function(e){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var e;Dp=function(e,o,i){var a=i.sourceFormat,s=i.seriesLayoutBy,l=i.startIndex,u=i.dimensionsDefine;if(A(e,Ap[Zp(a,s)]),a===Ah)e.getItem=t,e.count=r,e.fillStorage=n;else{var c=Wp(a,s);e.getItem=W(c,null,o,l,u);var d=jp(a,s);e.count=W(d,null,o,l,u)}};var t=function(e,t){e-=this._offset,t=t||[];for(var n=this._data,r=this._dimSize,o=r*e,i=0;i<r;i++)t[i]=n[o+i];return t},n=function(e,t,n,r){for(var o=this._data,i=this._dimSize,a=0;a<i;a++){for(var s=r[a],l=null==s[0]?1/0:s[0],u=null==s[1]?-1/0:s[1],c=t-e,d=n[a],h=0;h<c;h++){var p=o[h*i+a];d[e+h]=p,p<l&&(l=p),p>u&&(u=p)}s[0]=l,s[1]=u}},r=function(){return this._data?this._data.length/this._dimSize:0};function o(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}(e={})[Th+"_"+Ph]={pure:!0,appendData:o},e[Th+"_"+Lh]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[kh]={pure:!0,appendData:o},e[Ih]={pure:!0,appendData:function(e){var t=this._data;O(e,function(e,n){for(var r=t[n]||(t[n]=[]),o=0;o<(e||[]).length;o++)r.push(e[o])})}},e[Mh]={appendData:o},e[Ah]={persistent:!1,pure:!0,appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}},Ap=e}(),e}(),Vp=function(e,t,n,r){return e[r]},Hp=((Tp={})[Th+"_"+Ph]=function(e,t,n,r){return e[r+t]},Tp[Th+"_"+Lh]=function(e,t,n,r,o){r+=t;for(var i=o||[],a=e,s=0;s<a.length;s++){var l=a[s];i[s]=l?l[r]:null}return i},Tp[kh]=Vp,Tp[Ih]=function(e,t,n,r,o){for(var i=o||[],a=0;a<n.length;a++){var s=e[n[a].name];i[a]=s?s[r]:null}return i},Tp[Mh]=Vp,Tp);function Wp(e,t){return Hp[Zp(e,t)]}var Gp=function(e,t,n){return e.length},Up=((kp={})[Th+"_"+Ph]=function(e,t,n){return Math.max(0,e.length-t)},kp[Th+"_"+Lh]=function(e,t,n){var r=e[0];return r?Math.max(0,r.length-t):0},kp[kh]=Gp,kp[Ih]=function(e,t,n){var r=e[n[0].name];return r?r.length:0},kp[Mh]=Gp,kp);function jp(e,t){return Up[Zp(e,t)]}var Yp=function(e,t,n){return e[t]},qp=((Ip={})[Th]=Yp,Ip[kh]=function(e,t,n){return e[n]},Ip[Ih]=Yp,Ip[Mh]=function(e,t,n){var r=gi(e);return r instanceof Array?r[t]:r},Ip[Ah]=Yp,Ip);function Xp(e){return qp[e]}function Zp(e,t){return e===Th?e+"_"+t:e}function $p(e,t,n){if(e){var r=e.getRawDataItem(t);if(null!=r){var o=e.getStore(),i=o.getSource().sourceFormat;if(null!=n){var a=e.getDimensionIndex(n),s=o.getDimensionProperty(a);return Xp(i)(r,a,s)}var l=r;return i===Mh&&(l=gi(r)),l}}}var Kp=/\{@(.+?)\}/g,Jp=function(){function e(){}return e.prototype.getDataParams=function(e,t){var n=this.getData(t),r=this.getRawValue(e,t),o=n.getRawIndex(e),i=n.getName(e),a=n.getRawDataItem(e),s=n.getItemVisual(e,"style"),l=s&&s[n.getItemVisual(e,"drawType")||"fill"],u=s&&s.stroke,c=this.mainType,d="series"===c,h=n.userOutput&&n.userOutput.get();return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:i,dataIndex:o,data:a,dataType:t,value:r,color:l,borderColor:u,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(e,t,n,r,o,i){t=t||"normal";var a=this.getData(n),s=this.getDataParams(e,n);return i&&(s.value=i.interpolatedValue),null!=r&&U(s.value)&&(s.value=s.value[r]),o||(o=a.getItemModel(e).get("normal"===t?["label","formatter"]:[t,"label","formatter"])),j(o)?(s.status=t,s.dimensionIndex=r,o(s)):Y(o)?oh(o,s).replace(Kp,function(t,n){var r=n.length,o=n;"["===o.charAt(0)&&"]"===o.charAt(r-1)&&(o=+o.slice(1,r-1));var s=$p(a,e,o);if(i&&U(i.interpolatedValue)){var l=a.getDimensionIndex(o);l>=0&&(s=i.interpolatedValue[l])}return null!=s?s+"":""}):void 0},e.prototype.getRawValue=function(e,t){return $p(this.getData(t),e)},e.prototype.formatTooltip=function(e,t,n){},e}();function Qp(e){var t,n;return Z(e)?e.type&&(n=e):t=e,{text:t,frag:n}}function ef(e){return new tf(e)}var tf=function(){function e(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return e.prototype.perform=function(e){var t,n=this._upstream,r=e&&e.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(t=this._plan(this.context));var i,a=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;function c(e){return!(e>=1)&&(e=1),e}a===l&&s===u||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,i=this._doReset(r)),this._modBy=l,this._modDataCount=u;var d=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,p=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!r&&(i||h<p)){var f=this._progress;if(U(f))for(var g=0;g<f.length;g++)this._doProgress(f[g],h,p,l,u);else this._doProgress(f,h,p,l,u)}this._dueIndex=p;var m=null!=this._settedOutputEnd?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(e,t,n,r,o){nf.reset(t,n,r,o),this._callingProgress=e,this._callingProgress({start:t,end:n,count:n-t,next:nf.next},this.context)},e.prototype._doReset=function(e){var t,n;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!e&&this._reset&&((t=this._reset(this.context))&&t.progress&&(n=t.forceFirstProgress,t=t.progress),U(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},e}(),nf=function(){var e,t,n,r,o,i={reset:function(l,u,c,d){t=l,e=u,n=c,r=d,o=Math.ceil(r/n),i.next=n>1&&r>0?s:a}};return i;function a(){return t<e?t++:null}function s(){var i=t%o*n+Math.ceil(t/o),a=t>=e?null:i<r?i:t;return t++,a}}();function rf(e,t){var n=t&&t.type;return"ordinal"===n?e:("time"!==n||X(e)||null==e||"-"===e||(e=+Ko(e)),null==e||""===e?NaN:+e)}var of=me({number:function(e){return parseFloat(e)},time:function(e){return+Ko(e)},trim:function(e){return Y(e)?ue(e):e}});function af(e){return of.get(e)}var sf={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},lf=function(){function e(e,t){if(!X(t)){li("")}this._opFn=sf[e],this._rvalFloat=ri(t)}return e.prototype.evaluate=function(e){return X(e)?this._opFn(e,this._rvalFloat):this._opFn(ri(e),this._rvalFloat)},e}(),uf=function(){function e(e,t){var n="desc"===e;this._resultLT=n?1:-1,null==t&&(t=n?"min":"max"),this._incomparable="min"===t?-1/0:1/0}return e.prototype.evaluate=function(e,t){var n=X(e)?e:ri(e),r=X(t)?t:ri(t),o=isNaN(n),i=isNaN(r);if(o&&(n=this._incomparable),i&&(r=this._incomparable),o&&i){var a=Y(e),s=Y(t);a&&(n=s?e:0),s&&(r=a?t:0)}return n<r?this._resultLT:n>r?-this._resultLT:0},e}(),cf=function(){function e(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=ri(t)}return e.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var n=typeof e;n===this._rvalTypeof||"number"!==n&&"number"!==this._rvalTypeof||(t=ri(e)===this._rvalFloat)}return this._isEQ?t:!t},e}();function df(e,t){return"eq"===e||"ne"===e?new cf("eq"===e,t):xe(sf,e)?new lf(e,t):null}var hf=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(e){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(e){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(e,t){},e.prototype.retrieveValueFromItem=function(e,t){},e.prototype.convertValue=function(e,t){return rf(e,t)},e}();function pf(e){if(!bf(e.sourceFormat)){li("")}return e.data}function ff(e){var t=e.sourceFormat,n=e.data;if(!bf(t)){li("")}if(t===Th){for(var r=[],o=0,i=n.length;o<i;o++)r.push(n[o].slice());return r}if(t===kh){for(r=[],o=0,i=n.length;o<i;o++)r.push(A({},n[o]));return r}}function gf(e,t,n){if(null!=n)return X(n)||!isNaN(n)&&!xe(t,n)?e[n]:xe(t,n)?t[n]:void 0}function mf(e){return T(e)}var vf=me();function yf(e,t,n,r){t.length||li(""),Z(e)||li("");var o=e.type,i=vf.get(o);i||li("");var a=B(t,function(e){return function(e,t){var n=new hf,r=e.data,o=n.sourceFormat=e.sourceFormat,i=e.startIndex;e.seriesLayoutBy!==Ph&&li("");var a=[],s={},l=e.dimensionsDefine;if(l)O(l,function(e,t){var n=e.name,r={index:t,name:n,displayName:e.displayName};if(a.push(r),null!=n){xe(s,n)&&li(""),s[n]=r}});else for(var u=0;u<e.dimensionsDetectedCount;u++)a.push({index:u});var c=Wp(o,Ph);t.__isBuiltIn&&(n.getRawDataItem=function(e){return c(r,i,a,e)},n.getRawData=W(pf,null,e)),n.cloneRawData=W(ff,null,e);var d=jp(o,Ph);n.count=W(d,null,r,i,a);var h=Xp(o);n.retrieveValue=function(e,t){var n=c(r,i,a,e);return p(n,t)};var p=n.retrieveValueFromItem=function(e,t){if(null!=e){var n=a[t];return n?h(e,t,n.name):void 0}};return n.getDimensionInfo=W(gf,null,a,s),n.cloneAllDimensionInfo=W(mf,null,a),n}(e,i)});return B(hi(i.transform({upstream:a[0],upstreamList:a,config:T(e.config)})),function(e,n){var r;Z(e)||li(""),e.data||li(""),bf(Ep(e.data))||li("");var o=t[0];if(o&&0===n&&!e.dimensions){var i=o.startIndex;i&&(e.data=o.data.slice(0,i).concat(e.data)),r={seriesLayoutBy:Ph,sourceHeader:i,dimensions:o.metaRawOption.dimensions}}else r={seriesLayoutBy:Ph,sourceHeader:0,dimensions:e.dimensions};return Np(e.data,r,null)})}function bf(e){return e===Th||e===kh}var xf,_f="undefined",wf=typeof Uint32Array===_f?Array:Uint32Array,Sf=typeof Uint16Array===_f?Array:Uint16Array,Cf=typeof Int32Array===_f?Array:Int32Array,Mf=typeof Float64Array===_f?Array:Float64Array,Tf={float:Mf,int:Cf,ordinal:Array,number:Array,time:Mf};function kf(e){return e>65535?wf:Sf}function If(e,t,n,r,o){var i=Tf[n||"float"];if(o){var a=e[t],s=a&&a.length;if(s!==r){for(var l=new i(r),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new i(r)}var Af=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=me()}return e.prototype.initData=function(e,t,n){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=e.getSource(),o=this.defaultDimValueGetter=xf[r.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],zp(r),this._dimensions=B(t,function(e){return{type:e.type,property:e.property}}),this._initDataFromProvider(0,e.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(e,t){var n=this._calcDimNameToIdx,r=this._dimensions,o=n.get(e);if(null!=o){if(r[o].type===t)return o}else o=r.length;return r[o]={type:t},n.set(e,o),this._chunks[o]=new Tf[t||"float"](this._rawCount),this._rawExtent[o]=[1/0,-1/0],o},e.prototype.collectOrdinalMeta=function(e,t){var n=this._chunks[e],r=this._dimensions[e],o=this._rawExtent,i=r.ordinalOffset||0,a=n.length;0===i&&(o[e]=[1/0,-1/0]);for(var s=o[e],l=i;l<a;l++){var u=n[l]=t.parseAndCollect(n[l]);isNaN(u)||(s[0]=Math.min(u,s[0]),s[1]=Math.max(u,s[1]))}r.ordinalMeta=t,r.ordinalOffset=a,r.type="ordinal"},e.prototype.getOrdinalMeta=function(e){return this._dimensions[e].ordinalMeta},e.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},e.prototype.appendData=function(e){var t=this._provider,n=this.count();t.appendData(e);var r=t.count();return t.persistent||(r+=n),n<r&&this._initDataFromProvider(n,r,!0),[n,r]},e.prototype.appendValues=function(e,t){for(var n=this._chunks,r=this._dimensions,o=r.length,i=this._rawExtent,a=this.count(),s=a+Math.max(e.length,t||0),l=0;l<o;l++)If(n,l,(p=r[l]).type,s,!0);for(var u=[],c=a;c<s;c++)for(var d=c-a,h=0;h<o;h++){var p=r[h],f=xf.arrayRows.call(this,e[d]||u,p.property,d,h);n[h][c]=f;var g=i[h];f<g[0]&&(g[0]=f),f>g[1]&&(g[1]=f)}return this._rawCount=this._count=s,{start:a,end:s}},e.prototype._initDataFromProvider=function(e,t,n){for(var r=this._provider,o=this._chunks,i=this._dimensions,a=i.length,s=this._rawExtent,l=B(i,function(e){return e.property}),u=0;u<a;u++){var c=i[u];s[u]||(s[u]=[1/0,-1/0]),If(o,u,c.type,t,n)}if(r.fillStorage)r.fillStorage(e,t,o,s);else for(var d=[],h=e;h<t;h++){d=r.getItem(h,d);for(var p=0;p<a;p++){var f=o[p],g=this._dimValueGetter(d,l[p],h,p);f[h]=g;var m=s[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var n=this._chunks[e];return n?n[this.getRawIndex(t)]:NaN},e.prototype.getValues=function(e,t){var n=[],r=[];if(null==t){t=e,e=[];for(var o=0;o<this._dimensions.length;o++)r.push(o)}else r=e;o=0;for(var i=r.length;o<i;o++)n.push(this.get(r[o],t));return n},e.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var n=this._chunks[e];return n?n[t]:NaN},e.prototype.getSum=function(e){var t=0;if(this._chunks[e])for(var n=0,r=this.count();n<r;n++){var o=this.get(e,n);isNaN(o)||(t+=o)}return t},e.prototype.getMedian=function(e){var t=[];this.each([e],function(e){isNaN(e)||t.push(e)});var n=t.sort(function(e,t){return e-t}),r=this.count();return 0===r?0:r%2==1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},e.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var r=0,o=this._count-1;r<=o;){var i=(r+o)/2|0;if(t[i]<e)r=i+1;else{if(!(t[i]>e))return i;o=i-1}}return-1},e.prototype.indicesOfNearest=function(e,t,n){var r=this._chunks[e],o=[];if(!r)return o;null==n&&(n=1/0);for(var i=1/0,a=-1,s=0,l=0,u=this.count();l<u;l++){var c=t-r[this.getRawIndex(l)],d=Math.abs(c);d<=n&&((d<i||d===i&&c>=0&&a<0)&&(i=d,a=c,s=0),c===a&&(o[s++]=l))}return o.length=s,o},e.prototype.getIndices=function(){var e,t=this._indices;if(t){var n=t.constructor,r=this._count;if(n===Array){e=new n(r);for(var o=0;o<r;o++)e[o]=t[o]}else e=new n(t.buffer,0,r)}else for(e=new(n=kf(this._rawCount))(this.count()),o=0;o<e.length;o++)e[o]=o;return e},e.prototype.filter=function(e,t){if(!this._count)return this;for(var n=this.clone(),r=n.count(),o=new(kf(n._rawCount))(r),i=[],a=e.length,s=0,l=e[0],u=n._chunks,c=0;c<r;c++){var d=void 0,h=n.getRawIndex(c);if(0===a)d=t(c);else if(1===a)d=t(u[l][h],c);else{for(var p=0;p<a;p++)i[p]=u[e[p]][h];i[p]=c,d=t.apply(null,i)}d&&(o[s++]=h)}return s<r&&(n._indices=o),n._count=s,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(e){var t=this.clone(),n=t._count;if(!n)return this;var r=H(e),o=r.length;if(!o)return this;var i=t.count(),a=new(kf(t._rawCount))(i),s=0,l=r[0],u=e[l][0],c=e[l][1],d=t._chunks,h=!1;if(!t._indices){var p=0;if(1===o){for(var f=d[r[0]],g=0;g<n;g++)((b=f[g])>=u&&b<=c||isNaN(b))&&(a[s++]=p),p++;h=!0}else if(2===o){f=d[r[0]];var m=d[r[1]],v=e[r[1]][0],y=e[r[1]][1];for(g=0;g<n;g++){var b=f[g],x=m[g];(b>=u&&b<=c||isNaN(b))&&(x>=v&&x<=y||isNaN(x))&&(a[s++]=p),p++}h=!0}}if(!h)if(1===o)for(g=0;g<i;g++){var _=t.getRawIndex(g);((b=d[r[0]][_])>=u&&b<=c||isNaN(b))&&(a[s++]=_)}else for(g=0;g<i;g++){for(var w=!0,S=(_=t.getRawIndex(g),0);S<o;S++){var C=r[S];((b=d[C][_])<e[C][0]||b>e[C][1])&&(w=!1)}w&&(a[s++]=t.getRawIndex(g))}return s<i&&(t._indices=a),t._count=s,t._extent=[],t._updateGetRawIdx(),t},e.prototype.map=function(e,t){var n=this.clone(e);return this._updateDims(n,e,t),n},e.prototype.modify=function(e,t){this._updateDims(this,e,t)},e.prototype._updateDims=function(e,t,n){for(var r=e._chunks,o=[],i=t.length,a=e.count(),s=[],l=e._rawExtent,u=0;u<t.length;u++)l[t[u]]=[1/0,-1/0];for(var c=0;c<a;c++){for(var d=e.getRawIndex(c),h=0;h<i;h++)s[h]=r[t[h]][d];s[i]=c;var p=n&&n.apply(null,s);if(null!=p)for("object"!=typeof p&&(o[0]=p,p=o),u=0;u<p.length;u++){var f=t[u],g=p[u],m=l[f],v=r[f];v&&(v[d]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}},e.prototype.lttbDownSample=function(e,t){var n,r,o,i=this.clone([e],!0),a=i._chunks[e],s=this.count(),l=0,u=Math.floor(1/t),c=this.getRawIndex(0),d=new(kf(this._rawCount))(Math.min(2*(Math.ceil(s/u)+2),s));d[l++]=c;for(var h=1;h<s-1;h+=u){for(var p=Math.min(h+u,s-1),f=Math.min(h+2*u,s),g=(f+p)/2,m=0,v=p;v<f;v++){var y=a[M=this.getRawIndex(v)];isNaN(y)||(m+=y)}m/=f-p;var b=h,x=Math.min(h+u,s),_=h-1,w=a[c];n=-1,o=b;var S=-1,C=0;for(v=b;v<x;v++){var M;y=a[M=this.getRawIndex(v)],isNaN(y)?(C++,S<0&&(S=M)):(r=Math.abs((_-g)*(y-w)-(_-v)*(m-w)))>n&&(n=r,o=M)}C>0&&C<x-b&&(d[l++]=Math.min(S,o),o=Math.max(S,o)),d[l++]=o,c=o}return d[l++]=this.getRawIndex(s-1),i._count=l,i._indices=d,i.getRawIndex=this._getRawIdx,i},e.prototype.downSample=function(e,t,n,r){for(var o=this.clone([e],!0),i=o._chunks,a=[],s=Math.floor(1/t),l=i[e],u=this.count(),c=o._rawExtent[e]=[1/0,-1/0],d=new(kf(this._rawCount))(Math.ceil(u/s)),h=0,p=0;p<u;p+=s){s>u-p&&(s=u-p,a.length=s);for(var f=0;f<s;f++){var g=this.getRawIndex(p+f);a[f]=l[g]}var m=n(a),v=this.getRawIndex(Math.min(p+r(a,m)||0,u-1));l[v]=m,m<c[0]&&(c[0]=m),m>c[1]&&(c[1]=m),d[h++]=v}return o._count=h,o._indices=d,o._updateGetRawIdx(),o},e.prototype.each=function(e,t){if(this._count)for(var n=e.length,r=this._chunks,o=0,i=this.count();o<i;o++){var a=this.getRawIndex(o);switch(n){case 0:t(o);break;case 1:t(r[e[0]][a],o);break;case 2:t(r[e[0]][a],r[e[1]][a],o);break;default:for(var s=0,l=[];s<n;s++)l[s]=r[e[s]][a];l[s]=o,t.apply(null,l)}}},e.prototype.getDataExtent=function(e){var t=this._chunks[e],n=[1/0,-1/0];if(!t)return n;var r,o=this.count();if(!this._indices)return this._rawExtent[e].slice();if(r=this._extent[e])return r.slice();for(var i=(r=n)[0],a=r[1],s=0;s<o;s++){var l=t[this.getRawIndex(s)];l<i&&(i=l),l>a&&(a=l)}return r=[i,a],this._extent[e]=r,r},e.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var n=[],r=this._chunks,o=0;o<r.length;o++)n.push(r[o][t]);return n},e.prototype.clone=function(t,n){var r,o,i=new e,a=this._chunks,s=t&&z(t,function(e,t){return e[t]=!0,e},{});if(s)for(var l=0;l<a.length;l++)i._chunks[l]=s[l]?(o=void 0,(o=(r=a[l]).constructor)===Array?r.slice():new o(r)):a[l];else i._chunks=a;return this._copyCommonProps(i),n||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},e.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=T(this._extent),e._rawExtent=T(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var n=this._indices.length;t=new e(n);for(var r=0;r<n;r++)t[r]=this._indices[r]}else t=new e(this._indices);return t}return null},e.prototype._getRawIdxIdentity=function(e){return e},e.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function e(e,t,n,r){return rf(e[r],this._dimensions[r])}xf={arrayRows:e,objectRows:function(e,t,n,r){return rf(e[t],this._dimensions[r])},keyedColumns:e,original:function(e,t,n,r){var o=e&&(null==e.value?e:e.value);return rf(o instanceof Array?o[r]:o,this._dimensions[r])},typedArray:function(e,t,n,r){return e[r]}}}(),e}(),Df=function(){function e(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var e,t,n=this._sourceHost,r=this._getUpstreamSourceManagers(),o=!!r.length;if(Lf(n)){var i=n,a=void 0,s=void 0,l=void 0;if(o){var u=r[0];u.prepareSource(),a=(l=u.getSource()).data,s=l.sourceFormat,t=[u._getVersionSign()]}else s=K(a=i.get("data",!0))?Ah:Mh,t=[];var c=this._getSourceMetaRawOption()||{},d=l&&l.metaRawOption||{},h=oe(c.seriesLayoutBy,d.seriesLayoutBy)||null,p=oe(c.sourceHeader,d.sourceHeader),f=oe(c.dimensions,d.dimensions);e=h!==d.seriesLayoutBy||!!p!=!!d.sourceHeader||f?[Np(a,{seriesLayoutBy:h,sourceHeader:p,dimensions:f},s)]:[]}else{var g=n;if(o){var m=this._applyTransform(r);e=m.sourceList,t=m.upstreamSignList}else e=[Np(g.get("source",!0),this._getSourceMetaRawOption(),null)],t=[]}this._setLocalSource(e,t)},e.prototype._applyTransform=function(e){var t,n=this._sourceHost,r=n.get("transform",!0),o=n.get("fromTransformResult",!0);if(null!=o){1!==e.length&&Nf("")}var i,a=[],s=[];return O(e,function(e){e.prepareSource();var t=e.getSource(o||0);null==o||t||Nf(""),a.push(t),s.push(e._getVersionSign())}),r?t=function(e,t,n){var r=hi(e),o=r.length;o||li("");for(var i=0,a=o;i<a;i++)t=yf(r[i],t),i!==a-1&&(t.length=Math.max(t.length,1));return t}(r,a,n.componentIndex):null!=o&&(t=[(i=a[0],new Pp({data:i.data,sourceFormat:i.sourceFormat,seriesLayoutBy:i.seriesLayoutBy,dimensionsDefine:T(i.dimensionsDefine),startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount}))]),{sourceList:t,upstreamSignList:s}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var n=e[t];if(n._isDirty()||this._upstreamSignList[t]!==n._getVersionSign())return!0}},e.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(e)}return t},e.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},e.prototype._innerGetDataStore=function(e,t,n){var r=this._storeList,o=r[0];o||(o=r[0]={});var i=o[n];if(!i){var a=this._getUpstreamSourceManagers()[0];Lf(this._sourceHost)&&a?i=a._innerGetDataStore(e,t,n):(i=new Af).initData(new Fp(t,e.length),e),o[n]=i}return i},e.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(Lf(e)){var t=Oh(e);return t?[t.getSourceManager()]:[]}return B(function(e){return e.get("transform",!0)||e.get("fromTransformResult",!0)?Di(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Ii).models:[]}(e),function(e){return e.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var e,t,n,r=this._sourceHost;if(Lf(r))e=r.get("seriesLayoutBy",!0),t=r.get("sourceHeader",!0),n=r.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=r;e=o.get("seriesLayoutBy",!0),t=o.get("sourceHeader",!0),n=o.get("dimensions",!0)}return{seriesLayoutBy:e,sourceHeader:t,dimensions:n}},e}();function Pf(e){e.option.transform&&de(e.option.transform)}function Lf(e){return"series"===e.mainType}function Nf(e){throw new Error(e)}var Rf="line-height:1";function Ef(e,t){var n=e.color||"#6e7079",r=e.fontSize||12,o=e.fontWeight||"400",i=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+ot(r+"")+"px;color:"+ot(n)+";font-weight:"+ot(o+""),valueStyle:"font-size:"+ot(a+"")+"px;color:"+ot(i)+";font-weight:"+ot(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:o},valueStyle:{fontSize:a,fill:i,fontWeight:s}}}var Of=[0,10,20,30],Bf=["","\n","\n\n","\n\n\n"];function zf(e,t){return t.type=e,t}function Ff(e){return"section"===e.type}function Vf(e){return Ff(e)?Wf:Gf}function Hf(e){if(Ff(e)){var t=0,n=e.blocks.length,r=n>1||n>0&&!e.noHeader;return O(e.blocks,function(e){var n=Hf(e);n>=t&&(t=n+ +(r&&(!n||Ff(e)&&!e.noHeader)))}),t}return 0}function Wf(e,t,n,r){var o,i=t.noHeader,a=(o=Hf(t),{html:Of[o],richText:Bf[o]}),s=[],l=t.blocks||[];le(!l||U(l)),l=l||[];var u=e.orderMode;if(t.sortBlocks&&u){l=l.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(xe(c,u)){var d=new uf(c[u],null);l.sort(function(e,t){return d.evaluate(e.sortParam,t.sortParam)})}else"seriesDesc"===u&&l.reverse()}O(l,function(n,o){var i=t.valueFormatter,l=Vf(n)(i?A(A({},e),{valueFormatter:i}):e,n,o>0?a.html:0,r);null!=l&&s.push(l)});var h="richText"===e.renderMode?s.join(a.richText):jf(s.join(""),i?n:a.html);if(i)return h;var p=th(t.header,"ordinal",e.useUTC),f=Ef(r,e.renderMode).nameStyle;return"richText"===e.renderMode?Yf(e,p,f)+a.richText+h:jf('<div style="'+f+";"+Rf+';">'+ot(p)+"</div>"+h,n)}function Gf(e,t,n,r){var o=e.renderMode,i=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(e){return B(e=U(e)?e:[e],function(e,t){return th(e,U(p)?p[t]:p,u)})};if(!i||!a){var d=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",o),h=i?"":th(l,"ordinal",u),p=t.valueType,f=a?[]:c(t.value),g=!s||!i,m=!s&&i,v=Ef(r,o),y=v.nameStyle,b=v.valueStyle;return"richText"===o?(s?"":d)+(i?"":Yf(e,h,y))+(a?"":function(e,t,n,r,o){var i=[o],a=r?10:20;return n&&i.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(U(t)?t.join("  "):t,i)}(e,f,g,m,b)):jf((s?"":d)+(i?"":function(e,t,n){return'<span style="'+n+";"+(t?"margin-left:2px":"")+'">'+ot(e)+"</span>"}(h,!s,y))+(a?"":function(e,t,n,r){return'<span style="'+(t?"float:right;margin-left:"+(n?"10px":"20px"):"")+";"+r+'">'+B(e=U(e)?e:[e],function(e){return ot(e)}).join("&nbsp;&nbsp;")+"</span>"}(f,g,m,b)),n)}}function Uf(e,t,n,r,o,i){if(e)return Vf(e)({useUTC:o,renderMode:n,orderMode:r,markupStyleCreator:t,valueFormatter:e.valueFormatter},e,0,i)}function jf(e,t){return'<div style="margin: '+t+"px 0 0;"+Rf+';">'+e+'<div style="clear:both"></div></div>'}function Yf(e,t,n){return e.markupStyleCreator.wrapRichTextStyle(t,n)}function qf(e,t){return ah(e.getData().getItemVisual(t,"style")[e.visualDrawType])}function Xf(e,t){var n=e.get("padding");return null!=n?n:"richText"===t?[8,10]:10}var Zf=function(){function e(){this.richTextStyles={},this._nextStyleNameId=ii()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(e,t,n){var r="richText"===n?this._generateStyleName():null,o=ih({color:t,type:e,renderMode:n,markerId:r});return Y(o)?o:(this.richTextStyles[r]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(e,t){var n={};U(t)?O(t,function(e){return A(n,e)}):A(n,t);var r=this._generateStyleName();return this.richTextStyles[r]=n,"{"+r+"|"+e+"}"},e}();function $f(e){var t,n,r,o,i=e.series,a=e.dataIndex,s=e.multipleSeries,l=i.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,d=i.getRawValue(a),h=U(d),p=qf(i,a);if(c>1||h&&!c){var f=function(e,t,n,r,o){var i=t.getData(),a=z(e,function(e,t,n){var r=i.getDimensionInfo(n);return e||r&&!1!==r.tooltip&&null!=r.displayName},!1),s=[],l=[],u=[];function c(e,t){var n=i.getDimensionInfo(t);n&&!1!==n.otherDims.tooltip&&(a?u.push(zf("nameValue",{markerType:"subItem",markerColor:o,name:n.displayName,value:e,valueType:n.type})):(s.push(e),l.push(n.type)))}return r.length?O(r,function(e){c($p(i,n,e),e)}):O(e,c),{inlineValues:s,inlineValueTypes:l,blocks:u}}(d,i,a,u,p);t=f.inlineValues,n=f.inlineValueTypes,r=f.blocks,o=f.inlineValues[0]}else if(c){var g=l.getDimensionInfo(u[0]);o=t=$p(l,a,u[0]),n=g.type}else o=t=h?d[0]:d;var m=_i(i),v=m&&i.name||"",y=l.getName(a),b=s?v:y;return zf("section",{header:v,noHeader:s||!m,sortParam:o,blocks:[zf("nameValue",{markerType:"item",markerColor:p,name:b,noName:!ue(b),value:t,valueType:n})].concat(r||[])})}var Kf=Ci();function Jf(e,t){return e.getName(t)||e.getId(t)}var Qf="__universalTransitionEnabled",eg=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return n(t,e),t.prototype.init=function(e,t,n){this.seriesIndex=this.componentIndex,this.dataTask=ef({count:ng,reset:rg}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),(Kf(this).sourceManager=new Df(this)).prepareSource();var r=this.getInitialData(e,n);ig(r,this),this.dataTask.context.data=r,Kf(this).dataBeforeProcessed=r,tg(this),this._initSelectedMapFromData(r)},t.prototype.mergeDefaultAndTheme=function(e,t){var n=gh(this),r=n?vh(e):{},o=this.subType;xh.hasClass(o)&&(o+="Series"),k(e,t.getTheme().get(this.subType)),k(e,this.getDefaultOption()),pi(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&mh(e,r,n)},t.prototype.mergeOption=function(e,t){e=k(this.option,e,!0),this.fillDataTextStyle(e.data);var n=gh(this);n&&mh(this.option,e,n);var r=Kf(this).sourceManager;r.dirty(),r.prepareSource();var o=this.getInitialData(e,t);ig(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Kf(this).dataBeforeProcessed=o,tg(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(e){if(e&&!K(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&pi(e[n],"label",t)},t.prototype.getInitialData=function(e,t){},t.prototype.appendData=function(e){this.getRawData().appendData(e.data)},t.prototype.getData=function(e){var t=sg(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return Kf(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var t=sg(this);if(t){var n=t.context;n.outputData=e,t!==this.dataTask&&(n.data=e)}Kf(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return me(e)},t.prototype.getSourceManager=function(){return Kf(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Kf(this).dataBeforeProcessed},t.prototype.getColorBy=function(){return this.get("colorBy")||"series"},t.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,t,n){return $f({series:this,dataIndex:e,multipleSeries:t})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(o.node&&(!e||!e.ssr))return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,t,n){var r=this.ecModel,o=jh.prototype.getColorFromPalette.call(this,e,t,n);return o||(o=r.getColorFromPalette(e,t,n)),o},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,t){this._innerSelect(this.getData(t),e)},t.prototype.unselect=function(e,t){var n=this.option.selectedMap;if(n){var r=this.option.selectedMode,o=this.getData(t);if("series"===r||"all"===n)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var i=0;i<e.length;i++){var a=Jf(o,e[i]);n[a]=!1,this._selectedDataIndicesMap[a]=-1}}},t.prototype.toggleSelect=function(e,t){for(var n=[],r=0;r<e.length;r++)n[0]=e[r],this.isSelected(e[r],t)?this.unselect(n,t):this.select(n,t)},t.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,t=H(e),n=[],r=0;r<t.length;r++){var o=e[t[r]];o>=0&&n.push(o)}return n},t.prototype.isSelected=function(e,t){var n=this.option.selectedMap;if(!n)return!1;var r=this.getData(t);return("all"===n||n[Jf(r,e)])&&!r.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Qf])return!0;var e=this.option.universalTransition;return!!e&&(!0===e||e&&e.enabled)},t.prototype._innerSelect=function(e,t){var n,r,o=this.option,i=o.selectedMode,a=t.length;if(i&&a)if("series"===i)o.selectedMap="all";else if("multiple"===i){Z(o.selectedMap)||(o.selectedMap={});for(var s=o.selectedMap,l=0;l<a;l++){var u=t[l];s[d=Jf(e,u)]=!0,this._selectedDataIndicesMap[d]=e.getRawIndex(u)}}else if("single"===i||!0===i){var c=t[a-1],d=Jf(e,c);o.selectedMap=((n={})[d]=!0,n),this._selectedDataIndicesMap=((r={})[d]=e.getRawIndex(c),r)}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var t=[];e.hasItemOption&&e.each(function(n){var r=e.getRawDataItem(n);r&&r.selected&&t.push(n)}),t.length>0&&this._innerSelect(e,t)}},t.registerClass=function(e){return xh.registerClass(e)},t.protoInitialize=function(){var e=t.prototype;e.type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",e.visualDrawType="fill"}(),t}(xh);function tg(e){var t=e.name;_i(e)||(e.name=function(e){var t=e.getRawData(),n=t.mapDimensionsAll("seriesName"),r=[];return O(n,function(e){var n=t.getDimensionInfo(e);n.displayName&&r.push(n.displayName)}),r.join(" ")}(e)||t)}function ng(e){return e.model.getRawData().count()}function rg(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),og}function og(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function ig(e,t){O(ve(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(n){e.wrapMethod(n,G(ag,t))})}function ag(e,t){var n=sg(e);return n&&n.setOutputEnd((t||this).count()),t}function sg(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var r=n.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(e.uid))}return r}}R(eg,Jp),R(eg,jh),zi(eg,xh);var lg=function(){function e(){this.group=new Po,this.uid=fd("viewComponent")}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,n,r){},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,n,r){},e.prototype.updateLayout=function(e,t,n,r){},e.prototype.updateVisual=function(e,t,n,r){},e.prototype.toggleBlurSeries=function(e,t,n){},e.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},e}();function ug(){var e=Ci();return function(t){var n=e(t),r=t.pipelineContext,o=!!n.large,i=!!n.progressiveRender,a=n.large=!(!r||!r.large),s=n.progressiveRender=!(!r||!r.progressiveRender);return!(o===a&&i===s)&&"reset"}}Bi(lg),Wi(lg);var cg=Ci(),dg=ug(),hg=function(){function e(){this.group=new Po,this.uid=fd("viewChart"),this.renderTask=ef({plan:gg,reset:mg}),this.renderTask.context={view:this}}return e.prototype.init=function(e,t){},e.prototype.render=function(e,t,n,r){},e.prototype.highlight=function(e,t,n,r){var o=e.getData(r&&r.dataType);o&&fg(o,r,"emphasis")},e.prototype.downplay=function(e,t,n,r){var o=e.getData(r&&r.dataType);o&&fg(o,r,"normal")},e.prototype.remove=function(e,t){this.group.removeAll()},e.prototype.dispose=function(e,t){},e.prototype.updateView=function(e,t,n,r){this.render(e,t,n,r)},e.prototype.updateLayout=function(e,t,n,r){this.render(e,t,n,r)},e.prototype.updateVisual=function(e,t,n,r){this.render(e,t,n,r)},e.prototype.eachRendered=function(e){Bc(this.group,e)},e.markUpdateMethod=function(e,t){cg(e).updateMethod=t},e.protoInitialize=void(e.prototype.type="chart"),e}();function pg(e,t,n){e&&Vl(e)&&("emphasis"===t?xl:_l)(e,n)}function fg(e,t,n){var r=Si(e,t),o=t&&null!=t.highlightKey?function(e){var t=qs[e];return null==t&&Ys<=32&&(t=qs[e]=Ys++),t}(t.highlightKey):null;null!=r?O(hi(r),function(t){pg(e.getItemGraphicEl(t),n,o)}):e.eachItemGraphicEl(function(e){pg(e,n,o)})}function gg(e){return dg(e.model)}function mg(e){var t=e.model,n=e.ecModel,r=e.api,o=e.payload,i=t.pipelineContext.progressiveRender,a=e.view,s=o&&cg(o).updateMethod,l=i?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](t,n,r,o),vg[l]}Bi(hg),Wi(hg);var vg={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},yg="\0__throttleOriginMethod",bg="\0__throttleRate",xg="\0__throttleType";function _g(e,t,n){var r,o,i,a,s,l=0,u=0,c=null;function d(){u=(new Date).getTime(),c=null,e.apply(i,a||[])}t=t||0;var h=function(){for(var e=[],h=0;h<arguments.length;h++)e[h]=arguments[h];r=(new Date).getTime(),i=this,a=e;var p=s||t,f=s||n;s=null,o=r-(f?l:u)-p,clearTimeout(c),f?c=setTimeout(d,p):o>=0?d():c=setTimeout(d,-o),l=r};return h.clear=function(){c&&(clearTimeout(c),c=null)},h.debounceNextCall=function(e){s=e},h}function wg(e,t,n,r){var o=e[t];if(o){var i=o[yg]||o,a=o[xg];if(o[bg]!==n||a!==r){if(null==n||!r)return e[t]=i;(o=e[t]=_g(i,n,"debounce"===r))[yg]=i,o[xg]=r,o[bg]=n}return o}}function Sg(e,t){var n=e[t];n&&n[yg]&&(n.clear&&n.clear(),e[t]=n[yg])}var Cg=Ci(),Mg={itemStyle:Gi(ud,!0),lineStyle:Gi(ad,!0)},Tg={lineStyle:"stroke",itemStyle:"fill"};function kg(e,t){return e.visualStyleMapper||Mg[t]||(console.warn("Unknown style type '"+t+"'."),Mg.itemStyle)}function Ig(e,t){return e.visualDrawType||Tg[t]||(console.warn("Unknown style type '"+t+"'."),"fill")}var Ag={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",o=e.getModel(r),i=kg(e,r)(o),a=o.getShallow("decal");a&&(n.setVisual("decal",a),a.dirty=!0);var s=Ig(e,r),l=i[s],u=j(l)?l:null,c="auto"===i.fill||"auto"===i.stroke;if(!i[s]||u||c){var d=e.getColorFromPalette(e.name,null,t.getSeriesCount());i[s]||(i[s]=d,n.setVisual("colorFromPalette",!0)),i.fill="auto"===i.fill||j(i.fill)?d:i.fill,i.stroke="auto"===i.stroke||j(i.stroke)?d:i.stroke}if(n.setVisual("style",i),n.setVisual("drawType",s),!t.isSeriesFiltered(e)&&u)return n.setVisual("colorFromPalette",!1),{dataEach:function(t,n){var r=e.getDataParams(n),o=A({},i);o[s]=u(r),t.setItemVisual(n,"style",o)}}}},Dg=new hd,Pg={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.ignoreStyleOnData&&!t.isSeriesFiltered(e)){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",o=kg(e,r),i=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(e,t){var n=e.getRawDataItem(t);if(n&&n[r]){Dg.option=n[r];var a=o(Dg);A(e.ensureUniqueItemVisual(t,"style"),a),Dg.option.decal&&(e.setItemVisual(t,"decal",Dg.option.decal),Dg.option.decal.dirty=!0),i in a&&e.setItemVisual(t,"colorFromPalette",!1)}}:null}}}},Lg={performRawSeries:!0,overallReset:function(e){var t=me();e.eachSeries(function(e){var n=e.getColorBy();if(!e.isColorBySeries()){var r=e.type+"-"+n,o=t.get(r);o||(o={},t.set(r,o)),Cg(e).scope=o}}),e.eachSeries(function(t){if(!t.isColorBySeries()&&!e.isSeriesFiltered(t)){var n=t.getRawData(),r={},o=t.getData(),i=Cg(t).scope,a=t.visualStyleAccessPath||"itemStyle",s=Ig(t,a);o.each(function(e){var t=o.getRawIndex(e);r[t]=e}),n.each(function(e){var a=r[e];if(o.getItemVisual(a,"colorFromPalette")){var l=o.ensureUniqueItemVisual(a,"style"),u=n.getName(e)||e+"",c=n.count();l[s]=t.getColorFromPalette(u,i,c)}})}})}},Ng=Math.PI,Rg=function(){function e(e,t,n,r){this._stageTaskMap=me(),this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=n.concat(r)}return e.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(e){var t=e.overallTask;t&&t.dirty()})},e.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),r=n.context,o=!t&&n.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,i=r&&r.modDataCount;return{step:o,modBy:null!=i?Math.ceil(i/o):null,modDataCount:i}}},e.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},e.prototype.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),r=e.getData().count(),o=n.progressiveEnabled&&t.incrementalPrepareRender&&r>=n.threshold,i=e.get("large")&&r>=e.get("largeThreshold"),a="mod"===e.get("progressiveChunkMode")?r:null;e.pipelineContext=n.context={progressiveRender:o,modDataCount:a,large:i}},e.prototype.restorePipelines=function(e){var t=this,n=t._pipelineMap=me();e.eachSeries(function(e){var r=e.getProgressive(),o=e.uid;n.set(o,{id:o,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:r&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),t._pipe(e,e.dataTask)})},e.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),n=this.api;O(this._allHandlers,function(r){var o=e.get(r.uid)||e.set(r.uid,{});le(!(r.reset&&r.overallReset),""),r.reset&&this._createSeriesStageTask(r,o,t,n),r.overallReset&&this._createOverallStageTask(r,o,t,n)},this)},e.prototype.prepareView=function(e,t,n,r){var o=e.renderTask,i=o.context;i.model=t,i.ecModel=n,i.api=r,o.__block=!e.incrementalPrepareRender,this._pipe(t,o)},e.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},e.prototype.performVisualTasks=function(e,t,n){this._performStageTasks(this._visualHandlers,e,t,n)},e.prototype._performStageTasks=function(e,t,n,r){r=r||{};var o=!1,i=this;function a(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}O(e,function(e,s){if(!r.visualType||r.visualType===e.visualType){var l=i._stageTaskMap.get(e.uid),u=l.seriesTaskMap,c=l.overallTask;if(c){var d,h=c.agentStubMap;h.each(function(e){a(r,e)&&(e.dirty(),d=!0)}),d&&c.dirty(),i.updatePayload(c,n);var p=i.getPerformArgs(c,r.block);h.each(function(e){e.perform(p)}),c.perform(p)&&(o=!0)}else u&&u.each(function(s,l){a(r,s)&&s.dirty();var u=i.getPerformArgs(s,r.block);u.skip=!e.performRawSeries&&t.isSeriesFiltered(s.context.model),i.updatePayload(s,n),s.perform(u)&&(o=!0)})}}),this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(e){t=e.dataTask.perform()||t}),this.unfinished=t||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},e.prototype.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)},e.prototype._createSeriesStageTask=function(e,t,n,r){var o=this,i=t.seriesTaskMap,a=t.seriesTaskMap=me(),s=e.seriesType,l=e.getTargetSeries;function u(t){var s=t.uid,l=a.set(s,i&&i.get(s)||ef({plan:Fg,reset:Vg,count:Gg}));l.context={model:t,ecModel:n,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:o},o._pipe(t,l)}e.createOnAllSeries?n.eachRawSeries(u):s?n.eachRawSeriesByType(s,u):l&&l(n,r).each(u)},e.prototype._createOverallStageTask=function(e,t,n,r){var o=this,i=t.overallTask=t.overallTask||ef({reset:Eg});i.context={ecModel:n,api:r,overallReset:e.overallReset,scheduler:o};var a=i.agentStubMap,s=i.agentStubMap=me(),l=e.seriesType,u=e.getTargetSeries,c=!0,d=!1;function h(e){var t=e.uid,n=s.set(t,a&&a.get(t)||(d=!0,ef({reset:Og,onDirty:zg})));n.context={model:e,overallProgress:c},n.agent=i,n.__block=c,o._pipe(e,n)}le(!e.createOnAllSeries,""),l?n.eachRawSeriesByType(l,h):u?u(n,r).each(h):(c=!1,O(n.getSeries(),h)),d&&i.dirty()},e.prototype._pipe=function(e,t){var n=e.uid,r=this._pipelineMap.get(n);!r.head&&(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},e.wrapStageHandler=function(e,t){return j(e)&&(e={overallReset:e,seriesType:Ug(e)}),e.uid=fd("stageHandler"),t&&(e.visualType=t),e},e}();function Eg(e){e.overallReset(e.ecModel,e.api,e.payload)}function Og(e){return e.overallProgress&&Bg}function Bg(){this.agent.dirty(),this.getDownstream().dirty()}function zg(){this.agent&&this.agent.dirty()}function Fg(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Vg(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=hi(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?B(t,function(e,t){return Wg(t)}):Hg}var Hg=Wg(0);function Wg(e){return function(t,n){var r=n.data,o=n.resetDefines[e];if(o&&o.dataEach)for(var i=t.start;i<t.end;i++)o.dataEach(r,i);else o&&o.progress&&o.progress(t,r)}}function Gg(e){return e.data.count()}function Ug(e){jg=null;try{e(Yg,qg)}catch(e){}return jg}var jg,Yg={},qg={};function Xg(e,t){for(var n in t.prototype)e[n]=_e}Xg(Yg,Zh),Xg(qg,ep),Yg.eachSeriesByType=Yg.eachRawSeriesByType=function(e){jg=e},Yg.eachComponent=function(e){"series"===e.mainType&&e.subType&&(jg=e.subType)};var Zg=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],$g={color:Zg,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Zg]},Kg="#B9B8CE",Jg="#100C2A",Qg=function(){return{axisLine:{lineStyle:{color:Kg}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},em=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],tm={darkMode:!0,color:em,backgroundColor:Jg,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Kg}},textStyle:{color:Kg},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Kg}},dataZoom:{borderColor:"#71708A",textStyle:{color:Kg},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Kg}},timeline:{lineStyle:{color:Kg},label:{color:Kg},controlStyle:{color:Kg,borderColor:Kg}},calendar:{itemStyle:{color:Jg},dayLabel:{color:Kg},monthLabel:{color:Kg},yearLabel:{color:Kg}},timeAxis:Qg(),logAxis:Qg(),valueAxis:Qg(),categoryAxis:Qg(),line:{symbol:"circle"},graph:{color:em},gauge:{title:{color:Kg},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Kg},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};tm.categoryAxis.splitLine.show=!1;var nm=function(){function e(){}return e.prototype.normalizeQuery=function(e){var t={},n={},r={};if(Y(e)){var o=Oi(e);t.mainType=o.main||null,t.subType=o.sub||null}else{var i=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};O(e,function(e,o){for(var s=!1,l=0;l<i.length;l++){var u=i[l],c=o.lastIndexOf(u);if(c>0&&c===o.length-u.length){var d=o.slice(0,c);"data"!==d&&(t.mainType=d,t[u.toLowerCase()]=e,s=!0)}}a.hasOwnProperty(o)&&(n[o]=e,s=!0),s||(r[o]=e)})}return{cptQuery:t,dataQuery:n,otherQuery:r}},e.prototype.filter=function(e,t){var n=this.eventInfo;if(!n)return!0;var r=n.targetEl,o=n.packedEvent,i=n.model,a=n.view;if(!i||!a)return!0;var s=t.cptQuery,l=t.dataQuery;return u(s,i,"mainType")&&u(s,i,"subType")&&u(s,i,"index","componentIndex")&&u(s,i,"name")&&u(s,i,"id")&&u(l,o,"name")&&u(l,o,"dataIndex")&&u(l,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(e,t.otherQuery,r,o));function u(e,t,n,r){return null==e[n]||t[r||n]===e[n]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),rm=["symbol","symbolSize","symbolRotate","symbolOffset"],om=rm.concat(["symbolKeepAspect"]),im={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData();if(e.legendIcon&&n.setVisual("legendIcon",e.legendIcon),e.hasSymbolVisual){for(var r={},o={},i=!1,a=0;a<rm.length;a++){var s=rm[a],l=e.get(s);j(l)?(i=!0,o[s]=l):r[s]=l}if(r.symbol=r.symbol||e.defaultSymbol,n.setVisual(A({legendIcon:e.legendIcon||r.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},r)),!t.isSeriesFiltered(e)){var u=H(o);return{dataEach:i?function(t,n){for(var r=e.getRawValue(n),i=e.getDataParams(n),a=0;a<u.length;a++){var s=u[a];t.setItemVisual(n,s,o[s](r,i))}}:null}}}}},am={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(e.hasSymbolVisual&&!t.isSeriesFiltered(e))return{dataEach:e.getData().hasItemOption?function(e,t){for(var n=e.getItemModel(t),r=0;r<om.length;r++){var o=om[r],i=n.getShallow(o,!0);null!=i&&e.setItemVisual(t,o,i)}}:null}}};function sm(e,t,n){switch(n){case"color":return e.getItemVisual(t,"style")[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,n)}}function lm(e,t){switch(t){case"color":return e.getVisual("style")[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function um(e,t,n,r){switch(n){case"color":e.ensureUniqueItemVisual(t,"style")[e.getVisual("drawType")]=r,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,n,r)}}function cm(e,t){function n(t,n){var r=[];return t.eachComponent({mainType:"series",subType:e,query:n},function(e){r.push(e.seriesIndex)}),r}O([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(e){t(e[0],function(t,r,o){t=A({},t),o.dispatchAction(A(t,{type:e[1],seriesIndex:n(r,t)}))})})}function dm(e,t,n,r,o){var i=e+t;n.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(e){for(var t=e.seriesIndex,r=e.option.selectedMap,a=o.selected,s=0;s<a.length;s++)if(a[s].seriesIndex===t){var l=e.getData(),u=Si(l,o.fromActionPayload);n.trigger(i,{type:i,seriesId:e.id,name:U(u)?l.getName(u[0]):l.getName(u),selected:Y(r)?r:A({},r)})}})}function hm(e,t,n){for(var r;e&&(!t(e)||(r=e,!n));)e=e.__hostTarget||e.parent;return r}var pm=Math.round(9*Math.random()),fm="function"==typeof Object.defineProperty,gm=function(){function e(){this._id="__ec_inner_"+pm++}return e.prototype.get=function(e){return this._guard(e)[this._id]},e.prototype.set=function(e,t){var n=this._guard(e);return fm?Object.defineProperty(n,this._id,{value:t,enumerable:!1,configurable:!0}):n[this._id]=t,this},e.prototype.delete=function(e){return!!this.has(e)&&(delete this._guard(e)[this._id],!0)},e.prototype.has=function(e){return!!this._guard(e)[this._id]},e.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},e}(),mm=ms.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.width/2,i=t.height/2;e.moveTo(n,r-i),e.lineTo(n+o,r+i),e.lineTo(n-o,r+i),e.closePath()}}),vm=ms.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,o=t.width/2,i=t.height/2;e.moveTo(n,r-i),e.lineTo(n+o,r),e.lineTo(n,r+i),e.lineTo(n-o,r),e.closePath()}}),ym=ms.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,r=t.y,o=t.width/5*3,i=Math.max(o,t.height),a=o/2,s=a*a/(i-a),l=r-i+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,d=Math.sin(u),h=Math.cos(u),p=.6*a,f=.7*a;e.moveTo(n-c,l+s),e.arc(n,l,a,Math.PI-u,2*Math.PI+u),e.bezierCurveTo(n+c-d*p,l+s+h*p,n,r-f,n,r),e.bezierCurveTo(n,r-f,n-c+d*p,l+s+h*p,n-c,l+s),e.closePath()}}),bm=ms.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,r=t.width,o=t.x,i=t.y,a=r/3*2;e.moveTo(o,i),e.lineTo(o+a,i+n),e.lineTo(o,i+n/4*3),e.lineTo(o-a,i+n),e.lineTo(o,i),e.closePath()}}),xm={line:function(e,t,n,r,o){o.x1=e,o.y1=t+r/2,o.x2=e+n,o.y2=t+r/2},rect:function(e,t,n,r,o){o.x=e,o.y=t,o.width=n,o.height=r},roundRect:function(e,t,n,r,o){o.x=e,o.y=t,o.width=n,o.height=r,o.r=Math.min(n,r)/4},square:function(e,t,n,r,o){var i=Math.min(n,r);o.x=e,o.y=t,o.width=i,o.height=i},circle:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.r=Math.min(n,r)/2},diamond:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.width=n,o.height=r},pin:function(e,t,n,r,o){o.x=e+n/2,o.y=t+r/2,o.width=n,o.height=r},arrow:function(e,t,n,r,o){o.x=e+n/2,o.y=t+r/2,o.width=n,o.height=r},triangle:function(e,t,n,r,o){o.cx=e+n/2,o.cy=t+r/2,o.width=n,o.height=r}},_m={};O({line:Ou,rect:Is,roundRect:Is,square:Is,circle:cu,diamond:vm,pin:ym,arrow:bm,triangle:mm},function(e,t){_m[t]=new e});var wm=ms.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var r=xo(e,t,n),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===t.position&&(r.y=n.y+.4*n.height),r},buildPath:function(e,t,n){var r=t.symbolType;if("none"!==r){var o=_m[r];o||(o=_m[r="rect"]),xm[r](t.x,t.y,t.width,t.height,o.shape),o.buildPath(e,o.shape,n)}}});function Sm(e,t){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=e:n.fill=e,this.markRedraw()}}function Cm(e,t,n,r,o,i,a){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?yc(e.slice(8),new Ot(t,n,r,o),a?"center":"cover"):0===e.indexOf("path://")?vc(e.slice(7),{},new Ot(t,n,r,o),a?"center":"cover"):new wm({shape:{symbolType:e,x:t,y:n,width:r,height:o}})).__isEmptyBrush=l,s.setColor=Sm,i&&s.setColor(i),s}function Mm(e){return U(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function Tm(e,t){if(null!=e)return U(e)||(e=[e,e]),[Fo(e[0],t[0])||0,Fo(oe(e[1],e[0]),t[1])||0]}function km(e){return isFinite(e)}function Im(e,t,n){for(var r="radial"===t.type?function(e,t,n){var r=n.width,o=n.height,i=Math.min(r,o),a=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(a=a*r+n.x,s=s*o+n.y,l*=i),a=km(a)?a:.5,s=km(s)?s:.5,l=l>=0&&km(l)?l:.5,e.createRadialGradient(a,s,0,a,s,l)}(e,t,n):function(e,t,n){var r=null==t.x?0:t.x,o=null==t.x2?1:t.x2,i=null==t.y?0:t.y,a=null==t.y2?0:t.y2;return t.global||(r=r*n.width+n.x,o=o*n.width+n.x,i=i*n.height+n.y,a=a*n.height+n.y),r=km(r)?r:0,o=km(o)?o:1,i=km(i)?i:0,a=km(a)?a:0,e.createLinearGradient(r,i,o,a)}(e,t,n),o=t.colorStops,i=0;i<o.length;i++)r.addColorStop(o[i].offset,o[i].color);return r}function Am(e){return parseInt(e,10)}function Dm(e,t,n){var r=["width","height"][t],o=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=n[r]&&"auto"!==n[r])return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(e);return(e[o]||Am(s[r])||Am(e.style[r]))-(Am(s[i])||0)-(Am(s[a])||0)|0}function Pm(e){var t,n,r=e.style,o=r.lineDash&&r.lineWidth>0&&(t=r.lineDash,n=r.lineWidth,t&&"solid"!==t&&n>0?"dashed"===t?[4*n,2*n]:"dotted"===t?[n]:X(t)?[t]:U(t)?t:null:null),i=r.lineDashOffset;if(o){var a=r.strokeNoScale&&e.getLineScale?e.getLineScale():1;a&&1!==a&&(o=B(o,function(e){return e/a}),i/=a)}return[o,i]}var Lm=new $a(!0);function Nm(e){var t=e.stroke;return!(null==t||"none"===t||!(e.lineWidth>0))}function Rm(e){return"string"==typeof e&&"none"!==e}function Em(e){var t=e.fill;return null!=t&&"none"!==t}function Om(e,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var n=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=n}else e.fill()}function Bm(e,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var n=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=n}else e.stroke()}function zm(e,t,n){var r=Xi(t.image,t.__image,n);if($i(r)){var o=e.createPattern(r,t.repeat||"repeat");if("function"==typeof DOMMatrix&&o&&o.setTransform){var i=new DOMMatrix;i.translateSelf(t.x||0,t.y||0),i.rotateSelf(0,0,(t.rotation||0)*we),i.scaleSelf(t.scaleX||1,t.scaleY||1),o.setTransform(i)}return o}}var Fm=["shadowBlur","shadowOffsetX","shadowOffsetY"],Vm=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Hm(e,t,n,r,o){var i=!1;if(!r&&t===(n=n||{}))return!1;if(r||t.opacity!==n.opacity){Um(e,o),i=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?ca.opacity:a}(r||t.blend!==n.blend)&&(i||(Um(e,o),i=!0),e.globalCompositeOperation=t.blend||ca.blend);for(var s=0;s<Fm.length;s++){var l=Fm[s];(r||t[l]!==n[l])&&(i||(Um(e,o),i=!0),e[l]=e.dpr*(t[l]||0))}return(r||t.shadowColor!==n.shadowColor)&&(i||(Um(e,o),i=!0),e.shadowColor=t.shadowColor||ca.shadowColor),i}function Wm(e,t,n,r,o){var i=jm(t,o.inHover),a=r?null:n&&jm(n,o.inHover)||{};if(i===a)return!1;var s=Hm(e,i,a,r,o);if((r||i.fill!==a.fill)&&(s||(Um(e,o),s=!0),Rm(i.fill)&&(e.fillStyle=i.fill)),(r||i.stroke!==a.stroke)&&(s||(Um(e,o),s=!0),Rm(i.stroke)&&(e.strokeStyle=i.stroke)),(r||i.opacity!==a.opacity)&&(s||(Um(e,o),s=!0),e.globalAlpha=null==i.opacity?1:i.opacity),t.hasStroke()){var l=i.lineWidth/(i.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==l&&(s||(Um(e,o),s=!0),e.lineWidth=l)}for(var u=0;u<Vm.length;u++){var c=Vm[u],d=c[0];(r||i[d]!==a[d])&&(s||(Um(e,o),s=!0),e[d]=i[d]||c[1])}return s}function Gm(e,t){var n=t.transform,r=e.dpr||1;n?e.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):e.setTransform(r,0,0,r,0,0)}function Um(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function jm(e,t){return t&&e.__hoverStyle||e.style}function Ym(e,t){qm(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function qm(e,t,n,r){var o=t.transform;if(!t.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return t.__dirty&=-2,void(t.__isRendered=!1);var i=t.__clipPaths,a=n.prevElClipPaths,s=!1,u=!1;if(a&&!function(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(i,a)||(a&&a.length&&(Um(e,n),e.restore(),u=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),i&&i.length&&(Um(e,n),e.save(),function(e,t,n){for(var r=!1,o=0;o<e.length;o++){var i=e[o];r=r||i.isZeroArea(),Gm(t,i),t.beginPath(),i.buildPath(t,i.shape),t.clip()}n.allClipped=r}(i,e,n),s=!0),n.prevElClipPaths=i),n.allClipped)t.__isRendered=!1;else{t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var c=n.prevEl;c||(u=s=!0);var d,h,p=t instanceof ms&&t.autoBatch&&function(e){var t=Em(e),n=Nm(e);return!(e.lineDash||!(+t^+n)||t&&"string"!=typeof e.fill||n&&"string"!=typeof e.stroke||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}(t.style);s||(d=o,h=c.transform,d&&h?d[0]!==h[0]||d[1]!==h[1]||d[2]!==h[2]||d[3]!==h[3]||d[4]!==h[4]||d[5]!==h[5]:d||h)?(Um(e,n),Gm(e,t)):p||Um(e,n);var f=jm(t,n.inHover);t instanceof ms?(1!==n.lastDrawType&&(u=!0,n.lastDrawType=1),Wm(e,t,c,u,n),p&&(n.batchFill||n.batchStroke)||e.beginPath(),function(e,t,n,r){var o,i=Nm(n),a=Em(n),s=n.strokePercent,l=s<1,u=!t.path;t.silent&&!l||!u||t.createPathProxy();var c=t.path||Lm,d=t.__dirty;if(!r){var h=n.fill,p=n.stroke,f=a&&!!h.colorStops,g=i&&!!p.colorStops,m=a&&!!h.image,v=i&&!!p.image,y=void 0,b=void 0,x=void 0,_=void 0,w=void 0;(f||g)&&(w=t.getBoundingRect()),f&&(y=d?Im(e,h,w):t.__canvasFillGradient,t.__canvasFillGradient=y),g&&(b=d?Im(e,p,w):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),m&&(x=d||!t.__canvasFillPattern?zm(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=x),v&&(_=d||!t.__canvasStrokePattern?zm(e,p,t):t.__canvasStrokePattern,t.__canvasStrokePattern=x),f?e.fillStyle=y:m&&(x?e.fillStyle=x:a=!1),g?e.strokeStyle=b:v&&(_?e.strokeStyle=_:i=!1)}var S,C,M=t.getGlobalScale();c.setScale(M[0],M[1],t.segmentIgnoreThreshold),e.setLineDash&&n.lineDash&&(S=(o=Pm(t))[0],C=o[1]);var T=!0;(u||4&d)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),T=!1),c.reset(),t.buildPath(c,t.shape,r),c.toStatic(),t.pathUpdated()),T&&c.rebuildPath(e,l?s:1),S&&(e.setLineDash(S),e.lineDashOffset=C),r||(n.strokeFirst?(i&&Bm(e,n),a&&Om(e,n)):(a&&Om(e,n),i&&Bm(e,n))),S&&e.setLineDash([])}(e,t,f,p),p&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):t instanceof ys?(3!==n.lastDrawType&&(u=!0,n.lastDrawType=3),Wm(e,t,c,u,n),function(e,t,n){var r,o=n.text;if(null!=o&&(o+=""),o){e.font=n.font||l,e.textAlign=n.textAlign,e.textBaseline=n.textBaseline;var i=void 0,a=void 0;e.setLineDash&&n.lineDash&&(i=(r=Pm(t))[0],a=r[1]),i&&(e.setLineDash(i),e.lineDashOffset=a),n.strokeFirst?(Nm(n)&&e.strokeText(o,n.x,n.y),Em(n)&&e.fillText(o,n.x,n.y)):(Em(n)&&e.fillText(o,n.x,n.y),Nm(n)&&e.strokeText(o,n.x,n.y)),i&&e.setLineDash([])}}(e,t,f)):t instanceof _s?(2!==n.lastDrawType&&(u=!0,n.lastDrawType=2),function(e,t,n,r,o){Hm(e,jm(t,o.inHover),n&&jm(n,o.inHover),r,o)}(e,t,c,u,n),function(e,t,n){var r=t.__image=Xi(n.image,t.__image,t,t.onload);if(r&&$i(r)){var o=n.x||0,i=n.y||0,a=t.getWidth(),s=t.getHeight(),l=r.width/r.height;if(null==a&&null!=s?a=s*l:null==s&&null!=a?s=a/l:null==a&&null==s&&(a=r.width,s=r.height),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;e.drawImage(r,u,c,n.sWidth,n.sHeight,o,i,a,s)}else if(n.sx&&n.sy){var d=a-(u=n.sx),h=s-(c=n.sy);e.drawImage(r,u,c,d,h,o,i,a,s)}else e.drawImage(r,o,i,a,s)}}(e,t,f)):t.getTemporalDisplayables&&(4!==n.lastDrawType&&(u=!0,n.lastDrawType=4),function(e,t,n){var r=t.getDisplayables(),o=t.getTemporalDisplayables();e.save();var i,a,s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(i=t.getCursor(),a=r.length;i<a;i++)(c=r[i]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),qm(e,c,s,i===a-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c;for(var l=0,u=o.length;l<u;l++){var c;(c=o[l]).beforeBrush&&c.beforeBrush(),c.innerBeforeBrush(),qm(e,c,s,l===u-1),c.innerAfterBrush(),c.afterBrush&&c.afterBrush(),s.prevEl=c}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}(e,t,n)),p&&r&&Um(e,n),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),n.prevEl=t,t.__dirty=0,t.__isRendered=!0}}var Xm=new gm,Zm=new Nn(100),$m=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Km(e,t){if("none"===e)return null;var n=t.getDevicePixelRatio(),r=t.getZr(),o="svg"===r.painter.type;e.dirty&&Xm.delete(e);var i=Xm.get(e);if(i)return i;var a=D(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===a.backgroundColor&&(a.backgroundColor=null);var s={repeat:"repeat"};return function(e){for(var t,i=[n],s=!0,l=0;l<$m.length;++l){var u=a[$m[l]];if(null!=u&&!U(u)&&!Y(u)&&!X(u)&&"boolean"!=typeof u){s=!1;break}i.push(u)}if(s){t=i.join(",")+(o?"-svg":"");var d=Zm.get(t);d&&(o?e.svgElement=d:e.image=d)}var h,p=Qm(a.dashArrayX),f=function(e){if(!e||"object"==typeof e&&0===e.length)return[0,0];if(X(e)){var t=Math.ceil(e);return[t,t]}var n=B(e,function(e){return Math.ceil(e)});return e.length%2?n.concat(n):n}(a.dashArrayY),g=Jm(a.symbol),m=B(p,function(e){return ev(e)}),v=ev(f),y=!o&&c.createCanvas(),b=o&&{tag:"g",attrs:{},key:"dcl",children:[]},x=function(){for(var e=1,t=0,n=m.length;t<n;++t)e=si(e,m[t]);var r=1;for(t=0,n=g.length;t<n;++t)r=si(r,g[t].length);e*=r;var o=v*m.length*g.length;return{width:Math.max(1,Math.min(e,a.maxTileWidth)),height:Math.max(1,Math.min(o,a.maxTileHeight))}}();y&&(y.width=x.width*n,y.height=x.height*n,h=y.getContext("2d")),function(){h&&(h.clearRect(0,0,y.width,y.height),a.backgroundColor&&(h.fillStyle=a.backgroundColor,h.fillRect(0,0,y.width,y.height)));for(var e=0,t=0;t<f.length;++t)e+=f[t];if(!(e<=0))for(var i=-v,s=0,l=0,u=0;i<x.height;){if(s%2==0){for(var c=l/2%g.length,d=0,m=0,_=0;d<2*x.width;){var w=0;for(t=0;t<p[u].length;++t)w+=p[u][t];if(w<=0)break;if(m%2==0){var S=.5*(1-a.symbolSize),C=d+p[u][m]*S,M=i+f[s]*S,T=p[u][m]*a.symbolSize,k=f[s]*a.symbolSize,I=_/2%g[c].length;A(C,M,T,k,g[c][I])}d+=p[u][m],++_,++m===p[u].length&&(m=0)}++u===p.length&&(u=0)}i+=f[s],++l,++s===f.length&&(s=0)}function A(e,t,i,s,l){var u=o?1:n,c=Cm(l,e*u,t*u,i*u,s*u,a.color,a.symbolKeepAspect);if(o){var d=r.painter.renderOneToVNode(c);d&&b.children.push(d)}else Ym(h,c)}}(),s&&Zm.put(t,y||b),e.image=y,e.svgElement=b,e.svgWidth=x.width,e.svgHeight=x.height}(s),s.rotation=a.rotation,s.scaleX=s.scaleY=o?1:1/n,Xm.set(e,s),e.dirty=!1,s}function Jm(e){if(!e||0===e.length)return[["rect"]];if(Y(e))return[[e]];for(var t=!0,n=0;n<e.length;++n)if(!Y(e[n])){t=!1;break}if(t)return Jm([e]);var r=[];for(n=0;n<e.length;++n)Y(e[n])?r.push([e[n]]):r.push(e[n]);return r}function Qm(e){if(!e||0===e.length)return[[0,0]];if(X(e))return[[o=Math.ceil(e),o]];for(var t=!0,n=0;n<e.length;++n)if(!X(e[n])){t=!1;break}if(t)return Qm([e]);var r=[];for(n=0;n<e.length;++n)if(X(e[n])){var o=Math.ceil(e[n]);r.push([o,o])}else(o=B(e[n],function(e){return Math.ceil(e)})).length%2==1?r.push(o.concat(o)):r.push(o);return r}function ev(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return e.length%2==1?2*t:t}var tv=new Xe,nv={};function rv(e){return nv[e]}var ov=2e3,iv=4500,av={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:ov,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:iv,ARIA:6e3,DECAL:7e3}},sv="__flagInMainProcess",lv="__pendingUpdate",uv="__needsUpdateStatus",cv=/^[a-zA-Z0-9_]+$/,dv="__connectUpdateStatus";function hv(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!this.isDisposed())return fv(this,e,t);zv(this.id)}}function pv(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return fv(this,e,t)}}function fv(e,t,n){return n[0]=n[0]&&n[0].toLowerCase(),Xe.prototype[t].apply(e,n)}var gv,mv,vv,yv,bv,xv,_v,wv,Sv,Cv,Mv,Tv,kv,Iv,Av,Dv,Pv,Lv,Nv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Xe),Rv=Nv.prototype;Rv.on=pv("on"),Rv.off=pv("off");var Ev=function(e){function t(t,n,r){var o=e.call(this,new nm)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],r=r||{},Y(n)&&(n=Uv[n]),o._dom=t;var i=o._zr=Eo(t,{renderer:r.renderer||"canvas",devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:oe(r.useDirtyRect,!1),useCoarsePointer:oe(r.useCoarsePointer,"auto"),pointerSize:r.pointerSize});o._ssr=r.ssr,o._throttledZrFlush=_g(W(i.flush,i),17),(n=T(n))&&Cp(n,!0),o._theme=n,o._locale=function(e){if(Y(e)){var t=bd[e.toUpperCase()]||{};return e===md||e===vd?T(t):k(T(t),T(bd.EN),!1)}return k(T(e),T(bd.EN),!1)}(r.locale||_d),o._coordSysMgr=new np;var a=o._api=Av(o);function s(e,t){return e.__prio-t.__prio}return Kt(Gv,s),Kt(Hv,s),o._scheduler=new Rg(o,a,Hv,Gv),o._messageCenter=new Nv,o._initEvents(),o.resize=W(o.resize,o),i.animation.on("frame",o._onframe,o),Cv(i,o),Mv(i,o),de(o),o}return n(t,e),t.prototype._onframe=function(){if(!this._disposed){Lv(this);var e=this._scheduler;if(this[lv]){var t=this[lv].silent;this[sv]=!0;try{gv(this),yv.update.call(this,null,this[lv].updateParams)}catch(e){throw this[sv]=!1,this[lv]=null,e}this._zr.flush(),this[sv]=!1,this[lv]=null,wv.call(this,t),Sv.call(this,t)}else if(e.unfinished){var n=1,r=this._model,o=this._api;e.unfinished=!1;do{var i=+new Date;e.performSeriesTasks(r),e.performDataProcessorTasks(r),xv(this,r),e.performVisualTasks(r),Iv(this,this._model,o,"remain",{}),n-=+new Date-i}while(n>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,t,n){if(!this[sv])if(this._disposed)zv(this.id);else{var r,o,i;if(Z(t)&&(n=t.lazyUpdate,r=t.silent,o=t.replaceMerge,i=t.transition,t=t.notMerge),this[sv]=!0,!this._model||t){var a=new op(this._api),s=this._theme,l=this._model=new Zh;l.scheduler=this._scheduler,l.ssr=this._ssr,l.init(null,null,null,s,this._locale,a)}this._model.setOption(e,{replaceMerge:o},Wv);var u={seriesTransition:i,optionChanged:!0};if(n)this[lv]={silent:r,updateParams:u},this[sv]=!1,this.getZr().wakeUp();else{try{gv(this),yv.update.call(this,null,u)}catch(e){throw this[lv]=null,this[sv]=!1,e}this._ssr||this._zr.flush(),this[lv]=null,this[sv]=!1,wv.call(this,r),Sv.call(this,r)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||o.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){return e=e||{},this._zr.painter.getRenderedCanvas({backgroundColor:e.backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){return e=e||{},this._zr.painter.renderToString({useViewBox:e.useViewBox})},t.prototype.getSvgDataURL=function(){if(o.svgSupported){var e=this._zr;return O(e.storage.getDisplayList(),function(e){e.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,r=[],o=this;O(t,function(e){n.eachComponent({mainType:e},function(e){var t=o._componentsMap[e.__viewId];t.group.ignore||(r.push(t),t.group.ignore=!0)})});var i="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return O(r,function(e){e.group.ignore=!1}),i}zv(this.id)},t.prototype.getConnectedDataURL=function(e){if(!this._disposed){var t="svg"===e.type,n=this.group,r=Math.min,o=Math.max,i=1/0;if(qv[n]){var a=i,s=i,l=-1/0,u=-1/0,d=[],h=e&&e.pixelRatio||this.getDevicePixelRatio();O(Yv,function(i,c){if(i.group===n){var h=t?i.getZr().painter.getSvgDom().innerHTML:i.renderToCanvas(T(e)),p=i.getDom().getBoundingClientRect();a=r(p.left,a),s=r(p.top,s),l=o(p.right,l),u=o(p.bottom,u),d.push({dom:h,left:p.left,top:p.top})}});var p=(l*=h)-(a*=h),f=(u*=h)-(s*=h),g=c.createCanvas(),m=Eo(g,{renderer:t?"svg":"canvas"});if(m.resize({width:p,height:f}),t){var v="";return O(d,function(e){var t=e.left-a,n=e.top-s;v+='<g transform="translate('+t+","+n+')">'+e.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=v,e.connectedBackgroundColor&&m.painter.setBackgroundColor(e.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}return e.connectedBackgroundColor&&m.add(new Is({shape:{x:0,y:0,width:p,height:f},style:{fill:e.connectedBackgroundColor}})),O(d,function(e){var t=new _s({style:{x:e.left*h-a,y:e.top*h-s,image:e.dom}});m.add(t)}),m.refreshImmediately(),g.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}zv(this.id)},t.prototype.convertToPixel=function(e,t){return bv(this,"convertToPixel",e,t)},t.prototype.convertFromPixel=function(e,t){return bv(this,"convertFromPixel",e,t)},t.prototype.containPixel=function(e,t){var n;if(!this._disposed)return O(Ti(this._model,e),function(e,r){r.indexOf("Models")>=0&&O(e,function(e){var o=e.coordinateSystem;if(o&&o.containPoint)n=n||!!o.containPoint(t);else if("seriesModels"===r){var i=this._chartsMap[e.__viewId];i&&i.containPoint&&(n=n||i.containPoint(t,e))}},this)},this),!!n;zv(this.id)},t.prototype.getVisual=function(e,t){var n=Ti(this._model,e,{defaultMainType:"series"}),r=n.seriesModel.getData(),o=n.hasOwnProperty("dataIndexInside")?n.dataIndexInside:n.hasOwnProperty("dataIndex")?r.indexOfRawIndex(n.dataIndex):null;return null!=o?sm(r,o,t):lm(r,t)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var e,t,n,r=this;O(Bv,function(e){var t=function(t){var n,o=r.getModel(),i=t.target;if("globalout"===e?n={}:i&&hm(i,function(e){var t=Us(e);if(t&&null!=t.dataIndex){var r=t.dataModel||o.getSeriesByIndex(t.seriesIndex);return n=r&&r.getDataParams(t.dataIndex,t.dataType,i)||{},!0}if(t.eventData)return n=A({},t.eventData),!0},!0),n){var a=n.componentType,s=n.componentIndex;"markLine"!==a&&"markPoint"!==a&&"markArea"!==a||(a="series",s=n.seriesIndex);var l=a&&null!=s&&o.getComponent(a,s),u=l&&r["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=t,n.type=e,r._$eventProcessor.eventInfo={targetEl:i,packedEvent:n,model:l,view:u},r.trigger(e,n)}};t.zrEventfulCallAtLast=!0,r._zr.on(e,t,r)}),O(Vv,function(e,t){r._messageCenter.on(t,function(e){this.trigger(t,e)},r)}),O(["selectchanged"],function(e){r._messageCenter.on(e,function(t){this.trigger(e,t)},r)}),e=this._messageCenter,t=this,n=this._api,e.on("selectchanged",function(e){var r=n.getModel();e.isFromClick?(dm("map","selectchanged",t,r,e),dm("pie","selectchanged",t,r,e)):"select"===e.fromAction?(dm("map","selected",t,r,e),dm("pie","selected",t,r,e)):"unselect"===e.fromAction&&(dm("map","unselected",t,r,e),dm("pie","unselected",t,r,e))})},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){this._disposed?zv(this.id):this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed)zv(this.id);else{this._disposed=!0,this.getDom()&&Pi(this.getDom(),$v,"");var e=this,t=e._api,n=e._model;O(e._componentsViews,function(e){e.dispose(n,t)}),O(e._chartsViews,function(e){e.dispose(n,t)}),e._zr.dispose(),e._dom=e._model=e._chartsMap=e._componentsMap=e._chartsViews=e._componentsViews=e._scheduler=e._api=e._zr=e._throttledZrFlush=e._theme=e._coordSysMgr=e._messageCenter=null,delete Yv[e.id]}},t.prototype.resize=function(e){if(!this[sv])if(this._disposed)zv(this.id);else{this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),r=e&&e.silent;this[lv]&&(null==r&&(r=this[lv].silent),n=!0,this[lv]=null),this[sv]=!0;try{n&&gv(this),yv.update.call(this,{type:"resize",animation:A({duration:0},e&&e.animation)})}catch(e){throw this[sv]=!1,e}this[sv]=!1,wv.call(this,r),Sv.call(this,r)}}},t.prototype.showLoading=function(e,t){if(this._disposed)zv(this.id);else if(Z(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),jv[e]){var n=jv[e](this._api,t),r=this._zr;this._loadingFX=n,r.add(n)}},t.prototype.hideLoading=function(){this._disposed?zv(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},t.prototype.makeActionFromEvent=function(e){var t=A({},e);return t.type=Vv[e.type],t},t.prototype.dispatchAction=function(e,t){if(this._disposed)zv(this.id);else if(Z(t)||(t={silent:!!t}),Fv[e.type]&&this._model)if(this[sv])this._pendingActions.push(e);else{var n=t.silent;_v.call(this,e,n);var r=t.flush;r?this._zr.flush():!1!==r&&o.browser.weChat&&this._throttledZrFlush(),wv.call(this,n),Sv.call(this,n)}},t.prototype.updateLabelLayout=function(){tv.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed)zv(this.id);else{var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},t.internalField=function(){function e(e){e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()})}function t(e){for(var t=[],n=e.currentStates,r=0;r<n.length;r++){var o=n[r];"emphasis"!==o&&"blur"!==o&&"select"!==o&&t.push(o)}e.selected&&e.states.select&&t.push("select"),2===e.hoverState&&e.states.emphasis?t.push("emphasis"):1===e.hoverState&&e.states.blur&&t.push("blur"),e.useStates(t)}function r(e,t){if(!e.preventAutoZ){var n=e.get("z")||0,r=e.get("zlevel")||0;t.eachRendered(function(e){return i(e,n,r,-1/0),!0})}}function i(e,t,n,r){var o=e.getTextContent(),a=e.getTextGuideLine();if(e.isGroup)for(var s=e.childrenRef(),l=0;l<s.length;l++)r=Math.max(i(s[l],t,n,r),r);else e.z=t,e.zlevel=n,r=Math.max(e.z2,r);if(o&&(o.z=t,o.zlevel=n,isFinite(r)&&(o.z2=r+2)),a){var u=e.textGuideLineConfig;a.z=t,a.zlevel=n,isFinite(r)&&(a.z2=r+(u&&u.showAbove?1:-1))}return r}function a(e,t){t.eachRendered(function(e){if(!ic(e)){var t=e.getTextContent(),n=e.getTextGuideLine();e.stateTransition&&(e.stateTransition=null),t&&t.stateTransition&&(t.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),e.hasState()?(e.prevStates=e.currentStates,e.clearStates()):e.prevStates&&(e.prevStates=null)}})}function s(e,n){var r=e.getModel("stateAnimation"),o=e.isAnimationEnabled(),i=r.get("duration"),a=i>0?{duration:i,delay:r.get("delay"),easing:r.get("easing")}:null;n.eachRendered(function(e){if(e.states&&e.states.emphasis){if(ic(e))return;if(e instanceof ms&&function(e){var t=Xs(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var n=e.states.select||{};t.selectFill=n.style&&n.style.fill||null,t.selectStroke=n.style&&n.style.stroke||null}(e),e.__dirty){var n=e.prevStates;n&&e.useStates(n)}if(o){e.stateTransition=a;var r=e.getTextContent(),i=e.getTextGuideLine();r&&(r.stateTransition=a),i&&(i.stateTransition=a)}e.__dirty&&t(e)}})}gv=function(e){var t=e._scheduler;t.restorePipelines(e._model),t.prepareStageTasks(),mv(e,!0),mv(e,!1),t.plan()},mv=function(e,t){for(var n=e._model,r=e._scheduler,o=t?e._componentsViews:e._chartsViews,i=t?e._componentsMap:e._chartsMap,a=e._zr,s=e._api,l=0;l<o.length;l++)o[l].__alive=!1;function u(e){var l=e.__requireNewView;e.__requireNewView=!1;var u="_ec_"+e.id+"_"+e.type,c=!l&&i[u];if(!c){var d=Oi(e.type);(c=new(t?lg.getClass(d.main,d.sub):hg.getClass(d.sub))).init(n,s),i[u]=c,o.push(c),a.add(c.group)}e.__viewId=c.__id=u,c.__alive=!0,c.__model=e,c.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!t&&r.prepareView(c,e,n,s)}for(t?n.eachComponent(function(e,t){"series"!==e&&u(t)}):n.eachSeries(u),l=0;l<o.length;){var c=o[l];c.__alive?l++:(!t&&c.renderTask.dispose(),a.remove(c.group),c.dispose(n,s),o.splice(l,1),i[c.__id]===c&&delete i[c.__id],c.__id=c.group.__ecComponentInfo=null)}},vv=function(e,t,n,r,o){var i=e._model;if(i.setUpdatePayload(n),r){var a={};a[r+"Id"]=n[r+"Id"],a[r+"Index"]=n[r+"Index"],a[r+"Name"]=n[r+"Name"];var s={mainType:r,query:a};o&&(s.subType=o);var l,u=n.excludeSeriesId;null!=u&&(l=me(),O(hi(u),function(e){var t=xi(e,null);null!=t&&l.set(t,!0)})),i&&i.eachComponent(s,function(t){if(!l||null==l.get(t.id))if(Wl(n))if(t instanceof eg)n.type!==Js||n.notBlur||t.get(["emphasis","disabled"])||function(e,t,n){var r=e.seriesIndex,o=e.getData(t.dataType);if(o){var i=Si(o,t);i=(U(i)?i[0]:i)||0;var a=o.getItemGraphicEl(i);if(!a)for(var s=o.count(),l=0;!a&&l<s;)a=o.getItemGraphicEl(l++);if(a){var u=Us(a);Il(r,u.focus,u.blurScope,n)}else{var c=e.get(["emphasis","focus"]),d=e.get(["emphasis","blurScope"]);null!=c&&Il(r,c,d,n)}}}(t,n,e._api);else{var r=Dl(t.mainType,t.componentIndex,n.name,e._api),o=r.focusSelf,i=r.dispatchers;n.type===Js&&o&&!n.notBlur&&Al(t.mainType,t.componentIndex,e._api),i&&O(i,function(e){n.type===Js?xl(e):_l(e)})}else Hl(n)&&t instanceof eg&&(function(e,t,n){if(Hl(t)){var r=t.dataType,o=Si(e.getData(r),t);U(o)||(o=[o]),e[t.type===nl?"toggleSelect":t.type===el?"select":"unselect"](o,r)}}(t,n,e._api),Pl(t),Pv(e))},e),i&&i.eachComponent(s,function(t){l&&null!=l.get(t.id)||c(e["series"===r?"_chartsMap":"_componentsMap"][t.__viewId])},e)}else O([].concat(e._componentsViews).concat(e._chartsViews),c);function c(r){r&&r.__alive&&r[t]&&r[t](r.__model,i,e._api,n)}},yv={prepareAndUpdate:function(e){gv(this),yv.update.call(this,e,{optionChanged:null!=e.newOption})},update:function(t,n){var r=this._model,o=this._api,i=this._zr,a=this._coordSysMgr,s=this._scheduler;if(r){r.setUpdatePayload(t),s.restoreData(r,t),s.performSeriesTasks(r),a.create(r,o),s.performDataProcessorTasks(r,t),xv(this,r),a.update(r,o),e(r),s.performVisualTasks(r,t),Tv(this,r,o,t,n);var l=r.get("backgroundColor")||"transparent",u=r.get("darkMode");i.setBackgroundColor(l),null!=u&&"auto"!==u&&i.setDarkMode(u),tv.trigger("afterupdate",r,o)}},updateTransform:function(t){var n=this,r=this._model,o=this._api;if(r){r.setUpdatePayload(t);var i=[];r.eachComponent(function(e,a){if("series"!==e){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,r,o,t);l&&l.update&&i.push(s)}else i.push(s)}});var a=me();r.eachSeries(function(e){var i=n._chartsMap[e.__viewId];if(i.updateTransform){var s=i.updateTransform(e,r,o,t);s&&s.update&&a.set(e.uid,1)}else a.set(e.uid,1)}),e(r),this._scheduler.performVisualTasks(r,t,{setDirty:!0,dirtyMap:a}),Iv(this,r,o,t,{},a),tv.trigger("afterupdate",r,o)}},updateView:function(t){var n=this._model;n&&(n.setUpdatePayload(t),hg.markUpdateMethod(t,"updateView"),e(n),this._scheduler.performVisualTasks(n,t,{setDirty:!0}),Tv(this,n,this._api,t,{}),tv.trigger("afterupdate",n,this._api))},updateVisual:function(t){var n=this,r=this._model;r&&(r.setUpdatePayload(t),r.eachSeries(function(e){e.getData().clearAllVisual()}),hg.markUpdateMethod(t,"updateVisual"),e(r),this._scheduler.performVisualTasks(r,t,{visualType:"visual",setDirty:!0}),r.eachComponent(function(e,o){if("series"!==e){var i=n.getViewOfComponentModel(o);i&&i.__alive&&i.updateVisual(o,r,n._api,t)}}),r.eachSeries(function(e){n._chartsMap[e.__viewId].updateVisual(e,r,n._api,t)}),tv.trigger("afterupdate",r,this._api))},updateLayout:function(e){yv.update.call(this,e)}},bv=function(e,t,n,r){if(e._disposed)zv(e.id);else for(var o,i=e._model,a=e._coordSysMgr.getCoordinateSystems(),s=Ti(i,n),l=0;l<a.length;l++){var u=a[l];if(u[t]&&null!=(o=u[t](i,s,r)))return o}},xv=function(e,t){var n=e._chartsMap,r=e._scheduler;t.eachSeries(function(e){r.updateStreamModes(e,n[e.__viewId])})},_v=function(e,t){var n=this,r=this.getModel(),o=e.type,i=e.escapeConnect,a=Fv[o],s=a.actionInfo,l=(s.update||"update").split(":"),u=l.pop(),c=null!=l[0]&&Oi(l[0]);this[sv]=!0;var d=[e],h=!1;e.batch&&(h=!0,d=B(e.batch,function(t){return(t=D(A({},t),e)).batch=null,t}));var p,f=[],g=Hl(e),m=Wl(e);if(m&&kl(this._api),O(d,function(t){if((p=(p=a.action(t,n._model,n._api))||A({},t)).type=s.event||p.type,f.push(p),m){var r=ki(e),o=r.queryOptionMap,i=r.mainTypeSpecified?o.keys()[0]:"series";vv(n,u,t,i),Pv(n)}else g?(vv(n,u,t,"series"),Pv(n)):c&&vv(n,u,t,c.main,c.sub)}),"none"!==u&&!m&&!g&&!c)try{this[lv]?(gv(this),yv.update.call(this,e),this[lv]=null):yv[u].call(this,e)}catch(e){throw this[sv]=!1,e}if(p=h?{type:s.event||o,escapeConnect:i,batch:f}:f[0],this[sv]=!1,!t){var v=this._messageCenter;if(v.trigger(p.type,p),g){var y={type:"selectchanged",escapeConnect:i,selected:Ll(r),isFromClick:e.isFromClick||!1,fromAction:e.type,fromActionPayload:e};v.trigger(y.type,y)}}},wv=function(e){for(var t=this._pendingActions;t.length;){var n=t.shift();_v.call(this,n,e)}},Sv=function(e){!e&&this.trigger("updated")},Cv=function(e,t){e.on("rendered",function(n){t.trigger("rendered",n),!e.animation.isFinished()||t[lv]||t._scheduler.unfinished||t._pendingActions.length||t.trigger("finished")})},Mv=function(e,t){e.on("mouseover",function(e){var n=hm(e.target,Vl);n&&(function(e,t,n){var r=Us(e),o=Dl(r.componentMainType,r.componentIndex,r.componentHighDownName,n),i=o.dispatchers,a=o.focusSelf;i?(a&&Al(r.componentMainType,r.componentIndex,n),O(i,function(e){return yl(e,t)})):(Il(r.seriesIndex,r.focus,r.blurScope,n),"self"===r.focus&&Al(r.componentMainType,r.componentIndex,n),yl(e,t))}(n,e,t._api),Pv(t))}).on("mouseout",function(e){var n=hm(e.target,Vl);n&&(function(e,t,n){kl(n);var r=Us(e),o=Dl(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;o?O(o,function(e){return bl(e,t)}):bl(e,t)}(n,e,t._api),Pv(t))}).on("click",function(e){var n=hm(e.target,function(e){return null!=Us(e).dataIndex},!0);if(n){var r=n.selected?"unselect":"select",o=Us(n);t._api.dispatchAction({type:r,dataType:o.dataType,dataIndexInside:o.dataIndex,seriesIndex:o.seriesIndex,isFromClick:!0})}})},Tv=function(e,t,n,r,o){!function(e){var t=[],n=[],r=!1;if(e.eachComponent(function(e,o){var i=o.get("zlevel")||0,a=o.get("z")||0,s=o.getZLevelKey();r=r||!!s,("series"===e?n:t).push({zlevel:i,z:a,idx:o.componentIndex,type:e,key:s})}),r){var o,i,a=t.concat(n);Kt(a,function(e,t){return e.zlevel===t.zlevel?e.z-t.z:e.zlevel-t.zlevel}),O(a,function(t){var n=e.getComponent(t.type,t.idx),r=t.zlevel,a=t.key;null!=o&&(r=Math.max(o,r)),a?(r===o&&a!==i&&r++,i=a):i&&(r===o&&r++,i=""),o=r,n.setZLevel(r)})}}(t),kv(e,t,n,r,o),O(e._chartsViews,function(e){e.__alive=!1}),Iv(e,t,n,r,o),O(e._chartsViews,function(e){e.__alive||e.remove(t,n)})},kv=function(e,t,n,o,i,l){O(l||e._componentsViews,function(e){var i=e.__model;a(0,e),e.render(i,t,n,o),r(i,e),s(i,e)})},Iv=function(e,t,n,i,l,u){var c=e._scheduler;l=A(l||{},{updatedSeries:t.getSeries()}),tv.trigger("series:beforeupdate",t,n,l);var d=!1;t.eachSeries(function(t){var n=e._chartsMap[t.__viewId];n.__alive=!0;var r=n.renderTask;c.updatePayload(r,i),a(0,n),u&&u.get(t.uid)&&r.dirty(),r.perform(c.getPerformArgs(r))&&(d=!0),n.group.silent=!!t.get("silent"),function(e,t){var n=e.get("blendMode")||null;t.eachRendered(function(e){e.isGroup||(e.style.blend=n)})}(t,n),Pl(t)}),c.unfinished=d||c.unfinished,tv.trigger("series:layoutlabels",t,n,l),tv.trigger("series:transition",t,n,l),t.eachSeries(function(t){var n=e._chartsMap[t.__viewId];r(t,n),s(t,n)}),function(e,t){var n=e._zr.storage,r=0;n.traverse(function(e){e.isGroup||r++}),r>t.get("hoverLayerThreshold")&&!o.node&&!o.worker&&t.eachSeries(function(t){if(!t.preventUsingHoverLayer){var n=e._chartsMap[t.__viewId];n.__alive&&n.eachRendered(function(e){e.states.emphasis&&(e.states.emphasis.hoverLayer=!0)})}})}(e,t),tv.trigger("series:afterupdate",t,n,l)},Pv=function(e){e[uv]=!0,e.getZr().wakeUp()},Lv=function(e){e[uv]&&(e.getZr().storage.traverse(function(e){ic(e)||t(e)}),e[uv]=!1)},Av=function(e){return new(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return n(r,t),r.prototype.getCoordinateSystems=function(){return e._coordSysMgr.getCoordinateSystems()},r.prototype.getComponentByElement=function(t){for(;t;){var n=t.__ecComponentInfo;if(null!=n)return e._model.getComponent(n.mainType,n.index);t=t.parent}},r.prototype.enterEmphasis=function(t,n){xl(t,n),Pv(e)},r.prototype.leaveEmphasis=function(t,n){_l(t,n),Pv(e)},r.prototype.enterBlur=function(t){wl(t),Pv(e)},r.prototype.leaveBlur=function(t){Sl(t),Pv(e)},r.prototype.enterSelect=function(t){Cl(t),Pv(e)},r.prototype.leaveSelect=function(t){Ml(t),Pv(e)},r.prototype.getModel=function(){return e.getModel()},r.prototype.getViewOfComponentModel=function(t){return e.getViewOfComponentModel(t)},r.prototype.getViewOfSeriesModel=function(t){return e.getViewOfSeriesModel(t)},r}(ep))(e)},Dv=function(e){function t(e,t){for(var n=0;n<e.length;n++)e[n][dv]=t}O(Vv,function(n,r){e._messageCenter.on(r,function(n){if(qv[e.group]&&0!==e[dv]){if(n&&n.escapeConnect)return;var r=e.makeActionFromEvent(n),o=[];O(Yv,function(t){t!==e&&t.group===e.group&&o.push(t)}),t(o,0),O(o,function(e){1!==e[dv]&&e.dispatchAction(r)}),t(o,2)}})})}}(),t}(Xe),Ov=Ev.prototype;Ov.on=hv("on"),Ov.off=hv("off"),Ov.one=function(e,t,n){var r=this;this.on.call(this,e,function n(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];t&&t.apply&&t.apply(this,o),r.off(e,n)},n)};var Bv=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function zv(e){}var Fv={},Vv={},Hv=[],Wv=[],Gv=[],Uv={},jv={},Yv={},qv={},Xv=+new Date-0,Zv=+new Date-0,$v="_echarts_instance_";function Kv(e){qv[e]=!1}var Jv=Kv;function Qv(e){return Yv[function(e,t){return e.getAttribute?e.getAttribute(t):e[t]}(e,$v)]}function ey(e,t){Uv[e]=t}function ty(e){L(Wv,e)<0&&Wv.push(e)}function ny(e,t){dy(Hv,e,t,2e3)}function ry(e){iy("afterinit",e)}function oy(e){iy("afterupdate",e)}function iy(e,t){tv.on(e,t)}function ay(e,t,n){j(t)&&(n=t,t="");var r=Z(e)?e.type:[e,e={event:t}][0];e.event=(e.event||r).toLowerCase(),t=e.event,Vv[t]||(le(cv.test(r)&&cv.test(t)),Fv[r]||(Fv[r]={action:n,actionInfo:e}),Vv[t]=r)}function sy(e,t){np.register(e,t)}function ly(e,t){dy(Gv,e,t,1e3,"layout")}function uy(e,t){dy(Gv,e,t,3e3,"visual")}var cy=[];function dy(e,t,n,r,o){if((j(t)||Z(t))&&(n=t,t=r),!(L(cy,n)>=0)){cy.push(n);var i=Rg.wrapStageHandler(n,o);i.__prio=t,i.__raw=n,e.push(i)}}function hy(e,t){jv[e]=t}function py(e,t,n){var r=rv("registerMap");r&&r(e,t,n)}var fy=function(e){var t=(e=T(e)).type;t||li("");var n=t.split(":");2!==n.length&&li("");var r=!1;"echarts"===n[0]&&(t=n[1],r=!0),e.__isBuiltIn=r,vf.set(t,e)};uy(ov,Ag),uy(iv,Pg),uy(iv,Lg),uy(ov,im),uy(iv,am),uy(7e3,function(e,t){e.eachRawSeries(function(n){if(!e.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(e){var n=r.getItemVisual(e,"decal");n&&(r.ensureUniqueItemVisual(e,"style").decal=Km(n,t))});var o=r.getVisual("decal");o&&(r.getVisual("style").decal=Km(o,t))}})}),ty(Cp),ny(900,function(e){var t=me();e.eachSeries(function(e){var n=e.get("stack");if(n){var r=t.get(n)||t.set(n,[]),o=e.getData(),i={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:e};if(!i.stackedDimension||!i.isStackedByIndex&&!i.stackedByDimension)return;r.length&&o.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(i)}}),t.each(Mp)}),hy("default",function(e,t){D(t=t||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Po,r=new Is({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(r);var o,i=new Ps({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new Is({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return n.add(a),t.showSpinner&&((o=new Wu({shape:{startAngle:-Ng/2,endAngle:-Ng/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*Ng/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*Ng/2}).delay(300).start("circularInOut"),n.add(o)),n.resize=function(){var n=i.getBoundingRect().width,s=t.showSpinner?t.spinnerRadius:0,l=(e.getWidth()-2*s-(t.showSpinner&&n?10:0)-n)/2-(t.showSpinner&&n?0:5+n/2)+(t.showSpinner?0:n/2)+(n?0:s),u=e.getHeight()/2;t.showSpinner&&o.setShape({cx:l,cy:u}),a.setShape({x:l-s,y:u-s,width:2*s,height:2*s}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}),ay({type:Js,event:Js,update:Js},_e),ay({type:Qs,event:Qs,update:Qs},_e),ay({type:el,event:el,update:el},_e),ay({type:tl,event:tl,update:tl},_e),ay({type:nl,event:nl,update:nl},_e),ey("light",$g),ey("dark",tm);var gy=[],my={registerPreprocessor:ty,registerProcessor:ny,registerPostInit:ry,registerPostUpdate:oy,registerUpdateLifecycle:iy,registerAction:ay,registerCoordinateSystem:sy,registerLayout:ly,registerVisual:uy,registerTransform:fy,registerLoading:hy,registerMap:py,registerImpl:function(e,t){nv[e]=t},PRIORITY:av,ComponentModel:xh,ComponentView:lg,SeriesModel:eg,ChartView:hg,registerComponentModel:function(e){xh.registerClass(e)},registerComponentView:function(e){lg.registerClass(e)},registerSeriesModel:function(e){eg.registerClass(e)},registerChartView:function(e){hg.registerClass(e)},registerSubTypeDefaulter:function(e,t){xh.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){Oo(e,t)}};function vy(e){U(e)?O(e,function(e){vy(e)}):L(gy,e)>=0||(gy.push(e),j(e)&&(e={install:e}),e.install(my))}function yy(e){return null==e?0:e.length||1}function by(e){return e}var xy=function(){function e(e,t,n,r,o,i){this._old=e,this._new=t,this._oldKeyGetter=n||by,this._newKeyGetter=r||by,this.context=o,this._diffModeMultiple="multiple"===i}return e.prototype.add=function(e){return this._add=e,this},e.prototype.update=function(e){return this._update=e,this},e.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},e.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},e.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},e.prototype.remove=function(e){return this._remove=e,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var e=this._old,t=this._new,n={},r=new Array(e.length),o=new Array(t.length);this._initIndexMap(e,null,r,"_oldKeyGetter"),this._initIndexMap(t,n,o,"_newKeyGetter");for(var i=0;i<e.length;i++){var a=r[i],s=n[a],l=yy(s);if(l>1){var u=s.shift();1===s.length&&(n[a]=s[0]),this._update&&this._update(u,i)}else 1===l?(n[a]=null,this._update&&this._update(s,i)):this._remove&&this._remove(i)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var e=this._old,t=this._new,n={},r={},o=[],i=[];this._initIndexMap(e,n,o,"_oldKeyGetter"),this._initIndexMap(t,r,i,"_newKeyGetter");for(var a=0;a<o.length;a++){var s=o[a],l=n[s],u=r[s],c=yy(l),d=yy(u);if(c>1&&1===d)this._updateManyToOne&&this._updateManyToOne(u,l),r[s]=null;else if(1===c&&d>1)this._updateOneToMany&&this._updateOneToMany(u,l),r[s]=null;else if(1===c&&1===d)this._update&&this._update(u,l),r[s]=null;else if(c>1&&d>1)this._updateManyToMany&&this._updateManyToMany(u,l),r[s]=null;else if(c>1)for(var h=0;h<c;h++)this._remove&&this._remove(l[h]);else this._remove&&this._remove(l)}this._performRestAdd(i,r)},e.prototype._performRestAdd=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=t[r],i=yy(o);if(i>1)for(var a=0;a<i;a++)this._add&&this._add(o[a]);else 1===i&&this._add&&this._add(o);t[r]=null}},e.prototype._initIndexMap=function(e,t,n,r){for(var o=this._diffModeMultiple,i=0;i<e.length;i++){var a="_ec_"+this[r](e[i],i);if(o||(n[i]=a),t){var s=t[a],l=yy(s);0===l?(t[a]=i,o&&n.push(a)):1===l?t[a]=[s,i]:s.push(i)}}},e}(),_y=function(){function e(e,t){this._encode=e,this._schema=t}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function wy(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Sy(e){return"category"===e?"ordinal":"time"===e?"time":"float"}var Cy=function(e){this.otherDims={},null!=e&&A(this,e)},My=Ci(),Ty={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},ky=function(){function e(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=Dy(this.source)))},e.prototype.getSourceDimensionIndex=function(e){return oe(this._dimNameMap.get(e),-1)},e.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},e.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=zp(this.source),n=!Py(e),r="",o=[],i=0,a=0;i<e;i++){var s=void 0,l=void 0,u=void 0,c=this.dimensions[a];if(c&&c.storeDimIndex===i)s=t?c.name:null,l=c.type,u=c.ordinalMeta,a++;else{var d=this.getSourceDimension(i);d&&(s=t?d.name:null,l=d.type)}o.push({property:s,type:l,ordinalMeta:u}),!t||null==s||c&&c.isCalculationCoord||(r+=n?s.replace(/\`/g,"`1").replace(/\$/g,"`2"):s),r+="$",r+=Ty[l]||"f",u&&(r+=u.uid),r+="$"}var h=this.source;return{dimensions:o,hash:[h.seriesLayoutBy,h.startIndex,r].join("$$")}},e.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,n=0;t<this._fullDimCount;t++){var r=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===t)o.isCalculationCoord||(r=o.name),n++;else{var i=this.getSourceDimension(t);i&&(r=i.name)}e.push(r)}return e},e.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function Iy(e){return e instanceof ky}function Ay(e){for(var t=me(),n=0;n<(e||[]).length;n++){var r=e[n],o=Z(r)?r.name:r;null!=o&&null==t.get(o)&&t.set(o,n)}return t}function Dy(e){var t=My(e);return t.dimNameMap||(t.dimNameMap=Ay(e.dimensionsDefine))}function Py(e){return e>30}var Ly,Ny,Ry,Ey,Oy,By,zy,Fy=Z,Vy=B,Hy="undefined"==typeof Int32Array?Array:Int32Array,Wy=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Gy=["_approximateExtent"],Uy=function(){function e(e,t){var n;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r=!1;Iy(e)?(n=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(r=!0,n=e),n=n||["x","y"];for(var o={},i=[],a={},s=!1,l={},u=0;u<n.length;u++){var c=n[u],d=Y(c)?new Cy({name:c}):c instanceof Cy?c:new Cy(c),h=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=h,d.coordDimIndex=0);var p=d.otherDims=d.otherDims||{};i.push(h),o[h]=d,null!=l[h]&&(s=!0),d.createInvertedIndices&&(a[h]=[]),0===p.itemName&&(this._nameDimIdx=u),0===p.itemId&&(this._idDimIdx=u),r&&(d.storeDimIndex=u)}if(this.dimensions=i,this._dimInfos=o,this._initGetDimensionInfo(s),this.hostModel=t,this._invertedIndicesMap=a,this._dimOmitted){var f=this._dimIdxToName=me();O(i,function(e){f.set(o[e].storeDimIndex,e)})}}return e.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(null==t)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var n=this._dimIdxToName.get(t);if(null!=n)return n;var r=this._schema.getSourceDimension(t);return r?r.name:void 0},e.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(null!=t)return t;if(null==e)return-1;var n=this._getDimInfo(e);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},e.prototype._recognizeDimIndex=function(e){if(X(e)||null!=e&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},e.prototype._getStoreDimIndex=function(e){return this.getDimensionIndex(e)},e.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},e.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(e){return t.hasOwnProperty(e)?t[e]:void 0}:function(e){return t[e]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(e,t){var n=this._dimSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var r=n.encode[e];return r?r[t]:null},e.prototype.mapDimensionsAll=function(e){return(this._dimSummary.encode[e]||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(e,t,n){var r,o=this;if(e instanceof Af&&(r=e),!r){var i=this.dimensions,a=Lp(e)||E(e)?new Fp(e,i.length):e;r=new Af;var s=Vy(i,function(e){return{type:o._dimInfos[e].type,property:e}});r.initData(a,s,n)}this._store=r,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,r.count()),this._dimSummary=function(e,t){var n={},r=n.encode={},o=me(),i=[],a=[],s={};O(e.dimensions,function(t){var n,l=e.getDimensionInfo(t),u=l.coordDim;if(u){var c=l.coordDimIndex;wy(r,u)[c]=t,l.isExtraCoord||(o.set(u,1),"ordinal"!==(n=l.type)&&"time"!==n&&(i[0]=t),wy(s,u)[c]=e.getDimensionIndex(l.name)),l.defaultTooltip&&a.push(t)}Ch.each(function(e,t){var n=wy(r,t),o=l.otherDims[t];null!=o&&!1!==o&&(n[o]=l.name)})});var l=[],u={};o.each(function(e,t){var n=r[t];u[t]=n[0],l=l.concat(n)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=B(l,function(t){return e.getDimensionInfo(t).storeDimIndex}),n.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(i=c.slice());var d=r.tooltip;return d&&d.length?a=d.slice():a.length||(a=i.slice()),r.defaultedLabel=i,r.defaultedTooltip=a,n.userOutput=new _y(s,t),n}(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},e.prototype.appendValues=function(e,t){var n=this._store.appendValues(e,t.length),r=n.start,o=n.end,i=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var a=r;a<o;a++){var s=a-r;this._nameList[a]=t[s],i&&zy(this,a)}},e.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,n=0;n<t.length;n++){var r=this._dimInfos[t[n]];r.ordinalMeta&&e.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return null==this._idDimIdx&&e.getSource().sourceFormat!==Ah&&!e.fillStorage},e.prototype._doInit=function(e,t){if(!(e>=t)){var n=this._store.getProvider();this._updateOrdinalMeta();var r=this._nameList,o=this._idList;if(n.getSource().sourceFormat===Mh&&!n.pure)for(var i=[],a=e;a<t;a++){var s=n.getItem(a,i);if(!this.hasItemOption&&mi(s)&&(this.hasItemOption=!0),s){var l=s.name;null==r[a]&&null!=l&&(r[a]=xi(l,null));var u=s.id;null==o[a]&&null!=u&&(o[a]=xi(u,null))}}if(this._shouldMakeIdFromName())for(a=e;a<t;a++)zy(this,a);Ly(this)}},e.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},e.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},e.prototype.setCalculationInfo=function(e,t){Fy(e)?A(this._calculationInfo,e):this._calculationInfo[e]=t},e.prototype.getName=function(e){var t=this.getRawIndex(e),n=this._nameList[t];return null==n&&null!=this._nameDimIdx&&(n=Ry(this,this._nameDimIdx,t)),null==n&&(n=""),n},e.prototype._getCategory=function(e,t){var n=this._store.get(e,t),r=this._store.getOrdinalMeta(e);return r?r.categories[n]:n},e.prototype.getId=function(e){return Ny(this,this.getRawIndex(e))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(e,t){var n=this._store,r=this._dimInfos[e];if(r)return n.get(r.storeDimIndex,t)},e.prototype.getByRawIndex=function(e,t){var n=this._store,r=this._dimInfos[e];if(r)return n.getByRawIndex(r.storeDimIndex,t)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},e.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},e.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},e.prototype.getValues=function(e,t){var n=this,r=this._store;return U(e)?r.getValues(Vy(e,function(e){return n._getStoreDimIndex(e)}),t):r.getValues(e)},e.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,n=0,r=t.length;n<r;n++)if(isNaN(this._store.get(t[n],e)))return!1;return!0},e.prototype.indexOfName=function(e){for(var t=0,n=this._store.count();t<n;t++)if(this.getName(t)===e)return t;return-1},e.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},e.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},e.prototype.rawIndexOf=function(e,t){var n=(e&&this._invertedIndicesMap[e])[t];return null==n||isNaN(n)?-1:n},e.prototype.indicesOfNearest=function(e,t,n){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,n)},e.prototype.each=function(e,t,n){j(e)&&(n=t,t=e,e=[]);var r=n||this,o=Vy(Ey(e),this._getStoreDimIndex,this);this._store.each(o,r?W(t,r):t)},e.prototype.filterSelf=function(e,t,n){j(e)&&(n=t,t=e,e=[]);var r=n||this,o=Vy(Ey(e),this._getStoreDimIndex,this);return this._store=this._store.filter(o,r?W(t,r):t),this},e.prototype.selectRange=function(e){var t=this,n={};return O(H(e),function(r){var o=t._getStoreDimIndex(r);n[o]=e[r]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(e,t,n){j(e)&&(n=t,t=e,e=[]),n=n||this;var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},n),r},e.prototype.map=function(e,t,n,r){var o=n||r||this,i=Vy(Ey(e),this._getStoreDimIndex,this),a=By(this);return a._store=this._store.map(i,o?W(t,o):t),a},e.prototype.modify=function(e,t,n,r){var o=n||r||this,i=Vy(Ey(e),this._getStoreDimIndex,this);this._store.modify(i,o?W(t,o):t)},e.prototype.downSample=function(e,t,n,r){var o=By(this);return o._store=this._store.downSample(this._getStoreDimIndex(e),t,n,r),o},e.prototype.lttbDownSample=function(e,t){var n=By(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),n},e.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},e.prototype.getItemModel=function(e){var t=this.hostModel,n=this.getRawDataItem(e);return new hd(n,t,t&&t.ecModel)},e.prototype.diff=function(e){var t=this;return new xy(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(t){return Ny(e,t)},function(e){return Ny(t,e)})},e.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},e.prototype.setVisual=function(e,t){this._visual=this._visual||{},Fy(e)?A(this._visual,e):this._visual[e]=t},e.prototype.getItemVisual=function(e,t){var n=this._itemVisuals[e],r=n&&n[t];return null==r?this.getVisual(t):r},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(e,t){var n=this._itemVisuals,r=n[e];r||(r=n[e]={});var o=r[t];return null==o&&(U(o=this.getVisual(t))?o=o.slice():Fy(o)&&(o=A({},o)),r[t]=o),o},e.prototype.setItemVisual=function(e,t,n){var r=this._itemVisuals[e]||{};this._itemVisuals[e]=r,Fy(t)?A(r,t):r[t]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(e,t){Fy(e)?A(this._layout,e):this._layout[e]=t},e.prototype.getLayout=function(e){return this._layout[e]},e.prototype.getItemLayout=function(e){return this._itemLayouts[e]},e.prototype.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?A(this._itemLayouts[e]||{},t):t},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(e,t){var n=this.hostModel&&this.hostModel.seriesIndex;js(n,this.dataType,e,t),this._graphicEls[e]=t},e.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},e.prototype.eachItemGraphicEl=function(e,t){O(this._graphicEls,function(n,r){n&&e&&e.call(t,n,r)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Vy(this.dimensions,this._getDimInfo,this),this.hostModel)),Oy(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(e,t){var n=this[e];j(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=n.apply(this,arguments);return t.apply(this,[e].concat(ae(arguments)))})},e.internalField=(Ly=function(e){var t=e._invertedIndicesMap;O(t,function(n,r){var o=e._dimInfos[r],i=o.ordinalMeta,a=e._store;if(i){n=t[r]=new Hy(i.categories.length);for(var s=0;s<n.length;s++)n[s]=-1;for(s=0;s<a.count();s++)n[a.get(o.storeDimIndex,s)]=s}})},Ry=function(e,t,n){return xi(e._getCategory(t,n),null)},Ny=function(e,t){var n=e._idList[t];return null==n&&null!=e._idDimIdx&&(n=Ry(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n},Ey=function(e){return U(e)||(e=null!=e?[e]:[]),e},By=function(t){var n=new e(t._schema?t._schema:Vy(t.dimensions,t._getDimInfo,t),t.hostModel);return Oy(n,t),n},Oy=function(e,t){O(Wy.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,O(Gy,function(n){e[n]=T(t[n])}),e._calculationInfo=A({},t._calculationInfo)},void(zy=function(e,t){var n=e._nameList,r=e._idList,o=e._nameDimIdx,i=e._idDimIdx,a=n[t],s=r[t];if(null==a&&null!=o&&(n[t]=a=Ry(e,o,t)),null==s&&null!=i&&(r[t]=s=Ry(e,i,t)),null==s&&null!=a){var l=e._nameRepeatCount,u=l[a]=(l[a]||0)+1;s=a,u>1&&(s+="__ec__"+u),r[t]=s}})),e}();function jy(e,t){Lp(e)||(e=Rp(e));var n=(t=t||{}).coordDimensions||[],r=t.dimensionsDefine||e.dimensionsDefine||[],o=me(),i=[],a=function(e,t,n,r){var o=Math.max(e.dimensionsDetectedCount||1,t.length,n.length,r||0);return O(t,function(e){var t;Z(e)&&(t=e.dimsDef)&&(o=Math.max(o,t.length))}),o}(e,n,r,t.dimensionsCount),s=t.canOmitUnusedDimensions&&Py(a),l=r===e.dimensionsDefine,u=l?Dy(e):Ay(r),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var d=me(c),h=new Cf(a),p=0;p<h.length;p++)h[p]=-1;function f(e){var t=h[e];if(t<0){var n=r[e],o=Z(n)?n:{name:n},a=new Cy,s=o.name;null!=s&&null!=u.get(s)&&(a.name=a.displayName=s),null!=o.type&&(a.type=o.type),null!=o.displayName&&(a.displayName=o.displayName);var l=i.length;return h[e]=l,a.storeDimIndex=e,i.push(a),a}return i[t]}if(!s)for(p=0;p<a;p++)f(p);d.each(function(e,t){var n=hi(e).slice();if(1===n.length&&!Y(n[0])&&n[0]<0)d.set(t,!1);else{var r=d.set(t,[]);O(n,function(e,n){var o=Y(e)?u.get(e):e;null!=o&&o<a&&(r[n]=o,m(f(o),t,n))})}});var g=0;function m(e,t,n){null!=Ch.get(t)?e.otherDims[t]=n:(e.coordDim=t,e.coordDimIndex=n,o.set(t,!0))}O(n,function(e){var t,n,r,o;if(Y(e))t=e,o={};else{t=(o=e).name;var i=o.ordinalMeta;o.ordinalMeta=null,(o=A({},o)).ordinalMeta=i,n=o.dimsDef,r=o.otherDims,o.name=o.coordDim=o.coordDimIndex=o.dimsDef=o.otherDims=null}var s=d.get(t);if(!1!==s){if(!(s=hi(s)).length)for(var u=0;u<(n&&n.length||1);u++){for(;g<a&&null!=f(g).coordDim;)g++;g<a&&s.push(g++)}O(s,function(e,i){var a=f(e);if(l&&null!=o.type&&(a.type=o.type),m(D(a,o),t,i),null==a.name&&n){var s=n[i];!Z(s)&&(s={name:s}),a.name=a.displayName=s.name,a.defaultTooltip=s.defaultTooltip}r&&D(a.otherDims,r)})}});var v=t.generateCoord,y=t.generateCoordCount,b=null!=y;y=v?y||1:0;var x=v||"value";function _(e){null==e.name&&(e.name=e.coordDim)}if(s)O(i,function(e){_(e)}),i.sort(function(e,t){return e.storeDimIndex-t.storeDimIndex});else for(var w=0;w<a;w++){var S=f(w);null==S.coordDim&&(S.coordDim=Yy(x,o,b),S.coordDimIndex=0,(!v||y<=0)&&(S.isExtraCoord=!0),y--),_(S),null!=S.type||1!==Bh(e,w)&&(!S.isExtraCoord||null==S.otherDims.itemName&&null==S.otherDims.seriesName)||(S.type="ordinal")}return function(e){for(var t=me(),n=0;n<e.length;n++){var r=e[n],o=r.name,i=t.get(o)||0;i>0&&(r.name=o+(i-1)),i++,t.set(o,i)}}(i),new ky({source:e,dimensions:i,fullDimensionCount:a,dimensionOmitted:s})}function Yy(e,t,n){if(n||t.hasKey(e)){for(var r=0;t.hasKey(e+r);)r++;e+=r}return t.set(e,!0),e}var qy=function(e){this.coordSysDims=[],this.axisMap=me(),this.categoryAxisMap=me(),this.coordSysName=e},Xy={cartesian2d:function(e,t,n,r){var o=e.getReferringComponents("xAxis",Ii).models[0],i=e.getReferringComponents("yAxis",Ii).models[0];t.coordSysDims=["x","y"],n.set("x",o),n.set("y",i),Zy(o)&&(r.set("x",o),t.firstCategoryDimIndex=0),Zy(i)&&(r.set("y",i),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,n,r){var o=e.getReferringComponents("singleAxis",Ii).models[0];t.coordSysDims=["single"],n.set("single",o),Zy(o)&&(r.set("single",o),t.firstCategoryDimIndex=0)},polar:function(e,t,n,r){var o=e.getReferringComponents("polar",Ii).models[0],i=o.findAxisModel("radiusAxis"),a=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",i),n.set("angle",a),Zy(i)&&(r.set("radius",i),t.firstCategoryDimIndex=0),Zy(a)&&(r.set("angle",a),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,r){var o=e.ecModel,i=o.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=i.dimensions.slice();O(i.parallelAxisIndex,function(e,i){var s=o.getComponent("parallelAxis",e),l=a[i];n.set(l,s),Zy(s)&&(r.set(l,s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=i))})}};function Zy(e){return"category"===e.get("type")}function $y(e,t,n){var r,o,i,a=(n=n||{}).byIndex,s=n.stackedCoordDimension;!function(e){return!Iy(e.schema)}(t)?(o=t.schema,r=o.dimensions,i=t.store):r=t;var l,u,c,d,h=!(!e||!e.get("stack"));if(O(r,function(e,t){Y(e)&&(r[t]=e={name:e}),h&&!e.isExtraCoord&&(a||l||!e.ordinalMeta||(l=e),u||"ordinal"===e.type||"time"===e.type||s&&s!==e.coordDim||(u=e))}),!u||a||l||(a=!0),u){c="__\0ecstackresult_"+e.id,d="__\0ecstackedover_"+e.id,l&&(l.createInvertedIndices=!0);var p=u.coordDim,f=u.type,g=0;O(r,function(e){e.coordDim===p&&g++});var m={name:c,coordDim:p,coordDimIndex:g,type:f,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},v={name:d,coordDim:d,coordDimIndex:g+1,type:f,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};o?(i&&(m.storeDimIndex=i.ensureCalculationDimension(d,f),v.storeDimIndex=i.ensureCalculationDimension(c,f)),o.appendCalculationDimension(m),o.appendCalculationDimension(v)):(r.push(m),r.push(v))}return{stackedDimension:u&&u.name,stackedByDimension:l&&l.name,isStackedByIndex:a,stackedOverDimension:d,stackResultDimension:c}}function Ky(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Jy(e,t){return Ky(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Qy(e,t,n){n=n||{};var r,o=t.getSourceManager(),i=!1;e?(i=!0,r=Rp(e)):i=(r=o.getSource()).sourceFormat===Mh;var a=function(e){var t=e.get("coordinateSystem"),n=new qy(t),r=Xy[t];if(r)return r(e,n,n.axisMap,n.categoryAxisMap),n}(t),s=function(e,t){var n,r=e.get("coordinateSystem"),o=np.get(r);return t&&t.coordSysDims&&(n=B(t.coordSysDims,function(e){var n={name:e},r=t.axisMap.get(e);if(r){var o=r.get("type");n.type=Sy(o)}return n})),n||(n=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),n}(t,a),l=n.useEncodeDefaulter,u=j(l)?l:l?G(Rh,s,t):null,c=jy(r,{coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!i}),d=function(e,t,n){var r,o;return n&&O(e,function(e,i){var a=e.coordDim,s=n.categoryAxisMap.get(a);s&&(null==r&&(r=i),e.ordinalMeta=s.getOrdinalMeta(),t&&(e.createInvertedIndices=!0)),null!=e.otherDims.itemName&&(o=!0)}),o||null==r||(e[r].otherDims.itemName=0),r}(c.dimensions,n.createInvertedIndices,a),h=i?null:o.getSharedDataStore(c),p=$y(t,{schema:c,store:h}),f=new Uy(c,t);f.setCalculationInfo(p);var g=null!=d&&function(e){if(e.sourceFormat===Mh){var t=function(e){for(var t=0;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return!U(gi(t))}}(r)?function(e,t,n,r){return r===d?n:this.defaultDimValueGetter(e,t,n,r)}:null;return f.hasItemOption=!1,f.initData(i?r:h,null,g),f}var eb=function(){function e(e){this._setting=e||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(e){return this._setting[e]},e.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},e.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},e.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(e){this._isBlank=e},e}();Wi(eb);var tb=0,nb=function(){function e(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++tb}return e.createByAxisModel=function(t){var n=t.option,r=n.data,o=r&&B(r,rb);return new e({categories:o,needCollect:!o,deduplication:!1!==n.dedplication})},e.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},e.prototype.parseAndCollect=function(e){var t,n=this._needCollect;if(!Y(e)&&!n)return e;if(n&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var r=this._getOrCreateMap();return null==(t=r.get(e))&&(n?(t=this.categories.length,this.categories[t]=e,r.set(e,t)):t=NaN),t},e.prototype._getOrCreateMap=function(){return this._map||(this._map=me(this.categories))},e}();function rb(e){return Z(e)&&null!=e.value?e.value:e+""}function ob(e){return"interval"===e.type||"log"===e.type}function ib(e){var t=Math.pow(10,Qo(e)),n=e/t;return n?2===n?n=3:3===n?n=5:n*=2:n=1,Vo(n*t)}function ab(e){return Wo(e)+2}function sb(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function lb(e,t){return e>=t[0]&&e<=t[1]}function ub(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function cb(e,t){return e*(t[1]-t[0])+t[0]}var db=function(e){function t(t){var n=e.call(this,t)||this;n.type="ordinal";var r=n.getSetting("ordinalMeta");return r||(r=new nb({})),U(r)&&(r=new nb({categories:B(r,function(e){return Z(e)?e.value:e})})),n._ordinalMeta=r,n._extent=n.getSetting("extent")||[0,r.categories.length-1],n}return n(t,e),t.prototype.parse=function(e){return null==e?NaN:Y(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return lb(e=this.parse(e),this._extent)&&null!=this._ordinalMeta.categories[e]},t.prototype.normalize=function(e){return ub(e=this._getTickNumber(this.parse(e)),this._extent)},t.prototype.scale=function(e){return e=Math.round(cb(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push({value:n}),n++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null!=e){for(var t=e.ordinalNumbers,n=this._ordinalNumbersByTick=[],r=this._ticksByOrdinalNumber=[],o=0,i=this._ordinalMeta.categories.length,a=Math.min(i,t.length);o<a;++o){var s=t[o];n[o]=s,r[s]=o}for(var l=0;o<i;++o){for(;null!=r[l];)l++;n.push(l),r[l]=o}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},t.prototype._getTickNumber=function(e){var t=this._ticksByOrdinalNumber;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getRawOrdinalNumber=function(e){var t=this._ordinalNumbersByTick;return t&&e>=0&&e<t.length?t[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var t=this.getRawOrdinalNumber(e.value),n=this._ordinalMeta.categories[t];return null==n?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(eb);eb.registerClass(db);var hb=Vo,pb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return n(t,e),t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return lb(e,this._extent)},t.prototype.normalize=function(e){return ub(e,this._extent)},t.prototype.scale=function(e){return cb(e,this._extent)},t.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},t.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),this.setExtent(t[0],t[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=ab(e)},t.prototype.getTicks=function(e){var t=this._interval,n=this._extent,r=this._niceExtent,o=this._intervalPrecision,i=[];if(!t)return i;n[0]<r[0]&&(e?i.push({value:hb(r[0]-t,o)}):i.push({value:n[0]}));for(var a=r[0];a<=r[1]&&(i.push({value:a}),(a=hb(a+t,o))!==i[i.length-1].value);)if(i.length>1e4)return[];var s=i.length?i[i.length-1].value:r[1];return n[1]>s&&(e?i.push({value:hb(s+t,o)}):i.push({value:n[1]})),i},t.prototype.getMinorTicks=function(e){for(var t=this.getTicks(!0),n=[],r=this.getExtent(),o=1;o<t.length;o++){for(var i=t[o],a=t[o-1],s=0,l=[],u=(i.value-a.value)/e;s<e-1;){var c=hb(a.value+(s+1)*u);c>r[0]&&c<r[1]&&l.push(c),s++}n.push(l)}return n},t.prototype.getLabel=function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=Wo(e.value)||0:"auto"===n&&(n=this._intervalPrecision),Jd(hb(e.value,n,!0))},t.prototype.calcNiceTicks=function(e,t,n){e=e||5;var r=this._extent,o=r[1]-r[0];if(isFinite(o)){o<0&&(o=-o,r.reverse());var i=function(e,t,n,r){var o={},i=e[1]-e[0],a=o.interval=ei(i/t,!0);null!=n&&a<n&&(a=o.interval=n),null!=r&&a>r&&(a=o.interval=r);var s=o.intervalPrecision=ab(a);return function(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),sb(e,0,t),sb(e,1,t),e[0]>e[1]&&(e[0]=e[1])}(o.niceTickExtent=[Vo(Math.ceil(e[0]/a)*a,s),Vo(Math.floor(e[1]/a)*a,s)],e),o}(r,e,t,n);this._intervalPrecision=i.intervalPrecision,this._interval=i.interval,this._niceExtent=i.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=Math.abs(t[0]);e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;var r=t[1]-t[0];isFinite(r)||(t[0]=0,t[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(t[0]=hb(Math.floor(t[0]/o)*o)),e.fixMax||(t[1]=hb(Math.ceil(t[1]/o)*o))},t.prototype.setNiceExtent=function(e,t){this._niceExtent=[e,t]},t.type="interval",t}(eb);eb.registerClass(pb);var fb="undefined"!=typeof Float32Array,gb=fb?Float32Array:Array;function mb(e){return U(e)?fb?new Float32Array(e):e:new gb(e)}var vb="__ec_stack_";function yb(e){return e.get("stack")||vb+e.seriesIndex}function bb(e){return e.dim+e.index}function xb(e,t){var n=[];return t.eachSeriesByType(e,function(e){Mb(e)&&n.push(e)}),n}function _b(e){var t=function(e){var t={};O(e,function(e){var n=e.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var r=e.getData(),o=n.dim+"_"+n.index,i=r.getDimensionIndex(r.mapDimension(n.dim)),a=r.getStore(),s=0,l=a.count();s<l;++s){var u=a.get(i,s);t[o]?t[o].push(u):t[o]=[u]}});var n={};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if(o){o.sort(function(e,t){return e-t});for(var i=null,a=1;a<o.length;++a){var s=o[a]-o[a-1];s>0&&(i=null===i?s:Math.min(i,s))}n[r]=i}}return n}(e),n=[];return O(e,function(e){var r,o=e.coordinateSystem.getBaseAxis(),i=o.getExtent();if("category"===o.type)r=o.getBandWidth();else if("value"===o.type||"time"===o.type){var a=o.dim+"_"+o.index,s=t[a],l=Math.abs(i[1]-i[0]),u=o.scale.getExtent(),c=Math.abs(u[1]-u[0]);r=s?l/c*s:l}else{var d=e.getData();r=Math.abs(i[1]-i[0])/d.count()}var h=Fo(e.get("barWidth"),r),p=Fo(e.get("barMaxWidth"),r),f=Fo(e.get("barMinWidth")||(Tb(e)?.5:1),r),g=e.get("barGap"),m=e.get("barCategoryGap");n.push({bandWidth:r,barWidth:h,barMaxWidth:p,barMinWidth:f,barGap:g,barCategoryGap:m,axisKey:bb(o),stackId:yb(e)})}),wb(n)}function wb(e){var t={};O(e,function(e,n){var r=e.axisKey,o=e.bandWidth,i=t[r]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},a=i.stacks;t[r]=i;var s=e.stackId;a[s]||i.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=e.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(i.remainedWidth,l),i.remainedWidth-=l);var u=e.barMaxWidth;u&&(a[s].maxWidth=u);var c=e.barMinWidth;c&&(a[s].minWidth=c);var d=e.barGap;null!=d&&(i.gap=d);var h=e.barCategoryGap;null!=h&&(i.categoryGap=h)});var n={};return O(t,function(e,t){n[t]={};var r=e.stacks,o=e.bandWidth,i=e.categoryGap;if(null==i){var a=H(r).length;i=Math.max(35-4*a,15)+"%"}var s=Fo(i,o),l=Fo(e.gap,1),u=e.remainedWidth,c=e.autoWidthCount,d=(u-s)/(c+(c-1)*l);d=Math.max(d,0),O(r,function(e){var t=e.maxWidth,n=e.minWidth;if(e.width)r=e.width,t&&(r=Math.min(r,t)),n&&(r=Math.max(r,n)),e.width=r,u-=r+l*r,c--;else{var r=d;t&&t<r&&(r=Math.min(t,u)),n&&n>r&&(r=n),r!==d&&(e.width=r,u-=r+l*r,c--)}}),d=(u-s)/(c+(c-1)*l),d=Math.max(d,0);var h,p=0;O(r,function(e,t){e.width||(e.width=d),h=e,p+=e.width*(1+l)}),h&&(p-=h.width*l);var f=-p/2;O(r,function(e,r){n[t][r]=n[t][r]||{bandWidth:o,offset:f,width:e.width},f+=e.width*(1+l)})}),n}function Sb(e,t){var n=xb(e,t),r=_b(n);O(n,function(e){var t=e.getData(),n=e.coordinateSystem.getBaseAxis(),o=yb(e),i=r[bb(n)][o],a=i.offset,s=i.width;t.setLayout({bandWidth:i.bandWidth,offset:a,size:s})})}function Cb(e){return{seriesType:e,plan:ug(),reset:function(e){if(Mb(e)){var t=e.getData(),n=e.coordinateSystem,r=n.getBaseAxis(),o=n.getOtherAxis(r),i=t.getDimensionIndex(t.mapDimension(o.dim)),a=t.getDimensionIndex(t.mapDimension(r.dim)),s=e.get("showBackground",!0),l=t.mapDimension(o.dim),u=t.getCalculationInfo("stackResultDimension"),c=Ky(t,l)&&!!t.getCalculationInfo("stackedOnSeries"),d=o.isHorizontal(),h=function(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}(0,o),p=Tb(e),f=e.get("barMinHeight")||0,g=u&&t.getDimensionIndex(u),m=t.getLayout("size"),v=t.getLayout("offset");return{progress:function(e,t){for(var r,o=e.count,l=p&&mb(3*o),u=p&&s&&mb(3*o),y=p&&mb(o),b=n.master.getRect(),x=d?b.width:b.height,_=t.getStore(),w=0;null!=(r=e.next());){var S=_.get(c?g:i,r),C=_.get(a,r),M=h,T=void 0;c&&(T=+S-_.get(i,r));var k=void 0,I=void 0,A=void 0,D=void 0;if(d){var P=n.dataToPoint([S,C]);c&&(M=n.dataToPoint([T,C])[0]),k=M,I=P[1]+v,A=P[0]-M,D=m,Math.abs(A)<f&&(A=(A<0?-1:1)*f)}else P=n.dataToPoint([C,S]),c&&(M=n.dataToPoint([C,T])[1]),k=P[0]+v,I=M,A=m,D=P[1]-M,Math.abs(D)<f&&(D=(D<=0?-1:1)*f);p?(l[w]=k,l[w+1]=I,l[w+2]=d?A:D,u&&(u[w]=d?b.x:k,u[w+1]=d?I:b.y,u[w+2]=x),y[r]=r):t.setItemLayout(r,{x:k,y:I,width:A,height:D}),w+=3}p&&t.setLayout({largePoints:l,largeDataIndices:y,largeBackgroundPoints:u,valueAxisHorizontal:d})}}}}}}function Mb(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function Tb(e){return e.pipelineContext&&e.pipelineContext.large}var kb=function(e){function t(t){var n=e.call(this,t)||this;return n.type="time",n}return n(t,e),t.prototype.getLabel=function(e){var t=this.getSetting("useUTC");return Ed(e.value,Ad[function(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Nd(this._minLevelUnit))]||Ad.second,t,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,t,n){var r=this.getSetting("useUTC");return function(e,t,n,r,o){var i=null;if(Y(n))i=n;else if(j(n))i=n(e.value,t,{level:e.level});else{var a=A({},kd);if(e.level>0)for(var s=0;s<Dd.length;++s)a[Dd[s]]="{primary|"+a[Dd[s]]+"}";var l=n?!1===n.inherit?n:D(n,a):a,u=Od(e.value,o);if(l[u])i=l[u];else if(l.inherit){for(s=Pd.indexOf(u)-1;s>=0;--s)if(l[u]){i=l[u];break}i=i||a.none}if(U(i)){var c=null==e.level?0:e.level>=0?e.level:i.length+e.level;i=i[c=Math.min(c,i.length-1)]}}return Ed(new Date(e.value),i,o,r)}(e,t,n,this.getSetting("locale"),r)},t.prototype.getTicks=function(){var e=this._interval,t=this._extent,n=[];if(!e)return n;n.push({value:t[0],level:0});var r=this.getSetting("useUTC"),o=function(e,t,n,r){var o=Pd,i=0;function a(e,t,n,o,i,a,s){for(var l=new Date(t),u=t,c=l[o]();u<n&&u<=r[1];)s.push({value:u}),c+=e,l[i](c),u=l.getTime();s.push({value:u,notAdd:!0})}function s(e,o,i){var s=[],l=!o.length;if(!function(e,t,n,r){var o=Ko(t),i=Ko(n),a=function(e){return Bd(o,e,r)===Bd(i,e,r)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},d=function(){return c()&&a("minute")},h=function(){return d()&&a("second")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return d();case"second":return h();case"millisecond":return h()&&a("millisecond")}}(Nd(e),r[0],r[1],n)){l&&(o=[{value:Rb(new Date(r[0]),e,n)},{value:r[1]}]);for(var u=0;u<o.length-1;u++){var c=o[u].value,d=o[u+1].value;if(c!==d){var h=void 0,p=void 0,f=void 0;switch(e){case"year":h=Math.max(1,Math.round(t/Md/365)),p=zd(n),f=jd(n);break;case"half-year":case"quarter":case"month":h=Db(t),p=Fd(n),f=Yd(n);break;case"week":case"half-week":case"day":h=Ab(t),p=Vd(n),f=qd(n),!0;break;case"half-day":case"quarter-day":case"hour":h=Pb(t),p=Hd(n),f=Xd(n);break;case"minute":h=Lb(t,!0),p=Wd(n),f=Zd(n);break;case"second":h=Lb(t,!1),p=Gd(n),f=$d(n);break;case"millisecond":h=Nb(t),p=Ud(n),f=Kd(n)}a(h,c,d,p,f,0,s),"year"===e&&i.length>1&&0===u&&i.unshift({value:i[0].value-h})}}for(u=0;u<s.length;u++)i.push(s[u]);return s}}for(var l=[],u=[],c=0,d=0,h=0;h<o.length&&i++<1e4;++h){var p=Nd(o[h]);if(Rd(o[h])&&(s(o[h],l[l.length-1]||[],u),p!==(o[h+1]?Nd(o[h+1]):null))){if(u.length){d=c,u.sort(function(e,t){return e.value-t.value});for(var f=[],g=0;g<u.length;++g){var m=u[g].value;0!==g&&u[g-1].value===m||(f.push(u[g]),m>=r[0]&&m<=r[1]&&c++)}var v=(r[1]-r[0])/t;if(c>1.5*v&&d>v/1.5)break;if(l.push(f),c>v||e===o[h])break}u=[]}}var y=F(B(l,function(e){return F(e,function(e){return e.value>=r[0]&&e.value<=r[1]&&!e.notAdd})}),function(e){return e.length>0}),b=[],x=y.length-1;for(h=0;h<y.length;++h)for(var _=y[h],w=0;w<_.length;++w)b.push({value:_[w].value,level:x-h});b.sort(function(e,t){return e.value-t.value});var S=[];for(h=0;h<b.length;++h)0!==h&&b[h].value===b[h-1].value||S.push(b[h]);return S}(this._minLevelUnit,this._approxInterval,r,t);return(n=n.concat(o)).push({value:t[1],level:0}),n},t.prototype.calcNiceExtent=function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=Md,t[1]+=Md),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-Md}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,t,n){e=e||10;var r=this._extent,o=r[1]-r[0];this._approxInterval=o/e,null!=t&&this._approxInterval<t&&(this._approxInterval=t),null!=n&&this._approxInterval>n&&(this._approxInterval=n);var i=Ib.length,a=Math.min(function(e,t,n,r){for(;n<r;){var o=n+r>>>1;e[o][1]<t?n=o+1:r=o}return n}(Ib,this._approxInterval,0,i),i-1);this._interval=Ib[a][1],this._minLevelUnit=Ib[Math.max(a-1,0)][0]},t.prototype.parse=function(e){return X(e)?e:+Ko(e)},t.prototype.contain=function(e){return lb(this.parse(e),this._extent)},t.prototype.normalize=function(e){return ub(this.parse(e),this._extent)},t.prototype.scale=function(e){return cb(e,this._extent)},t.type="time",t}(pb),Ib=[["second",1e3],["minute",6e4],["hour",Cd],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",Td/2],["year",Td]];function Ab(e,t){return(e/=Md)>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Db(e){return(e/=2592e6)>6?6:e>3?3:e>2?2:1}function Pb(e){return(e/=Cd)>12?12:e>6?6:e>3.5?4:e>2?2:1}function Lb(e,t){return(e/=t?6e4:1e3)>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Nb(e){return ei(e,!0)}function Rb(e,t,n){var r=new Date(e);switch(Nd(t)){case"year":case"month":r[Yd(n)](0);case"day":r[qd(n)](1);case"hour":r[Xd(n)](0);case"minute":r[Zd(n)](0);case"second":r[$d(n)](0),r[Kd(n)](0)}return r.getTime()}eb.registerClass(kb);var Eb=eb.prototype,Ob=pb.prototype,Bb=Vo,zb=Math.floor,Fb=Math.ceil,Vb=Math.pow,Hb=Math.log,Wb=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new pb,t._interval=0,t}return n(t,e),t.prototype.getTicks=function(e){var t=this._originalScale,n=this._extent,r=t.getExtent();return B(Ob.getTicks.call(this,e),function(e){var t=e.value,o=Vo(Vb(this.base,t));return o=t===n[0]&&this._fixMin?Ub(o,r[0]):o,{value:o=t===n[1]&&this._fixMax?Ub(o,r[1]):o}},this)},t.prototype.setExtent=function(e,t){var n=Hb(this.base);e=Hb(Math.max(0,e))/n,t=Hb(Math.max(0,t))/n,Ob.setExtent.call(this,e,t)},t.prototype.getExtent=function(){var e=this.base,t=Eb.getExtent.call(this);t[0]=Vb(e,t[0]),t[1]=Vb(e,t[1]);var n=this._originalScale.getExtent();return this._fixMin&&(t[0]=Ub(t[0],n[0])),this._fixMax&&(t[1]=Ub(t[1],n[1])),t},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=Hb(e[0])/Hb(t),e[1]=Hb(e[1])/Hb(t),Eb.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},t.prototype.calcNiceTicks=function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n===1/0||n<=0)){var r=Jo(n);for(e/n*r<=.5&&(r*=10);!isNaN(r)&&Math.abs(r)<1&&Math.abs(r)>0;)r*=10;var o=[Vo(Fb(t[0]/r)*r),Vo(zb(t[1]/r)*r)];this._interval=r,this._niceExtent=o}},t.prototype.calcNiceExtent=function(e){Ob.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return lb(e=Hb(e)/Hb(this.base),this._extent)},t.prototype.normalize=function(e){return ub(e=Hb(e)/Hb(this.base),this._extent)},t.prototype.scale=function(e){return e=cb(e,this._extent),Vb(this.base,e)},t.type="log",t}(eb),Gb=Wb.prototype;function Ub(e,t){return Bb(e,Wo(t))}Gb.getMinorTicks=Ob.getMinorTicks,Gb.getLabel=Ob.getLabel,eb.registerClass(Wb);var jb=function(){function e(e,t,n){this._prepareParams(e,t,n)}return e.prototype._prepareParams=function(e,t,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var r=this._isOrdinal="ordinal"===e.type;this._needCrossZero="interval"===e.type&&t.getNeedCrossZero&&t.getNeedCrossZero();var o=this._modelMinRaw=t.get("min",!0);j(o)?this._modelMinNum=Zb(e,o({min:n[0],max:n[1]})):"dataMin"!==o&&(this._modelMinNum=Zb(e,o));var i=this._modelMaxRaw=t.get("max",!0);if(j(i)?this._modelMaxNum=Zb(e,i({min:n[0],max:n[1]})):"dataMax"!==i&&(this._modelMaxNum=Zb(e,i)),r)this._axisDataLen=t.getCategories().length;else{var a=t.get("boundaryGap"),s=U(a)?a:[a||0,a||0];"boolean"==typeof s[0]||"boolean"==typeof s[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[bo(s[0],1),bo(s[1],1)]}},e.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,n=this._dataMax,r=this._axisDataLen,o=this._boundaryGapInner,i=e?null:n-t||Math.abs(t),a="dataMin"===this._modelMinRaw?t:this._modelMinNum,s="dataMax"===this._modelMaxRaw?n:this._modelMaxNum,l=null!=a,u=null!=s;null==a&&(a=e?r?0:NaN:t-o[0]*i),null==s&&(s=e?r?r-1:NaN:n+o[1]*i),(null==a||!isFinite(a))&&(a=NaN),(null==s||!isFinite(s))&&(s=NaN);var c=ne(a)||ne(s)||e&&!r;this._needCrossZero&&(a>0&&s>0&&!l&&(a=0),a<0&&s<0&&!u&&(s=0));var d=this._determinedMin,h=this._determinedMax;return null!=d&&(a=d,l=!0),null!=h&&(s=h,u=!0),{min:a,max:s,minFixed:l,maxFixed:u,isBlank:c}},e.prototype.modifyDataMinMax=function(e,t){this[qb[e]]=t},e.prototype.setDeterminedMinMax=function(e,t){this[Yb[e]]=t},e.prototype.freeze=function(){this.frozen=!0},e}(),Yb={min:"_determinedMin",max:"_determinedMax"},qb={min:"_dataMin",max:"_dataMax"};function Xb(e,t,n){var r=e.rawExtentInfo;return r||(r=new jb(e,t,n),e.rawExtentInfo=r,r)}function Zb(e,t){return null==t?null:ne(t)?NaN:e.parse(t)}function $b(e,t){var n=e.type,r=Xb(e,t,e.getExtent()).calculate();e.setBlank(r.isBlank);var o=r.min,i=r.max,a=t.ecModel;if(a&&"time"===n){var s=xb("bar",a),l=!1;if(O(s,function(e){l=l||e.getBaseAxis()===t.axis}),l){var u=_b(s),c=function(e,t,n,r){var o=n.axis.getExtent(),i=o[1]-o[0],a=function(e,t,n){if(e&&t){var r=e[bb(t)];return r}}(r,n.axis);if(void 0===a)return{min:e,max:t};var s=1/0;O(a,function(e){s=Math.min(e.offset,s)});var l=-1/0;O(a,function(e){l=Math.max(e.offset+e.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,d=c/(1-(s+l)/i)-c;return{min:e-=d*(s/u),max:t+=d*(l/u)}}(o,i,t,u);o=c.min,i=c.max}}return{extent:[o,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function Kb(e,t){var n=t,r=$b(e,n),o=r.extent,i=n.get("splitNumber");e instanceof Wb&&(e.base=n.get("logBase"));var a=e.type,s=n.get("interval"),l="interval"===a||"time"===a;e.setExtent(o[0],o[1]),e.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),null!=s&&e.setInterval&&e.setInterval(s)}function Jb(e,t){if(t=t||e.get("type"))switch(t){case"category":return new db({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new kb({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(eb.getClass(t)||pb)}}function Qb(e){var t,n,r=e.getLabelModel().get("formatter"),o="category"===e.type?e.scale.getExtent()[0]:null;return"time"===e.scale.type?(n=r,function(t,r){return e.scale.getFormattedLabel(t,r,n)}):Y(r)?function(t){return function(n){var r=e.scale.getLabel(n);return t.replace("{value}",null!=r?r:"")}}(r):j(r)?(t=r,function(n,r){return null!=o&&(r=n.value-o),t(ex(e,n),r,null!=n.level?{level:n.level}:null)}):function(t){return e.scale.getLabel(t)}}function ex(e,t){return"category"===e.type?e.scale.getLabel(t):t.value}function tx(e,t){var n=t*Math.PI/180,r=e.width,o=e.height,i=r*Math.abs(Math.cos(n))+Math.abs(o*Math.sin(n)),a=r*Math.abs(Math.sin(n))+Math.abs(o*Math.cos(n));return new Ot(e.x,e.y,i,a)}function nx(e){var t=e.get("interval");return null==t?"auto":t}function rx(e){return"category"===e.type&&0===nx(e.getLabelModel())}function ox(e,t){var n={};return O(e.mapDimensionsAll(t),function(t){n[Jy(e,t)]=!0}),H(n)}var ix=function(){function e(){}return e.prototype.getNeedCrossZero=function(){return!this.option.scale},e.prototype.getCoordSysModel=function(){},e}(),ax={isDimensionStacked:Ky,enableDataStack:$y,getStackedDimension:Jy},sx=Object.freeze({__proto__:null,createList:function(e){return Qy(null,e)},getLayoutRect:ph,dataStack:ax,createScale:function(e,t){var n=t;t instanceof hd||(n=new hd(t));var r=Jb(n);return r.setExtent(e[0],e[1]),Kb(r,n),r},mixinAxisModelCommonMethods:function(e){R(e,ix)},getECData:Us,createTextStyle:function(e,t){return Uc(e,null,null,"normal"!==(t=t||{}).state)},createDimensions:function(e,t){return jy(e,t).dimensions},createSymbol:Cm,enableHoverEmphasis:Nl});function lx(e,t){return Math.abs(e-t)<1e-8}function ux(e,t,n){var r=0,o=e[0];if(!o)return!1;for(var i=1;i<e.length;i++){var a=e[i];r+=os(o[0],o[1],a[0],a[1],t,n),o=a}var s=e[0];return lx(o[0],s[0])&&lx(o[1],s[1])||(r+=os(o[0],o[1],s[0],s[1],t,n)),0!==r}var cx=[];function dx(e,t){for(var n=0;n<e.length;n++)We(e[n],e[n],t)}function hx(e,t,n,r){for(var o=0;o<e.length;o++){var i=e[o];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Ge(t,t,i),Ue(n,n,i))}}var px=function(){function e(e){this.name=e}return e.prototype.setCenter=function(e){this._center=e},e.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},e}(),fx=function(e,t){this.type="polygon",this.exterior=e,this.interiors=t},gx=function(e){this.type="linestring",this.points=e},mx=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.type="geoJSON",o.geometries=n,o._center=r&&[r[0],r[1]],o}return n(t,e),t.prototype.calcCenter=function(){for(var e,t=this.geometries,n=0,r=0;r<t.length;r++){var o=t[r],i=o.exterior,a=i&&i.length;a>n&&(e=o,n=a)}if(e)return function(e){for(var t=0,n=0,r=0,o=e.length,i=e[o-1][0],a=e[o-1][1],s=0;s<o;s++){var l=e[s][0],u=e[s][1],c=i*u-l*a;t+=c,n+=(i+l)*c,r+=(a+u)*c,i=l,a=u}return t?[n/t/3,r/t/3,t]:[e[0][0]||0,e[0][1]||0]}(e.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},t.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var n=[1/0,1/0],r=[-1/0,-1/0];return O(this.geometries,function(t){"polygon"===t.type?hx(t.exterior,n,r,e):O(t.points,function(t){hx(t,n,r,e)})}),isFinite(n[0])&&isFinite(n[1])&&isFinite(r[0])&&isFinite(r[1])||(n[0]=n[1]=r[0]=r[1]=0),t=new Ot(n[0],n[1],r[0]-n[0],r[1]-n[1]),e||(this._rect=t),t},t.prototype.contain=function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var r=0,o=n.length;r<o;r++){var i=n[r];if("polygon"===i.type){var a=i.exterior,s=i.interiors;if(ux(a,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(ux(s[l],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,t,n,r){var o=this.getBoundingRect(),i=o.width/o.height;n?r||(r=n/i):n=i*r;for(var a=new Ot(e,t,n,r),s=o.calculateTransform(a),l=this.geometries,u=0;u<l.length;u++){var c=l[u];"polygon"===c.type?(dx(c.exterior,s),O(c.interiors,function(e){dx(e,s)})):O(c.points,function(e){dx(e,s)})}(o=this._rect).copy(a),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var n=new t(e,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},t}(px),vx=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="geoSVG",r._elOnlyForCalculate=n,r}return n(t,e),t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),n=[t.x+t.width/2,t.y+t.height/2],r=yt(cx),o=e;o&&!o.isGeoSVGGraphicRoot;)xt(r,o.getLocalTransform(),r),o=o.parent;return Ct(r,r),We(n,n,r),n},t}(px);function yx(e,t,n){for(var r=0;r<e.length;r++)e[r]=bx(e[r],t[r],n)}function bx(e,t,n){for(var r=[],o=t[0],i=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,l=e.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,i=l+=i,r.push([s/n,l/n])}return r}function xx(e,t){return B(F((e=function(e){if(!e.UTF8Encoding)return e;var t=e,n=t.UTF8Scale;return null==n&&(n=1024),O(t.features,function(e){var t=e.geometry,r=t.encodeOffsets,o=t.coordinates;if(r)switch(t.type){case"LineString":t.coordinates=bx(o,r,n);break;case"Polygon":case"MultiLineString":yx(o,r,n);break;case"MultiPolygon":O(o,function(e,t){return yx(e,r[t],n)})}}),t.UTF8Encoding=!1,t}(e)).features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var n=e.properties,r=e.geometry,o=[];switch(r.type){case"Polygon":var i=r.coordinates;o.push(new fx(i[0],i.slice(1)));break;case"MultiPolygon":O(r.coordinates,function(e){e[0]&&o.push(new fx(e[0],e.slice(1)))});break;case"LineString":o.push(new gx([r.coordinates]));break;case"MultiLineString":o.push(new gx(r.coordinates))}var a=new mx(n[t||"name"],o,n.cp);return a.properties=n,a})}var _x=Object.freeze({__proto__:null,linearMap:zo,round:Vo,asc:Ho,getPrecision:Wo,getPrecisionSafe:Go,getPixelPrecision:Uo,getPercentWithPrecision:function(e,t,n){return e[t]&&jo(e,n)[t]||0},MAX_SAFE_INTEGER:qo,remRadian:Xo,isRadianAroundZero:Zo,parseDate:Ko,quantity:Jo,quantityExponent:Qo,nice:ei,quantile:ti,reformIntervals:ni,isNumeric:oi,numericToNumber:ri}),Sx=Object.freeze({__proto__:null,parse:Ko,format:Ed}),Cx=Object.freeze({__proto__:null,extendShape:pc,extendPath:fc,makePath:vc,makeImage:yc,mergePath:xc,resizePath:_c,createIcon:Pc,updateProps:rc,initProps:oc,getTransform:Cc,clipPointsByRect:Ac,clipRectByRect:Dc,registerShape:gc,getShapeClass:mc,Group:Po,Image:_s,Text:Ps,Circle:cu,Ellipse:hu,Sector:Tu,Ring:Iu,Polygon:Pu,Polyline:Nu,Rect:Is,Line:Ou,BezierCurve:Vu,Arc:Wu,IncrementalDisplayable:Qu,CompoundPath:Gu,LinearGradient:ju,RadialGradient:Yu,BoundingRect:Ot}),Mx=Object.freeze({__proto__:null,addCommas:Jd,toCamelCase:Qd,normalizeCssArray:eh,encodeHTML:ot,formatTpl:oh,getTooltipMarker:ih,formatTime:function(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var r=Ko(t),o=n?"getUTC":"get",i=r[o+"FullYear"](),a=r[o+"Month"]()+1,s=r[o+"Date"](),l=r[o+"Hours"](),u=r[o+"Minutes"](),c=r[o+"Seconds"](),d=r[o+"Milliseconds"]();return e.replace("MM",Ld(a,2)).replace("M",a).replace("yyyy",i).replace("yy",Ld(i%100+"",2)).replace("dd",Ld(s,2)).replace("d",s).replace("hh",Ld(l,2)).replace("h",l).replace("mm",Ld(u,2)).replace("m",u).replace("ss",Ld(c,2)).replace("s",c).replace("SSS",Ld(d,3))},capitalFirst:function(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e},truncateText:Ji,getTextRect:function(e,t,n,r,o,i,a,s){return new Ps({style:{text:e,font:t,align:n,verticalAlign:r,padding:o,rich:i,overflow:a?"truncate":null,lineHeight:s}}).getBoundingRect()}}),Tx=Object.freeze({__proto__:null,map:B,each:O,indexOf:L,inherits:N,reduce:z,filter:F,bind:W,curry:G,isArray:U,isString:Y,isObject:Z,isFunction:j,extend:A,defaults:D,clone:T,merge:k}),kx=Ci();function Ix(e,t){var n,r,o=Ax(e,"labels"),i=nx(t);return Dx(o,i)||(j(i)?n=Nx(e,i):(r="auto"===i?function(e){var t=kx(e).autoInterval;return null!=t?t:kx(e).autoInterval=e.calculateCategoryInterval()}(e):i,n=Lx(e,r)),Px(o,i,{labels:n,labelCategoryInterval:r}))}function Ax(e,t){return kx(e)[t]||(kx(e)[t]=[])}function Dx(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function Px(e,t,n){return e.push({key:t,value:n}),n}function Lx(e,t,n){var r=Qb(e),o=e.scale,i=o.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=i[0],c=o.count();0!==u&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var d=rx(e),h=a.get("showMinLabel")||d,p=a.get("showMaxLabel")||d;h&&u!==i[0]&&g(i[0]);for(var f=u;f<=i[1];f+=l)g(f);function g(e){var t={value:e};s.push(n?e:{formattedLabel:r(t),rawLabel:o.getLabel(t),tickValue:e})}return p&&f-l!==i[1]&&g(i[1]),s}function Nx(e,t,n){var r=e.scale,o=Qb(e),i=[];return O(r.getTicks(),function(e){var a=r.getLabel(e),s=e.value;t(e.value,a)&&i.push(n?s:{formattedLabel:o(e),rawLabel:a,tickValue:s})}),i}var Rx=[0,1],Ex=function(){function e(e,t,n){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=n||[0,0]}return e.prototype.contain=function(e){var t=this._extent,n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return e>=n&&e<=r},e.prototype.containData=function(e){return this.scale.contain(e)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(e){return Uo(e||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(e,t){var n=this._extent;n[0]=e,n[1]=t},e.prototype.dataToCoord=function(e,t){var n=this._extent,r=this.scale;return e=r.normalize(e),this.onBand&&"ordinal"===r.type&&Ox(n=n.slice(),r.count()),zo(e,Rx,n,t)},e.prototype.coordToData=function(e,t){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&Ox(n=n.slice(),r.count());var o=zo(e,n,Rx,t);return this.scale.scale(o)},e.prototype.pointToData=function(e,t){},e.prototype.getTicksCoords=function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=B(function(e,t){return"category"===e.type?function(e,t){var n,r,o=Ax(e,"ticks"),i=nx(t),a=Dx(o,i);if(a)return a;if(t.get("show")&&!e.scale.isBlank()||(n=[]),j(i))n=Nx(e,i,!0);else if("auto"===i){var s=Ix(e,e.getLabelModel());r=s.labelCategoryInterval,n=B(s.labels,function(e){return e.tickValue})}else n=Lx(e,r=i,!0);return Px(o,i,{ticks:n,tickCategoryInterval:r})}(e,t):{ticks:B(e.scale.getTicks(),function(e){return e.value})}}(this,t).ticks,function(e){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(e):e),tickValue:e}},this);return function(e,t,n,r){var o=t.length;if(e.onBand&&!n&&o){var i,a,s=e.getExtent();if(1===o)t[0].coord=s[0],i=t[1]={coord:s[1]};else{var l=t[o-1].tickValue-t[0].tickValue,u=(t[o-1].coord-t[0].coord)/l;O(t,function(e){e.coord-=u/2}),a=1+e.scale.getExtent()[1]-t[o-1].tickValue,i={coord:t[o-1].coord+u*a},t.push(i)}var c=s[0]>s[1];d(t[0].coord,s[0])&&(r?t[0].coord=s[0]:t.shift()),r&&d(s[0],t[0].coord)&&t.unshift({coord:s[0]}),d(s[1],i.coord)&&(r?i.coord=s[1]:t.pop()),r&&d(i.coord,s[1])&&t.push({coord:s[1]})}function d(e,t){return e=Vo(e),t=Vo(t),c?e>t:e<t}}(this,n,t.get("alignWithLabel"),e.clamp),n},e.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return e>0&&e<100||(e=5),B(this.scale.getMinorTicks(e),function(e){return B(e,function(e){return{coord:this.dataToCoord(e),tickValue:e}},this)},this)},e.prototype.getViewLabels=function(){return function(e){return"category"===e.type?function(e){var t=e.getLabelModel(),n=Ix(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(e):function(e){var t=e.scale.getTicks(),n=Qb(e);return{labels:B(t,function(t,r){return{level:t.level,formattedLabel:n(t,r),rawLabel:e.scale.getLabel(t),tickValue:t.value}})}}(e)}(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(e[1]-e[0]);return Math.abs(r)/n},e.prototype.calculateCategoryInterval=function(){return function(e){var t=function(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}(e),n=Qb(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,o=e.scale,i=o.getExtent(),a=o.count();if(i[1]-i[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=i[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(r)),d=Math.abs(u*Math.sin(r)),h=0,p=0;l<=i[1];l+=s){var f,g,m=go(n({value:l}),t.font,"center","top");f=1.3*m.width,g=1.3*m.height,h=Math.max(h,f,7),p=Math.max(p,g,7)}var v=h/c,y=p/d;isNaN(v)&&(v=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(v,y))),x=kx(e.model),_=e.getExtent(),w=x.lastAutoInterval,S=x.lastTickCount;return null!=w&&null!=S&&Math.abs(w-b)<=1&&Math.abs(S-a)<=1&&w>b&&x.axisExtent0===_[0]&&x.axisExtent1===_[1]?b=w:(x.lastTickCount=a,x.lastAutoInterval=b,x.axisExtent0=_[0],x.axisExtent1=_[1]),b}(this)},e}();function Ox(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}var Bx=2*Math.PI,zx=$a.CMD,Fx=["top","right","bottom","left"];function Vx(e,t,n,r,o){var i=n.width,a=n.height;switch(e){case"top":r.set(n.x+i/2,n.y-t),o.set(0,-1);break;case"bottom":r.set(n.x+i/2,n.y+a+t),o.set(0,1);break;case"left":r.set(n.x-t,n.y+a/2),o.set(-1,0);break;case"right":r.set(n.x+i+t,n.y+a/2),o.set(1,0)}}function Hx(e,t,n,r,o,i,a,s,l){a-=e,s-=t;var u=Math.sqrt(a*a+s*s),c=(a/=u)*n+e,d=(s/=u)*n+t;if(Math.abs(r-o)%Bx<1e-4)return l[0]=c,l[1]=d,u-n;if(i){var h=r;r=ts(o),o=ts(h)}else r=ts(r),o=ts(o);r>o&&(o+=Bx);var p=Math.atan2(s,a);if(p<0&&(p+=Bx),p>=r&&p<=o||p+Bx>=r&&p+Bx<=o)return l[0]=c,l[1]=d,u-n;var f=n*Math.cos(r)+e,g=n*Math.sin(r)+t,m=n*Math.cos(o)+e,v=n*Math.sin(o)+t,y=(f-a)*(f-a)+(g-s)*(g-s),b=(m-a)*(m-a)+(v-s)*(v-s);return y<b?(l[0]=f,l[1]=g,Math.sqrt(y)):(l[0]=m,l[1]=v,Math.sqrt(b))}function Wx(e,t,n,r,o,i,a,s){var l=o-e,u=i-t,c=n-e,d=r-t,h=Math.sqrt(c*c+d*d),p=(l*(c/=h)+u*(d/=h))/h;s&&(p=Math.min(Math.max(p,0),1)),p*=h;var f=a[0]=e+p*c,g=a[1]=t+p*d;return Math.sqrt((f-o)*(f-o)+(g-i)*(g-i))}function Gx(e,t,n,r,o,i,a){n<0&&(e+=n,n=-n),r<0&&(t+=r,r=-r);var s=e+n,l=t+r,u=a[0]=Math.min(Math.max(o,e),s),c=a[1]=Math.min(Math.max(i,t),l);return Math.sqrt((u-o)*(u-o)+(c-i)*(c-i))}var Ux=[];function jx(e,t,n){var r=Gx(t.x,t.y,t.width,t.height,e.x,e.y,Ux);return n.set(Ux[0],Ux[1]),r}function Yx(e,t,n){for(var r,o,i=0,a=0,s=0,l=0,u=1/0,c=t.data,d=e.x,h=e.y,p=0;p<c.length;){var f=c[p++];1===p&&(s=i=c[p],l=a=c[p+1]);var g=u;switch(f){case zx.M:i=s=c[p++],a=l=c[p++];break;case zx.L:g=Wx(i,a,c[p],c[p+1],d,h,Ux,!0),i=c[p++],a=c[p++];break;case zx.C:g=xn(i,a,c[p++],c[p++],c[p++],c[p++],c[p],c[p+1],d,h,Ux),i=c[p++],a=c[p++];break;case zx.Q:g=Tn(i,a,c[p++],c[p++],c[p],c[p+1],d,h,Ux),i=c[p++],a=c[p++];break;case zx.A:var m=c[p++],v=c[p++],y=c[p++],b=c[p++],x=c[p++],_=c[p++];p+=1;var w=!!(1-c[p++]);r=Math.cos(x)*y+m,o=Math.sin(x)*b+v,p<=1&&(s=r,l=o),g=Hx(m,v,b,x,x+_,w,(d-m)*b/y+m,h,Ux),i=Math.cos(x+_)*y+m,a=Math.sin(x+_)*b+v;break;case zx.R:g=Gx(s=i=c[p++],l=a=c[p++],c[p++],c[p++],d,h,Ux);break;case zx.Z:g=Wx(i,a,s,l,d,h,Ux,!0),i=s,a=l}g<u&&(u=g,n.set(Ux[0],Ux[1]))}return u}var qx=new kt,Xx=new kt,Zx=new kt,$x=new kt,Kx=new kt;function Jx(e,t){if(e){var n=e.getTextGuideLine(),r=e.getTextContent();if(r&&n){var o=e.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],a=o.candidates||Fx,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,u=o.anchor,c=e.getComputedTransform(),d=c&&Ct([],c),h=t.get("length2")||0;u&&Zx.copy(u);for(var p=0;p<a.length;p++){Vx(a[p],0,s,qx,$x),kt.scaleAndAdd(Xx,qx,$x,h),Xx.transform(d);var f=e.getBoundingRect(),g=u?u.distance(Xx):e instanceof ms?Yx(Xx,e.path,Zx):jx(Xx,f,Zx);g<l&&(l=g,Xx.transform(c),Zx.transform(c),Zx.toArray(i[0]),Xx.toArray(i[1]),qx.toArray(i[2]))}t_(i,t.get("minTurnAngle")),n.setShape({points:i})}}}var Qx=[],e_=new kt;function t_(e,t){if(t<=180&&t>0){t=t/180*Math.PI,qx.fromArray(e[0]),Xx.fromArray(e[1]),Zx.fromArray(e[2]),kt.sub($x,qx,Xx),kt.sub(Kx,Zx,Xx);var n=$x.len(),r=Kx.len();if(!(n<.001||r<.001)){$x.scale(1/n),Kx.scale(1/r);var o=$x.dot(Kx);if(Math.cos(t)<o){var i=Wx(Xx.x,Xx.y,Zx.x,Zx.y,qx.x,qx.y,Qx,!1);e_.fromArray(Qx),e_.scaleAndAdd(Kx,i/Math.tan(Math.PI-t));var a=Zx.x!==Xx.x?(e_.x-Xx.x)/(Zx.x-Xx.x):(e_.y-Xx.y)/(Zx.y-Xx.y);if(isNaN(a))return;a<0?kt.copy(e_,Xx):a>1&&kt.copy(e_,Zx),e_.toArray(e[1])}}}}function n_(e,t,n){if(n<=180&&n>0){n=n/180*Math.PI,qx.fromArray(e[0]),Xx.fromArray(e[1]),Zx.fromArray(e[2]),kt.sub($x,Xx,qx),kt.sub(Kx,Zx,Xx);var r=$x.len(),o=Kx.len();if(!(r<.001||o<.001)&&($x.scale(1/r),Kx.scale(1/o),$x.dot(t)<Math.cos(n))){var i=Wx(Xx.x,Xx.y,Zx.x,Zx.y,qx.x,qx.y,Qx,!1);e_.fromArray(Qx);var a=Math.PI/2,s=a+Math.acos(Kx.dot(t))-n;if(s>=a)kt.copy(e_,Zx);else{e_.scaleAndAdd(Kx,i/Math.tan(Math.PI/2-s));var l=Zx.x!==Xx.x?(e_.x-Xx.x)/(Zx.x-Xx.x):(e_.y-Xx.y)/(Zx.y-Xx.y);if(isNaN(l))return;l<0?kt.copy(e_,Xx):l>1&&kt.copy(e_,Zx)}e_.toArray(e[1])}}}function r_(e,t,n,r){var o="normal"===n,i=o?e:e.ensureState(n);i.ignore=t;var a=r.get("smooth");a&&!0===a&&(a=.3),i.shape=i.shape||{},a>0&&(i.shape.smooth=a);var s=r.getModel("lineStyle").getLineStyle();o?e.useStyle(s):i.style=s}function o_(e,t){var n=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var o=ze(r[0],r[1]),i=ze(r[1],r[2]);if(!o||!i)return e.lineTo(r[1][0],r[1][1]),void e.lineTo(r[2][0],r[2][1]);var a=Math.min(o,i)*n,s=He([],r[1],r[0],a/o),l=He([],r[1],r[2],a/i),u=He([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)e.lineTo(r[c][0],r[c][1])}function i_(e,t,n){var r=e.getTextGuideLine(),o=e.getTextContent();if(o){for(var i=t.normal,a=i.get("show"),s=o.ignore,l=0;l<Ks.length;l++){var u=Ks[l],c=t[u],d="normal"===u;if(c){var h=c.get("show");if((d?s:oe(o.states[u]&&o.states[u].ignore,s))||!oe(h,a)){var p=d?r:r&&r.states[u];p&&(p.ignore=!0);continue}r||(r=new Nu,e.setTextGuideLine(r),d||!s&&a||r_(r,!0,"normal",t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),r_(r,!1,u,c)}}if(r){D(r.style,n),r.style.fill=null;var f=i.get("showAbove");(e.textGuideLineConfig=e.textGuideLineConfig||{}).showAbove=f||!1,r.buildPath=o_}}else r&&e.removeTextGuideLine()}function a_(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},r=0;r<$s.length;r++){var o=$s[r];n[o]=e.getModel([o,t])}return n}function s_(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.defaultAttr.ignore){var o=r.label,i=o.getComputedTransform(),a=o.getBoundingRect(),s=!i||i[1]<1e-5&&i[2]<1e-5,l=o.style.margin||0,u=a.clone();u.applyTransform(i),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Ku(a,i):null;t.push({label:o,labelLine:r.labelLine,rect:u,localRect:a,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:i})}}return t}function l_(e,t,n,r,o,i){var a=e.length;if(!(a<2)){e.sort(function(e,n){return e.rect[t]-n.rect[t]});for(var s,l=0,u=!1,c=0,d=0;d<a;d++){var h=e[d],p=h.rect;(s=p[t]-l)<0&&(p[t]-=s,h.label[t]-=s,u=!0),c+=Math.max(-s,0),l=p[t]+p[n]}c>0&&i&&x(-c/a,0,a);var f,g,m=e[0],v=e[a-1];return y(),f<0&&_(-f,.8),g<0&&_(g,.8),y(),b(f,g,1),b(g,f,-1),y(),f<0&&w(-f),g<0&&w(g),u}function y(){f=m.rect[t]-r,g=o-v.rect[t]-v.rect[n]}function b(e,t,n){if(e<0){var r=Math.min(t,-e);if(r>0){x(r*n,0,a);var o=r+e;o<0&&_(-o*n,1)}else _(-e*n,1)}}function x(n,r,o){0!==n&&(u=!0);for(var i=r;i<o;i++){var a=e[i];a.rect[t]+=n,a.label[t]+=n}}function _(r,o){for(var i=[],s=0,l=1;l<a;l++){var u=e[l-1].rect,c=Math.max(e[l].rect[t]-u[t]-u[n],0);i.push(c),s+=c}if(s){var d=Math.min(Math.abs(r)/s,o);if(r>0)for(l=0;l<a-1;l++)x(i[l]*d,0,l+1);else for(l=a-1;l>0;l--)x(-i[l-1]*d,l,a)}}function w(e){var t=e<0?-1:1;e=Math.abs(e);for(var n=Math.ceil(e/(a-1)),r=0;r<a-1;r++)if(t>0?x(n,0,r+1):x(-n,a-r-1,a),(e-=n)<=0)return}}function u_(e,t,n,r){return l_(e,"y","height",t,n,r)}function c_(e){var t=[];e.sort(function(e,t){return t.priority-e.priority});var n=new Ot(0,0,0,0);function r(e){if(!e.ignore){var t=e.ensureState("emphasis");null==t.ignore&&(t.ignore=!1)}e.ignore=!0}for(var o=0;o<e.length;o++){var i=e[o],a=i.axisAligned,s=i.localRect,l=i.transform,u=i.label,c=i.labelLine;n.copy(i.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var d=i.obb,h=!1,p=0;p<t.length;p++){var f=t[p];if(n.intersect(f.rect)){if(a&&f.axisAligned){h=!0;break}if(f.obb||(f.obb=new Ku(f.localRect,f.transform)),d||(d=new Ku(s,l)),d.intersect(f.obb)){h=!0;break}}}h?(r(u),c&&r(c)):(u.attr("ignore",i.defaultAttr.ignore),c&&c.attr("ignore",i.defaultAttr.labelGuideIgnore),t.push(i))}}function d_(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function h_(e,t){var n=e.label,r=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:d_(r&&r.shape.points)}}var p_=["align","verticalAlign","width","height","fontSize"],f_=new lo,g_=Ci(),m_=Ci();function v_(e,t,n){for(var r=0;r<n.length;r++){var o=n[r];null!=t[o]&&(e[o]=t[o])}}var y_=["x","y","rotation"],b_=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(e,t,n,r,o){var i=r.style,a=r.__hostTarget.textConfig||{},s=r.getComputedTransform(),l=r.getBoundingRect().plain();Ot.applyTransform(l,l,s),s?f_.setLocalTransform(s):(f_.x=f_.y=f_.rotation=f_.originX=f_.originY=0,f_.scaleX=f_.scaleY=1),f_.rotation=ts(f_.rotation);var u,c=r.__hostTarget;if(c){u=c.getBoundingRect().plain();var d=c.getComputedTransform();Ot.applyTransform(u,u,d)}var h=u&&c.getTextGuideLine();this._labelList.push({label:r,labelLine:h,seriesModel:n,dataIndex:e,dataType:t,layoutOption:o,computedLayoutOption:null,rect:l,hostRect:u,priority:u?u.width*u.height:0,defaultAttr:{ignore:r.ignore,labelGuideIgnore:h&&h.ignore,x:f_.x,y:f_.y,scaleX:f_.scaleX,scaleY:f_.scaleY,rotation:f_.rotation,style:{x:i.x,y:i.y,align:i.align,verticalAlign:i.verticalAlign,width:i.width,height:i.height,fontSize:i.fontSize},cursor:r.cursor,attachedPos:a.position,attachedRot:a.rotation}})},e.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var n=e.__model,r=n.get("labelLayout");(j(r)||H(r).length)&&e.group.traverse(function(e){if(e.ignore)return!0;var o=e.getTextContent(),i=Us(e);o&&!o.disableLabelLayout&&t._addLabel(i.dataIndex,i.dataType,n,o,r)})},e.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),n=e.getHeight();function r(e,t){return function(){Jx(e,t)}}for(var o=0;o<this._labelList.length;o++){var i=this._labelList[o],a=i.label,s=a.__hostTarget,l=i.defaultAttr,u=void 0;u=(u=j(i.layoutOption)?i.layoutOption(h_(i,s)):i.layoutOption)||{},i.computedLayoutOption=u;var c=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=u.x||null!=u.y?null:l.attachedPos,rotation:null!=u.rotate?u.rotate*c:l.attachedRot,offset:[u.dx||0,u.dy||0]});var d=!1;if(null!=u.x?(a.x=Fo(u.x,t),a.setStyle("x",0),d=!0):(a.x=l.x,a.setStyle("x",l.style.x)),null!=u.y?(a.y=Fo(u.y,n),a.setStyle("y",0),d=!0):(a.y=l.y,a.setStyle("y",l.style.y)),u.labelLinePoints){var h=s.getTextGuideLine();h&&(h.setShape({points:u.labelLinePoints}),d=!1)}g_(a).needsUpdateLabelLine=d,a.rotation=null!=u.rotate?u.rotate*c:l.rotation,a.scaleX=l.scaleX,a.scaleY=l.scaleY;for(var p=0;p<p_.length;p++){var f=p_[p];a.setStyle(f,null!=u[f]?u[f]:l.style[f])}if(u.draggable){if(a.draggable=!0,a.cursor="move",s){var g=i.seriesModel;null!=i.dataIndex&&(g=i.seriesModel.getData(i.dataType).getItemModel(i.dataIndex)),a.on("drag",r(s,g.getModel("labelLine")))}}else a.off("drag"),a.cursor=l.cursor}},e.prototype.layout=function(e){var t=e.getWidth(),n=e.getHeight(),r=s_(this._labelList),o=F(r,function(e){return"shiftX"===e.layoutOption.moveOverlap}),i=F(r,function(e){return"shiftY"===e.layoutOption.moveOverlap});l_(o,"x","width",0,t,undefined),u_(i,0,n),c_(F(r,function(e){return e.layoutOption.hideOverlap}))},e.prototype.processLabelsOverall=function(){var e=this;O(this._chartViewList,function(t){var n=t.__model,r=t.ignoreLabelLineUpdate,o=n.isAnimationEnabled();t.group.traverse(function(t){if(t.ignore&&!t.forceLabelAnimation)return!0;var i=!r,a=t.getTextContent();!i&&a&&(i=g_(a).needsUpdateLabelLine),i&&e._updateLabelLine(t,n),o&&e._animateLabels(t,n)})})},e.prototype._updateLabelLine=function(e,t){var n=e.getTextContent(),r=Us(e),o=r.dataIndex;if(n&&null!=o){var i=t.getData(r.dataType),a=i.getItemModel(o),s={},l=i.getItemVisual(o,"style");if(l){var u=i.getVisual("drawType");s.stroke=l[u]}var c=a.getModel("labelLine");i_(e,a_(a),s),Jx(e,c)}},e.prototype._animateLabels=function(e,t){var n=e.getTextContent(),r=e.getTextGuideLine();if(n&&(e.forceLabelAnimation||!n.ignore&&!n.invisible&&!e.disableLabelAnimation&&!ic(e))){var o=(p=g_(n)).oldLayout,i=Us(e),a=i.dataIndex,s={x:n.x,y:n.y,rotation:n.rotation},l=t.getData(i.dataType);if(o){n.attr(o);var u=e.prevStates;u&&(L(u,"select")>=0&&n.attr(p.oldLayoutSelect),L(u,"emphasis")>=0&&n.attr(p.oldLayoutEmphasis)),rc(n,s,t,a)}else if(n.attr(s),!Kc(n).valueAnimation){var c=oe(n.style.opacity,1);n.style.opacity=0,oc(n,{style:{opacity:c}},t,a)}if(p.oldLayout=s,n.states.select){var d=p.oldLayoutSelect={};v_(d,s,y_),v_(d,n.states.select,y_)}if(n.states.emphasis){var h=p.oldLayoutEmphasis={};v_(h,s,y_),v_(h,n.states.emphasis,y_)}Qc(n,a,l,t,t)}if(r&&!r.ignore&&!r.invisible){o=(p=m_(r)).oldLayout;var p,f={points:r.shape.points};o?(r.attr({shape:o}),rc(r,{shape:f},t)):(r.setShape(f),r.style.strokePercent=0,oc(r,{style:{strokePercent:1}},t)),p.oldLayout=f}},e}(),x_=Ci(),__=Math.sin,w_=Math.cos,S_=Math.PI,C_=2*Math.PI,M_=180/S_,T_=function(){function e(){}return e.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},e.prototype.moveTo=function(e,t){this._add("M",e,t)},e.prototype.lineTo=function(e,t){this._add("L",e,t)},e.prototype.bezierCurveTo=function(e,t,n,r,o,i){this._add("C",e,t,n,r,o,i)},e.prototype.quadraticCurveTo=function(e,t,n,r){this._add("Q",e,t,n,r)},e.prototype.arc=function(e,t,n,r,o,i){this.ellipse(e,t,n,n,0,r,o,i)},e.prototype.ellipse=function(e,t,n,r,o,i,a,s){var l,u=a-i,c=!s,d=Math.abs(u),h=ar(d-C_)||(c?u>=C_:-u>=C_),p=u>0?u%C_:u%C_+C_;l=!!h||!ar(d)&&p>=S_==!!c;var f=e+n*w_(i),g=t+r*__(i);this._start&&this._add("M",f,g);var m=Math.round(o*M_);if(h){var v=1/this._p,y=(c?1:-1)*(C_-v);this._add("A",n,r,m,1,+c,e+n*w_(i+y),t+r*__(i+y)),v>.01&&this._add("A",n,r,m,0,+c,f,g)}else{var b=e+n*w_(a),x=t+r*__(a);this._add("A",n,r,m,+l,+c,b,x)}},e.prototype.rect=function(e,t,n,r){this._add("M",e,t),this._add("l",n,0),this._add("l",0,r),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(e,t,n,r,o,i,a,s,l){for(var u=[],c=this._p,d=1;d<arguments.length;d++){var h=arguments[d];if(isNaN(h))return void(this._invalid=!0);u.push(Math.round(h*c)/c)}this._d.push(e+u.join(" ")),this._start="Z"===e},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),k_="none",I_=Math.round,A_=["lineCap","miterLimit","lineJoin"],D_=B(A_,function(e){return"stroke-"+e.toLowerCase()});var P_="http://www.w3.org/2000/svg",L_="http://www.w3.org/1999/xlink";function N_(e){return document.createElementNS(P_,e)}function R_(e,t,n,r,o){return{tag:e,attrs:n||{},children:r,text:o,key:t}}function E_(e,t){var n=(t=t||{}).newline?"\n":"";return function e(t){var r=t.children,o=t.tag,i=t.attrs,a=t.text;return function(e,t){var n=[];if(t)for(var r in t){var o=t[r],i=r;!1!==o&&(!0!==o&&null!=o&&(i+='="'+o+'"'),n.push(i))}return"<"+e+" "+n.join(" ")+">"}(o,i)+("style"!==o?ot(a):a||"")+(r?""+n+B(r,function(t){return e(t)}).join(n)+n:"")+"</"+o+">"}(e)}function O_(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function B_(e,t,n,r){return R_("svg","root",{width:e,height:t,xmlns:P_,"xmlns:xlink":L_,version:"1.1",baseProfile:"full",viewBox:!!r&&"0 0 "+e+" "+t},n)}var z_={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},F_="transform-origin";function V_(e,t,n){var r=A({},e.shape);A(r,t),e.buildPath(n,r);var o=new T_;return o.reset(mr(e)),n.rebuildPath(o,1),o.generateStr(),o.getStr()}function H_(e,t){var n=t.originX,r=t.originY;(n||r)&&(e[F_]=n+"px "+r+"px")}var W_={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function G_(e,t){var n=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[n]=e,n}function U_(e){return Y(e)?z_[e]?"cubic-bezier("+z_[e]+")":An(e)?e:"":""}function j_(e,t,n,r){var o=e.animators,i=o.length,a=[];if(e instanceof Gu){var s=function(e,t,n){var r,o,i=e.shape.paths,a={};if(O(i,function(e){var t=O_(n.zrId);t.animation=!0,j_(e,{},t,!0);var i=t.cssAnims,s=t.cssNodes,l=H(i),u=l.length;if(u){var c=i[o=l[u-1]];for(var d in c){var h=c[d];a[d]=a[d]||{d:""},a[d].d+=h.d||""}for(var p in s){var f=s[p].animation;f.indexOf(o)>=0&&(r=f)}}}),r){t.d=!1;var s=G_(a,n);return r.replace(o,s)}}(e,t,n);if(s)a.push(s);else if(!i)return}else if(!i)return;for(var l={},u=0;u<i;u++){var c=o[u],d=[c.getMaxTime()/1e3+"s"],h=U_(c.getClip().easing),p=c.getDelay();h?d.push(h):d.push("linear"),p&&d.push(p/1e3+"s"),c.getLoop()&&d.push("infinite");var f=d.join(" ");l[f]=l[f]||[f,[]],l[f][1].push(c)}function g(o){var i,a=o[1],s=a.length,l={},u={},c={},d="animation-timing-function";function h(e,t,n){for(var r=e.getTracks(),o=e.getMaxTime(),i=0;i<r.length;i++){var a=r[i];if(a.needsAnimate()){var s=a.keyframes,l=a.propName;if(n&&(l=n(l)),l)for(var u=0;u<s.length;u++){var c=s[u],h=Math.round(c.time/o*100)+"%",p=U_(c.easing),f=c.rawValue;(Y(f)||X(f))&&(t[h]=t[h]||{},t[h][l]=c.rawValue,p&&(t[h][d]=p))}}}}for(var p=0;p<s;p++)(S=(w=a[p]).targetName)?"shape"===S&&h(w,u):!r&&h(w,l);for(var f in l){var g={};co(g,e),A(g,l[f]);var m=vr(g),v=l[f][d];c[f]=m?{transform:m}:{},H_(c[f],g),v&&(c[f][d]=v)}var y=!0;for(var f in u){c[f]=c[f]||{};var b=!i;v=u[f][d],b&&(i=new $a);var x=i.len();i.reset(),c[f].d=V_(e,u[f],i);var _=i.len();if(!b&&x!==_){y=!1;break}v&&(c[f][d]=v)}if(!y)for(var f in c)delete c[f].d;if(!r)for(p=0;p<s;p++){var w,S;"style"===(S=(w=a[p]).targetName)&&h(w,c,function(e){return W_[e]})}var C,M=H(c),T=!0;for(p=1;p<M.length;p++){var k=M[p-1],I=M[p];if(c[k][F_]!==c[I][F_]){T=!1;break}C=c[k][F_]}if(T&&C){for(var f in c)c[f][F_]&&delete c[f][F_];t[F_]=C}if(F(M,function(e){return H(c[e]).length>0}).length)return G_(c,n)+" "+o[0]+" both"}for(var m in l)(s=g(l[m]))&&a.push(s);if(a.length){var v=n.zrId+"-cls-"+n.cssClassIdx++;n.cssNodes["."+v]={animation:a.join(",")},t.class=v}}var Y_=Math.round;function q_(e){return e&&Y(e.src)}function X_(e){return e&&j(e.toDataURL)}function Z_(e,t,n,r){(function(e,t,n,r){var o=null==t.opacity?1:t.opacity;if(n instanceof _s)e("opacity",o);else{if(function(e){var t=e.fill;return null!=t&&t!==k_}(t)){var i=ir(t.fill);e("fill",i.color);var a=null!=t.fillOpacity?t.fillOpacity*i.opacity*o:i.opacity*o;(r||a<1)&&e("fill-opacity",a)}else e("fill",k_);if(function(e){var t=e.stroke;return null!=t&&t!==k_}(t)){var s=ir(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?n.getLineScale():1,u=l?(t.lineWidth||0)/l:0,c=null!=t.strokeOpacity?t.strokeOpacity*s.opacity*o:s.opacity*o,d=t.strokeFirst;if((r||1!==u)&&e("stroke-width",u),(r||d)&&e("paint-order",d?"stroke":"fill"),(r||c<1)&&e("stroke-opacity",c),t.lineDash){var h=Pm(n),p=h[0],f=h[1];p&&(f=I_(f||0),e("stroke-dasharray",p.join(",")),(f||r)&&e("stroke-dashoffset",f))}else r&&e("stroke-dasharray",k_);for(var g=0;g<A_.length;g++){var m=A_[g];if(r||t[m]!==ps[m]){var v=t[m]||ps[m];v&&e(D_[g],v)}}}else r&&e("stroke",k_)}})(function(o,i){var a="fill"===o||"stroke"===o;a&&fr(i)?iw(t,e,o,r):a&&dr(i)?aw(n,e,o,r):e[o]=i},t,n,!1),function(e,t,n){var r=e.style;if(function(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}(r)){var o=function(e){var t=e.style,n=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}(e),i=n.shadowCache,a=i[o];if(!a){var s=e.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=r.shadowOffsetX||0,d=r.shadowOffsetY||0,h=r.shadowBlur,p=ir(r.shadowColor),f=p.opacity,g=p.color,m=h/2/l+" "+h/2/u;a=n.zrId+"-s"+n.shadowIdx++,n.defs[a]=R_("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[R_("feDropShadow","",{dx:c/l,dy:d/u,stdDeviation:m,"flood-color":g,"flood-opacity":f})]),i[o]=a}t.filter=gr(a)}}(n,e,r)}function $_(e){return ar(e[0]-1)&&ar(e[1])&&ar(e[2])&&ar(e[3]-1)}function K_(e,t,n){if(t&&(!function(e){return ar(e[4])&&ar(e[5])}(t)||!$_(t))){var r=n?10:1e4;e.transform=$_(t)?"translate("+Y_(t[4]*r)/r+" "+Y_(t[5]*r)/r+")":function(e){return"matrix("+sr(e[0])+","+sr(e[1])+","+sr(e[2])+","+sr(e[3])+","+lr(e[4])+","+lr(e[5])+")"}(t)}}function J_(e,t,n){for(var r=e.points,o=[],i=0;i<r.length;i++)o.push(Y_(r[i][0]*n)/n),o.push(Y_(r[i][1]*n)/n);t.points=o.join(" ")}function Q_(e){return!e.smooth}var ew,tw,nw={circle:[(ew=["cx","cy","r"],tw=B(ew,function(e){return"string"==typeof e?[e,e]:e}),function(e,t,n){for(var r=0;r<tw.length;r++){var o=tw[r],i=e[o[0]];null!=i&&(t[o[1]]=Y_(i*n)/n)}})],polyline:[J_,Q_],polygon:[J_,Q_]};function rw(e,t){var n=e.style,r=e.shape,o=nw[e.type],i={},a=t.animation,s="path",l=e.style.strokePercent,u=t.compress&&mr(e)||4;if(!o||t.willUpdate||o[1]&&!o[1](r)||a&&function(e){for(var t=e.animators,n=0;n<t.length;n++)if("shape"===t[n].targetName)return!0;return!1}(e)||l<1){var c=!e.path||e.shapeChanged();e.path||e.createPathProxy();var d=e.path;c&&(d.beginPath(),e.buildPath(d,e.shape),e.pathUpdated());var h=d.getVersion(),p=e,f=p.__svgPathBuilder;p.__svgPathVersion===h&&f&&l===p.__svgPathStrokePercent||(f||(f=p.__svgPathBuilder=new T_),f.reset(u),d.rebuildPath(f,l),f.generateStr(),p.__svgPathVersion=h,p.__svgPathStrokePercent=l),i.d=f.getStr()}else{s=e.type;var g=Math.pow(10,u);o[0](r,i,g)}return K_(i,e.transform),Z_(i,n,e,t),t.animation&&j_(e,i,t),R_(s,e.id+"",i)}function ow(e,t){return e instanceof ms?rw(e,t):e instanceof _s?function(e,t){var n=e.style,r=n.image;if(r&&!Y(r)&&(q_(r)?r=r.src:X_(r)&&(r=r.toDataURL())),r){var o=n.x||0,i=n.y||0,a={href:r,width:n.width,height:n.height};return o&&(a.x=o),i&&(a.y=i),K_(a,e.transform),Z_(a,n,e,t),t.animation&&j_(e,a,t),R_("image",e.id+"",a)}}(e,t):e instanceof ys?function(e,t){var n=e.style,r=n.text;if(null!=r&&(r+=""),r&&!isNaN(n.x)&&!isNaN(n.y)){var o=n.font||l,i=n.x||0,a=function(e,t,n){return"top"===n?e+=t/2:"bottom"===n&&(e-=t/2),e}(n.y||0,yo(o),n.textBaseline),u={"dominant-baseline":"central","text-anchor":ur[n.textAlign]||n.textAlign};if(Bs(n)){var c="",d=n.fontStyle,h=Es(n.fontSize);if(!parseFloat(h))return;var p=n.fontFamily||s,f=n.fontWeight;c+="font-size:"+h+";font-family:"+p+";",d&&"normal"!==d&&(c+="font-style:"+d+";"),f&&"normal"!==f&&(c+="font-weight:"+f+";"),u.style=c}else u.style="font: "+o;return r.match(/\s/)&&(u["xml:space"]="preserve"),i&&(u.x=i),a&&(u.y=a),K_(u,e.transform),Z_(u,n,e,t),t.animation&&j_(e,u,t),R_("text",e.id+"",u,void 0,r)}}(e,t):void 0}function iw(e,t,n,r){var o,i=e[n],a={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(hr(i))o="linearGradient",a.x1=i.x,a.y1=i.y,a.x2=i.x2,a.y2=i.y2;else{if(!pr(i))return;o="radialGradient",a.cx=oe(i.x,.5),a.cy=oe(i.y,.5),a.r=oe(i.r,.5)}for(var s=i.colorStops,l=[],u=0,c=s.length;u<c;++u){var d=100*lr(s[u].offset)+"%",h=ir(s[u].color),p=h.color,f=h.opacity,g={offset:d};g["stop-color"]=p,f<1&&(g["stop-opacity"]=f),l.push(R_("stop",u+"",g))}var m=E_(R_(o,"",a,l)),v=r.gradientCache,y=v[m];y||(y=r.zrId+"-g"+r.gradientIdx++,v[m]=y,a.id=y,r.defs[y]=R_(o,y,a,l)),t[n]=gr(y)}function aw(e,t,n,r){var o,i=e.style[n],a=e.getBoundingRect(),s={},l=i.repeat,u="no-repeat"===l,c="repeat-x"===l,d="repeat-y"===l;if(cr(i)){var h=i.imageWidth,p=i.imageHeight,f=void 0,g=i.image;if(Y(g)?f=g:q_(g)?f=g.src:X_(g)&&(f=g.toDataURL()),"undefined"==typeof Image){var m="Image width/height must been given explictly in svg-ssr renderer.";le(h,m),le(p,m)}else if(null==h||null==p){var v=function(e,t){if(e){var n=e.elm,r=h||t.width,o=p||t.height;"pattern"===e.tag&&(c?(o=1,r/=a.width):d&&(r=1,o/=a.height)),e.attrs.width=r,e.attrs.height=o,n&&(n.setAttribute("width",r),n.setAttribute("height",o))}},y=Xi(f,null,e,function(e){u||v(w,e),v(o,e)});y&&y.width&&y.height&&(h=h||y.width,p=p||y.height)}o=R_("image","img",{href:f,width:h,height:p}),s.width=h,s.height=p}else i.svgElement&&(o=T(i.svgElement),s.width=i.svgWidth,s.height=i.svgHeight);if(o){var b,x;u?b=x=1:c?(x=1,b=s.width/a.width):d?(b=1,x=s.height/a.height):s.patternUnits="userSpaceOnUse",null==b||isNaN(b)||(s.width=b),null==x||isNaN(x)||(s.height=x);var _=vr(i);_&&(s.patternTransform=_);var w=R_("pattern","",s,[o]),S=E_(w),C=r.patternCache,M=C[S];M||(M=r.zrId+"-p"+r.patternIdx++,C[S]=M,s.id=M,w=r.defs[M]=R_("pattern",M,s,[o])),t[n]=gr(M)}}function sw(e,t,n){var r=n.clipPathCache,o=n.defs,i=r[e.id];if(!i){var a={id:i=n.zrId+"-c"+n.clipPathIdx++};r[e.id]=i,o[i]=R_("clipPath",i,a,[rw(e,n)])}t["clip-path"]=gr(i)}function lw(e){return document.createTextNode(e)}function uw(e,t,n){e.insertBefore(t,n)}function cw(e,t){e.removeChild(t)}function dw(e,t){e.appendChild(t)}function hw(e){return e.parentNode}function pw(e){return e.nextSibling}function fw(e,t){e.textContent=t}var gw=R_("","");function mw(e){return void 0===e}function vw(e){return void 0!==e}function yw(e,t,n){for(var r={},o=t;o<=n;++o){var i=e[o].key;void 0!==i&&(r[i]=o)}return r}function bw(e,t){var n=e.key===t.key;return e.tag===t.tag&&n}function xw(e){var t,n=e.children,r=e.tag;if(vw(r)){var o=e.elm=N_(r);if(Sw(gw,e),U(n))for(t=0;t<n.length;++t){var i=n[t];null!=i&&dw(o,xw(i))}else vw(e.text)&&!Z(e.text)&&dw(o,lw(e.text))}else e.elm=lw(e.text);return e.elm}function _w(e,t,n,r,o){for(;r<=o;++r){var i=n[r];null!=i&&uw(e,xw(i),t)}}function ww(e,t,n,r){for(;n<=r;++n){var o=t[n];null!=o&&(vw(o.tag)?cw(hw(o.elm),o.elm):cw(e,o.elm))}}function Sw(e,t){var n,r=t.elm,o=e&&e.attrs||{},i=t.attrs||{};if(o!==i){for(n in i){var a=i[n];o[n]!==a&&(!0===a?r.setAttribute(n,""):!1===a?r.removeAttribute(n):120!==n.charCodeAt(0)?r.setAttribute(n,a):"xmlns:xlink"===n||"xmlns"===n?r.setAttributeNS("http://www.w3.org/2000/xmlns/",n,a):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,a):58===n.charCodeAt(5)?r.setAttributeNS(L_,n,a):r.setAttribute(n,a))}for(n in o)n in i||r.removeAttribute(n)}}function Cw(e,t){var n=t.elm=e.elm,r=e.children,o=t.children;e!==t&&(Sw(e,t),mw(t.text)?vw(r)&&vw(o)?r!==o&&function(e,t,n){for(var r,o,i,a=0,s=0,l=t.length-1,u=t[0],c=t[l],d=n.length-1,h=n[0],p=n[d];a<=l&&s<=d;)null==u?u=t[++a]:null==c?c=t[--l]:null==h?h=n[++s]:null==p?p=n[--d]:bw(u,h)?(Cw(u,h),u=t[++a],h=n[++s]):bw(c,p)?(Cw(c,p),c=t[--l],p=n[--d]):bw(u,p)?(Cw(u,p),uw(e,u.elm,pw(c.elm)),u=t[++a],p=n[--d]):bw(c,h)?(Cw(c,h),uw(e,c.elm,u.elm),c=t[--l],h=n[++s]):(mw(r)&&(r=yw(t,a,l)),mw(o=r[h.key])||(i=t[o]).tag!==h.tag?uw(e,xw(h),u.elm):(Cw(i,h),t[o]=void 0,uw(e,i.elm,u.elm)),h=n[++s]);(a<=l||s<=d)&&(a>l?_w(e,null==n[d+1]?null:n[d+1].elm,n,s,d):ww(e,t,a,l))}(n,r,o):vw(o)?(vw(e.text)&&fw(n,""),_w(n,null,o,0,o.length-1)):vw(r)?ww(n,r,0,r.length-1):vw(e.text)&&fw(n,""):e.text!==t.text&&(vw(r)&&ww(n,r,0,r.length-1),fw(n,t.text)))}var Mw=0,Tw=function(){function e(e,t,n){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=t,this._opts=n=A({},n),this.root=e,this._id="zr"+Mw++,this._oldVNode=B_(n.width,n.height),e&&!n.ssr){var r=this._viewport=document.createElement("div");r.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=N_("svg");Sw(null,this._oldVNode),r.appendChild(o),e.appendChild(r)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",function(e,t){if(bw(e,t))Cw(e,t);else{var n=e.elm,r=hw(n);xw(t),null!==r&&(uw(r,t.elm,pw(n)),ww(r,[e],0,0))}}(this._oldVNode,e),this._oldVNode=e}},e.prototype.renderOneToVNode=function(e){return ow(e,O_(this._id))},e.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),n=this._width,r=this._height,o=O_(this._id);o.animation=e.animation,o.willUpdate=e.willUpdate,o.compress=e.compress;var i=[],a=this._bgVNode=function(e,t,n,r){var o;if(n&&"none"!==n)if(o=R_("rect","bg",{width:e,height:t,x:"0",y:"0",id:"0"}),fr(n))iw({fill:n},o.attrs,"fill",r);else if(dr(n))aw({style:{fill:n},dirty:_e,getBoundingRect:function(){return{width:e,height:t}}},o.attrs,"fill",r);else{var i=ir(n),a=i.color,s=i.opacity;o.attrs.fill=a,s<1&&(o.attrs["fill-opacity"]=s)}return o}(n,r,this._backgroundColor,o);a&&i.push(a);var s=e.compress?null:this._mainVNode=R_("g","main",{},[]);this._paintList(t,o,s?s.children:i),s&&i.push(s);var l=B(H(o.defs),function(e){return o.defs[e]});if(l.length&&i.push(R_("defs","defs",{},l)),e.animation){var u=function(e,t,n){var r=(n=n||{}).newline?"\n":"",o=" {"+r,i=r+"}",a=B(H(e),function(t){return t+o+B(H(e[t]),function(n){return n+":"+e[t][n]+";"}).join(r)+i}).join(r),s=B(H(t),function(e){return"@keyframes "+e+o+B(H(t[e]),function(n){return n+o+B(H(t[e][n]),function(r){var o=t[e][n][r];return"d"===r&&(o='path("'+o+'")'),r+":"+o+";"}).join(r)+i}).join(r)+i}).join(r);return a||s?["<![CDATA[",a,s,"]]>"].join(r):""}(o.cssNodes,o.cssAnims,{newline:!0});if(u){var c=R_("style","stl",{},[],u);i.push(c)}}return B_(n,r,i,e.useViewBox)},e.prototype.renderToString=function(e){return e=e||{},E_(this.renderToVNode({animation:oe(e.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:oe(e.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(e,t,n){for(var r,o,i=e.length,a=[],s=0,l=0,u=0;u<i;u++){var c=e[u];if(!c.invisible){var d=c.__clipPaths,h=d&&d.length||0,p=o&&o.length||0,f=void 0;for(f=Math.max(h-1,p-1);f>=0&&(!d||!o||d[f]!==o[f]);f--);for(var g=p-1;g>f;g--)r=a[--s-1];for(var m=f+1;m<h;m++){var v={};sw(d[m],v,t);var y=R_("g","clip-g-"+l++,v,[]);(r?r.children:n).push(y),a[s++]=y,r=y}o=d;var b=ow(c,t);b&&(r?r.children:n).push(b)}}},e.prototype.resize=function(e,t){var n=this._opts,r=this.root,o=this._viewport;if(null!=e&&(n.width=e),null!=t&&(n.height=t),r&&o&&(o.style.display="none",e=Dm(r,0,n),t=Dm(r,1,n),o.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,o){var i=o.style;i.width=e+"px",i.height=t+"px"}if(dr(this._backgroundColor))this.refresh();else{var a=this._svgDom;a&&(a.setAttribute("width",e),a.setAttribute("height",t));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",e),s.setAttribute("height",t))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(e){var t=this.renderToString(),n="data:image/svg+xml;";return e?(t=yr(t))&&n+"base64,"+t:n+"charset=UTF-8,"+encodeURIComponent(t)},e}();function kw(e,t,n){var r=c.createCanvas(),o=t.getWidth(),i=t.getHeight(),a=r.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=o+"px",a.height=i+"px",r.setAttribute("data-zr-dom-id",e)),r.width=o*n,r.height=i*n,r}var Iw=function(e){function t(t,n,r){var o,i=e.call(this)||this;i.motionBlur=!1,i.lastFrameAlpha=.7,i.dpr=1,i.virtual=!1,i.config={},i.incremental=!1,i.zlevel=0,i.maxRepaintRectCount=5,i.__dirty=!0,i.__firstTimePaint=!0,i.__used=!1,i.__drawIndex=0,i.__startIndex=0,i.__endIndex=0,i.__prevStartIndex=null,i.__prevEndIndex=null,r=r||Qr,"string"==typeof t?o=kw(t,n,r):Z(t)&&(t=(o=t).id),i.id=t,i.dom=o;var a=o.style;return a&&(be(o),o.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),i.painter=n,i.dpr=r,i}return n(t,e),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=kw("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,t,n,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o,i=[],a=this.maxRepaintRectCount,s=!1,l=new Ot(0,0,0,0);function u(e){if(e.isFinite()&&!e.isZero())if(0===i.length)(t=new Ot(0,0,0,0)).copy(e),i.push(t);else{for(var t,n=!1,r=1/0,o=0,u=0;u<i.length;++u){var c=i[u];if(c.intersect(e)){var d=new Ot(0,0,0,0);d.copy(c),d.union(e),i[u]=d,n=!0;break}if(s){l.copy(e),l.union(c);var h=e.width*e.height,p=c.width*c.height,f=l.width*l.height-h-p;f<r&&(r=f,o=u)}}s&&(i[o].union(e),n=!0),n||((t=new Ot(0,0,0,0)).copy(e),i.push(t)),s||(s=i.length>=a)}}for(var c=this.__startIndex;c<this.__endIndex;++c)if(p=e[c]){var d=p.shouldBePainted(n,r,!0,!0);(f=p.__isRendered&&(1&p.__dirty||!d)?p.getPrevPaintRect():null)&&u(f);var h=d&&(1&p.__dirty||!p.__isRendered)?p.getPaintRect():null;h&&u(h)}for(c=this.__prevStartIndex;c<this.__prevEndIndex;++c){var p,f;d=(p=t[c]).shouldBePainted(n,r,!0,!0),!p||d&&p.__zr||!p.__isRendered||(f=p.getPrevPaintRect())&&u(f)}do{for(o=!1,c=0;c<i.length;)if(i[c].isZero())i.splice(c,1);else{for(var g=c+1;g<i.length;)i[c].intersect(i[g])?(o=!0,i[c].union(i[g]),i.splice(g,1)):g++;c++}}while(o);return this._paintRects=i,i},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,t){var n=this.dpr,r=this.dom,o=r.style,i=this.domBack;o&&(o.width=e+"px",o.height=t+"px"),r.width=e*n,r.height=t*n,i&&(i.width=e*n,i.height=t*n,1!==n&&this.ctxBack.scale(n,n))},t.prototype.clear=function(e,t,n){var r=this.dom,o=this.ctx,i=r.width,a=r.height;t=t||this.clearColor;var s=this.motionBlur&&!e,l=this.lastFrameAlpha,u=this.dpr,c=this;s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,i/u,a/u));var d=this.domBack;function h(e,n,r,i){if(o.clearRect(e,n,r,i),t&&"transparent"!==t){var a=void 0;Q(t)?(a=(t.global||t.__width===r&&t.__height===i)&&t.__canvasGradient||Im(o,t,{x:0,y:0,width:r,height:i}),t.__canvasGradient=a,t.__width=r,t.__height=i):ee(t)&&(t.scaleX=t.scaleX||u,t.scaleY=t.scaleY||u,a=zm(o,t,{dirty:function(){c.setUnpainted(),c.__painter.refresh()}})),o.save(),o.fillStyle=a||t,o.fillRect(e,n,r,i),o.restore()}s&&(o.save(),o.globalAlpha=l,o.drawImage(d,e,n,r,i),o.restore())}!n||s?h(0,0,i,a):n.length&&O(n,function(e){h(e.x*u,e.y*u,e.width*u,e.height*u)})},t}(Xe),Aw=1e5,Dw=314159,Pw=.01,Lw=function(){function e(e,t,n,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=A({},n||{}),this.dpr=n.devicePixelRatio||Qr,this._singleCanvas=o,this.root=e,e.style&&(be(e),e.innerHTML=""),this.storage=t;var i=this._zlevelList;this._prevDisplayList=[];var a=this._layers;if(o){var s=e,l=s.width,u=s.height;null!=n.width&&(l=n.width),null!=n.height&&(u=n.height),this.dpr=n.devicePixelRatio||1,s.width=l*this.dpr,s.height=u*this.dpr,this._width=l,this._height=u;var c=new Iw(s,this,this.dpr);c.__builtin__=!0,c.initContext(),a[314159]=c,c.zlevel=Dw,i.push(Dw),this._domRoot=e}else{this._width=Dm(e,0,n),this._height=Dm(e,1,n);var d=this._domRoot=function(e,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);e.appendChild(d)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},e.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),n=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,n,e,this._redrawId);for(var o=0;o<r.length;o++){var i=r[o],a=this._layers[i];if(!a.__builtin__&&a.refresh){var s=0===o?this._backgroundColor:null;a.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(e){var t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){for(var r,o={inHover:!0,viewWidth:this._width,viewHeight:this._height},i=0;i<t;i++){var a=e[i];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(Aw)),r||(r=n.ctx).save(),qm(r,a,o,i===t-1))}r&&r.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(Aw)},e.prototype.paintOne=function(e,t){Ym(e,t)},e.prototype._paintList=function(e,t,n,r){if(this._redrawId===r){n=n||!1,this._updateLayerStatus(e);var o=this._doPaintList(e,t,n),i=o.finished,a=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(e),i)this.eachLayer(function(e){e.afterBrush&&e.afterBrush()});else{var s=this;nn(function(){s._paintList(e,t,n,r)})}}},e.prototype._compositeManually=function(){var e=this.getLayer(Dw).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,n)})},e.prototype._doPaintList=function(e,t,n){for(var r=this,i=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&i.push(u)}for(var c=!0,d=!1,h=function(o){var s,l=i[o],u=l.ctx,h=a&&l.createRepaintRects(e,t,p._width,p._height),f=n?l.__startIndex:l.__drawIndex,g=!n&&l.incremental&&Date.now,m=g&&Date.now(),v=l.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,v,h);else if(f===l.__startIndex){var y=e[f];y.incremental&&y.notClear&&!n||l.clear(!1,v,h)}-1===f&&(console.error("For some unknown reason. drawIndex is -1"),f=l.__startIndex);var b=function(t){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(s=f;s<l.__endIndex;s++){var o=e[s];if(o.__inHover&&(d=!0),r._doPaintEl(o,l,a,t,n,s===l.__endIndex-1),g&&Date.now()-m>15)break}n.prevElClipPaths&&u.restore()};if(h)if(0===h.length)s=l.__endIndex;else for(var x=p.dpr,_=0;_<h.length;++_){var w=h[_];u.save(),u.beginPath(),u.rect(w.x*x,w.y*x,w.width*x,w.height*x),u.clip(),b(w),u.restore()}else u.save(),b(),u.restore();l.__drawIndex=s,l.__drawIndex<l.__endIndex&&(c=!1)},p=this,f=0;f<i.length;f++)h(f);return o.wxa&&O(this._layers,function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()}),{finished:c,needsRefreshHover:d}},e.prototype._doPaintEl=function(e,t,n,r,o,i){var a=t.ctx;if(n){var s=e.getPaintRect();(!r||s&&s.intersect(r))&&(qm(a,e,o,i),e.setPrevPaintRect(s))}else qm(a,e,o,i)},e.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Dw);var n=this._layers[e];return n||((n=new Iw("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?k(n,this._layerConfig[e],!0):this._layerConfig[e-Pw]&&k(n,this._layerConfig[e-Pw],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},e.prototype.insertLayer=function(e,t){var n=this._layers,r=this._zlevelList,o=r.length,i=this._domRoot,a=null,s=-1;if(!n[e]&&function(e){return!!e&&(!!e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)}(t)){if(o>0&&e>r[0]){for(s=0;s<o-1&&!(r[s]<e&&r[s+1]>e);s++);a=n[r[s]]}if(r.splice(s+1,0,e),n[e]=t,!t.virtual)if(a){var l=a.dom;l.nextSibling?i.insertBefore(t.dom,l.nextSibling):i.appendChild(t.dom)}else i.firstChild?i.insertBefore(t.dom,i.firstChild):i.appendChild(t.dom);t.__painter=this}},e.prototype.eachLayer=function(e,t){for(var n=this._zlevelList,r=0;r<n.length;r++){var o=n[r];e.call(t,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(e,t){for(var n=this._zlevelList,r=0;r<n.length;r++){var o=n[r],i=this._layers[o];i.__builtin__&&e.call(t,i,o)}},e.prototype.eachOtherLayer=function(e,t){for(var n=this._zlevelList,r=0;r<n.length;r++){var o=n[r],i=this._layers[o];i.__builtin__||e.call(t,i,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(e){function t(e){i&&(i.__endIndex!==e&&(i.__dirty=!0),i.__endIndex=e)}if(this.eachBuiltinLayer(function(e,t){e.__dirty=e.__used=!1}),this._singleCanvas)for(var n=1;n<e.length;n++)if((s=e[n]).zlevel!==e[n-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}var r,o,i=null,a=0;for(o=0;o<e.length;o++){var s,l=(s=e[o]).zlevel,u=void 0;r!==l&&(r=l,a=0),s.incremental?((u=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,a=1):u=this.getLayer(l+(a>0?Pw:0),this._needsManuallyCompositing),u.__builtin__||M("ZLevel "+l+" has been used by unkown layer "+u.id),u!==i&&(u.__used=!0,u.__startIndex!==o&&(u.__dirty=!0),u.__startIndex=o,u.incremental?u.__drawIndex=-1:u.__drawIndex=o,t(o),i=u),1&s.__dirty&&!s.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=o))}t(o),this.eachBuiltinLayer(function(e,t){!e.__used&&e.getElementCount()>0&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(e){e.clear()},e.prototype.setBackgroundColor=function(e){this._backgroundColor=e,O(this._layers,function(e){e.setUnpainted()})},e.prototype.configLayer=function(e,t){if(t){var n=this._layerConfig;n[e]?k(n[e],t,!0):n[e]=t;for(var r=0;r<this._zlevelList.length;r++){var o=this._zlevelList[r];o!==e&&o!==e+Pw||k(this._layers[o],n[e],!0)}}},e.prototype.delLayer=function(e){var t=this._layers,n=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],n.splice(L(n,e),1))},e.prototype.resize=function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts,o=this.root;if(null!=e&&(r.width=e),null!=t&&(r.height=t),e=Dm(o,0,r),t=Dm(o,1,r),n.style.display="",this._width!==e||t!==this._height){for(var i in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(Dw).resize(e,t)}return this},e.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var t=new Iw("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var n=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,o=t.dom.height;this.eachLayer(function(e){e.__builtin__?n.drawImage(e.dom,0,0,r,o):e.renderToCanvas&&(n.save(),e.renderToCanvas(n),n.restore())})}else for(var i={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),s=0,l=a.length;s<l;s++){var u=a[s];qm(n,u,i,s===l-1)}return t.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}(),Nw=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return n(t,e),t.prototype.getInitialData=function(e){return Qy(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var t=new Po,n=Cm("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);t.add(n),n.setStyle(e.lineStyle);var r=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),i="none"===r?"circle":r,a=.8*e.itemHeight,s=Cm(i,(e.itemWidth-a)/2,(e.itemHeight-a)/2,a,a,e.itemStyle.fill);t.add(s),s.setStyle(e.itemStyle);var l="inherit"===e.iconRotate?o:e.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([e.itemWidth/2,e.itemHeight/2]),i.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),t},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(eg);function Rw(e,t){var n=e.mapDimensionsAll("defaultedLabel"),r=n.length;if(1===r){var o=$p(e,t,n[0]);return null!=o?o+"":null}if(r){for(var i=[],a=0;a<n.length;a++)i.push($p(e,t,n[a]));return i.join(" ")}}function Ew(e,t){var n=e.mapDimensionsAll("defaultedLabel");if(!U(t))return t+"";for(var r=[],o=0;o<n.length;o++){var i=e.getDimensionIndex(n[o]);i>=0&&r.push(t[i])}return r.join(" ")}var Ow=function(e){function t(t,n,r,o){var i=e.call(this)||this;return i.updateData(t,n,r,o),i}return n(t,e),t.prototype._createSymbol=function(e,t,n,r,o){this.removeAll();var i=Cm(e,-1,-1,2,2,null,o);i.attr({z2:100,culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),i.drift=Bw,this._symbolType=e,this.add(i)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){xl(this.childAt(0))},t.prototype.downplay=function(){_l(this.childAt(0))},t.prototype.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},t.prototype.setDraggable=function(e,t){var n=this.childAt(0);n.draggable=e,n.cursor=!t&&e?"move":n.cursor},t.prototype.updateData=function(e,n,r,o){this.silent=!1;var i=e.getItemVisual(n,"symbol")||"circle",a=e.hostModel,s=t.getSymbolSize(e,n),l=i!==this._symbolType,u=o&&o.disableAnimation;if(l){var c=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(i,e,n,s,c)}else{(h=this.childAt(0)).silent=!1;var d={scaleX:s[0]/2,scaleY:s[1]/2};u?h.attr(d):rc(h,d,a,n),uc(h)}if(this._updateCommon(e,n,s,r,o),l){var h=this.childAt(0);u||(d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}},h.scaleX=h.scaleY=0,h.style.opacity=0,oc(h,d,a,n))}u&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,t,n,r,o){var i,a,s,l,u,c,d,h,p,f=this.childAt(0),g=e.hostModel;if(r&&(i=r.emphasisItemStyle,a=r.blurItemStyle,s=r.selectItemStyle,l=r.focus,u=r.blurScope,d=r.labelStatesModels,h=r.hoverScale,p=r.cursorStyle,c=r.emphasisDisabled),!r||e.hasItemOption){var m=r&&r.itemModel?r.itemModel:e.getItemModel(t),v=m.getModel("emphasis");i=v.getModel("itemStyle").getItemStyle(),s=m.getModel(["select","itemStyle"]).getItemStyle(),a=m.getModel(["blur","itemStyle"]).getItemStyle(),l=v.get("focus"),u=v.get("blurScope"),c=v.get("disabled"),d=Gc(m),h=v.getShallow("scale"),p=m.getShallow("cursor")}var y=e.getItemVisual(t,"symbolRotate");f.attr("rotation",(y||0)*Math.PI/180||0);var b=Tm(e.getItemVisual(t,"symbolOffset"),n);b&&(f.x=b[0],f.y=b[1]),p&&f.attr("cursor",p);var x=e.getItemVisual(t,"style"),_=x.fill;if(f instanceof _s){var w=f.style;f.useStyle(A({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},x))}else f.__isEmptyBrush?f.useStyle(A({},x)):f.useStyle(x),f.style.decal=null,f.setColor(_,o&&o.symbolInnerColor),f.style.strokeNoScale=!0;var S=e.getItemVisual(t,"liftZ"),C=this._z2;null!=S?null==C&&(this._z2=f.z2,f.z2+=S):null!=C&&(f.z2=C,this._z2=null);var M=o&&o.useNameLabel;Wc(f,d,{labelFetcher:g,labelDataIndex:t,defaultText:function(t){return M?e.getName(t):Rw(e,t)},inheritColor:_,defaultOpacity:x.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var T=f.ensureState("emphasis");T.style=i,f.ensureState("select").style=s,f.ensureState("blur").style=a;var k=null==h||!0===h?Math.max(1.1,3/this._sizeY):isFinite(h)&&h>0?+h:1;T.scaleX=this._sizeX*k,T.scaleY=this._sizeY*k,this.setSymbolScale(1),Rl(this,l,u,c)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,t,n){var r=this.childAt(0),o=Us(this).dataIndex,i=n&&n.animation;if(this.silent=r.silent=!0,n&&n.fadeLabel){var a=r.getTextContent();a&&ac(a,{style:{opacity:0}},t,{dataIndex:o,removeOpt:i,cb:function(){r.removeTextContent()}})}else r.removeTextContent();ac(r,{style:{opacity:0},scaleX:0,scaleY:0},t,{dataIndex:o,cb:e,removeOpt:i})},t.getSymbolSize=function(e,t){return Mm(e.getItemVisual(t,"symbolSize"))},t}(Po);function Bw(e,t){this.parent.drift(e,t)}function zw(e,t,n,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function Fw(e){return null==e||Z(e)||(e={isIgnore:e}),e||{}}function Vw(e){var t=e.hostModel,n=t.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:Gc(t),cursorStyle:t.get("cursor")}}var Hw=function(){function e(e){this.group=new Po,this._SymbolCtor=e||Ow}return e.prototype.updateData=function(e,t){this._progressiveEls=null,t=Fw(t);var n=this.group,r=e.hostModel,o=this._data,i=this._SymbolCtor,a=t.disableAnimation,s=Vw(e),l={disableAnimation:a},u=t.getSymbolPoint||function(t){return e.getItemLayout(t)};o||n.removeAll(),e.diff(o).add(function(r){var o=u(r);if(zw(e,o,r,t)){var a=new i(e,r,s,l);a.setPosition(o),e.setItemGraphicEl(r,a),n.add(a)}}).update(function(c,d){var h=o.getItemGraphicEl(d),p=u(c);if(zw(e,p,c,t)){var f=e.getItemVisual(c,"symbol")||"circle",g=h&&h.getSymbolType&&h.getSymbolType();if(!h||g&&g!==f)n.remove(h),(h=new i(e,c,s,l)).setPosition(p);else{h.updateData(e,c,s,l);var m={x:p[0],y:p[1]};a?h.attr(m):rc(h,m,r)}n.add(h),e.setItemGraphicEl(c,h)}else n.remove(h)}).remove(function(e){var t=o.getItemGraphicEl(e);t&&t.fadeOut(function(){n.remove(t)},r)}).execute(),this._getSymbolPoint=u,this._data=e},e.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(t,n){var r=e._getSymbolPoint(n);t.setPosition(r),t.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Vw(e),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t,n){function r(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=Fw(n);for(var o=e.start;o<e.end;o++){var i=t.getItemLayout(o);if(zw(t,i,o,n)){var a=new this._SymbolCtor(t,o,this._seriesScope);a.traverse(r),a.setPosition(i),this.group.add(a),t.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.eachRendered=function(e){Bc(this._progressiveEls||this.group,e)},e.prototype.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)},n.hostModel)}):t.removeAll()},e}();function Ww(e,t,n){var r=e.getBaseAxis(),o=e.getOtherAxis(r),i=function(e,t){var n=0,r=e.scale.getExtent();return"start"===t?n=r[0]:"end"===t?n=r[1]:X(t)&&!isNaN(t)?n=t:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}(o,n),a=r.dim,s=o.dim,l=t.mapDimension(s),u=t.mapDimension(a),c="x"===s||"radius"===s?1:0,d=B(e.dimensions,function(e){return t.mapDimension(e)}),h=!1,p=t.getCalculationInfo("stackResultDimension");return Ky(t,d[0])&&(h=!0,d[0]=p),Ky(t,d[1])&&(h=!0,d[1]=p),{dataDimsForPoint:d,valueStart:i,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Gw(e,t,n,r){var o=NaN;e.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(o)&&(o=e.valueStart);var i=e.baseDataOffset,a=[];return a[i]=n.get(e.baseDim,r),a[1-i]=o,t.dataToPoint(a)}var Uw=Math.min,jw=Math.max;function Yw(e,t){return isNaN(e)||isNaN(t)}function qw(e,t,n,r,o,i,a,s,l){for(var u,c,d,h,p,f,g=n,m=0;m<r;m++){var v=t[2*g],y=t[2*g+1];if(g>=o||g<0)break;if(Yw(v,y)){if(l){g+=i;continue}break}if(g===n)e[i>0?"moveTo":"lineTo"](v,y),d=v,h=y;else{var b=v-u,x=y-c;if(b*b+x*x<.5){g+=i;continue}if(a>0){for(var _=g+i,w=t[2*_],S=t[2*_+1];w===v&&S===y&&m<r;)m++,g+=i,w=t[2*(_+=i)],S=t[2*_+1],b=(v=t[2*g])-u,x=(y=t[2*g+1])-c;var C=m+1;if(l)for(;Yw(w,S)&&C<r;)C++,w=t[2*(_+=i)],S=t[2*_+1];var M=.5,T=0,k=0,I=void 0,A=void 0;if(C>=r||Yw(w,S))p=v,f=y;else{T=w-u,k=S-c;var D=v-u,P=w-v,L=y-c,N=S-y,R=void 0,E=void 0;if("x"===s){var O=T>0?1:-1;p=v-O*(R=Math.abs(D))*a,f=y,I=v+O*(E=Math.abs(P))*a,A=y}else if("y"===s){var B=k>0?1:-1;p=v,f=y-B*(R=Math.abs(L))*a,I=v,A=y+B*(E=Math.abs(N))*a}else R=Math.sqrt(D*D+L*L),p=v-T*a*(1-(M=(E=Math.sqrt(P*P+N*N))/(E+R))),f=y-k*a*(1-M),A=y+k*a*M,I=Uw(I=v+T*a*M,jw(w,v)),A=Uw(A,jw(S,y)),I=jw(I,Uw(w,v)),f=y-(k=(A=jw(A,Uw(S,y)))-y)*R/E,p=Uw(p=v-(T=I-v)*R/E,jw(u,v)),f=Uw(f,jw(c,y)),I=v+(T=v-(p=jw(p,Uw(u,v))))*E/R,A=y+(k=y-(f=jw(f,Uw(c,y))))*E/R}e.bezierCurveTo(d,h,p,f,v,y),d=I,h=A}else e.lineTo(v,y)}u=v,c=y,g+=i}return m}var Xw=function(){this.smooth=0,this.smoothConstraint=!0},Zw=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polyline",n}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Xw},t.prototype.buildPath=function(e,t){var n=t.points,r=0,o=n.length/2;if(t.connectNulls){for(;o>0&&Yw(n[2*o-2],n[2*o-1]);o--);for(;r<o&&Yw(n[2*r],n[2*r+1]);r++);}for(;r<o;)r+=qw(e,n,r,o,o,1,t.smooth,t.smoothMonotone,t.connectNulls)+1},t.prototype.getPointOn=function(e,t){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,r,o=this.path.data,i=$a.CMD,a="x"===t,s=[],l=0;l<o.length;){var u=void 0,c=void 0,d=void 0,h=void 0,p=void 0,f=void 0,g=void 0;switch(o[l++]){case i.M:n=o[l++],r=o[l++];break;case i.L:if(u=o[l++],c=o[l++],(g=a?(e-n)/(u-n):(e-r)/(c-r))<=1&&g>=0){var m=a?(c-r)*g+r:(u-n)*g+n;return a?[e,m]:[m,e]}n=u,r=c;break;case i.C:u=o[l++],c=o[l++],d=o[l++],h=o[l++],p=o[l++],f=o[l++];var v=a?vn(n,u,d,p,e,s):vn(r,c,h,f,e,s);if(v>0)for(var y=0;y<v;y++){var b=s[y];if(b<=1&&b>=0)return m=a?gn(r,c,h,f,b):gn(n,u,d,p,b),a?[e,m]:[m,e]}n=p,r=f}}},t}(ms),$w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(Xw),Kw=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-polygon",n}return n(t,e),t.prototype.getDefaultShape=function(){return new $w},t.prototype.buildPath=function(e,t){var n=t.points,r=t.stackedOnPoints,o=0,i=n.length/2,a=t.smoothMonotone;if(t.connectNulls){for(;i>0&&Yw(n[2*i-2],n[2*i-1]);i--);for(;o<i&&Yw(n[2*o],n[2*o+1]);o++);}for(;o<i;){var s=qw(e,n,o,i,i,1,t.smooth,a,t.connectNulls);qw(e,r,o+s-1,s,i,-1,t.stackedOnSmooth,a,t.connectNulls),o+=s+1,e.closePath()}},t}(ms);function Jw(e,t,n,r,o){var i=e.getArea(),a=i.x,s=i.y,l=i.width,u=i.height,c=n.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var d=new Is({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),p=h.isHorizontal(),f=h.inverse;p?(f&&(d.shape.x+=l),d.shape.width=0):(f||(d.shape.y+=u),d.shape.height=0);var g=j(o)?function(e){o(e,d)}:null;oc(d,{shape:{width:l,height:u,x:a,y:s}},n,null,r,g)}return d}function Qw(e,t,n){var r=e.getArea(),o=Vo(r.r0,1),i=Vo(r.r,1),a=new Tu({shape:{cx:Vo(e.cx,1),cy:Vo(e.cy,1),r0:o,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&("angle"===e.getBaseAxis().dim?a.shape.endAngle=r.startAngle:a.shape.r=o,oc(a,{shape:{endAngle:r.endAngle,r:i}},n)),a}function eS(e,t,n,r,o){return e?"polar"===e.type?Qw(e,t,n):"cartesian2d"===e.type?Jw(e,t,n,r,o):null:null}function tS(e,t){return e.type===t}function nS(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}function rS(e){for(var t=1/0,n=1/0,r=-1/0,o=-1/0,i=0;i<e.length;){var a=e[i++],s=e[i++];isNaN(a)||(t=Math.min(a,t),r=Math.max(a,r)),isNaN(s)||(n=Math.min(s,n),o=Math.max(s,o))}return[[t,n],[r,o]]}function oS(e,t){var n=rS(e),r=n[0],o=n[1],i=rS(t),a=i[0],s=i[1];return Math.max(Math.abs(r[0]-a[0]),Math.abs(r[1]-a[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function iS(e){return X(e)?e:e?.5:0}function aS(e,t,n,r){var o=t.getBaseAxis(),i="x"===o.dim||"radius"===o.dim?0:1,a=[],s=0,l=[],u=[],c=[],d=[];if(r){for(s=0;s<e.length;s+=2)isNaN(e[s])||isNaN(e[s+1])||d.push(e[s],e[s+1]);e=d}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),n){case"end":l[i]=c[i],l[1-i]=u[1-i],a.push(l[0],l[1]);break;case"middle":var h=(u[i]+c[i])/2,p=[];l[i]=p[i]=h,l[1-i]=u[1-i],p[1-i]=c[1-i],a.push(l[0],l[1]),a.push(p[0],p[1]);break;default:l[i]=u[i],l[1-i]=c[1-i],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function sS(e,t,n){var r=e.getVisual("visualMeta");if(r&&r.length&&e.count()&&"cartesian2d"===t.type){for(var o,i,a=r.length-1;a>=0;a--){var s=e.getDimensionInfo(r[a].dimension);if("x"===(o=s&&s.coordDim)||"y"===o){i=r[a];break}}if(i){var l=t.getAxis(o),u=B(i.stops,function(e){return{coord:l.toGlobalCoord(l.dataToCoord(e.value)),color:e.color}}),c=u.length,d=i.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),d.reverse());var h=function(e,t){var n,r,o=[],i=e.length;function a(e,t,n){var r=e.coord;return{coord:n,color:Kn((n-r)/(t.coord-r),[e.color,t.color])}}for(var s=0;s<i;s++){var l=e[s],u=l.coord;if(u<0)n=l;else{if(u>t){r?o.push(a(r,l,t)):n&&o.push(a(n,l,0),a(n,l,t));break}n&&(o.push(a(n,l,0)),n=null),o.push(l),r=l}}return o}(u,"x"===o?n.getWidth():n.getHeight()),p=h.length;if(!p&&c)return u[0].coord<0?d[1]?d[1]:u[c-1].color:d[0]?d[0]:u[0].color;var f=h[0].coord-10,g=h[p-1].coord+10,m=g-f;if(m<.001)return"transparent";O(h,function(e){e.offset=(e.coord-f)/m}),h.push({offset:p?h[p-1].offset:.5,color:d[1]||"transparent"}),h.unshift({offset:p?h[0].offset:.5,color:d[0]||"transparent"});var v=new ju(0,0,0,0,h,!0);return v[o]=f,v[o+"2"]=g,v}}}function lS(e,t,n){var r=e.get("showAllSymbol"),o="auto"===r;if(!r||o){var i=n.getAxesByScale("ordinal")[0];if(i&&(!o||!function(e,t){var n=e.getExtent(),r=Math.abs(n[1]-n[0])/e.scale.count();isNaN(r)&&(r=0);for(var o=t.count(),i=Math.max(1,Math.round(o/5)),a=0;a<o;a+=i)if(1.5*Ow.getSymbolSize(t,a)[e.isHorizontal()?1:0]>r)return!1;return!0}(i,t))){var a=t.mapDimension(i.dim),s={};return O(i.getViewLabels(),function(e){var t=i.scale.getRawOrdinalNumber(e.tickValue);s[t]=1}),function(e){return!s.hasOwnProperty(t.get(a,e))}}}}function uS(e,t){return[e[2*t],e[2*t+1]]}function cS(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<$s.length;t++)if(e.get([$s[t],"endLabel","show"]))return!0;return!1}function dS(e,t,n,r){if(tS(t,"cartesian2d")){var o=r.getModel("endLabel"),i=o.get("valueAnimation"),a=r.getData(),s={lastFrameIndex:0},l=cS(r)?function(n,r){e._endLabelOnDuring(n,r,a,s,i,o,t)}:null,u=t.getBaseAxis().isHorizontal(),c=Jw(t,n,r,function(){var t=e._endLabel;t&&n&&null!=s.originalX&&t.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var d=c.shape,h=Math.max(d.width,d.height);u?(d.y-=h,d.height+=2*h):(d.x-=h,d.width+=2*h)}return l&&l(1,c),c}return Qw(t,n,r)}var hS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(){var e=new Po,t=new Hw;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},t.prototype.render=function(e,t,n){var r=this,o=e.coordinateSystem,i=this.group,a=e.getData(),s=e.getModel("lineStyle"),l=e.getModel("areaStyle"),u=a.getLayout("points")||[],c="polar"===o.type,d=this._coordSys,h=this._symbolDraw,p=this._polyline,f=this._polygon,g=this._lineGroup,m=!t.ssr&&e.isAnimationEnabled(),v=!l.isEmpty(),y=l.get("origin"),b=Ww(o,a,y),x=v&&function(e,t,n){if(!n.valueDim)return[];for(var r=t.count(),o=mb(2*r),i=0;i<r;i++){var a=Gw(n,e,t,i);o[2*i]=a[0],o[2*i+1]=a[1]}return o}(o,a,b),_=e.get("showSymbol"),w=e.get("connectNulls"),S=_&&!c&&lS(e,a,o),C=this._data;C&&C.eachItemGraphicEl(function(e,t){e.__temp&&(i.remove(e),C.setItemGraphicEl(t,null))}),_||h.remove(),i.add(g);var M,T=!c&&e.get("step");o&&o.getArea&&e.get("clip",!0)&&(null!=(M=o.getArea()).width?(M.x-=.1,M.y-=.1,M.width+=.2,M.height+=.2):M.r0&&(M.r0-=.5,M.r+=.5)),this._clipShapeForSymbol=M;var k=sS(a,o,n)||a.getVisual("style")[a.getVisual("drawType")];if(p&&d.type===o.type&&T===this._step){v&&!f?f=this._newPolygon(u,x):f&&!v&&(g.remove(f),f=this._polygon=null),c||this._initOrUpdateEndLabel(e,o,ah(k));var I=g.getClipPath();I?oc(I,{shape:dS(this,o,!1,e).shape},e):g.setClipPath(dS(this,o,!0,e)),_&&h.updateData(a,{isIgnore:S,clipShape:M,disableAnimation:!0,getSymbolPoint:function(e){return[u[2*e],u[2*e+1]]}}),nS(this._stackedOnPoints,x)&&nS(this._points,u)||(m?this._doUpdateAnimation(a,x,o,n,T,y,w):(T&&(u=aS(u,o,T,w),x&&(x=aS(x,o,T,w))),p.setShape({points:u}),f&&f.setShape({points:u,stackedOnPoints:x})))}else _&&h.updateData(a,{isIgnore:S,clipShape:M,disableAnimation:!0,getSymbolPoint:function(e){return[u[2*e],u[2*e+1]]}}),m&&this._initSymbolLabelAnimation(a,o,M),T&&(u=aS(u,o,T,w),x&&(x=aS(x,o,T,w))),p=this._newPolyline(u),v?f=this._newPolygon(u,x):f&&(g.remove(f),f=this._polygon=null),c||this._initOrUpdateEndLabel(e,o,ah(k)),g.setClipPath(dS(this,o,!0,e));var A=e.getModel("emphasis"),P=A.get("focus"),L=A.get("blurScope"),N=A.get("disabled");p.useStyle(D(s.getLineStyle(),{fill:"none",stroke:k,lineJoin:"bevel"})),zl(p,e,"lineStyle"),p.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"])&&(p.getState("emphasis").style.lineWidth=+p.style.lineWidth+1),Us(p).seriesIndex=e.seriesIndex,Rl(p,P,L,N);var R=iS(e.get("smooth")),E=e.get("smoothMonotone");if(p.setShape({smooth:R,smoothMonotone:E,connectNulls:w}),f){var O=a.getCalculationInfo("stackedOnSeries"),B=0;f.useStyle(D(l.getAreaStyle(),{fill:k,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),O&&(B=iS(O.get("smooth"))),f.setShape({smooth:R,stackedOnSmooth:B,smoothMonotone:E,connectNulls:w}),zl(f,e,"areaStyle"),Us(f).seriesIndex=e.seriesIndex,Rl(f,P,L,N)}var z=function(e){r._changePolyState(e)};a.eachItemGraphicEl(function(e){e&&(e.onHoverStateChange=z)}),this._polyline.onHoverStateChange=z,this._data=a,this._coordSys=o,this._stackedOnPoints=x,this._points=u,this._step=T,this._valueOrigin=y,e.get("triggerLineEvent")&&(this.packEventData(e,p),f&&this.packEventData(e,f))},t.prototype.packEventData=function(e,t){Us(t).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,t,n,r){var o=e.getData(),i=Si(o,r);if(this._changePolyState("emphasis"),!(i instanceof Array)&&null!=i&&i>=0){var a=o.getLayout("points"),s=o.getItemGraphicEl(i);if(!s){var l=a[2*i],u=a[2*i+1];if(isNaN(l)||isNaN(u))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,u))return;var c=e.get("zlevel")||0,d=e.get("z")||0;(s=new Ow(o,i)).x=l,s.y=u,s.setZ(c,d);var h=s.getSymbolPath().getTextContent();h&&(h.zlevel=c,h.z=d,h.z2=this._polyline.z2+1),s.__temp=!0,o.setItemGraphicEl(i,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else hg.prototype.highlight.call(this,e,t,n,r)},t.prototype.downplay=function(e,t,n,r){var o=e.getData(),i=Si(o,r);if(this._changePolyState("normal"),null!=i&&i>=0){var a=o.getItemGraphicEl(i);a&&(a.__temp?(o.setItemGraphicEl(i,null),this.group.remove(a)):a.downplay())}else hg.prototype.downplay.call(this,e,t,n,r)},t.prototype._changePolyState=function(e){var t=this._polygon;gl(this._polyline,e),t&&gl(t,e)},t.prototype._newPolyline=function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new Zw({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(t),this._polyline=t,t},t.prototype._newPolygon=function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Kw({shape:{points:e,stackedOnPoints:t},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},t.prototype._initSymbolLabelAnimation=function(e,t,n){var r,o,i=t.getBaseAxis(),a=i.inverse;"cartesian2d"===t.type?(r=i.isHorizontal(),o=!1):"polar"===t.type&&(r="angle"===i.dim,o=!0);var s=e.hostModel,l=s.get("animationDuration");j(l)&&(l=l(null));var u=s.get("animationDelay")||0,c=j(u)?u(null):u;e.eachItemGraphicEl(function(e,i){var s=e;if(s){var d=[e.x,e.y],h=void 0,p=void 0,f=void 0;if(n)if(o){var g=n,m=t.pointToCoord(d);r?(h=g.startAngle,p=g.endAngle,f=-m[1]/180*Math.PI):(h=g.r0,p=g.r,f=m[0])}else{var v=n;r?(h=v.x,p=v.x+v.width,f=e.x):(h=v.y+v.height,p=v.y,f=e.y)}var y=p===h?0:(f-h)/(p-h);a&&(y=1-y);var b=j(u)?u(i):l*y+c,x=s.getSymbolPath(),_=x.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),_&&_.animateFrom({style:{opacity:0}},{duration:300,delay:b}),x.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,t,n){var r=e.getModel("endLabel");if(cS(e)){var o=e.getData(),i=this._polyline,a=o.getLayout("points");if(!a)return i.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new Ps({z2:200})).ignoreClip=!0,i.setTextContent(this._endLabel),i.disableLabelAnimation=!0);var l=function(e){for(var t,n,r=e.length/2;r>0&&(t=e[2*r-2],n=e[2*r-1],isNaN(t)||isNaN(n));r--);return r-1}(a);l>=0&&(Wc(i,Gc(e,"endLabel"),{inheritColor:n,labelFetcher:e,labelDataIndex:l,defaultText:function(e,t,n){return null!=n?Ew(o,n):Rw(o,e)},enableTextSetter:!0},function(e,t){var n=t.getBaseAxis(),r=n.isHorizontal(),o=n.inverse,i=r?o?"right":"left":"center",a=r?"middle":o?"top":"bottom";return{normal:{align:e.get("align")||i,verticalAlign:e.get("verticalAlign")||a}}}(r,t)),i.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,t,n,r,o,i,a){var s=this._endLabel,l=this._polyline;if(s){e<1&&null==r.originalX&&(r.originalX=s.x,r.originalY=s.y);var u=n.getLayout("points"),c=n.hostModel,d=c.get("connectNulls"),h=i.get("precision"),p=i.get("distance")||0,f=a.getBaseAxis(),g=f.isHorizontal(),m=f.inverse,v=t.shape,y=m?g?v.x:v.y+v.height:g?v.x+v.width:v.y,b=(g?p:0)*(m?-1:1),x=(g?0:-p)*(m?-1:1),_=g?"x":"y",w=function(e,t,n){for(var r,o,i=e.length/2,a="x"===n?0:1,s=0,l=-1,u=0;u<i;u++)if(o=e[2*u+a],!isNaN(o)&&!isNaN(e[2*u+1-a]))if(0!==u){if(r<=t&&o>=t||r>=t&&o<=t){l=u;break}s=u,r=o}else r=o;return{range:[s,l],t:(t-r)/(o-r)}}(u,y,_),S=w.range,C=S[1]-S[0],M=void 0;if(C>=1){if(C>1&&!d){var T=uS(u,S[0]);s.attr({x:T[0]+b,y:T[1]+x}),o&&(M=c.getRawValue(S[0]))}else{(T=l.getPointOn(y,_))&&s.attr({x:T[0]+b,y:T[1]+x});var k=c.getRawValue(S[0]),I=c.getRawValue(S[1]);o&&(M=Ni(n,h,k,I,w.t))}r.lastFrameIndex=S[0]}else{var A=1===e||r.lastFrameIndex>0?S[0]:0;T=uS(u,A),o&&(M=c.getRawValue(A)),s.attr({x:T[0]+b,y:T[1]+x})}if(o){var D=Kc(s);"function"==typeof D.setLabelText&&D.setLabelText(M)}}},t.prototype._doUpdateAnimation=function(e,t,n,r,o,i,a){var s=this._polyline,l=this._polygon,u=e.hostModel,c=function(e,t,n,r,o,i,a,s){for(var l=function(e,t){var n=[];return t.diff(e).add(function(e){n.push({cmd:"+",idx:e})}).update(function(e,t){n.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){n.push({cmd:"-",idx:e})}).execute(),n}(e,t),u=[],c=[],d=[],h=[],p=[],f=[],g=[],m=Ww(o,t,a),v=e.getLayout("points")||[],y=t.getLayout("points")||[],b=0;b<l.length;b++){var x=l[b],_=!0,w=void 0,S=void 0;switch(x.cmd){case"=":w=2*x.idx,S=2*x.idx1;var C=v[w],M=v[w+1],T=y[S],k=y[S+1];(isNaN(C)||isNaN(M))&&(C=T,M=k),u.push(C,M),c.push(T,k),d.push(n[w],n[w+1]),h.push(r[S],r[S+1]),g.push(t.getRawIndex(x.idx1));break;case"+":var I=x.idx,A=m.dataDimsForPoint,D=o.dataToPoint([t.get(A[0],I),t.get(A[1],I)]);S=2*I,u.push(D[0],D[1]),c.push(y[S],y[S+1]);var P=Gw(m,o,t,I);d.push(P[0],P[1]),h.push(r[S],r[S+1]),g.push(t.getRawIndex(I));break;case"-":_=!1}_&&(p.push(x),f.push(f.length))}f.sort(function(e,t){return g[e]-g[t]});var L=u.length,N=mb(L),R=mb(L),E=mb(L),O=mb(L),B=[];for(b=0;b<f.length;b++){var z=f[b],F=2*b,V=2*z;N[F]=u[V],N[F+1]=u[V+1],R[F]=c[V],R[F+1]=c[V+1],E[F]=d[V],E[F+1]=d[V+1],O[F]=h[V],O[F+1]=h[V+1],B[b]=p[z]}return{current:N,next:R,stackedOnCurrent:E,stackedOnNext:O,status:B}}(this._data,e,this._stackedOnPoints,t,this._coordSys,0,this._valueOrigin),d=c.current,h=c.stackedOnCurrent,p=c.next,f=c.stackedOnNext;if(o&&(d=aS(c.current,n,o,a),h=aS(c.stackedOnCurrent,n,o,a),p=aS(c.next,n,o,a),f=aS(c.stackedOnNext,n,o,a)),oS(d,p)>3e3||l&&oS(h,f)>3e3)return s.stopAnimation(),s.setShape({points:p}),void(l&&(l.stopAnimation(),l.setShape({points:p,stackedOnPoints:f})));s.shape.__points=c.current,s.shape.points=d;var g={shape:{points:p}};c.current!==d&&(g.shape.__points=c.next),s.stopAnimation(),rc(s,g,u),l&&(l.setShape({points:d,stackedOnPoints:h}),l.stopAnimation(),rc(l,{shape:{stackedOnPoints:f}},u),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var m=[],v=c.status,y=0;y<v.length;y++)if("="===v[y].cmd){var b=e.getItemGraphicEl(v[y].idx1);b&&m.push({el:b,ptIdx:y})}s.animators&&s.animators.length&&s.animators[0].during(function(){l&&l.dirtyShape();for(var e=s.shape.__points,t=0;t<m.length;t++){var n=m[t].el,r=2*m[t].ptIdx;n.x=e[r],n.y=e[r+1],n.markRedraw()}})},t.prototype.remove=function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(e,r){e.__temp&&(t.remove(e),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(hg);function pS(e,t){return{seriesType:e,plan:ug(),reset:function(e){var n=e.getData(),r=e.coordinateSystem,o=e.pipelineContext,i=t||o.large;if(r){var a=B(r.dimensions,function(e){return n.mapDimension(e)}).slice(0,2),s=a.length,l=n.getCalculationInfo("stackResultDimension");Ky(n,a[0])&&(a[0]=l),Ky(n,a[1])&&(a[1]=l);var u=n.getStore(),c=n.getDimensionIndex(a[0]),d=n.getDimensionIndex(a[1]);return s&&{progress:function(e,t){for(var n=e.end-e.start,o=i&&mb(n*s),a=[],l=[],h=e.start,p=0;h<e.end;h++){var f=void 0;if(1===s){var g=u.get(c,h);f=r.dataToPoint(g,null,l)}else a[0]=u.get(c,h),a[1]=u.get(d,h),f=r.dataToPoint(a,null,l);i?(o[p++]=f[0],o[p++]=f[1]):t.setItemLayout(h,f.slice())}i&&t.setLayout("points",o)}}}}}}var fS={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},gS=function(e){return Math.round(e.length/2)};function mS(e){return{seriesType:e,reset:function(e,t,n){var r=e.getData(),o=e.get("sampling"),i=e.coordinateSystem,a=r.count();if(a>10&&"cartesian2d"===i.type&&o){var s=i.getBaseAxis(),l=i.getOtherAxis(s),u=s.getExtent(),c=n.getDevicePixelRatio(),d=Math.abs(u[1]-u[0])*(c||1),h=Math.round(a/d);if(isFinite(h)&&h>1){"lttb"===o&&e.setData(r.lttbDownSample(r.mapDimension(l.dim),1/h));var p=void 0;Y(o)?p=fS[o]:j(o)&&(p=o),p&&e.setData(r.downSample(r.mapDimension(l.dim),1/h,p,gS))}}}}}var vS=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.getInitialData=function(e,t){return Qy(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,n){var r=this.coordinateSystem;if(r&&r.clampData){var o=r.clampData(e),i=r.dataToPoint(o);if(n)O(r.getAxes(),function(e,n){if("category"===e.type&&null!=t){var r=e.getTicksCoords(),a=o[n],s="x1"===t[n]||"y1"===t[n];if(s&&(a+=1),r.length<2)return;if(2===r.length)return void(i[n]=e.toGlobalCoord(e.getExtent()[s?1:0]));for(var l=void 0,u=void 0,c=1,d=0;d<r.length;d++){var h=r[d].coord,p=d===r.length-1?r[d-1].tickValue+c:r[d].tickValue;if(p===a){u=h;break}if(p<a)l=h;else if(null!=l&&p>a){u=(h+l)/2;break}1===d&&(c=p-r[0].tickValue)}null==u&&(l?l&&(u=r[r.length-1].coord):u=r[0].coord),i[n]=e.toGlobalCoord(u)}});else{var a=this.getData(),s=a.getLayout("offset"),l=a.getLayout("size"),u=r.getBaseAxis().isHorizontal()?0:1;i[u]+=s+l/2}return i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(eg);eg.registerClass(vS);var yS=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.getInitialData=function(){return Qy(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,n){return n.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=gd(vS.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(vS),bS=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},xS=function(e){function t(t){var n=e.call(this,t)||this;return n.type="sausage",n}return n(t,e),t.prototype.getDefaultShape=function(){return new bS},t.prototype.buildPath=function(e,t){var n=t.cx,r=t.cy,o=Math.max(t.r0||0,0),i=Math.max(t.r,0),a=.5*(i-o),s=o+a,l=t.startAngle,u=t.endAngle,c=t.clockwise,d=2*Math.PI,h=c?u-l<d:l-u<d;h||(l=u-(c?d:-d));var p=Math.cos(l),f=Math.sin(l),g=Math.cos(u),m=Math.sin(u);h?(e.moveTo(p*o+n,f*o+r),e.arc(p*s+n,f*s+r,a,-Math.PI+l,l,!c)):e.moveTo(p*i+n,f*i+r),e.arc(n,r,i,l,u,!c),e.arc(g*s+n,m*s+r,a,u-2*Math.PI,u-Math.PI,!c),0!==o&&e.arc(n,r,o,u,l,c)},t}(ms);function _S(e,t,n){return t*Math.sin(e)*(n?-1:1)}function wS(e,t,n){return t*Math.cos(e)*(n?1:-1)}function SS(e,t,n){var r=e.get("borderRadius");if(null==r)return n?{cornerRadius:0}:null;U(r)||(r=[r,r,r,r]);var o=Math.abs(t.r||0-t.r0||0);return{cornerRadius:B(r,function(e){return bo(e,o)})}}var CS=Math.max,MS=Math.min,TS=function(e){function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return n(t,e),t.prototype.render=function(e,t,n,r){this._model=e,this._removeOnRenderedListener(n),this._updateDrawMode(e);var o=e.get("coordinateSystem");("cartesian2d"===o||"polar"===o)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n,r))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Bc(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,n,r){var o,i=this.group,a=e.getData(),s=this._data,l=e.coordinateSystem,u=l.getBaseAxis();"cartesian2d"===l.type?o=u.isHorizontal():"polar"===l.type&&(o="angle"===u.dim);var c=e.isAnimationEnabled()?e:null,d=function(e,t){var n=e.get("realtimeSort",!0),r=t.getBaseAxis();if(n&&"category"===r.type&&"cartesian2d"===t.type)return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}(e,l);d&&this._enableRealtimeSort(d,a,n);var h=e.get("clip",!0)||d,p=function(e,t){var n=e.getArea&&e.getArea();if(tS(e,"cartesian2d")){var r=e.getBaseAxis();if("category"!==r.type||!r.onBand){var o=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=o,n.width+=2*o):(n.y-=o,n.height+=2*o)}}return n}(l,a);i.removeClipPath();var f=e.get("roundCap",!0),g=e.get("showBackground",!0),m=e.getModel("backgroundStyle"),v=m.get("borderRadius")||0,y=[],b=this._backgroundEls,x=r&&r.isInitSort,_=r&&"changeAxisOrder"===r.type;function w(e){var t=RS[l.type](a,e),n=function(e,t,n){return new("polar"===e.type?Tu:Is)({shape:HS(t,n,e),silent:!0,z2:0})}(l,o,t);return n.useStyle(m.getItemStyle()),"cartesian2d"===l.type?n.setShape("r",v):n.setShape("cornerRadius",v),y[e]=n,n}a.diff(s).add(function(t){var n=a.getItemModel(t),r=RS[l.type](a,t,n);if(g&&w(t),a.hasValue(t)&&NS[l.type](r)){var s=!1;h&&(s=kS[l.type](p,r));var m=IS[l.type](e,a,t,r,o,c,u.model,!1,f);d&&(m.forceLabelAnimation=!0),OS(m,a,t,n,r,e,o,"polar"===l.type),x?m.attr({shape:r}):d?AS(d,c,m,r,t,o,!1,!1):oc(m,{shape:r},e,t),a.setItemGraphicEl(t,m),i.add(m),m.ignore=s}}).update(function(t,n){var r=a.getItemModel(t),S=RS[l.type](a,t,r);if(g){var C=void 0;0===b.length?C=w(n):((C=b[n]).useStyle(m.getItemStyle()),"cartesian2d"===l.type?C.setShape("r",v):C.setShape("cornerRadius",v),y[t]=C);var M=RS[l.type](a,t);rc(C,{shape:HS(o,M,l)},c,t)}var T=s.getItemGraphicEl(n);if(a.hasValue(t)&&NS[l.type](S)){var k=!1;if(h&&(k=kS[l.type](p,S))&&i.remove(T),T?uc(T):T=IS[l.type](e,a,t,S,o,c,u.model,!!T,f),d&&(T.forceLabelAnimation=!0),_){var I=T.getTextContent();if(I){var A=Kc(I);null!=A.prevValue&&(A.prevValue=A.value)}}else OS(T,a,t,r,S,e,o,"polar"===l.type);x?T.attr({shape:S}):d?AS(d,c,T,S,t,o,!0,_):rc(T,{shape:S},e,t,null),a.setItemGraphicEl(t,T),T.ignore=k,i.add(T)}else i.remove(T)}).remove(function(t){var n=s.getItemGraphicEl(t);n&&lc(n,e,t)}).execute();var S=this._backgroundGroup||(this._backgroundGroup=new Po);S.removeAll();for(var C=0;C<y.length;++C)S.add(y[C]);i.add(S),this._backgroundEls=y,this._data=a},t.prototype._renderLarge=function(e,t,n){this._clear(),FS(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),FS(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&eS(e.coordinateSystem,!1,e),n=this.group;t?n.setClipPath(t):n.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,n){var r=this;if(t.count()){var o=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,n),this._isFirstFrame=!1;else{var i=function(e){var n=t.getItemGraphicEl(e),r=n&&n.shape;return r&&Math.abs(o.isHorizontal()?r.height:r.width)||0};this._onRendered=function(){r._updateSortWithinSameData(t,i,o,n)},n.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,n){var r=[];return e.each(e.mapDimension(t.dim),function(e,t){var o=n(t);o=null==o?NaN:o,r.push({dataIndex:t,mappedValue:o,ordinalNumber:e})}),r.sort(function(e,t){return t.mappedValue-e.mappedValue}),{ordinalNumbers:B(r,function(e){return e.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,t,n){for(var r=n.scale,o=e.mapDimension(n.dim),i=Number.MAX_VALUE,a=0,s=r.getOrdinalMeta().categories.length;a<s;++a){var l=e.rawIndexOf(o,r.getRawOrdinalNumber(a)),u=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(u>i)return!0;i=u}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var n=t.scale,r=n.getExtent(),o=Math.max(0,r[0]),i=Math.min(r[1],n.getOrdinalMeta().categories.length-1);o<=i;++o)if(e.ordinalNumbers[o]!==n.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(e,t,n,r){if(this._isOrderChangedWithinSameData(e,t,n)){var o=this._dataSort(e,n,t);this._isOrderDifferentInView(o,n)&&(this._removeOnRenderedListener(r),r.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(e,t,n){var r=t.baseAxis,o=this._dataSort(e,r,function(n){return e.get(e.mapDimension(t.otherAxis.dim),n)});n.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",isInitSort:!0,axisId:r.index,sortInfo:o})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,n=this._data;e&&e.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(t){lc(t,e,Us(t).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(hg),kS={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var o=e.x+e.width,i=e.y+e.height,a=CS(t.x,e.x),s=MS(t.x+t.width,o),l=CS(t.y,e.y),u=MS(t.y+t.height,i),c=s<a,d=u<l;return t.x=c&&a>o?s:a,t.y=d&&l>i?u:l,t.width=c?0:s-a,t.height=d?0:u-l,n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),c||d},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}var o=MS(t.r,e.r),i=CS(t.r0,e.r0);t.r=o,t.r0=i;var a=o-i<0;return n<0&&(r=t.r,t.r=t.r0,t.r0=r),a}},IS={cartesian2d:function(e,t,n,r,o,i,a,s,l){var u=new Is({shape:A({},r),z2:1});return u.__dataIndex=n,u.name="item",i&&(u.shape[o?"height":"width"]=0),u},polar:function(e,t,n,r,o,i,a,s,l){var u=!o&&l?xS:Tu,c=new u({shape:r,z2:1});c.name="item";var d,h,p=ES(o);if(c.calculateTextPosition=(d=p,h=({isRoundCap:u===xS}||{}).isRoundCap,function(e,t,n){var r=t.position;if(!r||r instanceof Array)return xo(e,t,n);var o=d(r),i=null!=t.distance?t.distance:5,a=this.shape,s=a.cx,l=a.cy,u=a.r,c=a.r0,p=(u+c)/2,f=a.startAngle,g=a.endAngle,m=(f+g)/2,v=h?Math.abs(u-c)/2:0,y=Math.cos,b=Math.sin,x=s+u*y(f),_=l+u*b(f),w="left",S="top";switch(o){case"startArc":x=s+(c-i)*y(m),_=l+(c-i)*b(m),w="center",S="top";break;case"insideStartArc":x=s+(c+i)*y(m),_=l+(c+i)*b(m),w="center",S="bottom";break;case"startAngle":x=s+p*y(f)+_S(f,i+v,!1),_=l+p*b(f)+wS(f,i+v,!1),w="right",S="middle";break;case"insideStartAngle":x=s+p*y(f)+_S(f,-i+v,!1),_=l+p*b(f)+wS(f,-i+v,!1),w="left",S="middle";break;case"middle":x=s+p*y(m),_=l+p*b(m),w="center",S="middle";break;case"endArc":x=s+(u+i)*y(m),_=l+(u+i)*b(m),w="center",S="bottom";break;case"insideEndArc":x=s+(u-i)*y(m),_=l+(u-i)*b(m),w="center",S="top";break;case"endAngle":x=s+p*y(g)+_S(g,i+v,!0),_=l+p*b(g)+wS(g,i+v,!0),w="left",S="middle";break;case"insideEndAngle":x=s+p*y(g)+_S(g,-i+v,!0),_=l+p*b(g)+wS(g,-i+v,!0),w="right",S="middle";break;default:return xo(e,t,n)}return(e=e||{}).x=x,e.y=_,e.align=w,e.verticalAlign=S,e}),i){var f=o?"r":"endAngle",g={};c.shape[f]=o?r.r0:r.startAngle,g[f]=r[f],(s?rc:oc)(c,{shape:g},i)}return c}};function AS(e,t,n,r,o,i,a,s){var l,u;i?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(a?rc:oc)(n,{shape:l},t,o,null),(a?rc:oc)(n,{shape:u},t?e.baseAxis.model:null,o)}function DS(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var PS=["x","y","width","height"],LS=["cx","cy","r","startAngle","endAngle"],NS={cartesian2d:function(e){return!DS(e,PS)},polar:function(e){return!DS(e,LS)}},RS={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),o=n?function(e,t){var n=e.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var r=e.get(["itemStyle","borderWidth"])||0,o=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),i=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,o,i)}(n,r):0,i=r.width>0?1:-1,a=r.height>0?1:-1;return{x:r.x+i*o/2,y:r.y+a*o/2,width:r.width-i*o,height:r.height-a*o}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function ES(e){return function(e){var t=e?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(e)}function OS(e,t,n,r,o,i,a,s){var l=t.getItemVisual(n,"style");if(s){if(!i.get("roundCap")){var u=e.shape;A(u,SS(r.getModel("itemStyle"),u,!0)),e.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",c)}e.useStyle(l);var d=r.getShallow("cursor");d&&e.attr("cursor",d);var h=s?a?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":a?o.height>=0?"bottom":"top":o.width>=0?"right":"left",p=Gc(r);Wc(e,p,{labelFetcher:i,labelDataIndex:n,defaultText:Rw(i.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var f=e.getTextContent();if(s&&f){var g=r.get(["label","position"]);e.textConfig.inside="middle"===g||null,function(e,t,n,r){if(X(r))e.setTextConfig({rotation:r});else if(U(t))e.setTextConfig({rotation:0});else{var o,i=e.shape,a=i.clockwise?i.startAngle:i.endAngle,s=i.clockwise?i.endAngle:i.startAngle,l=(a+s)/2,u=n(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":o=l;break;case"startAngle":case"insideStartAngle":o=a;break;case"endAngle":case"insideEndAngle":o=s;break;default:return void e.setTextConfig({rotation:0})}var c=1.5*Math.PI-o;"middle"===u&&c>Math.PI/2&&c<1.5*Math.PI&&(c-=Math.PI),e.setTextConfig({rotation:c})}}(e,"outside"===g?h:g,ES(a),r.get(["label","rotate"]))}Jc(f,p,i.getRawValue(n),function(e){return Ew(t,e)});var m=r.getModel(["emphasis"]);Rl(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),zl(e,r),function(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}(o)&&(e.style.fill="none",e.style.stroke="none",O(e.states,function(e){e.style&&(e.style.fill=e.style.stroke="none")}))}var BS=function(){},zS=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeBar",n}return n(t,e),t.prototype.getDefaultShape=function(){return new BS},t.prototype.buildPath=function(e,t){for(var n=t.points,r=this.baseDimIdx,o=1-this.baseDimIdx,i=[],a=[],s=this.barWidth,l=0;l<n.length;l+=3)a[r]=s,a[o]=n[l+2],i[r]=n[l+r],i[o]=n[l+o],e.rect(i[0],i[1],a[0],a[1])},t}(ms);function FS(e,t,n,r){var o=e.getData(),i=o.getLayout("valueAxisHorizontal")?1:0,a=o.getLayout("largeDataIndices"),s=o.getLayout("size"),l=e.getModel("backgroundStyle"),u=o.getLayout("largeBackgroundPoints");if(u){var c=new zS({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=i,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),n&&n.push(c)}var d=new zS({shape:{points:o.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=i,d.largeDataIndices=a,d.barWidth=s,t.add(d),d.useStyle(o.getVisual("style")),Us(d).seriesIndex=e.seriesIndex,e.get("silent")||(d.on("mousedown",VS),d.on("mousemove",VS)),n&&n.push(d)}var VS=_g(function(e){var t=function(e,t,n){for(var r=e.baseDimIdx,o=1-r,i=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,d=i.length/3;c<d;c++){var h=3*c;if(l[r]=u,l[o]=i[h+2],s[r]=i[h+r],s[o]=i[h+o],l[o]<0&&(s[o]+=l[o],l[o]=-l[o]),t>=s[0]&&t<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return a[c]}return-1}(this,e.offsetX,e.offsetY);Us(this).dataIndex=t>=0?t:null},30,!1);function HS(e,t,n){if(tS(n,"cartesian2d")){var r=t,o=n.getArea();return{x:e?r.x:o.x,y:e?o.y:r.y,width:e?r.width:o.width,height:e?o.height:r.height}}var i=t;return{cx:(o=n.getArea()).cx,cy:o.cy,r0:e?o.r0:i.r0,r:e?o.r:i.r,startAngle:e?i.startAngle:0,endAngle:e?i.endAngle:2*Math.PI}}var WS=2*Math.PI,GS=Math.PI/180;function US(e,t){return ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function jS(e,t){var n=US(e,t),r=e.get("center"),o=e.get("radius");U(o)||(o=[0,o]);var i,a,s=Fo(n.width,t.getWidth()),l=Fo(n.height,t.getHeight()),u=Math.min(s,l),c=Fo(o[0],u/2),d=Fo(o[1],u/2),h=e.coordinateSystem;if(h){var p=h.dataToPoint(r);i=p[0]||0,a=p[1]||0}else U(r)||(r=[r,r]),i=Fo(r[0],s)+n.x,a=Fo(r[1],l)+n.y;return{cx:i,cy:a,r0:c,r:d}}function YS(e,t,n){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension("value"),o=US(e,n),i=jS(e,n),a=i.cx,s=i.cy,l=i.r,u=i.r0,c=-e.get("startAngle")*GS,d=e.get("minAngle")*GS,h=0;t.each(r,function(e){!isNaN(e)&&h++});var p=t.getSum(r),f=Math.PI/(p||h)*2,g=e.get("clockwise"),m=e.get("roseType"),v=e.get("stillShowZeroSum"),y=t.getDataExtent(r);y[0]=0;var b=WS,x=0,_=c,w=g?1:-1;if(t.setLayout({viewRect:o,r:l}),t.each(r,function(e,n){var r;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:a,cy:s,r0:u,r:m?NaN:l});else{(r="area"!==m?0===p&&v?f:e*f:WS/h)<d?(r=d,b-=d):x+=e;var o=_+w*r;t.setItemLayout(n,{angle:r,startAngle:_,endAngle:o,clockwise:g,cx:a,cy:s,r0:u,r:m?zo(e,y,[u,l]):l}),_=o}}),b<WS&&h)if(b<=.001){var S=WS/h;t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n);r.angle=S,r.startAngle=c+w*n*S,r.endAngle=c+w*(n+1)*S}})}else f=b/x,_=c,t.each(r,function(e,n){if(!isNaN(e)){var r=t.getItemLayout(n),o=r.angle===d?d:e*f;r.startAngle=_,r.endAngle=_+w*o,_+=w*o}})})}function qS(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var r=e.getData();r.filterSelf(function(e){for(var t=r.getName(e),o=0;o<n.length;o++)if(!n[o].isSelected(t))return!1;return!0})}}}}var XS=Math.PI/180;function ZS(e,t,n,r,o,i,a,s,l,u){if(!(e.length<2)){for(var c=e.length,d=0;d<c;d++)if("outer"===e[d].position&&"labelLine"===e[d].labelAlignTo){var h=e[d].label.x-u;e[d].linePoints[1][0]+=h,e[d].label.x=u}u_(e,l,l+a)&&function(e){for(var i={list:[],maxY:0},a={list:[],maxY:0},s=0;s<e.length;s++)if("none"===e[s].labelAlignTo){var l=e[s],u=l.label.y>n?a:i,c=Math.abs(l.label.y-n);if(c>=u.maxY){var d=l.label.x-t-l.len2*o,h=r+l.len,f=Math.abs(d)<h?Math.sqrt(c*c/(1-d*d/h/h)):h;u.rB=f,u.maxY=c}u.list.push(l)}p(i),p(a)}(e)}function p(e){for(var i=e.rB,a=i*i,s=0;s<e.list.length;s++){var l=e.list[s],u=Math.abs(l.label.y-n),c=r+l.len,d=c*c,h=Math.sqrt((1-Math.abs(u*u/a))*d),p=t+(h+l.len2)*o,f=p-l.label.x;$S(l,l.targetTextWidth-f*o,!0),l.label.x=p}}}function $S(e,t,n){if(void 0===n&&(n=!1),null==e.labelStyleWidth){var r=e.label,o=r.style,i=e.rect,a=o.backgroundColor,s=o.padding,l=s?s[1]+s[3]:0,u=o.overflow,c=i.width+(a?0:l);if(t<c||n){var d=i.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",a)}else{var p=t-l,f=t<c?p:n?p>e.unconstrainedWidth?null:p:null;r.setStyle("width",f)}var g=r.getBoundingRect();i.width=g.width;var m=(r.style.margin||0)+2.1;i.height=g.height+m,i.y-=(i.height-d)/2}}}function KS(e){return"center"===e.position}var JS=function(e){function t(t,n,r){var o=e.call(this)||this;o.z2=2;var i=new Ps;return o.setTextContent(i),o.updateData(t,n,r,!0),o}return n(t,e),t.prototype.updateData=function(e,t,n,r){var o=this,i=e.hostModel,a=e.getItemModel(t),s=a.getModel("emphasis"),l=e.getItemLayout(t),u=A(SS(a.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))o.setShape(u);else{if(r){o.setShape(u);var c=i.getShallow("animationType");i.ecModel.ssr?(oc(o,{scaleX:0,scaleY:0},i,{dataIndex:t,isFrom:!0}),o.originX=u.cx,o.originY=u.cy):"scale"===c?(o.shape.r=l.r0,oc(o,{shape:{r:l.r}},i,t)):null!=n?(o.setShape({startAngle:n,endAngle:n}),oc(o,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},i,t)):(o.shape.endAngle=l.startAngle,rc(o,{shape:{endAngle:l.endAngle}},i,t))}else uc(o),rc(o,{shape:u},i,t);o.useStyle(e.getItemVisual(t,"style")),zl(o,a);var d=(l.startAngle+l.endAngle)/2,h=i.get("selectedOffset"),p=Math.cos(d)*h,f=Math.sin(d)*h,g=a.getShallow("cursor");g&&o.attr("cursor",g),this._updateLabel(i,e,t),o.ensureState("emphasis").shape=A({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},SS(s.getModel("itemStyle"),l)),A(o.ensureState("select"),{x:p,y:f,shape:SS(a.getModel(["select","itemStyle"]),l)}),A(o.ensureState("blur"),{shape:SS(a.getModel(["blur","itemStyle"]),l)});var m=o.getTextGuideLine(),v=o.getTextContent();m&&A(m.ensureState("select"),{x:p,y:f}),A(v.ensureState("select"),{x:p,y:f}),Rl(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},t.prototype._updateLabel=function(e,t,n){var r=this,o=t.getItemModel(n),i=o.getModel("labelLine"),a=t.getItemVisual(n,"style"),s=a&&a.fill,l=a&&a.opacity;Wc(r,Gc(o),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:l,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var u=r.getTextContent();r.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var c=e.get(["label","position"]);if("outside"!==c&&"outer"!==c)r.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Nu,this.setTextGuideLine(d)),i_(this,a_(o),{stroke:s,opacity:ie(i.get(["lineStyle","opacity"]),l,1)})}},t}(Tu),QS=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return n(t,e),t.prototype.render=function(e,t,n,r){var o,i=e.getData(),a=this._data,s=this.group;if(!a&&i.count()>0){for(var l=i.getItemLayout(0),u=1;isNaN(l&&l.startAngle)&&u<i.count();++u)l=i.getItemLayout(u);l&&(o=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===i.count()&&e.get("showEmptyCircle")){var c=new Tu({shape:jS(e,n)});c.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=c,s.add(c)}i.diff(a).add(function(e){var t=new JS(i,e,o);i.setItemGraphicEl(e,t),s.add(t)}).update(function(e,t){var n=a.getItemGraphicEl(t);n.updateData(i,e,o),n.off("click"),s.add(n),i.setItemGraphicEl(e,n)}).remove(function(t){lc(a.getItemGraphicEl(t),e,t)}).execute(),function(e){var t,n,r=e.getData(),o=[],i=!1,a=(e.get("minShowLabelAngle")||0)*XS,s=r.getLayout("viewRect"),l=r.getLayout("r"),u=s.width,c=s.x,d=s.y,h=s.height;function p(e){e.ignore=!0}r.each(function(e){var s=r.getItemGraphicEl(e),d=s.shape,h=s.getTextContent(),f=s.getTextGuideLine(),g=r.getItemModel(e),m=g.getModel("label"),v=m.get("position")||g.get(["emphasis","label","position"]),y=m.get("distanceToLabelLine"),b=m.get("alignTo"),x=Fo(m.get("edgeDistance"),u),_=m.get("bleedMargin"),w=g.getModel("labelLine"),S=w.get("length");S=Fo(S,u);var C=w.get("length2");if(C=Fo(C,u),Math.abs(d.endAngle-d.startAngle)<a)return O(h.states,p),h.ignore=!0,void(f&&(O(f.states,p),f.ignore=!0));if(function(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}(h)){var M,T,k,I,A=(d.startAngle+d.endAngle)/2,D=Math.cos(A),P=Math.sin(A);t=d.cx,n=d.cy;var L="inside"===v||"inner"===v;if("center"===v)M=d.cx,T=d.cy,I="center";else{var N=(L?(d.r+d.r0)/2*D:d.r*D)+t,R=(L?(d.r+d.r0)/2*P:d.r*P)+n;if(M=N+3*D,T=R+3*P,!L){var E=N+D*(S+l-d.r),B=R+P*(S+l-d.r),z=E+(D<0?-1:1)*C;M="edge"===b?D<0?c+x:c+u-x:z+(D<0?-y:y),T=B,k=[[N,R],[E,B],[z,B]]}I=L?"center":"edge"===b?D>0?"right":"left":D>0?"left":"right"}var F=Math.PI,V=0,H=m.get("rotate");if(X(H))V=H*(F/180);else if("center"===v)V=0;else if("radial"===H||!0===H)V=D<0?-A+F:-A;else if("tangential"===H&&"outside"!==v&&"outer"!==v){var W=Math.atan2(D,P);W<0&&(W=2*F+W),P>0&&(W=F+W),V=W-F}if(i=!!V,h.x=M,h.y=T,h.rotation=V,h.setStyle({verticalAlign:"middle"}),L){h.setStyle({align:I});var G=h.states.select;G&&(G.x+=h.x,G.y+=h.y)}else{var U=h.getBoundingRect().clone();U.applyTransform(h.getComputedTransform());var j=(h.style.margin||0)+2.1;U.y-=j/2,U.height+=j,o.push({label:h,labelLine:f,position:v,len:S,len2:C,minTurnAngle:w.get("minTurnAngle"),maxSurfaceAngle:w.get("maxSurfaceAngle"),surfaceNormal:new kt(D,P),linePoints:k,textAlign:I,labelDistance:y,labelAlignTo:b,edgeDistance:x,bleedMargin:_,rect:U,unconstrainedWidth:U.width,labelStyleWidth:h.style.width})}s.setTextConfig({inside:L})}}),!i&&e.get("avoidLabelOverlap")&&function(e,t,n,r,o,i,a,s){for(var l=[],u=[],c=Number.MAX_VALUE,d=-Number.MAX_VALUE,h=0;h<e.length;h++){var p=e[h].label;KS(e[h])||(p.x<t?(c=Math.min(c,p.x),l.push(e[h])):(d=Math.max(d,p.x),u.push(e[h])))}for(h=0;h<e.length;h++)if(!KS(m=e[h])&&m.linePoints){if(null!=m.labelStyleWidth)continue;p=m.label;var f,g=m.linePoints;f="edge"===m.labelAlignTo?p.x<t?g[2][0]-m.labelDistance-a-m.edgeDistance:a+o-m.edgeDistance-g[2][0]-m.labelDistance:"labelLine"===m.labelAlignTo?p.x<t?c-a-m.bleedMargin:a+o-d-m.bleedMargin:p.x<t?p.x-a-m.bleedMargin:a+o-p.x-m.bleedMargin,m.targetTextWidth=f,$S(m,f)}for(ZS(u,t,n,r,1,0,i,0,s,d),ZS(l,t,n,r,-1,0,i,0,s,c),h=0;h<e.length;h++){var m;if(!KS(m=e[h])&&m.linePoints){p=m.label,g=m.linePoints;var v="edge"===m.labelAlignTo,y=p.style.padding,b=y?y[1]+y[3]:0,x=p.style.backgroundColor?0:b,_=m.rect.width+x,w=g[1][0]-g[2][0];v?p.x<t?g[2][0]=a+m.edgeDistance+_+m.labelDistance:g[2][0]=a+o-m.edgeDistance-_-m.labelDistance:(p.x<t?g[2][0]=p.x+m.labelDistance:g[2][0]=p.x-m.labelDistance,g[1][0]=g[2][0]+w),g[1][1]=g[2][1]=p.y}}}(o,t,n,l,u,h,c,d);for(var f=0;f<o.length;f++){var g=o[f],m=g.label,v=g.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),y&&(O(m.states,p),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(v){var x=g.linePoints;y||!x?(O(v.states,p),v.ignore=!0):(t_(x,g.minTurnAngle),n_(x,g.surfaceNormal,g.maxSurfaceAngle),v.setShape({points:x}),m.__hostTarget.textGuideLineConfig={anchor:new kt(x[0][0],x[0][1])})}}}(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=i)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,o=e[1]-n.cy,i=Math.sqrt(r*r+o*o);return i<=n.r&&i>=n.r0}},t.type="pie",t}(hg);function eC(e,t,n){t=U(t)&&{coordDimensions:t}||A({encodeDefine:e.getEncode()},t);var r=e.getSource(),o=jy(r,t).dimensions,i=new Uy(o,e);return i.initData(r,n),i}var tC=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){return this._getRawData().indexOfName(e)>=0},e.prototype.indexOfName=function(e){return this._getDataWithEncodedVisual().indexOfName(e)},e.prototype.getItemVisual=function(e,t){return this._getDataWithEncodedVisual().getItemVisual(e,t)},e}(),nC=Ci(),rC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new tC(W(this.getData,this),W(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return eC(this,{coordDimensions:["value"],encodeDefaulter:G(Eh,this)})},t.prototype.getDataParams=function(t){var n=this.getData(),r=nC(n),o=r.seats;if(!o){var i=[];n.each(n.mapDimension("value"),function(e){i.push(e)}),o=r.seats=jo(i,n.hostModel.get("percentPrecision"))}var a=e.prototype.getDataParams.call(this,t);return a.percent=o[t]||0,a.$vars.push("percent"),a},t.prototype._defaultLabelLine=function(e){pi(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(eg),oC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return n(t,e),t.prototype.getInitialData=function(e,t){return Qy(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(eg),iC=function(){},aC=function(e){function t(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return n(t,e),t.prototype.getDefaultShape=function(){return new iC},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,t){var n,r=t.points,o=t.size,i=this.symbolProxy,a=i.shape,s=e.getContext?e.getContext():e,l=s&&o[0]<4,u=this.softClipShape;if(l)this._ctx=s;else{for(this._ctx=null,n=this._off;n<r.length;){var c=r[n++],d=r[n++];isNaN(c)||isNaN(d)||u&&!u.contain(c,d)||(a.x=c-o[0]/2,a.y=d-o[1]/2,a.width=o[0],a.height=o[1],i.buildPath(e,a,!0))}this.incremental&&(this._off=n,this.notClear=!0)}},t.prototype.afterBrush=function(){var e,t=this.shape,n=t.points,r=t.size,o=this._ctx,i=this.softClipShape;if(o){for(e=this._off;e<n.length;){var a=n[e++],s=n[e++];isNaN(a)||isNaN(s)||i&&!i.contain(a,s)||o.fillRect(a-r[0]/2,s-r[1]/2,r[0],r[1])}this.incremental&&(this._off=e,this.notClear=!0)}},t.prototype.findDataIndex=function(e,t){for(var n=this.shape,r=n.points,o=n.size,i=Math.max(o[0],4),a=Math.max(o[1],4),s=r.length/2-1;s>=0;s--){var l=2*s,u=r[l]-i/2,c=r[l+1]-a/2;if(e>=u&&t>=c&&e<=u+i&&t<=c+a)return s}return-1},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect();return e=n[0],t=n[1],r.contain(e,t)?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape,n=t.points,r=t.size,o=r[0],i=r[1],a=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<n.length;){var d=n[c++],h=n[c++];a=Math.min(d,a),l=Math.max(d,l),s=Math.min(h,s),u=Math.max(h,u)}e=this._rect=new Ot(a-o/2,s-i/2,l-a+o,u-s+i)}return e},t}(ms),sC=function(){function e(){this.group=new Po}return e.prototype.updateData=function(e,t){this._clear();var n=this._create();n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,t)},e.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(e){if(null!=e.startIndex){var n=2*(e.endIndex-e.startIndex),r=4*e.startIndex*2;t=new Float32Array(t.buffer,r,n)}e.setShape("points",t),e.reset()})},e.prototype.incrementalPrepareUpdate=function(e){this._clear()},e.prototype.incrementalUpdate=function(e,t,n){var r=this._newAdded[0],o=t.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var a=i.length,s=new Float32Array(a+o.length);s.set(i),s.set(o,a),r.endIndex=e.end,r.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=e.start,l.endIndex=e.end,l.incremental=!0,l.setShape({points:o}),this._setCommon(l,t,n)}},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new aC({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},e.prototype._setCommon=function(e,t,n){var r=t.hostModel;n=n||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=n.clipShape||null,e.symbolProxy=Cm(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var i=e.shape.size[0]<4;e.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var a=t.getVisual("style"),s=a&&a.fill;s&&e.setColor(s);var l=Us(e);l.seriesIndex=r.seriesIndex,e.on("mousemove",function(t){l.dataIndex=null;var n=e.hoverDataIdx;n>=0&&(l.dataIndex=n+(e.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),lC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).updateData(r,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var r=e.getData();this._updateSymbolDraw(r,e).incrementalPrepareUpdate(r),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},t.prototype.updateTransform=function(e,t,n){var r=e.getData();if(this.group.dirty(),!this._finished||r.count()>1e4)return{update:!0};var o=pS("").reset(e,t,n);o.progress&&o.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout(r)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},t.prototype._updateSymbolDraw=function(e,t){var n=this._symbolDraw,r=t.pipelineContext.large;return n&&r===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=r?new sC:new Hw,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(hg),uC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(xh),cC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Ii).models[0]},t.type="cartesian2dAxis",t}(xh);R(cC,ix);var dC={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},hC=k({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},dC),pC=k({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},dC),fC={category:hC,value:pC,time:k({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},pC),log:D({logBase:10},pC)},gC={value:1,category:1,time:1,log:1};function mC(e,t,r,o){O(gC,function(i,a){var s=k(k({},fC[a],!0),o,!0),l=function(e){function r(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t+"Axis."+a,n}return n(r,e),r.prototype.mergeDefaultAndTheme=function(e,t){var n=gh(this),r=n?vh(e):{};k(e,t.getTheme().get(a+"Axis")),k(e,this.getDefaultOption()),e.type=vC(e),n&&mh(e,r,n)},r.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=nb.createByAxisModel(this))},r.prototype.getCategories=function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},r.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},r.type=t+"Axis."+a,r.defaultOption=s,r}(r);e.registerComponentModel(l)}),e.registerSubTypeDefaulter(t+"Axis",vC)}function vC(e){return e.type||(e.data?"category":"value")}var yC=function(){function e(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return e.prototype.getAxis=function(e){return this._axes[e]},e.prototype.getAxes=function(){return B(this._dimList,function(e){return this._axes[e]},this)},e.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),F(this.getAxes(),function(t){return t.scale.type===e})},e.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},e}(),bC=["x","y"];function xC(e){return"interval"===e.type||"time"===e.type}var _C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=bC,t}return n(t,e),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,t=this.getAxis("y").scale;if(xC(e)&&xC(t)){var n=e.getExtent(),r=t.getExtent(),o=this.dataToPoint([n[0],r[0]]),i=this.dataToPoint([n[1],r[1]]),a=n[1]-n[0],s=r[1]-r[0];if(a&&s){var l=(i[0]-o[0])/a,u=(i[1]-o[1])/s,c=o[0]-n[0]*l,d=o[1]-r[0]*u,h=this._transform=[l,0,0,u,c,d];this._invTransform=Ct([],h)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,t){var n=this.dataToPoint(e),r=this.dataToPoint(t),o=this.getArea(),i=new Ot(n[0],n[1],r[0]-n[0],r[1]-n[1]);return o.intersect(i)},t.prototype.dataToPoint=function(e,t,n){n=n||[];var r=e[0],o=e[1];if(this._transform&&null!=r&&isFinite(r)&&null!=o&&isFinite(o))return We(n,e,this._transform);var i=this.getAxis("x"),a=this.getAxis("y");return n[0]=i.toGlobalCoord(i.dataToCoord(r,t)),n[1]=a.toGlobalCoord(a.dataToCoord(o,t)),n},t.prototype.clampData=function(e,t){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,o=n.getExtent(),i=r.getExtent(),a=n.parse(e[0]),s=r.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),a),Math.max(o[0],o[1])),t[1]=Math.min(Math.max(Math.min(i[0],i[1]),s),Math.max(i[0],i[1])),t},t.prototype.pointToData=function(e,t){var n=[];if(this._invTransform)return We(n,e,this._invTransform);var r=this.getAxis("x"),o=this.getAxis("y");return n[0]=r.coordToData(r.toLocalCoord(e[0]),t),n[1]=o.coordToData(o.toLocalCoord(e[1]),t),n},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),r=Math.min(t[0],t[1]),o=Math.max(e[0],e[1])-n,i=Math.max(t[0],t[1])-r;return new Ot(n,r,o,i)},t}(yC),wC=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r)||this;return a.index=0,a.type=o||"value",a.position=i||"bottom",a}return n(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},t.prototype.pointToData=function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(Ex);function SC(e,t,n){n=n||{};var r=e.coordinateSystem,o=t.axis,i={},a=o.getAxesOnZeroOf()[0],s=o.position,l=a?"onZero":s,u=o.dim,c=r.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},p=t.get("offset")||0,f="x"===u?[d[2]-p,d[3]+p]:[d[0]-p,d[1]+p];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));f[h.onZero]=Math.max(Math.min(g,f[1]),f[0])}i.position=["y"===u?f[h[l]]:d[0],"x"===u?f[h[l]]:d[3]],i.rotation=Math.PI/2*("x"===u?0:1),i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],i.labelOffset=a?f[h[s]]-f[h.onZero]:0,t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),re(n.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var m=t.get(["axisLabel","rotate"]);return i.labelRotate="top"===l?-m:m,i.z2=1,i}function CC(e){return"cartesian2d"===e.get("coordinateSystem")}function MC(e){var t={xAxisModel:null,yAxisModel:null};return O(t,function(n,r){var o=r.replace(/Model$/,""),i=e.getReferringComponents(o,Ii).models[0];t[r]=i}),t}var TC=Math.log;function kC(e,t,n){var r=pb.prototype,o=r.getTicks.call(n),i=r.getTicks.call(n,!0),a=o.length-1,s=r.getInterval.call(n),l=$b(e,t),u=l.extent,c=l.fixMin,d=l.fixMax;if("log"===e.type){var h=TC(e.base);u=[TC(u[0])/h,TC(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:d});var p=r.getExtent.call(e);c&&(u[0]=p[0]),d&&(u[1]=p[1]);var f=r.getInterval.call(e),g=u[0],m=u[1];if(c&&d)f=(m-g)/a;else if(c)for(m=u[0]+f*a;m<u[1]&&isFinite(m)&&isFinite(u[1]);)f=ib(f),m=u[0]+f*a;else if(d)for(g=u[1]-f*a;g>u[0]&&isFinite(g)&&isFinite(u[0]);)f=ib(f),g=u[1]-f*a;else{e.getTicks().length-1>a&&(f=ib(f));var v=f*a;(g=Vo((m=Math.ceil(u[1]/f)*f)-v))<0&&u[0]>=0?(g=0,m=Vo(v)):m>0&&u[1]<=0&&(m=0,g=-Vo(v))}var y=(o[0].value-i[0].value)/s,b=(o[a].value-i[a].value)/s;r.setExtent.call(e,g+f*y,m+f*b),r.setInterval.call(e,f),(y||b)&&r.setNiceExtent.call(e,g+f,m-f)}var IC=function(){function e(e,t,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=bC,this._initCartesian(e,t,n),this.model=e}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(e,t){var n=this._axesMap;function r(e){var t,n=H(e),r=n.length;if(r){for(var o=[],i=r-1;i>=0;i--){var a=e[+n[i]],s=a.model,l=a.scale;ob(l)&&s.get("alignTicks")&&null==s.get("interval")?o.push(a):(Kb(l,s),ob(l)&&(t=a))}o.length&&(t||Kb((t=o.pop()).scale,t.model),O(o,function(e){kC(e.scale,e.model,t.scale)}))}}this._updateScale(e,this.model),r(n.x),r(n.y);var o={};O(n.x,function(e){DC(n,"y",e,o)}),O(n.y,function(e){DC(n,"x",e,o)}),this.resize(this.model,t)},e.prototype.resize=function(e,t,n){var r=e.getBoxLayoutParams(),o=!n&&e.get("containLabel"),i=ph(r,{width:t.getWidth(),height:t.getHeight()});this._rect=i;var a=this._axesList;function s(){O(a,function(e){var t=e.isHorizontal(),n=t?[0,i.width]:[0,i.height],r=e.inverse?1:0;e.setExtent(n[r],n[1-r]),function(e,t){var n=e.getExtent(),r=n[0]+n[1];e.toGlobalCoord="x"===e.dim?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord="x"===e.dim?function(e){return e-t}:function(e){return r-e+t}}(e,t?i.x:i.y)})}s(),o&&(O(a,function(e){if(!e.model.get(["axisLabel","inside"])){var t=function(e){var t=e.model,n=e.scale;if(t.get(["axisLabel","show"])&&!n.isBlank()){var r,o,i=n.getExtent();o=n instanceof db?n.count():(r=n.getTicks()).length;var a,s=e.getLabelModel(),l=Qb(e),u=1;o>40&&(u=Math.ceil(o/40));for(var c=0;c<o;c+=u){var d=l(r?r[c]:{value:i[0]+c},c),h=tx(s.getTextRect(d),s.get("rotate")||0);a?a.union(h):a=h}return a}}(e);if(t){var n=e.isHorizontal()?"height":"width",r=e.model.get(["axisLabel","margin"]);i[n]-=t[n]+r,"top"===e.position?i.y+=t.height+r:"left"===e.position&&(i.x+=t.width+r)}}}),s()),O(this._coordsList,function(e){e.calcAffineTransform()})},e.prototype.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n)return n[t||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(e,t){if(null!=e&&null!=t){var n="x"+e+"y"+t;return this._coordsMap[n]}Z(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var r=0,o=this._coordsList;r<o.length;r++)if(o[r].getAxis("x").index===e||o[r].getAxis("y").index===t)return o[r]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(e,t,n){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(e,t,n){var r=this._findConvertTarget(t);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(e){var t,n,r=e.seriesModel,o=e.xAxisModel||r&&r.getReferringComponents("xAxis",Ii).models[0],i=e.yAxisModel||r&&r.getReferringComponents("yAxis",Ii).models[0],a=e.gridModel,s=this._coordsList;return r?L(s,t=r.coordinateSystem)<0&&(t=null):o&&i?t=this.getCartesian(o.componentIndex,i.componentIndex):o?n=this.getAxis("x",o.componentIndex):i?n=this.getAxis("y",i.componentIndex):a&&a.coordinateSystem===this&&(t=this._coordsList[0]),{cartesian:t,axis:n}},e.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},e.prototype._initCartesian=function(e,t,n){var r=this,o=this,i={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},s={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!s.x||!s.y)return this._axesMap={},void(this._axesList=[]);function l(t){return function(n,r){if(AC(n,e)){var l=n.get("position");"x"===t?"top"!==l&&"bottom"!==l&&(l=i.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=i.left?"right":"left"),i[l]=!0;var u=new wC(t,Jb(n),[0,0],n.get("type"),l),c="category"===u.type;u.onBand=c&&n.get("boundaryGap"),u.inverse=n.get("inverse"),n.axis=u,u.model=n,u.grid=o,u.index=r,o._axesList.push(u),a[t][r]=u,s[t]++}}}this._axesMap=a,O(a.x,function(t,n){O(a.y,function(o,i){var a="x"+n+"y"+i,s=new _C(a);s.master=r,s.model=e,r._coordsMap[a]=s,r._coordsList.push(s),s.addAxis(t),s.addAxis(o)})})},e.prototype._updateScale=function(e,t){function n(e,t){O(ox(e,t.dim),function(n){t.scale.unionExtentFromData(e,n)})}O(this._axesList,function(e){if(e.scale.setExtent(1/0,-1/0),"category"===e.type){var t=e.model.get("categorySortInfo");e.scale.setSortInfo(t)}}),e.eachSeries(function(e){if(CC(e)){var r=MC(e),o=r.xAxisModel,i=r.yAxisModel;if(!AC(o,t)||!AC(i,t))return;var a=this.getCartesian(o.componentIndex,i.componentIndex),s=e.getData(),l=a.getAxis("x"),u=a.getAxis("y");n(s,l),n(s,u)}},this)},e.prototype.getTooltipAxes=function(e){var t=[],n=[];return O(this.getCartesians(),function(r){var o=null!=e&&"auto"!==e?r.getAxis(e):r.getBaseAxis(),i=r.getOtherAxis(o);L(t,o)<0&&t.push(o),L(n,i)<0&&n.push(i)}),{baseAxes:t,otherAxes:n}},e.create=function(t,n){var r=[];return t.eachComponent("grid",function(o,i){var a=new e(o,t,n);a.name="grid_"+i,a.resize(o,n,!0),o.coordinateSystem=a,r.push(a)}),t.eachSeries(function(e){if(CC(e)){var t=MC(e),n=t.xAxisModel,r=t.yAxisModel,o=n.getCoordSysModel().coordinateSystem;e.coordinateSystem=o.getCartesian(n.componentIndex,r.componentIndex)}}),r},e.dimensions=bC,e}();function AC(e,t){return e.getCoordSysModel()===t}function DC(e,t,n,r){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,i=e[t],a=n.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(s){if(null!=l)PC(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&PC(i[u])&&!r[c(i[u])]){o=i[u];break}o&&(r[c(o)]=!0)}function c(e){return e.dim+"_"+e.index}}function PC(e){return e&&"category"!==e.type&&"time"!==e.type&&function(e){var t=e.scale.getExtent(),n=t[0],r=t[1];return!(n>0&&r>0||n<0&&r<0)}(e)}var LC=Math.PI,NC=function(){function e(e,t){this.group=new Po,this.opt=t,this.axisModel=e,D(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Po({x:t.position[0],y:t.position[1],rotation:t.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(e){return!!RC[e]},e.prototype.add=function(e){RC[e](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(e,t,n){var r,o,i=Xo(t-e);return Zo(i)?(o=n>0?"top":"bottom",r="center"):Zo(i-LC)?(o=n>0?"bottom":"top",r="center"):(o="middle",r=i>0&&i<LC?n>0?"right":"left":n>0?"left":"right"),{rotation:i,textAlign:r,textVerticalAlign:o}},e.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},e.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},e}(),RC={axisLine:function(e,t,n,r){var o=t.get(["axisLine","show"]);if("auto"===o&&e.handleAutoShown&&(o=e.handleAutoShown("axisLine")),o){var i=t.axis.getExtent(),a=r.transform,s=[i[0],0],l=[i[1],0],u=s[0]>l[0];a&&(We(s,s,a),We(l,l,a));var c=A({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new Ou({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});wc(d.shape,d.style.lineWidth),d.anid="line",n.add(d);var h=t.get(["axisLine","symbol"]);if(null!=h){var p=t.get(["axisLine","symbolSize"]);Y(h)&&(h=[h,h]),(Y(p)||X(p))&&(p=[p,p]);var f=Tm(t.get(["axisLine","symbolOffset"])||0,p),g=p[0],m=p[1];O([{rotate:e.rotation+Math.PI/2,offset:f[0],r:0},{rotate:e.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(t,r){if("none"!==h[r]&&null!=h[r]){var o=Cm(h[r],-g/2,-m/2,g,m,c.stroke,!0),i=t.r+t.offset,a=u?l:s;o.attr({rotation:t.rotate,x:a[0]+i*Math.cos(e.rotation),y:a[1]-i*Math.sin(e.rotation),silent:!0,z2:11}),n.add(o)}})}}},axisTickLabel:function(e,t,n,r){var o=function(e,t,n,r){var o=n.axis,i=n.getModel("axisTick"),a=i.get("show");if("auto"===a&&r.handleAutoShown&&(a=r.handleAutoShown("axisTick")),a&&!o.scale.isBlank()){for(var s=i.getModel("lineStyle"),l=r.tickDirection*i.get("length"),u=zC(o.getTicksCoords(),t.transform,l,D(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),c=0;c<u.length;c++)e.add(u[c]);return u}}(n,r,t,e),i=function(e,t,n,r){var o=n.axis;if(re(r.axisLabelShow,n.get(["axisLabel","show"]))&&!o.scale.isBlank()){var i=n.getModel("axisLabel"),a=i.get("margin"),s=o.getViewLabels(),l=(re(r.labelRotate,i.get("rotate"))||0)*LC/180,u=NC.innerTextLayout(r.rotation,l,r.labelDirection),c=n.getCategories&&n.getCategories(!0),d=[],h=NC.isLabelSilent(n),p=n.get("triggerEvent");return O(s,function(s,l){var f="ordinal"===o.scale.type?o.scale.getRawOrdinalNumber(s.tickValue):s.tickValue,g=s.formattedLabel,m=s.rawLabel,v=i;if(c&&c[f]){var y=c[f];Z(y)&&y.textStyle&&(v=new hd(y.textStyle,i,n.ecModel))}var b=v.getTextColor()||n.get(["axisLine","lineStyle","color"]),x=o.dataToCoord(f),_=new Ps({x:x,y:r.labelOffset+r.labelDirection*a,rotation:u.rotation,silent:h,z2:10+(s.level||0),style:Uc(v,{text:g,align:v.getShallow("align",!0)||u.textAlign,verticalAlign:v.getShallow("verticalAlign",!0)||v.getShallow("baseline",!0)||u.textVerticalAlign,fill:j(b)?b("category"===o.type?m:"value"===o.type?f+"":f,l):b})});if(_.anid="label_"+f,p){var w=NC.makeAxisEventDataBase(n);w.targetType="axisLabel",w.value=m,w.tickIndex=l,"category"===o.type&&(w.dataIndex=f),Us(_).eventData=w}t.add(_),_.updateTransform(),d.push(_),e.add(_),_.decomposeTransform()}),d}}(n,r,t,e);(function(e,t,n){if(!rx(e.axis)){var r=e.get(["axisLabel","showMinLabel"]),o=e.get(["axisLabel","showMaxLabel"]);n=n||[];var i=(t=t||[])[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=n[0],c=n[1],d=n[n.length-1],h=n[n.length-2];!1===r?(EC(i),EC(u)):OC(i,a)&&(r?(EC(a),EC(c)):(EC(i),EC(u))),!1===o?(EC(s),EC(d)):OC(l,s)&&(o?(EC(l),EC(h)):(EC(s),EC(d)))}})(t,i,o),function(e,t,n,r){var o=n.axis,i=n.getModel("minorTick");if(i.get("show")&&!o.scale.isBlank()){var a=o.getMinorTicksCoords();if(a.length)for(var s=i.getModel("lineStyle"),l=r*i.get("length"),u=D(s.getLineStyle(),D(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var d=zC(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<d.length;h++)e.add(d[h])}}(n,r,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])&&c_(s_(B(i,function(e){return{label:e,priority:e.z2,defaultAttr:{ignore:e.ignore}}})))},axisName:function(e,t,n,r){var o=re(e.axisName,t.get("name"));if(o){var i,a,s=t.get("nameLocation"),l=e.nameDirection,u=t.getModel("nameTextStyle"),c=t.get("nameGap")||0,d=t.axis.getExtent(),h=d[0]>d[1]?-1:1,p=["start"===s?d[0]-h*c:"end"===s?d[1]+h*c:(d[0]+d[1])/2,BC(s)?e.labelOffset+l*c:0],f=t.get("nameRotate");null!=f&&(f=f*LC/180),BC(s)?i=NC.innerTextLayout(e.rotation,null!=f?f:e.rotation,l):(i=function(e,t,n,r){var o,i,a=Xo(n-e),s=r[0]>r[1],l="start"===t&&!s||"start"!==t&&s;return Zo(a-LC/2)?(i=l?"bottom":"top",o="center"):Zo(a-1.5*LC)?(i=l?"top":"bottom",o="center"):(i="middle",o=a<1.5*LC&&a>LC/2?l?"left":"right":l?"right":"left"),{rotation:a,textAlign:o,textVerticalAlign:i}}(e.rotation,s,f||0,d),null!=(a=e.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(i.rotation)),!isFinite(a)&&(a=null)));var g=u.getFont(),m=t.get("nameTruncate",!0)||{},v=m.ellipsis,y=re(e.nameTruncateMaxWidth,m.maxWidth,a),b=new Ps({x:p[0],y:p[1],rotation:i.rotation,silent:NC.isLabelSilent(t),style:Uc(u,{text:o,font:g,overflow:"truncate",width:y,ellipsis:v,fill:u.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:u.get("align")||i.textAlign,verticalAlign:u.get("verticalAlign")||i.textVerticalAlign}),z2:1});if(Ec({el:b,componentModel:t,itemName:o}),b.__fullText=o,b.anid="name",t.get("triggerEvent")){var x=NC.makeAxisEventDataBase(t);x.targetType="axisName",x.name=o,Us(b).eventData=x}r.add(b),b.updateTransform(),n.add(b),b.decomposeTransform()}}};function EC(e){e&&(e.ignore=!0)}function OC(e,t){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(n&&r){var o=yt([]);return wt(o,o,-e.rotation),n.applyTransform(xt([],o,e.getLocalTransform())),r.applyTransform(xt([],o,t.getLocalTransform())),n.intersect(r)}}function BC(e){return"middle"===e||"center"===e}function zC(e,t,n,r,o){for(var i=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=n,t&&(We(a,a,t),We(s,s,t));var c=new Ou({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});wc(c.shape,c.style.lineWidth),c.anid=o+"_"+e[l].tickValue,i.push(c)}return i}function FC(e,t){return"all"===e||U(e)&&L(e,t)>=0||e===t}function VC(e){var t=HC(e);if(t){var n=t.axisPointerModel,r=t.axis.scale,o=n.option,i=n.get("status"),a=n.get("value");null!=a&&(a=r.parse(a));var s=WC(n);null==i&&(o.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),o.value=a,s&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}function HC(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[GC(e)]}function WC(e){return!!e.get(["handle","show"])}function GC(e){return e.type+"||"+e.id}var UC={},jC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(t,n,r,o){this.axisPointerClass&&VC(t),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},t.prototype.updateAxisPointer=function(e,t,n,r){this._doUpdateAxisPointerClass(e,n,!1)},t.prototype.remove=function(e,t){var n=this._axisPointer;n&&n.remove(t)},t.prototype.dispose=function(t,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,n,r){var o=t.getAxisPointerClass(this.axisPointerClass);if(o){var i=function(e){var t=HC(e);return t&&t.axisPointerModel}(e);i?(this._axisPointer||(this._axisPointer=new o)).render(e,i,n,r):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,t){UC[e]=t},t.getAxisPointerClass=function(e){return e&&UC[e]},t.type="axis",t}(lg),YC=Ci();function qC(e,t,n,r){var o=n.axis;if(!o.scale.isBlank()){var i=n.getModel("splitArea"),a=i.getModel("areaStyle"),s=a.get("color"),l=r.coordinateSystem.getRect(),u=o.getTicksCoords({tickModel:i,clamp:!0});if(u.length){var c=s.length,d=YC(e).splitAreaColors,h=me(),p=0;if(d)for(var f=0;f<u.length;f++){var g=d.get(u[f].tickValue);if(null!=g){p=(g+(c-1)*f)%c;break}}var m=o.toGlobalCoord(u[0].coord),v=a.getAreaStyle();for(s=U(s)?s:[s],f=1;f<u.length;f++){var y=o.toGlobalCoord(u[f].coord),b=void 0,x=void 0,_=void 0,w=void 0;o.isHorizontal()?(b=m,x=l.y,_=y-b,w=l.height,m=b+_):(b=l.x,x=m,_=l.width,m=x+(w=y-x));var S=u[f-1].tickValue;null!=S&&h.set(S,p),t.add(new Is({anid:null!=S?"area_"+S:null,shape:{x:b,y:x,width:_,height:w},style:D({fill:s[p]},v),autoBatch:!0,silent:!0})),p=(p+1)%c}YC(e).splitAreaColors=h}}}function XC(e){YC(e).splitAreaColors=null}var ZC=["axisLine","axisTickLabel","axisName"],$C=["splitArea","splitLine","minorSplitLine"],KC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="CartesianAxisPointer",n}return n(t,e),t.prototype.render=function(t,n,r,o){this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new Po,this.group.add(this._axisGroup),t.get("show")){var a=t.getCoordSysModel(),s=SC(a,t),l=new NC(t,A({handleAutoShown:function(e){for(var n=a.coordinateSystem.getCartesians(),r=0;r<n.length;r++)if(ob(n[r].getOtherAxis(t.axis).scale))return!0;return!1}},s));O(ZC,l.add,l),this._axisGroup.add(l.getGroup()),O($C,function(e){t.get([e,"show"])&&JC[e](this,this._axisGroup,t,a)},this),o&&"changeAxisOrder"===o.type&&o.isInitSort||Ic(i,this._axisGroup,t),e.prototype.render.call(this,t,n,r,o)}},t.prototype.remove=function(){XC(this)},t.type="cartesianAxis",t}(jC),JC={splitLine:function(e,t,n,r){var o=n.axis;if(!o.scale.isBlank()){var i=n.getModel("splitLine"),a=i.getModel("lineStyle"),s=a.get("color");s=U(s)?s:[s];for(var l=r.coordinateSystem.getRect(),u=o.isHorizontal(),c=0,d=o.getTicksCoords({tickModel:i}),h=[],p=[],f=a.getLineStyle(),g=0;g<d.length;g++){var m=o.toGlobalCoord(d[g].coord);u?(h[0]=m,h[1]=l.y,p[0]=m,p[1]=l.y+l.height):(h[0]=l.x,h[1]=m,p[0]=l.x+l.width,p[1]=m);var v=c++%s.length,y=d[g].tickValue,b=new Ou({anid:null!=y?"line_"+d[g].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:p[0],y2:p[1]},style:D({stroke:s[v]},f),silent:!0});wc(b.shape,f.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,n,r){var o=n.axis,i=n.getModel("minorSplitLine").getModel("lineStyle"),a=r.coordinateSystem.getRect(),s=o.isHorizontal(),l=o.getMinorTicksCoords();if(l.length)for(var u=[],c=[],d=i.getLineStyle(),h=0;h<l.length;h++)for(var p=0;p<l[h].length;p++){var f=o.toGlobalCoord(l[h][p].coord);s?(u[0]=f,u[1]=a.y,c[0]=f,c[1]=a.y+a.height):(u[0]=a.x,u[1]=f,c[0]=a.x+a.width,c[1]=f);var g=new Ou({anid:"minor_line_"+l[h][p].tickValue,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:d,silent:!0});wc(g.shape,d.lineWidth),t.add(g)}},splitArea:function(e,t,n,r){qC(e,t,n,r)}},QC=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="xAxis",t}(KC),eM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=QC.type,t}return n(t,e),t.type="yAxis",t}(KC),tM=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="grid",t}return n(t,e),t.prototype.render=function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new Is({shape:e.coordinateSystem.getRect(),style:D({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(lg),nM={offset:0};function rM(e){e.registerComponentView(tM),e.registerComponentModel(uC),e.registerCoordinateSystem("cartesian2d",IC),mC(e,"x",cC,nM),mC(e,"y",cC,nM),e.registerComponentView(QC),e.registerComponentView(eM),e.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function oM(e){e.eachSeriesByType("radar",function(e){var t=e.getData(),n=[],r=e.coordinateSystem;if(r){var o=r.getIndicatorAxes();O(o,function(e,i){t.each(t.mapDimension(o[i].dim),function(e,t){n[t]=n[t]||[];var o=r.dataToPoint(e,i);n[t][i]=iM(o)?o:aM(r)})}),t.each(function(e){var o=V(n[e],function(e){return iM(e)})||aM(r);n[e].push(o.slice()),t.setItemLayout(e,n[e])})}})}function iM(e){return!isNaN(e[0])&&!isNaN(e[1])}function aM(e){return[e.cx,e.cy]}function sM(e){var t=e.polar;if(t){U(t)||(t=[t]);var n=[];O(t,function(t,r){t.indicator?(t.type&&!t.shape&&(t.shape=t.type),e.radar=e.radar||[],U(e.radar)||(e.radar=[e.radar]),e.radar.push(t)):n.push(t)}),e.polar=n}O(e.series,function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)})}var lM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=e.coordinateSystem,o=this.group,i=e.getData(),a=this._data;function s(e,t){var n=e.getItemVisual(t,"symbol")||"circle";if("none"!==n){var r=Mm(e.getItemVisual(t,"symbolSize")),o=Cm(n,-1,-1,2,2),i=e.getItemVisual(t,"symbolRotate")||0;return o.attr({style:{strokeNoScale:!0},z2:100,scaleX:r[0]/2,scaleY:r[1]/2,rotation:i*Math.PI/180||0}),o}}function l(t,n,r,o,i,a){r.removeAll();for(var l=0;l<n.length-1;l++){var u=s(o,i);u&&(u.__dimIdx=l,t[l]?(u.setPosition(t[l]),zc[a?"initProps":"updateProps"](u,{x:n[l][0],y:n[l][1]},e,i)):u.setPosition(n[l]),r.add(u))}}function u(e){return B(e,function(e){return[r.cx,r.cy]})}i.diff(a).add(function(t){var n=i.getItemLayout(t);if(n){var r=new Pu,o=new Nu,a={shape:{points:n}};r.shape.points=u(n),o.shape.points=u(n),oc(r,a,e,t),oc(o,a,e,t);var s=new Po,c=new Po;s.add(o),s.add(r),s.add(c),l(o.shape.points,n,c,i,t,!0),i.setItemGraphicEl(t,s)}}).update(function(t,n){var r=a.getItemGraphicEl(n),o=r.childAt(0),s=r.childAt(1),u=r.childAt(2),c={shape:{points:i.getItemLayout(t)}};c.shape.points&&(l(o.shape.points,c.shape.points,u,i,t,!1),uc(s),uc(o),rc(o,c,e),rc(s,c,e),i.setItemGraphicEl(t,r))}).remove(function(e){o.remove(a.getItemGraphicEl(e))}).execute(),i.eachItemGraphicEl(function(e,t){var n=i.getItemModel(t),r=e.childAt(0),a=e.childAt(1),s=e.childAt(2),l=i.getItemVisual(t,"style"),u=l.fill;o.add(e),r.useStyle(D(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:u})),zl(r,n,"lineStyle"),zl(a,n,"areaStyle");var c=n.getModel("areaStyle"),d=c.isEmpty()&&c.parentModel.isEmpty();a.ignore=d,O(["emphasis","select","blur"],function(e){var t=n.getModel([e,"areaStyle"]),r=t.isEmpty()&&t.parentModel.isEmpty();a.ensureState(e).ignore=r&&d}),a.useStyle(D(c.getAreaStyle(),{fill:u,opacity:.7,decal:l.decal}));var h=n.getModel("emphasis"),p=h.getModel("itemStyle").getItemStyle();s.eachChild(function(e){if(e instanceof _s){var r=e.style;e.useStyle(A({image:r.image,x:r.x,y:r.y,width:r.width,height:r.height},l))}else e.useStyle(l),e.setColor(u),e.style.strokeNoScale=!0;e.ensureState("emphasis").style=T(p);var o=i.getStore().get(i.getDimensionIndex(e.__dimIdx),t);(null==o||isNaN(o))&&(o=""),Wc(e,Gc(n),{labelFetcher:i.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:o,inheritColor:u,defaultOpacity:l.opacity})}),Rl(e,h.get("focus"),h.get("blurScope"),h.get("disabled"))}),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(hg),uM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return n(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new tC(W(this.getData,this),W(this.getRawData,this))},t.prototype.getInitialData=function(e,t){return eC(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,t,n){var r=this.getData(),o=this.coordinateSystem.getIndicatorAxes(),i=this.getData().getName(e),a=""===i?this.name:i,s=qf(this,e);return zf("section",{header:a,sortBlocks:!0,blocks:B(o,function(t){var n=r.get(r.mapDimension(t.dim),e);return zf("nameValue",{markerType:"subItem",markerColor:s,name:t.name,value:n,sortParam:n})})})},t.prototype.getTooltipPosition=function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,r=t.getValues(B(n.dimensions,function(e){return t.mapDimension(e)}),e),o=0,i=r.length;o<i;o++)if(!isNaN(r[o])){var a=n.getIndicatorAxes();return n.coordToPoint(a[o].dataToCoord(r[o]),o)}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(eg),cM=fC.value;function dM(e,t){return D({show:t},e)}var hM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),r=this.get("axisLine"),o=this.get("axisTick"),i=this.get("axisLabel"),a=this.get("axisName"),s=this.get(["axisName","show"]),l=this.get(["axisName","formatter"]),u=this.get("axisNameGap"),c=this.get("triggerEvent"),d=B(this.get("indicator")||[],function(d){null!=d.max&&d.max>0&&!d.min?d.min=0:null!=d.min&&d.min<0&&!d.max&&(d.max=0);var h=a;null!=d.color&&(h=D({color:d.color},a));var p=k(T(d),{boundaryGap:e,splitNumber:t,scale:n,axisLine:r,axisTick:o,axisLabel:i,name:d.text,showName:s,nameLocation:"end",nameGap:u,nameTextStyle:h,triggerEvent:c},!1);if(Y(l)){var f=p.name;p.name=l.replace("{value}",null!=f?f:"")}else j(l)&&(p.name=l(p.name,p));var g=new hd(p,null,this.ecModel);return R(g,ix.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g},this);this._indicatorModels=d},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:k({lineStyle:{color:"#bbb"}},cM.axisLine),axisLabel:dM(cM.axisLabel,!1),axisTick:dM(cM.axisTick,!1),splitLine:dM(cM.splitLine,!0),splitArea:dM(cM.splitArea,!0),indicator:[]},t}(xh),pM=["axisLine","axisTickLabel","axisName"],fM=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var t=e.coordinateSystem;O(B(t.getIndicatorAxes(),function(e){var n=e.model.get("showName")?e.name:"";return new NC(e.model,{axisName:n,position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(e){O(pM,e.add,e),this.group.add(e.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var r=e.get("shape"),o=e.getModel("splitLine"),i=e.getModel("splitArea"),a=o.getModel("lineStyle"),s=i.getModel("areaStyle"),l=o.get("show"),u=i.get("show"),c=a.get("color"),d=s.get("color"),h=U(c)?c:[c],p=U(d)?d:[d],f=[],g=[];if("circle"===r)for(var m=n[0].getTicksCoords(),v=t.cx,y=t.cy,b=0;b<m.length;b++)l&&f[k(f,h,b)].push(new cu({shape:{cx:v,cy:y,r:m[b].coord}})),u&&b<m.length-1&&g[k(g,p,b)].push(new Iu({shape:{cx:v,cy:y,r0:m[b].coord,r:m[b+1].coord}}));else{var x,_=B(n,function(e,n){var r=e.getTicksCoords();return x=null==x?r.length-1:Math.min(r.length-1,x),B(r,function(e){return t.coordToPoint(e.coord,n)})}),w=[];for(b=0;b<=x;b++){for(var S=[],C=0;C<n.length;C++)S.push(_[C][b]);S[0]&&S.push(S[0].slice()),l&&f[k(f,h,b)].push(new Nu({shape:{points:S}})),u&&w&&g[k(g,p,b-1)].push(new Pu({shape:{points:S.concat(w)}})),w=S.slice().reverse()}}var M=a.getLineStyle(),T=s.getAreaStyle();O(g,function(e,t){this.group.add(xc(e,{style:D({stroke:"none",fill:p[t%p.length]},T),silent:!0}))},this),O(f,function(e,t){this.group.add(xc(e,{style:D({fill:"none",stroke:h[t%h.length]},M),silent:!0}))},this)}function k(e,t,n){var r=n%t.length;return e[r]=e[r]||[],r}},t.type="radar",t}(lg),gM=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.type="value",o.angle=0,o.name="",o}return n(t,e),t}(Ex),mM=function(){function e(e,t,n){this.dimensions=[],this._model=e,this._indicatorAxes=B(e.getIndicatorModels(),function(e,t){var n="indicator_"+t,r=new gM(n,new pb);return r.name=e.get("name"),r.model=e,e.axis=r,this.dimensions.push(n),r},this),this.resize(e,n)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(e,t){var n=this._indicatorAxes[t];return this.coordToPoint(n.dataToCoord(e),t)},e.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},e.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=Math.sqrt(t*t+n*n);t/=r,n/=r;for(var o,i=Math.atan2(-n,t),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(i-u.angle);c<a&&(o=u,s=l,a=c)}return[s,+(o&&o.coordToData(r))]},e.prototype.resize=function(e,t){var n=e.get("center"),r=t.getWidth(),o=t.getHeight(),i=Math.min(r,o)/2;this.cx=Fo(n[0],r),this.cy=Fo(n[1],o),this.startAngle=e.get("startAngle")*Math.PI/180;var a=e.get("radius");(Y(a)||X(a))&&(a=[0,a]),this.r0=Fo(a[0],i),this.r=Fo(a[1],i),O(this._indicatorAxes,function(e,t){e.setExtent(this.r0,this.r);var n=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),e.angle=n},this)},e.prototype.update=function(e,t){var n=this._indicatorAxes,r=this._model;O(n,function(e){e.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(t,o){if("radar"===t.get("coordinateSystem")&&e.getComponent("radar",t.get("radarIndex"))===r){var i=t.getData();O(n,function(e){e.scale.unionExtentFromData(i,i.mapDimension(e.dim))})}},this);var o=r.get("splitNumber"),i=new pb;i.setExtent(0,o),i.setInterval(1),O(n,function(e,t){kC(e.scale,e.model,i)})},e.prototype.convertToPixel=function(e,t,n){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(e,t,n){return console.warn("Not implemented."),null},e.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},e.create=function(t,n){var r=[];return t.eachComponent("radar",function(o){var i=new e(o,t,n);r.push(i),o.coordinateSystem=i}),t.eachSeriesByType("radar",function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=r[e.get("radarIndex")||0])}),r},e.dimensions=[],e}();function vM(e){e.registerCoordinateSystem("radar",mM),e.registerComponentModel(hM),e.registerComponentView(fM),e.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(e){t.setItemVisual(e,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}var yM="\0_ec_interaction_mutex";function bM(e,t){return!!xM(e)[t]}function xM(e){return e[yM]||(e[yM]={})}ay({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},_e);var _M=function(e){function t(t){var n=e.call(this)||this;n._zr=t;var r=W(n._mousedownHandler,n),o=W(n._mousemoveHandler,n),i=W(n._mouseupHandler,n),a=W(n._mousewheelHandler,n),s=W(n._pinchHandler,n);return n.enable=function(e,n){this.disable(),this._opt=D(T(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",r),t.on("mousemove",o),t.on("mouseup",i)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",a),t.on("pinch",s))},n.disable=function(){t.off("mousedown",r),t.off("mousemove",o),t.off("mouseup",i),t.off("mousewheel",a),t.off("pinch",s)},n}return n(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!ft(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,r=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,r)&&(this._x=n,this._y=r,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&CM("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!bM(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,r=this._x,o=this._y,i=t-r,a=n-o;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&pt(e.event),SM(this,"pan","moveOnMouseMove",e,{dx:i,dy:a,oldX:r,oldY:o,newX:t,newY:n,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){ft(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=CM("zoomOnMouseWheel",e,this._opt),n=CM("moveOnMouseWheel",e,this._opt),r=e.wheelDelta,o=Math.abs(r),i=e.offsetX,a=e.offsetY;if(0!==r&&(t||n)){if(t){var s=o>3?1.4:o>1?1.2:1.1;wM(this,"zoom","zoomOnMouseWheel",e,{scale:r>0?s:1/s,originX:i,originY:a,isAvailableBehavior:null})}if(n){var l=Math.abs(r);wM(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(r>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:i,originY:a,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){bM(this._zr,"globalPan")||wM(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(Xe);function wM(e,t,n,r,o){e.pointerChecker&&e.pointerChecker(r,o.originX,o.originY)&&(pt(r.event),SM(e,t,n,r,o))}function SM(e,t,n,r,o){o.isAvailableBehavior=W(CM,null,n,r),e.trigger(t,o)}function CM(e,t,n){var r=n[e];return!e||r&&(!Y(r)||t.event[r+"Key"])}function MM(e,t,n){var r=e.target;r.x+=t,r.y+=n,r.dirty()}function TM(e,t,n,r){var o=e.target,i=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,i){var s=i.min||0,l=i.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,o.x-=(n-o.x)*(u-1),o.y-=(r-o.y)*(u-1),o.scaleX*=u,o.scaleY*=u,o.dirty()}var kM,IM={axisPointer:1,tooltip:1,brush:1};function AM(e,t,n){var r=t.getComponentByElement(e.topTarget),o=r&&r.coordinateSystem;return r&&r!==n&&!IM.hasOwnProperty(r.mainType)&&o&&o.model!==n}function DM(e){Y(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var PM={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},LM=H(PM),NM={"alignment-baseline":"textBaseline","stop-color":"stopColor"},RM=H(NM),EM=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var n=DM(e);this._defsUsePending=[];var r=new Po;this._root=r;var o=[],i=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||t.width),s=parseFloat(n.getAttribute("height")||t.height);isNaN(a)&&(a=null),isNaN(s)&&(s=null),HM(n,r,null,!0,!1);for(var l,u,c=n.firstChild;c;)this._parseNode(c,r,o,null,!1,!1),c=c.nextSibling;if(function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r[0].style[r[1]]=e[r[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],i){var d=jM(i);d.length>=4&&(l={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(l&&null!=a&&null!=s&&(u=$M(l,{x:0,y:0,width:a,height:s}),!t.ignoreViewBox)){var h=r;(r=new Po).add(h),h.scaleX=h.scaleY=u.scale,h.x=u.x,h.y=u.y}return t.ignoreRootClip||null==a||null==s||r.setClipPath(new Is({shape:{x:0,y:0,width:a,height:s}})),{root:r,width:a,height:s,viewBoxRect:l,viewBoxTransform:u,named:o}},e.prototype._parseNode=function(e,t,n,r,o,i){var a,s=e.nodeName.toLowerCase(),l=r;if("defs"===s&&(o=!0),"text"===s&&(i=!0),"defs"===s||"switch"===s)a=t;else{if(!o){var u=kM[s];if(u&&xe(kM,s)){a=u.call(this,e,t);var c=e.getAttribute("name");if(c){var d={name:c,namedFrom:null,svgNodeTagLower:s,el:a};n.push(d),"g"===s&&(l=d)}else r&&n.push({name:r.name,namedFrom:r,svgNodeTagLower:s,el:a});t.add(a)}}var h=OM[s];if(h&&xe(OM,s)){var p=h.call(this,e),f=e.getAttribute("id");f&&(this._defs[f]=p)}}if(a&&a.isGroup)for(var g=e.firstChild;g;)1===g.nodeType?this._parseNode(g,a,n,l,o,i):3===g.nodeType&&i&&this._parseText(g,a),g=g.nextSibling},e.prototype._parseText=function(e,t){var n=new ys({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});FM(t,n),HM(e,n,this._defsUsePending,!1,!1),function(e,t){var n=t.__selfStyle;if(n){var r=n.textBaseline,o=r;r&&"auto"!==r?"baseline"===r?o="alphabetic":"before-edge"===r||"text-before-edge"===r?o="top":"after-edge"===r||"text-after-edge"===r?o="bottom":"central"!==r&&"mathematical"!==r||(o="middle"):o="alphabetic",e.style.textBaseline=o}var i=t.__inheritedStyle;if(i){var a=i.textAlign,s=a;a&&("middle"===a&&(s="center"),e.style.textAlign=s)}}(n,t);var r=n.style,o=r.fontSize;o&&o<9&&(r.fontSize=9,n.scaleX*=o/9,n.scaleY*=o/9);var i=(r.fontSize||r.fontFamily)&&[r.fontStyle,r.fontWeight,(r.fontSize||12)+"px",r.fontFamily||"sans-serif"].join(" ");r.font=i;var a=n.getBoundingRect();return this._textX+=a.width,t.add(n),n},e.internalField=void(kM={g:function(e,t){var n=new Po;return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n},rect:function(e,t){var n=new Is;return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,t){var n=new cu;return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,t){var n=new Ou;return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,t){var n=new hu;return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,t){var n,r=e.getAttribute("points");r&&(n=VM(r));var o=new Pu({shape:{points:n||[]},silent:!0});return FM(t,o),HM(e,o,this._defsUsePending,!1,!1),o},polyline:function(e,t){var n,r=e.getAttribute("points");r&&(n=VM(r));var o=new Nu({shape:{points:n||[]},silent:!0});return FM(t,o),HM(e,o,this._defsUsePending,!1,!1),o},image:function(e,t){var n=new _s;return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,t){var n=e.getAttribute("x")||"0",r=e.getAttribute("y")||"0",o=e.getAttribute("dx")||"0",i=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(o),this._textY=parseFloat(r)+parseFloat(i);var a=new Po;return FM(t,a),HM(e,a,this._defsUsePending,!1,!0),a},tspan:function(e,t){var n=e.getAttribute("x"),r=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var o=e.getAttribute("dx")||"0",i=e.getAttribute("dy")||"0",a=new Po;return FM(t,a),HM(e,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(o),this._textY+=parseFloat(i),a},path:function(e,t){var n=su(e.getAttribute("d")||"");return FM(t,n),HM(e,n,this._defsUsePending,!1,!1),n.silent=!0,n}}),e}(),OM={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),n=parseInt(e.getAttribute("y1")||"0",10),r=parseInt(e.getAttribute("x2")||"10",10),o=parseInt(e.getAttribute("y2")||"0",10),i=new ju(t,n,r,o);return BM(e,i),zM(e,i),i},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),n=parseInt(e.getAttribute("cy")||"0",10),r=parseInt(e.getAttribute("r")||"0",10),o=new Yu(t,n,r);return BM(e,o),zM(e,o),o}};function BM(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function zM(e,t){for(var n=e.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var r,o=n.getAttribute("offset");r=o&&o.indexOf("%")>0?parseInt(o,10)/100:o?parseFloat(o):0;var i={};ZM(n,i,i);var a=i.stopColor||n.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:r,color:a})}n=n.nextSibling}}function FM(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),D(t.__inheritedStyle,e.__inheritedStyle))}function VM(e){for(var t=jM(e),n=[],r=0;r<t.length;r+=2){var o=parseFloat(t[r]),i=parseFloat(t[r+1]);n.push([o,i])}return n}function HM(e,t,n,r,o){var i=t,a=i.__inheritedStyle=i.__inheritedStyle||{},s={};1===e.nodeType&&(function(e,t){var n=e.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=[],o=null;n.replace(YM,function(e,t,n){return r.push(t,n),""});for(var i=r.length-1;i>0;i-=2){var a=r[i],s=r[i-1],l=jM(a);switch(o=o||[1,0,0,1,0,0],s){case"translate":_t(o,o,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":St(o,o,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":wt(o,o,-parseFloat(l[0])*qM);break;case"skewX":xt(o,[1,0,Math.tan(parseFloat(l[0])*qM),1,0,0],o);break;case"skewY":xt(o,[1,Math.tan(parseFloat(l[0])*qM),0,1,0,0],o);break;case"matrix":o[0]=parseFloat(l[0]),o[1]=parseFloat(l[1]),o[2]=parseFloat(l[2]),o[3]=parseFloat(l[3]),o[4]=parseFloat(l[4]),o[5]=parseFloat(l[5])}}t.setLocalTransform(o)}}(e,t),ZM(e,a,s),r||function(e,t,n){for(var r=0;r<LM.length;r++){var o=LM[r];null!=(i=e.getAttribute(o))&&(t[PM[o]]=i)}for(r=0;r<RM.length;r++){var i;o=RM[r],null!=(i=e.getAttribute(o))&&(n[NM[o]]=i)}}(e,a,s)),i.style=i.style||{},null!=a.fill&&(i.style.fill=GM(i,"fill",a.fill,n)),null!=a.stroke&&(i.style.stroke=GM(i,"stroke",a.stroke,n)),O(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(e){null!=a[e]&&(i.style[e]=parseFloat(a[e]))}),O(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(e){null!=a[e]&&(i.style[e]=a[e])}),o&&(i.__selfStyle=s),a.lineDash&&(i.style.lineDash=B(jM(a.lineDash),function(e){return parseFloat(e)})),"hidden"!==a.visibility&&"collapse"!==a.visibility||(i.invisible=!0),"none"===a.display&&(i.ignore=!0)}var WM=/^url\(\s*#(.*?)\)/;function GM(e,t,n,r){var o=n&&n.match(WM);if(!o)return"none"===n&&(n=null),n;var i=ue(o[1]);r.push([e,t,i])}var UM=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function jM(e){return e.match(UM)||[]}var YM=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,qM=Math.PI/180,XM=/([^\s:;]+)\s*:\s*([^:;]+)/g;function ZM(e,t,n){var r,o=e.getAttribute("style");if(o)for(XM.lastIndex=0;null!=(r=XM.exec(o));){var i=r[1],a=xe(PM,i)?PM[i]:null;a&&(t[a]=r[2]);var s=xe(NM,i)?NM[i]:null;s&&(n[s]=r[2])}}function $M(e,t){var n=t.width/e.width,r=t.height/e.height,o=Math.min(n,r);return{scale:o,x:-(e.x+e.width/2)*o+(t.x+t.width/2),y:-(e.y+e.height/2)*o+(t.y+t.height/2)}}for(var KM=me(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),JM=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=me(),this._freedGraphics=[],this._mapName=e,this._parsedXML=DM(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],n=me();return O(e,function(e){if(null==e.namedFrom){var r=new vx(e.name,e.el);t.push(r),n.set(e.name,r)}}),{regions:t,regionsMap:n}}(e.named),n=t.regions,r=t.regionsMap;this._regions=n,this._regionsMap=r}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,n,r,o;try{le(null!=(n=(t=e&&(r=e,o={ignoreViewBox:!0,ignoreRootClip:!0},(new EM).parse(r,o))||{}).root))}catch(e){throw new Error("Invalid svg format\n"+e.message)}var i=new Po;i.add(n),i.isGeoSVGGraphicRoot=!0;var a=t.width,s=t.height,l=t.viewBoxRect,u=this._boundingRect;if(!u){var c=void 0,d=void 0,h=void 0,p=void 0;if(null!=a?(c=0,h=a):l&&(c=l.x,h=l.width),null!=s?(d=0,p=s):l&&(d=l.y,p=l.height),null==c||null==d){var f=n.getBoundingRect();null==c&&(c=f.x,h=f.width),null==d&&(d=f.y,p=f.height)}u=this._boundingRect=new Ot(c,d,h,p)}if(l){var g=$M(l,u);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}i.setClipPath(new Is({shape:u.plain()}));var m=[];return O(t.named,function(e){var t;null!=KM.get(e.svgNodeTagLower)&&(m.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse(function(e){e.silent=!1}))}),{root:i,boundingRect:u,named:m}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,n),n)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);n&&(t.removeKey(e),this._freedGraphics.push(n))},e}(),QM=[126,25],eT="\u5357\u6d77\u8bf8\u5c9b",tT=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],nT=0;nT<tT.length;nT++)for(var rT=0;rT<tT[nT].length;rT++)tT[nT][rT][0]/=10.5,tT[nT][rT][1]/=-14,tT[nT][rT][0]+=QM[0],tT[nT][rT][1]+=QM[1];var oT={"\u5357\u6d77\u8bf8\u5c9b":[32,80],"\u5e7f\u4e1c":[0,-10],"\u9999\u6e2f":[10,5],"\u6fb3\u95e8":[-10,10],"\u5929\u6d25":[5,5]},iT=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],aT=function(){function e(e,t,n){var r;this.type="geoJSON",this._parsedMap=me(),this._mapName=e,this._specialAreas=n,this._geoJSON=Y(r=t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(r):new Function("return ("+r+");")():r}return e.prototype.load=function(e,t){t=t||"name";var n=this._parsedMap.get(t);if(!n){var r=this._parseToRegions(t);n=this._parsedMap.set(t,{regions:r,boundingRect:sT(r)})}var o=me(),i=[];return O(n.regions,function(t){var n=t.name;e&&xe(e,n)&&(t=t.cloneShallow(n=e[n])),i.push(t),o.set(n,t)}),{regions:i,boundingRect:n.boundingRect||new Ot(0,0,0,0),regionsMap:o}},e.prototype._parseToRegions=function(e){var t,n=this._mapName,r=this._geoJSON;try{t=r?xx(r,e):[]}catch(e){throw new Error("Invalid geoJson format\n"+e.message)}return function(e,t){if("china"===e){for(var n=0;n<t.length;n++)if(t[n].name===eT)return;t.push(new mx(eT,B(tT,function(e){return{type:"polygon",exterior:e}}),QM))}}(n,t),O(t,function(e){var t=e.name;!function(e,t){if("china"===e){var n=oT[t.name];if(n){var r=t.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/14,t.setCenter(r)}}}(n,e),function(e,t){"china"===e&&"\u53f0\u6e7e"===t.name&&t.geometries.push({type:"polygon",exterior:iT[0]})}(n,e);var r=this._specialAreas&&this._specialAreas[t];r&&e.transformTo(r.left,r.top,r.width,r.height)},this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function sT(e){for(var t,n=0;n<e.length;n++){var r=e[n].getBoundingRect();(t=t||r.clone()).union(r)}return t}var lT=me(),uT=function(e){return lT.get(e)},cT=function(e,t,n){var r=lT.get(e);if(r)return r.load(t,n)},dT=["rect","circle","line","ellipse","polygon","polyline","path"],hT=me(dT),pT=me(dT.concat(["g"])),fT=me(dT.concat(["g"])),gT=Ci();function mT(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function vT(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var yT=function(){function e(e){var t=new Po;this.uid=fd("ec_map_draw"),this._controller=new _M(e.getZr()),this._controllerHost={target:t},this.group=t,t.add(this._regionsGroup=new Po),t.add(this._svgGroup=new Po)}return e.prototype.draw=function(e,t,n,r,o){var i="geo"===e.mainType,a=e.getData&&e.getData();i&&t.eachComponent({mainType:"series",subType:"map"},function(t){a||t.getHostGeoModel()!==e||(a=t.getData())});var s=e.coordinateSystem,l=this._regionsGroup,u=this.group,c=s.getTransformInfo(),d=c.raw,h=c.roam;!l.childAt(0)||o?(u.x=h.x,u.y=h.y,u.scaleX=h.scaleX,u.scaleY=h.scaleY,u.dirty()):rc(u,h,e);var p=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,f={api:n,geo:s,mapOrGeoModel:e,data:a,isVisualEncodedByVisualMap:p,isGeo:i,transformInfoRaw:d};"geoJSON"===s.resourceType?this._buildGeoJSON(f):"geoSVG"===s.resourceType&&this._buildSVG(f),this._updateController(e,t,n),this._updateMapSelectHandler(e,l,n,r)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=me(),n=me(),r=this._regionsGroup,o=e.transformInfoRaw,i=e.mapOrGeoModel,a=e.data,s=e.geo.projection,l=s&&s.stream;function u(e,t){return t&&(e=t(e)),e&&[e[0]*o.scaleX+o.x,e[1]*o.scaleY+o.y]}function c(e){for(var t=[],n=!l&&s&&s.project,r=0;r<e.length;++r){var o=u(e[r],n);o&&t.push(o)}return t}function d(e){return{shape:{points:c(e)}}}r.removeAll(),O(e.geo.regions,function(o){var c=o.name,h=t.get(c),p=n.get(c)||{},f=p.dataIdx,g=p.regionModel;h||(h=t.set(c,new Po),r.add(h),f=a?a.indexOfName(c):null,g=e.isGeo?i.getRegionModel(c):a?a.getItemModel(f):null,n.set(c,{dataIdx:f,regionModel:g}));var m=[],v=[];O(o.geometries,function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);l&&(t=CT(t,l)),O(t,function(e){m.push(new Pu(d(e)))})}else{var n=e.points;l&&(n=CT(n,l,!0)),O(n,function(e){v.push(new Nu(d(e)))})}});var y=u(o.getCenter(),s&&s.project);function b(t,n){if(t.length){var r=new Gu({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});h.add(r),bT(e,r,f,g),xT(e,r,c,g,i,f,y),n&&(vT(r),O(r.states,vT))}}b(m),b(v,!0)}),t.each(function(t,r){var o=n.get(r),a=o.dataIdx,s=o.regionModel;_T(e,t,r,s,i,a),wT(e,t,r,s,i),ST(e,t,r,s,i)},this)},e.prototype._buildSVG=function(e){var t=e.geo.map,n=e.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var r=this._svgDispatcherMap=me(),o=!1;O(this._svgGraphicRecord.named,function(t){var n=t.name,i=e.mapOrGeoModel,a=e.data,s=t.svgNodeTagLower,l=t.el,u=a?a.indexOfName(n):null,c=i.getRegionModel(n);null!=hT.get(s)&&l instanceof fa&&bT(e,l,u,c),l instanceof fa&&(l.culling=!0),l.z2EmphasisLift=0,t.namedFrom||(null!=fT.get(s)&&xT(e,l,n,c,i,u,null),_T(e,l,n,c,i,u),wT(e,l,n,c,i),null!=pT.get(s)&&("self"===ST(e,l,n,c,i)&&(o=!0),(r.get(n)||r.set(n,[])).push(l)))},this),this._enableBlurEntireSVG(o,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var n=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(e){if(!e.isGroup){vl(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=n&&(t.opacity=n),e.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var n=t.coordinateSystem;if("geoJSON"===n.resourceType){var r=this._regionsGroupByName;if(r){var o=r.get(e);return o?[o]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=uT(e);if(t&&"geoSVG"===t.type){var n=t.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=uT(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,n){var r=e.coordinateSystem,o=this._controller,i=this._controllerHost;i.zoomLimit=e.get("scaleLimit"),i.zoom=r.getZoom(),o.enable(e.get("roam")||!1);var a=e.mainType;function s(){var t={type:"geoRoam",componentType:a};return t[a+"Id"]=e.id,t}o.off("pan").on("pan",function(e){this._mouseDownFlag=!1,MM(i,e.dx,e.dy),n.dispatchAction(A(s(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))},this),o.off("zoom").on("zoom",function(e){this._mouseDownFlag=!1,TM(i,e.scale,e.originX,e.originY),n.dispatchAction(A(s(),{zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))},this),o.setPointerChecker(function(t,o,i){return r.containPoint([o,i])&&!AM(t,n,e)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=gT(t).ignore)})},e.prototype._updateMapSelectHandler=function(e,t,n,r){var o=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){o._mouseDownFlag=!0}),t.on("click",function(e){o._mouseDownFlag&&(o._mouseDownFlag=!1)}))},e}();function bT(e,t,n,r){var o=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),a=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=mT(o),u=mT(i),c=mT(s),d=mT(a),h=e.data;if(h){var p=h.getItemVisual(n,"style"),f=h.getItemVisual(n,"decal");e.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),f&&(l.decal=Km(f,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=d,vl(t)}function xT(e,t,n,r,o,i,a){var s=e.data,l=e.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),i)),c=s&&s.getItemLayout(i);if(l||u||c&&c.showLabel){var d=l?n:i,h=void 0;(!s||i>=0)&&(h=o);var p=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Wc(t,Gc(r),{labelFetcher:h,labelDataIndex:d,defaultText:n},p);var f=t.getTextContent();if(f&&(gT(f).ignore=f.ignore,t.textConfig&&a)){var g=t.getBoundingRect().clone();t.textConfig.layoutRect=g,t.textConfig.position=[(a[0]-g.x)/g.width*100+"%",(a[1]-g.y)/g.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function _T(e,t,n,r,o,i){e.data?e.data.setItemGraphicEl(i,t):Us(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:n,region:r&&r.option||{}}}function wT(e,t,n,r,o){e.data||Ec({el:t,componentModel:o,itemName:n,itemTooltipOption:r.get("tooltip")})}function ST(e,t,n,r,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var i=r.getModel("emphasis"),a=i.get("focus");return Rl(t,a,i.get("blurScope"),i.get("disabled")),e.isGeo&&function(e,t,n){var r=Us(e);r.componentMainType=t.mainType,r.componentIndex=t.componentIndex,r.componentHighDownName=n}(t,o,n),a}function CT(e,t,n){var r,o=[];function i(){r=[]}function a(){r.length&&(o.push(r),r=[])}var s=t({polygonStart:i,polygonEnd:a,lineStart:i,lineEnd:a,point:function(e,t){isFinite(e)&&isFinite(t)&&r.push([e,t])},sphere:function(){}});return!n&&s.polygonStart(),O(e,function(e){s.lineStart();for(var t=0;t<e.length;t++)s.point(e[t][0],e[t][1]);s.lineEnd()}),!n&&s.polygonEnd(),o}var MT=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n,r){if(!r||"mapToggleSelect"!==r.type||r.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&r&&"geoRoam"===r.type&&this._mapDraw.resetForLabelLayout(),r&&"geoRoam"===r.type&&"series"===r.componentType&&r.seriesId===e.id)(i=this._mapDraw)&&o.add(i.group);else if(e.needsDrawMap){var i=this._mapDraw||new yT(n);o.add(i.group),i.draw(e,t,n,this,r),this._mapDraw=i}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,t,n){var r=e.originalData,o=this.group;r.each(r.mapDimension("value"),function(t,n){if(!isNaN(t)){var i=r.getItemLayout(n);if(i&&i.point){var a=i.point,s=i.offset,l=new cu({style:{fill:e.getData().getVisual("style").fill},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:11)});if(!s){var u=e.mainSeries.getData(),c=r.getName(n),d=u.indexOfName(c),h=r.getItemModel(n),p=h.getModel("label"),f=u.getItemGraphicEl(d);Wc(l,Gc(h),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(d,n)}},defaultText:c}),l.disableLabelAnimation=!0,p.get("position")||l.setTextConfig({position:"bottom"}),f.onHoverStateChange=function(e){gl(l,e)}}o.add(l)}}})},t.type="map",t}(hg),TT=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,r=n.getRegion(t);return r&&n.dataToPoint(r.getCenter())}},n}return n(t,e),t.prototype.getInitialData=function(e){for(var t=eC(this,{coordDimensions:["value"],encodeDefaulter:G(Eh,this)}),n=me(),r=[],o=0,i=t.count();o<i;o++){var a=t.getName(o);n.set(a,!0)}return O(cT(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(e){var t=e.name;n.get(t)||r.push(t)}),t.appendValues([],r),t},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},t.prototype.formatTooltip=function(e,t,n){for(var r=this.getData(),o=this.getRawValue(e),i=r.getName(e),a=this.seriesGroup,s=[],l=0;l<a.length;l++){var u=a[l].originalData.indexOfName(i),c=r.mapDimension("value");isNaN(a[l].originalData.get(c,u))||s.push(a[l].name)}return zf("section",{header:s.join(", "),noHeader:!s.length,blocks:[zf("nameValue",{name:i,value:o})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",n=Cm(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(eg);function kT(e){var t={};e.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),r=n?"o"+n.id:"i"+e.getMapType();(t[r]=t[r]||[]).push(e)}),O(t,function(e,t){for(var n,r,o,i=(n=B(e,function(e){return e.getData()}),r=e[0].get("mapValueCalculation"),o={},O(n,function(e){e.each(e.mapDimension("value"),function(t,n){var r="ec-"+e.getName(n);o[r]=o[r]||[],isNaN(t)||o[r].push(t)})}),n[0].map(n[0].mapDimension("value"),function(e,t){for(var i="ec-"+n[0].getName(t),a=0,s=1/0,l=-1/0,u=o[i].length,c=0;c<u;c++)s=Math.min(s,o[i][c]),l=Math.max(l,o[i][c]),a+=o[i][c];return 0===u?NaN:"min"===r?s:"max"===r?l:"average"===r?a/u:a})),a=0;a<e.length;a++)e[a].originalData=e[a].getData();for(a=0;a<e.length;a++)e[a].seriesGroup=e,e[a].needsDrawMap=0===a&&!e[a].getHostGeoModel(),e[a].setData(i.cloneShallow()),e[a].mainSeries=e[0]})}function IT(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!t[r]){var o={};O(n.seriesGroup,function(t){var n=t.coordinateSystem,r=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&r.each(r.mapDimension("value"),function(e,t){var i=r.getName(t),a=n.getRegion(i);if(a&&!isNaN(e)){var s=o[i]||0,l=n.dataToPoint(a.getCenter());o[i]=s+1,r.setItemLayout(t,{point:l,offset:s})}})});var i=n.getData();i.each(function(e){var t=i.getName(e),n=i.getItemLayout(e)||{};n.showLabel=!o[t],i.setItemLayout(e,n)}),t[r]=!0}})}var AT=We,DT=function(e){function t(t){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new lo,n._rawTransformable=new lo,n.name=t,n}return n(t,e),t.prototype.setBoundingRect=function(e,t,n,r){return this._rect=new Ot(e,t,n,r),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,t,n,r){this._transformTo(e,t,n,r),this._viewRect=new Ot(e,t,n,r)},t.prototype._transformTo=function(e,t,n,r){var o=this.getBoundingRect(),i=this._rawTransformable;i.transform=o.calculateTransform(new Ot(e,t,n,r));var a=i.parent;i.parent=null,i.decomposeTransform(),i.parent=a,this._updateTransform()},t.prototype.setCenter=function(e,t){e&&(this._center=[Fo(e[0],t.getWidth()),Fo(e[1],t.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),o=this.getZoom();r=We([],r,e),n=We([],n,e),t.originX=r[0],t.originY=r[1],t.x=n[0]-r[0],t.y=n[1]-r[1],t.scaleX=t.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),bt(this.transform||(this.transform=[]),t.transform||[1,0,0,1,0,0]),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],Ct(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,n=new lo;return n.transform=t.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,t,n){var r=t?this._rawTransform:this.transform;return n=n||[],r?AT(n,e,r):Me(n,e)},t.prototype.pointToData=function(e){var t=this.invTransform;return t?AT([],e,t):[e[0],e[1]]},t.prototype.convertToPixel=function(e,t,n){var r=PT(t);return r===this?r.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var r=PT(t);return r===this?r.pointToData(n):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(lo);function PT(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var LT={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},NT=["lng","lat"],RT=function(e){function t(t,n,r){var o=e.call(this,t)||this;o.dimensions=NT,o.type="geo",o._nameCoordMap=me(),o.map=n;var i,a=r.projection,s=cT(n,r.nameMap,r.nameProperty),l=uT(n),u=(o.resourceType=l?l.type:null,o.regions=s.regions),c=LT[l.type];if(o._regionsMap=s.regionsMap,o.regions=s.regions,o.projection=a,a)for(var d=0;d<u.length;d++){var h=u[d].getBoundingRect(a);(i=i||h.clone()).union(h)}else i=s.boundingRect;return o.setBoundingRect(i.x,i.y,i.width,i.height),o.aspectScale=a?1:oe(r.aspectScale,c.aspectScale),o._invertLongitute=!a&&c.invertLongitute,o}return n(t,e),t.prototype._transformTo=function(e,t,n,r){var o=this.getBoundingRect(),i=this._invertLongitute;o=o.clone(),i&&(o.y=-o.y-o.height);var a=this._rawTransformable;a.transform=o.calculateTransform(new Ot(e,t,n,r));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,i&&(a.scaleY=-a.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var t=this.regions,n=0;n<t.length;n++){var r=t[n];if("geoJSON"===r.type&&r.contain(e))return t[n]}},t.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},t.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},t.prototype.dataToPoint=function(e,t,n){if(Y(e)&&(e=this.getGeoCoord(e)),e){var r=this.projection;return r&&(e=r.project(e)),e&&this.projectedToPoint(e,t,n)}},t.prototype.pointToData=function(e){var t=this.projection;return t&&(e=t.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(t){return e.prototype.pointToData.call(this,t)},t.prototype.projectedToPoint=function(t,n,r){return e.prototype.dataToPoint.call(this,t,n,r)},t.prototype.convertToPixel=function(e,t,n){var r=ET(t);return r===this?r.dataToPoint(n):null},t.prototype.convertFromPixel=function(e,t,n){var r=ET(t);return r===this?r.pointToData(n):null},t}(DT);function ET(e){var t=e.geoModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Ii).models[0]||{}).coordinateSystem:null}function OT(e,t){var n=e.get("boundingCoords");if(null!=n){var r=n[0],o=n[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])){var i=this.projection;if(i){var a=r[0],s=r[1],l=o[0],u=o[1];r=[1/0,1/0],o=[-1/0,-1/0];var c=function(e,t,n,a){for(var s=n-e,l=a-t,u=0;u<=100;u++){var c=u/100,d=i.project([e+s*c,t+l*c]);Ge(r,r,d),Ue(o,o,d)}};c(a,s,l,s),c(l,s,l,u),c(l,u,a,u),c(a,u,l,s)}this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}}var d,h,p,f=this.getBoundingRect(),g=e.get("layoutCenter"),m=e.get("layoutSize"),v=t.getWidth(),y=t.getHeight(),b=f.width/f.height*this.aspectScale,x=!1;if(g&&m&&(d=[Fo(g[0],v),Fo(g[1],y)],h=Fo(m,Math.min(v,y)),isNaN(d[0])||isNaN(d[1])||isNaN(h)||(x=!0)),x)p={},b>1?(p.width=h,p.height=h/b):(p.height=h,p.width=h*b),p.y=d[1]-p.height/2,p.x=d[0]-p.width/2;else{var _=e.getBoxLayoutParams();_.aspect=b,p=ph(_,{width:v,height:y})}this.setViewRect(p.x,p.y,p.width,p.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}R(RT,DT);var BT=function(){function e(){this.dimensions=NT}return e.prototype.create=function(e,t){var n=[];function r(e){return{nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale"),projection:e.get("projection")}}e.eachComponent("geo",function(e,o){var i=e.get("map"),a=new RT(i+o,i,A({nameMap:e.get("nameMap")},r(e)));a.zoomLimit=e.get("scaleLimit"),n.push(a),e.coordinateSystem=a,a.model=e,a.resize=OT,a.resize(e,t)}),e.eachSeries(function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=n[t]}});var o={};return e.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();o[t]=o[t]||[],o[t].push(e)}}),O(o,function(e,o){var i=B(e,function(e){return e.get("nameMap")}),a=new RT(o,o,A({nameMap:I(i)},r(e[0])));a.zoomLimit=re.apply(null,B(e,function(e){return e.get("scaleLimit")})),n.push(a),a.resize=OT,a.resize(e[0],t),O(e,function(e){e.coordinateSystem=a,function(e,t){O(t.get("geoCoord"),function(t,n){e.addGeoCoord(n,t)})}(a,e)})}),n},e.prototype.getFilledRegions=function(e,t,n,r){for(var o=(e||[]).slice(),i=me(),a=0;a<o.length;a++)i.set(o[a].name,o[a]);return O(cT(t,n,r).regions,function(e){var t=e.name;!i.get(t)&&o.push({name:t})}),o},e}(),zT=new BT,FT=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(e,t,n){var r=uT(e.map);if(r&&"geoJSON"===r.type){var o=e.itemStyle=e.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(e,n),pi(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=zT.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var n={};this._optionModelMap=z(t.regions||[],function(t,r){var o=r.name;return o&&(t.set(o,new hd(r,e,e.ecModel)),r.selected&&(n[o]=!0)),t},me()),t.selectedMap||(t.selectedMap=n)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new hd(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,t){var n=this.getRegionModel(e),r="normal"===t?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),o={name:e};return j(r)?(o.status=t,r(o)):Y(r)?r.replace("{a}",null!=e?e:""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var t=this.option,n=t.selectedMode;n&&("multiple"!==n&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0)},t.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var t=this.option.selectedMap;return!(!t||!t[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(xh);function VT(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function HT(e,t,n,r){var o=e.getZoom(),i=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(i):e.dataToPoint(i);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(VT(e,s),r)),null!=a){if(n){var l=n.min||0,u=n.max||1/0;a=Math.max(Math.min(o*a,u),l)/o}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),d=(t.originY-e.y)*(a-1);e.x-=c,e.y-=d,e.updateTransform(),e.setCenter(VT(e,s),r),e.setZoom(a*o)}return{center:e.getCenter(),zoom:e.getZoom()}}var WT=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.focusBlurEnabled=!0,n}return n(t,e),t.prototype.init=function(e,t){this._api=t},t.prototype.render=function(e,t,n,r){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new yT(n));var o=this._mapDraw;o.draw(e,t,n,this,r),o.group.on("click",this._handleRegionClick,this),o.group.silent=e.get("silent"),this.group.add(o.group),this.updateSelectStatus(e,t,n)},t.prototype._handleRegionClick=function(e){var t;hm(e.target,function(e){return null!=(t=Us(e).eventData)},!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},t.prototype.updateSelectStatus=function(e,t,n){var r=this;this._mapDraw.group.traverse(function(e){var t=Us(e).eventData;if(t)return r._model.isSelected(t.name)?n.enterSelect(e):n.leaveSelect(e),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(lg);function GT(e,t,n){!function(e,t,n){if(t.svg){var r=new JM(e,t.svg);lT.set(e,r)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?n=t.specialAreas:o=t,r=new aT(e,o,n),lT.set(e,r)}}(e,t,n)}function UT(e){function t(t,n){n.update="geo:updateSelectStatus",e.registerAction(n,function(e,n){var r={},o=[];return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name),O(n.coordinateSystem.regions,function(e){r[e.name]=n.isSelected(e.name)||!1});var i=[];O(r,function(e,t){r[t]&&i.push(t)}),o.push({geoIndex:n.componentIndex,name:i})}),{selected:r,allSelected:o,name:e.name}})}e.registerCoordinateSystem("geo",zT),e.registerComponentModel(FT),e.registerComponentView(WT),e.registerImpl("registerMap",GT),e.registerImpl("getMap",function(e){return function(e){var t=lT.get(e);return t&&"geoJSON"===t.type&&t.getMapForUser()}(e)}),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t,n){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(t){var o=t.coordinateSystem;if("geo"===o.type){var i=HT(o,e,t.get("scaleLimit"),n);t.setCenter&&t.setCenter(i.center),t.setZoom&&t.setZoom(i.zoom),"series"===r&&O(t.seriesGroup,function(e){e.setCenter(i.center),e.setZoom(i.zoom)})}})})}function jT(e,t){var n=e.isExpand?e.children:[],r=e.parentNode.children,o=e.hierNode.i?r[e.hierNode.i-1]:null;if(n.length){!function(e){for(var t=e.children,n=t.length,r=0,o=0;--n>=0;){var i=t[n];i.hierNode.prelim+=r,i.hierNode.modifier+=r,o+=i.hierNode.change,r+=i.hierNode.shift+o}}(e);var i=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;o?(e.hierNode.prelim=o.hierNode.prelim+t(e,o),e.hierNode.modifier=e.hierNode.prelim-i):e.hierNode.prelim=i}else o&&(e.hierNode.prelim=o.hierNode.prelim+t(e,o));e.parentNode.hierNode.defaultAncestor=function(e,t,n,r){if(t){for(var o=e,i=e,a=i.parentNode.children[0],s=t,l=o.hierNode.modifier,u=i.hierNode.modifier,c=a.hierNode.modifier,d=s.hierNode.modifier;s=ZT(s),i=$T(i),s&&i;){o=ZT(o),a=$T(a),o.hierNode.ancestor=e;var h=s.hierNode.prelim+d-i.hierNode.prelim-u+r(s,i);h>0&&(JT(KT(s,e,n),e,h),u+=h,l+=h),d+=s.hierNode.modifier,u+=i.hierNode.modifier,l+=o.hierNode.modifier,c+=a.hierNode.modifier}s&&!ZT(o)&&(o.hierNode.thread=s,o.hierNode.modifier+=d-l),i&&!$T(a)&&(a.hierNode.thread=i,a.hierNode.modifier+=u-c,n=e)}return n}(e,o,e.parentNode.hierNode.defaultAncestor||r[0],t)}function YT(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function qT(e){return arguments.length?e:QT}function XT(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function ZT(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function $T(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function KT(e,t,n){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:n}function JT(e,t,n){var r=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=r}function QT(e,t){return e.parentNode===t.parentNode?1:2}var ek=function(){this.parentPoint=[],this.childPoints=[]},tk=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ek},t.prototype.buildPath=function(e,t){var n=t.childPoints,r=n.length,o=t.parentPoint,i=n[0],a=n[r-1];if(1===r)return e.moveTo(o[0],o[1]),void e.lineTo(i[0],i[1]);var s=t.orient,l="TB"===s||"BT"===s?0:1,u=1-l,c=Fo(t.forkPosition,1),d=[];d[l]=o[l],d[u]=o[u]+(a[u]-o[u])*c,e.moveTo(o[0],o[1]),e.lineTo(d[0],d[1]),e.moveTo(i[0],i[1]),d[l]=i[l],e.lineTo(d[0],d[1]),d[l]=a[l],e.lineTo(d[0],d[1]),e.lineTo(a[0],a[1]);for(var h=1;h<r-1;h++){var p=n[h];e.moveTo(p[0],p[1]),d[l]=p[l],e.lineTo(d[0],d[1])}},t}(ms),nk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._mainGroup=new Po,n}return n(t,e),t.prototype.init=function(e,t){this._controller=new _M(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,n){var r=e.getData(),o=e.layoutInfo,i=this._mainGroup;"radial"===e.get("layout")?(i.x=o.x+o.width/2,i.y=o.y+o.height/2):(i.x=o.x,i.y=o.y),this._updateViewCoordSys(e,n),this._updateController(e,t,n);var a=this._data;r.diff(a).add(function(t){rk(r,t)&&ok(r,t,null,i,e)}).update(function(t,n){var o=a.getItemGraphicEl(n);rk(r,t)?ok(r,t,o,i,e):o&&sk(a,n,o,i,e)}).remove(function(t){var n=a.getItemGraphicEl(t);n&&sk(a,t,n,i,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&r.eachItemGraphicEl(function(t,r){t.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:r})})}),this._data=r},t.prototype._updateViewCoordSys=function(e,t){var n=e.getData(),r=[];n.each(function(e){var t=n.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||r.push([+t.x,+t.y])});var o=[],i=[];Ma(r,o,i);var a=this._min,s=this._max;i[0]-o[0]==0&&(o[0]=a?a[0]:o[0]-1,i[0]=s?s[0]:i[0]+1),i[1]-o[1]==0&&(o[1]=a?a[1]:o[1]-1,i[1]=s?s[1]:i[1]+1);var l=e.coordinateSystem=new DT;l.zoomLimit=e.get("scaleLimit"),l.setBoundingRect(o[0],o[1],i[0]-o[0],i[1]-o[1]),l.setCenter(e.get("center"),t),l.setZoom(e.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=o,this._max=i},t.prototype._updateController=function(e,t,n){var r=this,o=this._controller,i=this._controllerHost,a=this.group;o.setPointerChecker(function(t,r,o){var i=a.getBoundingRect();return i.applyTransform(a.transform),i.contain(r,o)&&!AM(t,n,e)}),o.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(t){MM(i,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){TM(i,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),r._updateNodeAndLinkScale(e),n.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),n=this._getNodeGlobalScale(e);t.eachItemGraphicEl(function(e,t){e.setSymbolScale(n)})},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,r=t.scaleX||1;return((t.getZoom()-1)*n+1)/r},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(hg);function rk(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)}function ok(e,t,n,r,o){var i=!n,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=!1===a.isExpand&&0!==a.children.length?l:"#fff",c=e.tree.root,d=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(d.dataIndex),p=d.getLayout(),f=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:p,g=a.getLayout();i?((n=new Ow(e,t,null,{symbolInnerColor:u,useNameLabel:!0})).x=f.x,n.y=f.y):n.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,r.add(n),e.setItemGraphicEl(t,n),n.__oldX=n.x,n.__oldY=n.y,rc(n,{x:g.x,y:g.y},o);var m=n.getSymbolPath();if("radial"===o.get("layout")){var v=c.children[0],y=v.getLayout(),b=v.children.length,x=void 0,_=void 0;if(g.x===y.x&&!0===a.isExpand&&v.children.length){var w={x:(v.children[0].getLayout().x+v.children[b-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[b-1].getLayout().y)/2};(x=Math.atan2(w.y-y.y,w.x-y.x))<0&&(x=2*Math.PI+x),(_=w.x<y.x)&&(x-=Math.PI)}else(x=Math.atan2(g.y-y.y,g.x-y.x))<0&&(x=2*Math.PI+x),0===a.children.length||0!==a.children.length&&!1===a.isExpand?(_=g.x<y.x)&&(x-=Math.PI):(_=g.x>y.x)||(x-=Math.PI);var S=_?"left":"right",C=s.getModel("label"),M=C.get("rotate"),T=M*(Math.PI/180),k=m.getTextContent();k&&(m.setTextConfig({position:C.get("position")||S,rotation:null==M?-x:T,origin:"center"}),k.setStyle("verticalAlign","middle"))}var I=s.get(["emphasis","focus"]),A="relative"===I?ve(a.getAncestorsIndices(),a.getDescendantIndices()):"ancestor"===I?a.getAncestorsIndices():"descendant"===I?a.getDescendantIndices():null;A&&(Us(n).focus=A),function(e,t,n,r,o,i,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),d=e.getOrient(),h=e.get(["lineStyle","curveness"]),p=e.get("edgeForkPosition"),f=l.getModel("lineStyle").getLineStyle(),g=r.__edge;if("curve"===u)t.parentNode&&t.parentNode!==n&&(g||(g=r.__edge=new Vu({shape:lk(c,d,h,o,o)})),rc(g,{shape:lk(c,d,h,i,a)},e));else if("polyline"===u&&"orthogonal"===c&&t!==n&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var m=t.children,v=[],y=0;y<m.length;y++){var b=m[y].getLayout();v.push([b.x,b.y])}g||(g=r.__edge=new tk({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:d,forkPosition:p}})),rc(g,{shape:{parentPoint:[a.x,a.y],childPoints:v}},e)}g&&("polyline"!==u||t.isExpand)&&(g.useStyle(D({strokeNoScale:!0,fill:null},f)),zl(g,l,"lineStyle"),vl(g),s.add(g))}(o,a,c,n,f,p,g,r),n.__edge&&(n.onHoverStateChange=function(t){if("blur"!==t){var r=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);r&&1===r.hoverState||gl(n.__edge,t)}})}function ik(e,t,n,r,o){var i=ak(t.tree.root,e),a=i.source,s=i.sourceLayout,l=t.getItemGraphicEl(e.dataIndex);if(l){var u=t.getItemGraphicEl(a.dataIndex).__edge,c=l.__edge||(!1===a.isExpand||1===a.children.length?u:void 0),d=r.get("edgeShape"),h=r.get("layout"),p=r.get("orient"),f=r.get(["lineStyle","curveness"]);c&&("curve"===d?ac(c,{shape:lk(h,p,f,s,s),style:{opacity:0}},r,{cb:function(){n.remove(c)},removeOpt:o}):"polyline"===d&&"orthogonal"===r.get("layout")&&ac(c,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},r,{cb:function(){n.remove(c)},removeOpt:o}))}}function ak(e,t){for(var n,r=t.parentNode===e?t:t.parentNode||t;null==(n=r.getLayout());)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function sk(e,t,n,r,o){var i=e.tree.getNodeByDataIndex(t),a=ak(e.tree.root,i).sourceLayout,s={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};ac(n,{x:a.x+1,y:a.y+1},o,{cb:function(){r.remove(n),e.setItemGraphicEl(t,null)},removeOpt:s}),n.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:s}),i.children.forEach(function(t){ik(t,e,r,o,s)}),ik(i,e,r,o,s)}function lk(e,t,n,r,o){var i,a,s,l,u,c,d,h;if("radial"===e){u=r.rawX,d=r.rawY,c=o.rawX,h=o.rawY;var p=XT(u,d),f=XT(u,d+(h-d)*n),g=XT(c,h+(d-h)*n),m=XT(c,h);return{x1:p.x||0,y1:p.y||0,x2:m.x||0,y2:m.y||0,cpx1:f.x||0,cpy1:f.y||0,cpx2:g.x||0,cpy2:g.y||0}}return u=r.x,d=r.y,c=o.x,h=o.y,"LR"!==t&&"RL"!==t||(i=u+(c-u)*n,a=d,s=c+(u-c)*n,l=h),"TB"!==t&&"BT"!==t||(i=u,a=d+(h-d)*n,s=c,l=h+(d-h)*n),{x1:u,y1:d,x2:c,y2:h,cpx1:i,cpy1:a,cpx2:s,cpy2:l}}var uk=Ci();function ck(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,mk(t,n,e),O(n,function(n){O(t.TRANSFERABLE_METHODS,function(t){n.wrapMethod(t,G(dk,e))})}),t.wrapMethod("cloneShallow",G(pk,e)),O(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,G(hk,e))}),le(n[t.dataType]===t)}function dk(e,t){if(uk(this).mainData===this){var n=A({},uk(this).datas);n[this.dataType]=t,mk(t,n,e)}else vk(t,this.dataType,uk(this).mainData,e);return t}function hk(e,t){return e.struct&&e.struct.update(),t}function pk(e,t){return O(uk(t).datas,function(n,r){n!==t&&vk(n.cloneShallow(),r,t,e)}),t}function fk(e){var t=uk(this).mainData;return null==e||null==t?t:uk(t).datas[e]}function gk(){var e=uk(this).mainData;return null==e?[{data:e}]:B(H(uk(e).datas),function(t){return{type:t,data:uk(e).datas[t]}})}function mk(e,t,n){uk(e).datas={},O(t,function(t,r){vk(t,r,e,n)})}function vk(e,t,n,r){uk(n).datas[t]=e,uk(e).mainData=n,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=fk,e.getLinkedDataAll=gk}var yk=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,n){j(e)&&(n=t,t=e,e=null),Y(e=e||{})&&(e={order:e});var r,o=e.order||"preorder",i=this[e.attr||"children"];"preorder"===o&&(r=t.call(n,this));for(var a=0;!r&&a<i.length;a++)i[a].eachNode(e,t,n);"postorder"===o&&t.call(n,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(e+1),r.height>t&&(t=r.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,r=n.length;t<r;t++){var o=n[t].getNodeById(e);if(o)return o}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,n=this.children,r=n.length;t<r;t++){var o=n[t].contains(e);if(o)return o}},e.prototype.getAncestors=function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}(),bk=function(){function e(e){this.type="tree",this._nodes=[],this.hostModel=e}return e.prototype.eachNode=function(e,t,n){this.root.eachNode(e,t,n)},e.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},e.prototype.getNodeById=function(e){return this.root.getNodeById(e)},e.prototype.update=function(){for(var e=this.data,t=this._nodes,n=0,r=t.length;n<r;n++)t[n].dataIndex=-1;for(n=0,r=e.count();n<r;n++)t[e.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,n,r){var o=new e(n),i=[],a=1;!function e(t,n){var r=t.value;a=Math.max(a,U(r)?r.length:1),i.push(t);var s=new yk(xi(t.name,""),o);n?function(e,t){var n=t.children;e.parentNode!==t&&(n.push(e),e.parentNode=t)}(s,n):o.root=s,o._nodes.push(s);var l=t.children;if(l)for(var u=0;u<l.length;u++)e(l[u],s)}(t),o.root.updateDepthAndHeight(0);var s=jy(i,{coordDimensions:["value"],dimensionsCount:a}).dimensions,l=new Uy(s,n);return l.initData(i),r&&r(l),ck({mainData:l,struct:o,structAttr:"tree"}),o.update(),o},e}();function xk(e,t,n){if(e&&L(t,e.type)>=0){var r=n.getData().tree.root,o=e.targetNode;if(Y(o)&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var i=e.targetNodeId;if(null!=i&&(o=r.getNodeById(i)))return{node:o}}}function _k(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function wk(e,t){return L(_k(e),t)>=0}function Sk(e,t){for(var n=[];e;){var r=e.dataIndex;n.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return n.reverse(),n}var Ck=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return n(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},n=e.leaves||{},r=new hd(n,this,this.ecModel),o=bk.createTree(t,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=o.getNodeByDataIndex(t);return n&&n.children.length&&n.isExpand||(e.parentModel=r),e})}),i=0;o.eachNode("preorder",function(e){e.depth>i&&(i=e.depth)});var a=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:i;return o.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=a}),o.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,n){for(var r=this.getData().tree,o=r.root.children[0],i=r.getNodeByDataIndex(e),a=i.getValue(),s=i.name;i&&i!==o;)s=i.parentNode.name+"."+s,i=i.parentNode;return zf("nameValue",{name:s,value:a,noValue:isNaN(a)||null==a})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=Sk(r,this),n.collapsed=!r.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(eg);function Mk(e,t){for(var n,r=[e];n=r.pop();)if(t(n),n.isExpand){var o=n.children;if(o.length)for(var i=o.length-1;i>=0;i--)r.push(o[i])}}function Tk(e,t){e.eachSeriesByType("tree",function(e){!function(e,t){var n=function(e,t){return ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=n;var r=e.get("layout"),o=0,i=0,a=null;"radial"===r?(o=2*Math.PI,i=Math.min(n.height,n.width)/2,a=qT(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(o=n.width,i=n.height,a=qT());var s=e.getData().tree.root,l=s.children[0];if(l){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n,r,o=[t];n=o.pop();)if(r=n.children,n.isExpand&&r.length)for(var i=r.length-1;i>=0;i--){var a=r[i];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:i,thread:null},o.push(a)}}(s),function(e,t,n){for(var r,o=[e],i=[];r=o.pop();)if(i.push(r),r.isExpand){var a=r.children;if(a.length)for(var s=0;s<a.length;s++)o.push(a[s])}for(;r=i.pop();)t(r,n)}(l,jT,a),s.hierNode.modifier=-l.hierNode.prelim,Mk(l,YT);var u=l,c=l,d=l;Mk(l,function(e){var t=e.getLayout().x;t<u.getLayout().x&&(u=e),t>c.getLayout().x&&(c=e),e.depth>d.depth&&(d=e)});var h=u===c?1:a(u,c)/2,p=h-u.getLayout().x,f=0,g=0,m=0,v=0;if("radial"===r)f=o/(c.getLayout().x+h+p),g=i/(d.depth-1||1),Mk(l,function(e){m=(e.getLayout().x+p)*f,v=(e.depth-1)*g;var t=XT(m,v);e.setLayout({x:t.x,y:t.y,rawX:m,rawY:v},!0)});else{var y=e.getOrient();"RL"===y||"LR"===y?(g=i/(c.getLayout().x+h+p),f=o/(d.depth-1||1),Mk(l,function(e){v=(e.getLayout().x+p)*g,m="LR"===y?(e.depth-1)*f:o-(e.depth-1)*f,e.setLayout({x:m,y:v},!0)})):"TB"!==y&&"BT"!==y||(f=o/(c.getLayout().x+h+p),g=i/(d.depth-1||1),Mk(l,function(e){m=(e.getLayout().x+p)*f,v="TB"===y?(e.depth-1)*g:i-(e.depth-1)*g,e.setLayout({x:m,y:v},!0)}))}}}(e,t)})}function kk(e){e.eachSeriesByType("tree",function(e){var t=e.getData();t.tree.eachNode(function(e){var n=e.getModel().getModel("itemStyle").getItemStyle();A(t.ensureUniqueItemVisual(e.dataIndex,"style"),n)})})}var Ik=["treemapZoomToNode","treemapRender","treemapMove"];function Ak(e){var t=e.getData().tree,n={};t.eachNode(function(t){for(var r=t;r&&r.depth>1;)r=r.parentNode;var o=Yh(e.ecModel,r.name||r.dataIndex+"",n);t.setVisual("decal",o)})}var Dk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventUsingHoverLayer=!0,n}return n(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};Pk(n);var r=e.levels||[],o=this.designatedVisualItemStyle={},i=new hd({itemStyle:o},this,t);r=e.levels=function(e,t){var n,r,o=hi(t.get("color")),i=hi(t.get(["aria","decal","decals"]));if(o){O(e=e||[],function(e){var t=new hd(e),o=t.get("color"),i=t.get("decal");(t.get(["itemStyle","color"])||o&&"none"!==o)&&(n=!0),(t.get(["itemStyle","decal"])||i&&"none"!==i)&&(r=!0)});var a=e[0]||(e[0]={});return n||(a.color=o.slice()),!r&&i&&(a.decal=i.slice()),e}}(r,t);var a=B(r||[],function(e){return new hd(e,i,t)},this),s=bk.createTree(n,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=s.getNodeByDataIndex(t),r=n?a[n.depth]:null;return e.parentModel=r||i,e})});return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,t,n){var r=this.getData(),o=this.getRawValue(e);return zf("nameValue",{name:r.getName(e),value:o})},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return n.treeAncestors=Sk(r,this),n.treePathInfo=n.treeAncestors,n},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},A(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=me(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Ak(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(eg);function Pk(e){var t=0;O(e.children,function(e){Pk(e);var n=e.value;U(n)&&(n=n[0]),t+=n});var n=e.value;U(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=t),n<0&&(n=0),U(e.value)?e.value[0]=n:e.value=n}var Lk=function(){function e(e){this.group=new Po,e.add(this.group)}return e.prototype.render=function(e,t,n,r){var o=e.getModel("breadcrumb"),i=this.group;if(i.removeAll(),o.get("show")&&n){var a=o.getModel("itemStyle"),s=o.getModel("emphasis"),l=a.getModel("textStyle"),u=s.getModel(["itemStyle","textStyle"]),c={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,c,l),this._renderContent(e,c,a,s,l,u,r),fh(i,c.pos,c.box)}},e.prototype._prepare=function(e,t,n){for(var r=e;r;r=r.parentNode){var o=xi(r.getModel().get("name"),""),i=n.getTextRect(o),a=Math.max(i.width+16,t.emptyItemWidth);t.totalWidth+=a+8,t.renderList.push({node:r,text:o,width:a})}},e.prototype._renderContent=function(e,t,n,r,o,i,a){for(var s,l,u,c,d,h,p,f,g,m=0,v=t.emptyItemWidth,y=e.get(["breadcrumb","height"]),b=(s=t.pos,c=(l=t.box).width,d=l.height,h=Fo(s.left,c),p=Fo(s.top,d),f=Fo(s.right,c),g=Fo(s.bottom,d),(isNaN(h)||isNaN(parseFloat(s.left)))&&(h=0),(isNaN(f)||isNaN(parseFloat(s.right)))&&(f=c),(isNaN(p)||isNaN(parseFloat(s.top)))&&(p=0),(isNaN(g)||isNaN(parseFloat(s.bottom)))&&(g=d),u=eh(u||0),{width:Math.max(f-h-u[1]-u[3],0),height:Math.max(g-p-u[0]-u[2],0)}),x=t.totalWidth,_=t.renderList,w=r.getModel("itemStyle").getItemStyle(),S=_.length-1;S>=0;S--){var C=_[S],M=C.node,T=C.width,k=C.text;x>b.width&&(x-=T-v,T=v,k=null);var I=new Pu({shape:{points:Nk(m,0,T,y,S===_.length-1,0===S)},style:D(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Ps({style:Uc(o,{text:k})}),textConfig:{position:"inside"},z2:1e5,onclick:G(a,M)});I.disableLabelAnimation=!0,I.getTextContent().ensureState("emphasis").style=Uc(i,{text:k}),I.ensureState("emphasis").style=w,Rl(I,r.get("focus"),r.get("blurScope"),r.get("disabled")),this.group.add(I),Rk(I,e,M),m+=T+8}},e.prototype.remove=function(){this.group.removeAll()},e}();function Nk(e,t,n,r,o,i){var a=[[o?e:e-5,t],[e+n,t],[e+n,t+r],[o?e:e-5,t+r]];return!i&&a.splice(2,0,[e+n+5,t+r/2]),!o&&a.push([e,t+r/2]),a}function Rk(e,t,n){Us(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&Sk(n,t)}}var Ek=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(e,t,n,r,o){return!this._elExistsMap[e.id]&&(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:n,delay:r,easing:o}),!0)},e.prototype.finished=function(e){return this._finishedCallback=e,this},e.prototype.start=function(){for(var e=this,t=this._storage.length,n=function(){--t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},r=0,o=this._storage.length;r<o;r++){var i=this._storage[r];i.el.animateTo(i.target,{duration:i.duration,delay:i.delay,easing:i.easing,setToFinal:!0,done:n,aborted:n})}return this},e}(),Ok=Po,Bk=Is,zk="label",Fk="upperLabel",Vk=Gi([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Hk=function(e){var t=Vk(e);return t.stroke=t.fill=t.lineWidth=null,t},Wk=Ci(),Gk=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._state="ready",n._storage={nodeGroup:[],background:[],content:[]},n}return n(t,e),t.prototype.render=function(e,t,n,r){if(!(L(t.findComponents({mainType:"series",subType:"treemap",query:r}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var o=xk(r,["treemapZoomToNode","treemapRootToNode"],e),i=r&&r.type,a=e.layoutInfo,s=!this._oldTree,l=this._storage,u="treemapRootToNode"===i&&o&&l?{rootNodeGroup:l.nodeGroup[o.node.getRawIndex()],direction:r.direction}:null,c=this._giveContainerGroup(a),d=e.get("animation"),h=this._doRender(c,e,u);!d||s||i&&"treemapZoomToNode"!==i&&"treemapRootToNode"!==i?h.renderFinally():this._doAnimation(c,h,e,u),this._resetController(n),this._renderBreadcrumb(e,n,o)}},t.prototype._giveContainerGroup=function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new Ok,this._initEvents(t),this.group.add(t)),t.x=e.x,t.y=e.y,t},t.prototype._doRender=function(e,t,n){var r=t.getData().tree,o=this._oldTree,i={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,l=[];function u(e,r,o,u){return function(e,t,n,r,o,i,a,s,l,u){if(a){var c=a.getLayout(),d=e.getData(),h=a.getModel();if(d.setItemGraphicEl(a.dataIndex,null),c&&c.isInView){var p=c.width,f=c.height,g=c.borderWidth,m=c.invisible,v=a.getRawIndex(),y=s&&s.getRawIndex(),b=a.viewChildren,x=c.upperHeight,_=b&&b.length,w=h.getModel("itemStyle"),S=h.getModel(["emphasis","itemStyle"]),C=h.getModel(["blur","itemStyle"]),M=h.getModel(["select","itemStyle"]),T=w.get("borderRadius")||0,k=F("nodeGroup",Ok);if(k){if(l.add(k),k.x=c.x||0,k.y=c.y||0,k.markRedraw(),Wk(k).nodeWidth=p,Wk(k).nodeHeight=f,c.isAboveViewRoot)return k;var I=F("background",Bk,u,20);I&&function(t,n,r){var o=Us(n);if(o.dataIndex=a.dataIndex,o.seriesIndex=e.seriesIndex,n.setShape({x:0,y:0,width:p,height:f,r:T}),m)O(n);else{n.invisible=!1;var i=a.getVisual("style"),s=i.stroke,l=Hk(w);l.fill=s;var u=Vk(S);u.fill=S.get("borderColor");var c=Vk(C);c.fill=C.get("borderColor");var d=Vk(M);if(d.fill=M.get("borderColor"),r){var h=p-2*g;B(n,s,i.opacity,{x:g,y:0,width:h,height:x})}else n.removeTextContent();n.setStyle(l),n.ensureState("emphasis").style=u,n.ensureState("blur").style=c,n.ensureState("select").style=d,vl(n)}t.add(n)}(k,I,_&&c.upperLabelHeight);var D=h.getModel("emphasis"),P=D.get("focus"),L=D.get("blurScope"),N=D.get("disabled"),R="ancestor"===P?a.getAncestorsIndices():"descendant"===P?a.getDescendantIndices():P;if(_)Vl(k)&&Fl(k,!1),I&&(Fl(I,!N),d.setItemGraphicEl(a.dataIndex,I),El(I,R,L));else{var E=F("content",Bk,u,30);E&&function(t,n){var r=Us(n);r.dataIndex=a.dataIndex,r.seriesIndex=e.seriesIndex;var o=Math.max(p-2*g,0),i=Math.max(f-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:o,height:i,r:T}),m)O(n);else{n.invisible=!1;var s=a.getVisual("style"),l=s.fill,u=Hk(w);u.fill=l,u.decal=s.decal;var c=Vk(S),d=Vk(C),h=Vk(M);B(n,l,s.opacity,null),n.setStyle(u),n.ensureState("emphasis").style=c,n.ensureState("blur").style=d,n.ensureState("select").style=h,vl(n)}t.add(n)}(k,E),I.disableMorphing=!0,I&&Vl(I)&&Fl(I,!1),Fl(k,!N),d.setItemGraphicEl(a.dataIndex,k),El(k,R,L)}return k}}}function O(e){!e.invisible&&i.push(e)}function B(t,n,r,o){var i=h.getModel(o?Fk:zk),s=xi(h.get("name"),null),l=i.getShallow("show");Wc(t,Gc(h,o?Fk:zk),{defaultText:l?s:null,inheritColor:n,defaultOpacity:r,labelFetcher:e,labelDataIndex:a.dataIndex});var u=t.getTextContent();if(u){var d=u.style,p=se(d.padding||0);o&&(t.setTextConfig({layoutRect:o}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var e=Math.max((o?o.width:t.shape.width)-p[1]-p[3],0),n=Math.max((o?o.height:t.shape.height)-p[0]-p[2],0);d.width===e&&d.height===n||u.setStyle({width:e,height:n})},d.truncateMinChar=2,d.lineOverflow="truncate",z(d,o,c);var f=u.getState("emphasis");z(f?f.style:null,o,c)}}function z(t,n,r){var o=t?t.text:null;if(!n&&r.isLeafRoot&&null!=o){var i=e.get("drillDownIcon",!0);t.text=i?i+" "+o:o}}function F(e,r,i,a){var s=null!=y&&n[e][y],l=o[e];return s?(n[e][y]=null,function(e,t){var n=e[v]={};t instanceof Ok?(n.oldX=t.x,n.oldY=t.y):n.oldShape=A({},t.shape)}(l,s)):m||((s=new r)instanceof fa&&(s.z2=function(e,t){return 100*e+t}(i,a)),V(l,s)),t[e][v]=s}function V(e,t){var n=e[v]={},i=a.parentNode,s=t instanceof Po;if(i&&(!r||"drillDown"===r.direction)){var l=0,u=0,c=o.background[i.getRawIndex()];!r&&c&&c.oldShape&&(l=c.oldShape.width,u=c.oldShape.height),s?(n.oldX=0,n.oldY=u):n.oldShape={x:l,y:u,width:0,height:0}}n.fadein=!s}}(t,a,s,n,i,l,e,r,o,u)}!function e(t,n,r,o,i){function a(e){return e.getId()}function s(a,s){var l=null!=a?t[a]:null,c=null!=s?n[s]:null,d=u(l,c,r,i);d&&e(l&&l.viewChildren||[],c&&c.viewChildren||[],d,o,i+1)}o?(n=t,O(t,function(e,t){!e.isRemoved()&&s(t,t)})):new xy(n,t,a,a).add(s).update(s).remove(G(s,null)).execute()}(r.root?[r.root]:[],o&&o.root?[o.root]:[],e,r===o||!o,0);var c=function(e){var t={nodeGroup:[],background:[],content:[]};return e&&O(e,function(e,n){var r=t[n];O(e,function(e){e&&(r.push(e),Wk(e).willDelete=!0)})}),t}(s);return this._oldTree=r,this._storage=a,{lastsForAnimation:i,willDeleteEls:c,renderFinally:function(){O(c,function(e){O(e,function(e){e.parent&&e.parent.remove(e)})}),O(l,function(e){e.invisible=!0,e.dirty()})}}},t.prototype._doAnimation=function(e,t,n,r){var o=n.get("animationDurationUpdate"),i=n.get("animationEasing"),a=(j(o)?0:o)||0,s=(j(i)?null:i)||"cubicOut",l=new Ek;O(t.willDeleteEls,function(e,t){O(e,function(e,n){if(!e.invisible){var o,i=e.parent,u=Wk(i);if(r&&"drillDown"===r.direction)o=i===r.rootNodeGroup?{shape:{x:0,y:0,width:u.nodeWidth,height:u.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var c=0,d=0;u.willDelete||(c=u.nodeWidth/2,d=u.nodeHeight/2),o="nodeGroup"===t?{x:c,y:d,style:{opacity:0}}:{shape:{x:c,y:d,width:0,height:0},style:{opacity:0}}}o&&l.add(e,o,a,0,s)}})}),O(this._storage,function(e,n){O(e,function(e,r){var o=t.lastsForAnimation[n][r],i={};o&&(e instanceof Po?null!=o.oldX&&(i.x=e.x,i.y=e.y,e.x=o.oldX,e.y=o.oldY):(o.oldShape&&(i.shape=A({},e.shape),e.setShape(o.oldShape)),o.fadein?(e.setStyle("opacity",0),i.style={opacity:1}):1!==e.style.opacity&&(i.style={opacity:1})),l.add(e,i,a,0,s))})},this),this._state="animating",l.finished(W(function(){this._state="ready",t.renderFinally()},this)).start()},t.prototype._resetController=function(e){var t=this._controller;t||((t=this._controller=new _M(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",W(this._onPan,this)),t.on("zoom",W(this._onZoom,this)));var n=new Ot(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(e,t,r){return n.contain(t,r)})},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},t.prototype._onZoom=function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;var i=new Ot(o.x,o.y,o.width,o.height),a=this.seriesModel.layoutInfo,s=[1,0,0,1,0,0];_t(s,s,[-(t-=a.x),-(n-=a.y)]),St(s,s,[e.scale,e.scale]),_t(s,s,[t,n]),i.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x,y:i.y,width:i.width,height:i.height}})}},t.prototype._initEvents=function(e){var t=this;e.on("click",function(e){if("ready"===t._state){var n=t.seriesModel.get("nodeClick",!0);if(n){var r=t.findTarget(e.offsetX,e.offsetY);if(r){var o=r.node;if(o.getLayout().isLeafRoot)t._rootToNode(r);else if("zoomToNode"===n)t._zoomToNode(r);else if("link"===n){var i=o.hostTree.data.getItemModel(o.dataIndex),a=i.get("link",!0),s=i.get("target",!0)||"blank";a&&sh(a,s)}}}}},this)},t.prototype._renderBreadcrumb=function(e,t,n){var r=this;n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||(n={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Lk(this.group))).render(e,t,n.node,function(t){"animating"!==r._state&&(wk(e.getViewRoot(),t)?r._rootToNode({node:t}):r._zoomToNode({node:t}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(r){var o=this._storage.background[r.getRawIndex()];if(o){var i=o.transformCoordToLocal(e,t),a=o.shape;if(!(a.x<=i[0]&&i[0]<=a.x+a.width&&a.y<=i[1]&&i[1]<=a.y+a.height))return!1;n={node:r,offsetX:i[0],offsetY:i[1]}}},this),n},t.type="treemap",t}(hg),Uk=O,jk=Z,Yk=function(){function e(t){var n=t.mappingMethod,r=t.type,o=this.option=T(t);this.type=r,this.mappingMethod=n,this._normalizeData=nI[n];var i=e.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[n],"piecewise"===n?(qk(o),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,O(t,function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)})}(o)):"category"===n?o.categories?function(e){var t=e.categories,n=e.categoryMap={},r=e.visual;if(Uk(t,function(e,t){n[e]=t}),!U(r)){var o=[];Z(r)?Uk(r,function(e,t){var r=n[t];o[null!=r?r:-1]=e}):o[-1]=r,r=tI(e,o)}for(var i=t.length-1;i>=0;i--)null==r[i]&&(delete n[t[i]],t.pop())}(o):qk(o,!0):(le("linear"!==n||o.dataExtent),qk(o))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return W(this._normalizeData,this)},e.listVisualTypes=function(){return H(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,n){Z(e)?O(e,t,n):t.call(n,e)},e.mapVisual=function(t,n,r){var o,i=U(t)?[]:Z(t)?{}:(o=!0,null);return e.eachVisual(t,function(e,t){var a=n.call(r,e,t);o?i=a:i[t]=a}),i},e.retrieveVisuals=function(t){var n,r={};return t&&Uk(e.visualHandlers,function(e,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(e){if(U(e))e=e.slice();else{if(!jk(e))return[];var t=[];Uk(e,function(e,n){t.push(n)}),e=t}return e.sort(function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1}),e},e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,n){for(var r,o=1/0,i=0,a=t.length;i<a;i++){var s=t[i].value;if(null!=s){if(s===e||Y(s)&&s===e+"")return i;n&&d(s,i)}}for(i=0,a=t.length;i<a;i++){var l=t[i],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(rI(c[1],e,u[1]))return i}else if(u[1]===1/0){if(rI(c[0],u[0],e))return i}else if(rI(c[0],u[0],e)&&rI(c[1],e,u[1]))return i;n&&d(u[0],i),n&&d(u[1],i)}}if(n)return e===1/0?t.length-1:e===-1/0?0:r;function d(t,n){var i=Math.abs(t-e);i<o&&(o=i,r=n)}},e.visualHandlers={color:{applyVisual:$k("color"),getColorMapper:function(){var e=this.option;return W("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),Kk.call(this,e)}:function(t,n,r){var o=!!r;return!n&&(t=this._normalizeData(t)),r=Zn(t,e.parsedVisual,r),o?r:tr(r,"rgba")},this)},_normalizedToVisual:{linear:function(e){return tr(Zn(e,this.option.parsedVisual),"rgba")},category:Kk,piecewise:function(e,t){var n=eI.call(this,t);return null==n&&(n=tr(Zn(e,this.option.parsedVisual),"rgba")),n},fixed:Jk}},colorHue:Xk(function(e,t){return Qn(e,t)}),colorSaturation:Xk(function(e,t){return Qn(e,null,t)}),colorLightness:Xk(function(e,t){return Qn(e,null,null,t)}),colorAlpha:Xk(function(e,t){return er(e,t)}),decal:{applyVisual:$k("decal"),_normalizedToVisual:{linear:null,category:Kk,piecewise:null,fixed:null}},opacity:{applyVisual:$k("opacity"),_normalizedToVisual:Qk([0,1])},liftZ:{applyVisual:$k("liftZ"),_normalizedToVisual:{linear:Jk,category:Jk,piecewise:Jk,fixed:Jk}},symbol:{applyVisual:function(e,t,n){n("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:Zk,category:Kk,piecewise:function(e,t){var n=eI.call(this,t);return null==n&&(n=Zk.call(this,e)),n},fixed:Jk}},symbolSize:{applyVisual:$k("symbolSize"),_normalizedToVisual:Qk([0,1])}},e}();function qk(e,t){var n=e.visual,r=[];Z(n)?Uk(n,function(e){r.push(e)}):null!=n&&r.push(n),t||1!==r.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(r[1]=r[0]),tI(e,r)}function Xk(e){return{applyVisual:function(t,n,r){var o=this.mapValueToVisual(t);r("color",e(n("color"),o))},_normalizedToVisual:Qk([0,1])}}function Zk(e){var t=this.option.visual;return t[Math.round(zo(e,[0,1],[0,t.length-1],!0))]||{}}function $k(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function Kk(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function Jk(){return this.option.visual[0]}function Qk(e){return{linear:function(t){return zo(t,e,this.option.visual,!0)},category:Kk,piecewise:function(t,n){var r=eI.call(this,n);return null==r&&(r=zo(t,e,this.option.visual,!0)),r},fixed:Jk}}function eI(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=n[Yk.findPieceIndex(e,n)];if(r&&r.visual)return r.visual[this.type]}}function tI(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=B(t,function(e){return Yn(e)||[0,0,0,1]})),t}var nI={linear:function(e){return zo(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Yk.findPieceIndex(e,t,!0);if(null!=n)return zo(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?-1:t},fixed:_e};function rI(e,t,n){return e?t<=n:t<n}var oI=Ci(),iI={seriesType:"treemap",reset:function(e){var t=e.getData().tree.root;t.isRemoved()||aI(t,{},e.getViewRoot().getAncestors(),e)}};function aI(e,t,n,r){var o=e.getModel(),i=e.getLayout(),a=e.hostTree.data;if(i&&!i.invisible&&i.isInView){var s,l=o.getModel("itemStyle"),u=function(e,t,n){var r=A({},t),o=n.designatedVisualItemStyle;return O(["color","colorAlpha","colorSaturation"],function(n){o[n]=t[n];var i=e.get(n);o[n]=null,null!=i&&(r[n]=i)}),r}(l,t,r),c=a.ensureUniqueItemVisual(e.dataIndex,"style"),d=l.get("borderColor"),h=l.get("borderColorSaturation");null!=h&&(d=function(e,t){return null!=t?Qn(t,null,null,e):null}(h,s=sI(u))),c.stroke=d;var p=e.viewChildren;if(p&&p.length){var f=function(e,t,n,r,o,i){if(i&&i.length){var a=uI(t,"color")||null!=o.color&&"none"!==o.color&&(uI(t,"colorAlpha")||uI(t,"colorSaturation"));if(a){var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var c=t.get("colorMappingBy"),d={type:a.name,dataExtent:u,visual:a.range};"color"!==d.type||"index"!==c&&"id"!==c?d.mappingMethod="linear":(d.mappingMethod="category",d.loop=!0);var h=new Yk(d);return oI(h).drColorMappingBy=c,h}}}(0,o,i,0,u,p);O(p,function(e,t){if(e.depth>=n.length||e===n[e.depth]){var i=function(e,t,n,r,o,i){var a=A({},t);if(o){var s=o.type,l="color"===s&&oI(o).drColorMappingBy,u="index"===l?r:"id"===l?i.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));a[s]=o.mapValueToVisual(u)}return a}(o,u,e,t,f,r);aI(e,i,n,r)}})}else s=sI(u),c.fill=s}}function sI(e){var t=lI(e,"color");if(t){var n=lI(e,"colorAlpha"),r=lI(e,"colorSaturation");return r&&(t=Qn(t,null,null,r)),n&&(t=er(t,n)),t}}function lI(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function uI(e,t){var n=e.get(t);return U(n)&&n.length?{name:t,range:n}:null}var cI=Math.max,dI=Math.min,hI=re,pI=O,fI=["itemStyle","borderWidth"],gI=["itemStyle","gapWidth"],mI=["upperLabel","show"],vI=["upperLabel","height"],yI={seriesType:"treemap",reset:function(e,t,n,r){var o=n.getWidth(),i=n.getHeight(),a=e.option,s=ph(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],u=Fo(hI(s.width,l[0]),o),c=Fo(hI(s.height,l[1]),i),d=r&&r.type,h=xk(r,["treemapZoomToNode","treemapRootToNode"],e),p="treemapRender"===d||"treemapMove"===d?r.rootRect:null,f=e.getViewRoot(),g=_k(f);if("treemapMove"!==d){var m="treemapZoomToNode"===d?function(e,t,n,r,o){var i,a=(t||{}).node,s=[r,o];if(!a||a===n)return s;for(var l=r*o,u=l*e.option.zoomToNodeRatio;i=a.parentNode;){for(var c=0,d=i.children,h=0,p=d.length;h<p;h++)c+=d[h].getValue();var f=a.getValue();if(0===f)return s;u*=c/f;var g=i.getModel(),m=g.get(fI);(u+=4*m*m+(3*m+Math.max(m,SI(g)))*Math.pow(u,.5))>qo&&(u=qo),a=i}u<l&&(u=l);var v=Math.pow(u/l,.5);return[r*v,o*v]}(e,h,f,u,c):p?[p.width,p.height]:[u,c],v=a.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:a.squareRatio,sort:v,leafDepth:a.leafDepth};f.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(b),bI(f,y,!1,0),b=f.getLayout(),pI(g,function(e,t){var n=(g[t+1]||f).getValue();e.setLayout(A({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))})}var x=e.getData().tree.root;x.setLayout(function(e,t,n){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!n)return r;var o=n.node,i=o.getLayout();if(!i)return r;for(var a=[i.width/2,i.height/2],s=o;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:e.width/2-a[0],y:e.height/2-a[1]}}(s,p,h),!0),e.setLayoutInfo(s),wI(x,new Ot(-s.x,-s.y,o,i),g,f,0)}};function bI(e,t,n,r){var o,i;if(!e.isRemoved()){var a=e.getLayout();o=a.width,i=a.height;var s=e.getModel(),l=s.get(fI),u=s.get(gI)/2,c=SI(s),d=Math.max(l,c),h=l-u,p=d-u;e.setLayout({borderWidth:l,upperHeight:d,upperLabelHeight:c},!0);var f=(o=cI(o-2*h,0))*(i=cI(i-h-p,0)),g=function(e,t,n,r,o,i){var a=e.children||[],s=r.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=r.leafDepth&&r.leafDepth<=i;if(o&&!l)return e.viewChildren=[];a=F(a,function(e){return!e.isRemoved()}),function(e,t){t&&e.sort(function(e,n){var r="asc"===t?e.getValue()-n.getValue():n.getValue()-e.getValue();return 0===r?"asc"===t?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:r})}(a,s);var u=function(e,t,n){for(var r=0,o=0,i=t.length;o<i;o++)r+=t[o].getValue();var a,s=e.get("visualDimension");return t&&t.length?"value"===s&&n?(a=[t[t.length-1].getValue(),t[0].getValue()],"asc"===n&&a.reverse()):(a=[1/0,-1/0],pI(t,function(e){var t=e.getValue(s);t<a[0]&&(a[0]=t),t>a[1]&&(a[1]=t)})):a=[NaN,NaN],{sum:r,dataExtent:a}}(t,a,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(e,t,n,r,o){if(!r)return n;for(var i=e.get("visibleMin"),a=o.length,s=a,l=a-1;l>=0;l--){var u=o["asc"===r?a-l-1:l].getValue();u/n*t<i&&(s=l,n-=u)}return"asc"===r?o.splice(0,a-s):o.splice(s,a-s),n}(t,n,u.sum,s,a),0===u.sum)return e.viewChildren=[];for(var c=0,d=a.length;c<d;c++){var h=a[c].getValue()/u.sum*n;a[c].setLayout({area:h})}return l&&(a.length&&e.setLayout({isLeafRoot:!0},!0),a.length=0),e.viewChildren=a,e.setLayout({dataExtent:u.dataExtent},!0),a}(e,s,f,t,n,r);if(g.length){var m={x:h,y:p,width:o,height:i},v=dI(o,i),y=1/0,b=[];b.area=0;for(var x=0,_=g.length;x<_;){var w=g[x];b.push(w),b.area+=w.getLayout().area;var S=xI(b,v,t.squareRatio);S<=y?(x++,y=S):(b.area-=b.pop().getLayout().area,_I(b,v,m,u,!1),v=dI(m.width,m.height),b.length=b.area=0,y=1/0)}if(b.length&&_I(b,v,m,u,!0),!n){var C=s.get("childrenVisibleMin");null!=C&&f<C&&(n=!0)}for(x=0,_=g.length;x<_;x++)bI(g[x],t,n,r+1)}}}function xI(e,t,n){for(var r=0,o=1/0,i=0,a=void 0,s=e.length;i<s;i++)(a=e[i].getLayout().area)&&(a<o&&(o=a),a>r&&(r=a));var l=e.area*e.area,u=t*t*n;return l?cI(u*r/l,l/(u*o)):1/0}function _I(e,t,n,r,o){var i=t===n.width?0:1,a=1-i,s=["x","y"],l=["width","height"],u=n[s[i]],c=t?e.area/t:0;(o||c>n[l[a]])&&(c=n[l[a]]);for(var d=0,h=e.length;d<h;d++){var p=e[d],f={},g=c?p.getLayout().area/c:0,m=f[l[a]]=cI(c-2*r,0),v=n[s[i]]+n[l[i]]-u,y=d===h-1||v<g?v:g,b=f[l[i]]=cI(y-2*r,0);f[s[a]]=n[s[a]]+dI(r,m/2),f[s[i]]=u+dI(r,b/2),u+=y,p.setLayout(f,!0)}n[s[a]]+=c,n[l[a]]-=c}function wI(e,t,n,r,o){var i=e.getLayout(),a=n[o],s=a&&a===e;if(!(a&&!s||o===n.length&&e!==r)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(i),isAboveViewRoot:s},!0);var l=new Ot(t.x-i.x,t.y-i.y,t.width,t.height);pI(e.viewChildren||[],function(e){wI(e,l,n,r,o+1)})}}function SI(e){return e.get(mI)?e.get(vI):0}function CI(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),r=e.getGraph().data,o=n.mapArray(n.getName);r.filterSelf(function(e){var n=r.getItemModel(e).getShallow("category");if(null!=n){X(n)&&(n=o[n]);for(var i=0;i<t.length;i++)if(!t[i].isSelected(n))return!1}return!0})})}function MI(e){var t={};e.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),r=e.getData(),o={};n.each(function(r){var i=n.getName(r);o["ec-"+i]=r;var a=n.getItemModel(r),s=a.getModel("itemStyle").getItemStyle();s.fill||(s.fill=e.getColorFromPalette(i,t)),n.setItemVisual(r,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var c=a.getShallow(l[u],!0);null!=c&&n.setItemVisual(r,l[u],c)}}),n.count()&&r.each(function(e){var t=r.getItemModel(e).getShallow("category");if(null!=t){Y(t)&&(t=o["ec-"+t]);var i=n.getItemVisual(t,"style");A(r.ensureUniqueItemVisual(e,"style"),i);for(var a=["symbol","symbolSize","symbolKeepAspect"],s=0;s<a.length;s++)r.setItemVisual(e,a[s],n.getItemVisual(t,a[s]))}})})}function TI(e){return e instanceof Array||(e=[e,e]),e}function kI(e){e.eachSeriesByType("graph",function(e){var t=e.getGraph(),n=e.getEdgeData(),r=TI(e.get("edgeSymbol")),o=TI(e.get("edgeSymbolSize"));n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("style",e.getModel("lineStyle").getLineStyle()),n.each(function(e){var r=n.getItemModel(e),o=t.getEdgeByIndex(e),i=TI(r.getShallow("symbol",!0)),a=TI(r.getShallow("symbolSize",!0)),s=r.getModel("lineStyle").getLineStyle(),l=n.ensureUniqueItemVisual(e,"style");switch(A(l,s),l.stroke){case"source":var u=o.node1.getVisual("style");l.stroke=u&&u.fill;break;case"target":u=o.node2.getVisual("style"),l.stroke=u&&u.fill}i[0]&&o.setVisual("fromSymbol",i[0]),i[1]&&o.setVisual("toSymbol",i[1]),a[0]&&o.setVisual("fromSymbolSize",a[0]),a[1]&&o.setVisual("toSymbolSize",a[1])})})}var II="--\x3e",AI=function(e){return e.get("autoCurveness")||null},DI=function(e,t){var n=AI(e),r=20,o=[];if(X(n))r=n;else if(U(n))return void(e.__curvenessList=n);t>r&&(r=t);var i=r%2?r+2:r+3;o=[];for(var a=0;a<i;a++)o.push((a%2?a+1:a)/10*(a%2?-1:1));e.__curvenessList=o},PI=function(e,t,n){var r=[e.id,e.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[n.uid,r,o].join(II)},LI=function(e){var t=e.split(II);return[t[0],t[2],t[1]].join(II)},NI=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function RI(e,t,n,r){var o=AI(t),i=U(o);if(!o)return null;var a=function(e,t){var n=PI(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===n){s=l;break}var u=function(e,t){return NI(PI(e.node1,e.node2,t),t)+NI(PI(e.node2,e.node1,t),t)}(e,t);DI(t,u),e.lineStyle=e.lineStyle||{};var c=PI(e.node1,e.node2,t),d=t.__curvenessList,h=i||u%2?0:1;if(a.isForward)return d[h+s];var p=LI(c),f=NI(p,t),g=d[s+f+h];return r?i?o&&0===o[0]?(f+h)%2?g:-g:((f%2?0:1)+h)%2?g:-g:(f+h)%2?g:-g:d[s+f+h]}function EI(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])}),OI(n,e)}}function OI(e,t){e.eachEdge(function(e,n){var r=ie(e.getModel().get(["lineStyle","curveness"]),-RI(e,t,n,!0),0),o=Te(e.node1.getLayout()),i=Te(e.node2.getLayout()),a=[o,i];+r&&a.push([(o[0]+i[0])/2-(o[1]-i[1])*r,(o[1]+i[1])/2-(i[0]-o[0])*r]),e.setLayout(a)})}function BI(e,t){e.eachSeriesByType("graph",function(e){var t=e.get("layout"),n=e.coordinateSystem;if(n&&"view"!==n.type){var r=e.getData(),o=[];O(n.dimensions,function(e){o=o.concat(r.mapDimensionsAll(e))});for(var i=0;i<r.count();i++){for(var a=[],s=!1,l=0;l<o.length;l++){var u=r.get(o[l],i);isNaN(u)||(s=!0),a.push(u)}s?r.setItemLayout(i,n.dataToPoint(a)):r.setItemLayout(i,[NaN,NaN])}OI(r.graph,e)}else t&&"none"!==t||EI(e)})}function zI(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,r=t.scaleX;return((t.getZoom()-1)*n+1)/r}function FI(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var VI=Math.PI,HI=[];function WI(e,t,n,r){var o=e.coordinateSystem;if(!o||"view"===o.type){var i=o.getBoundingRect(),a=e.getData(),s=a.graph,l=i.width/2+i.x,u=i.height/2+i.y,c=Math.min(i.width,i.height)/2,d=a.count();if(a.setLayout({cx:l,cy:u}),d){if(n){var h=o.pointToData(r),p=h[0],f=h[1],g=[p-l,f-u];Oe(g,g),Ee(g,g,c),n.setLayout([l+g[0],u+g[1]],!0),UI(n,e.get(["circular","rotateLabel"]),l,u)}GI[t](e,s,a,c,l,u,d),s.eachEdge(function(t,n){var r,o=ie(t.getModel().get(["lineStyle","curveness"]),RI(t,e,n),0),i=Te(t.node1.getLayout()),a=Te(t.node2.getLayout()),s=(i[0]+a[0])/2,c=(i[1]+a[1])/2;+o&&(r=[l*(o*=3)+s*(1-o),u*o+c*(1-o)]),t.setLayout([i,a,r])})}}}var GI={value:function(e,t,n,r,o,i,a){var s=0,l=n.getSum("value"),u=2*Math.PI/(l||a);t.eachNode(function(e){var t=e.getValue("value"),n=u*(l?t:1)/2;s+=n,e.setLayout([r*Math.cos(s)+o,r*Math.sin(s)+i]),s+=n})},symbolSize:function(e,t,n,r,o,i,a){var s=0;HI.length=a;var l=zI(e);t.eachNode(function(e){var t=FI(e);isNaN(t)&&(t=2),t<0&&(t=0),t*=l;var n=Math.asin(t/2/r);isNaN(n)&&(n=VI/2),HI[e.dataIndex]=n,s+=2*n});var u=(2*VI-s)/a/2,c=0;t.eachNode(function(e){var t=u+HI[e.dataIndex];c+=t,(!e.getLayout()||!e.getLayout().fixed)&&e.setLayout([r*Math.cos(c)+o,r*Math.sin(c)+i]),c+=t})}};function UI(e,t,n,r){var o=e.getGraphicEl();if(o){var i=e.getModel().get(["label","rotate"])||0,a=o.getSymbolPath();if(t){var s=e.getLayout(),l=Math.atan2(s[1]-r,s[0]-n);l<0&&(l=2*Math.PI+l);var u=s[0]<n;u&&(l-=Math.PI);var c=u?"left":"right";a.setTextConfig({rotation:-l,position:c,origin:"center"});var d=a.ensureState("emphasis");A(d.textConfig||(d.textConfig={}),{position:c})}else a.setTextConfig({rotation:i*=Math.PI/180})}}function jI(e){e.eachSeriesByType("graph",function(e){"circular"===e.get("layout")&&WI(e,"symbolSize")})}var YI=Ae;function qI(e){e.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!t||"view"===t.type)if("force"===e.get("layout")){var n=e.preservedPoints||{},r=e.getGraph(),o=r.data,i=r.edgeData,a=e.getModel("force"),s=a.get("initLayout");e.preservedPoints?o.each(function(e){var t=o.getId(e);o.setItemLayout(e,n[t]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&WI(e,"value"):EI(e);var l=o.getDataExtent("value"),u=i.getDataExtent("value"),c=a.get("repulsion"),d=a.get("edgeLength"),h=U(c)?c:[c,c],p=U(d)?d:[d,d];p=[p[1],p[0]];var f=o.mapArray("value",function(e,t){var n=o.getItemLayout(t),r=zo(e,l,h);return isNaN(r)&&(r=(h[0]+h[1])/2),{w:r,rep:r,fixed:o.getItemModel(t).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),g=i.mapArray("value",function(t,n){var o=r.getEdgeByIndex(n),i=zo(t,u,p);isNaN(i)&&(i=(p[0]+p[1])/2);var a=o.getModel(),s=ie(o.getModel().get(["lineStyle","curveness"]),-RI(o,e,n,!0),0);return{n1:f[o.node1.dataIndex],n2:f[o.node2.dataIndex],d:i,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}}),m=t.getBoundingRect(),v=function(e,t,n){for(var r=e,o=t,i=n.rect,a=i.width,s=i.height,l=[i.x+a/2,i.y+s/2],u=null==n.gravity?.1:n.gravity,c=0;c<r.length;c++){var d=r[c];d.p||(d.p=Ce(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),d.pp=Te(d.p),d.edges=null}var h,p,f=null==n.friction?.6:n.friction,g=f;return{warmUp:function(){g=.8*f},setFixed:function(e){r[e].fixed=!0},setUnfixed:function(e){r[e].fixed=!1},beforeStep:function(e){h=e},afterStep:function(e){p=e},step:function(e){h&&h(r,o);for(var t=[],n=r.length,i=0;i<o.length;i++){var a=o[i];if(!a.ignoreForceLayout){var s=a.n1;De(t,(m=a.n2).p,s.p);var c=Pe(t)-a.d,d=m.w/(s.w+m.w);isNaN(d)&&(d=0),Oe(t,t),!s.fixed&&YI(s.p,s.p,t,d*c*g),!m.fixed&&YI(m.p,m.p,t,-(1-d)*c*g)}}for(i=0;i<n;i++)(b=r[i]).fixed||(De(t,l,b.p),YI(b.p,b.p,t,u*g));for(i=0;i<n;i++){s=r[i];for(var f=i+1;f<n;f++){var m;De(t,(m=r[f]).p,s.p),0===(c=Pe(t))&&(ke(t,Math.random()-.5,Math.random()-.5),c=1);var v=(s.rep+m.rep)/c/c;!s.fixed&&YI(s.pp,s.pp,t,v),!m.fixed&&YI(m.pp,m.pp,t,-v)}}var y=[];for(i=0;i<n;i++){var b;(b=r[i]).fixed||(De(y,b.p,b.pp),YI(b.p,b.p,y,g),Me(b.pp,b.p))}var x=(g*=.992)<.01;p&&p(r,o,x),e&&e(x)}}}(f,g,{rect:m,gravity:a.get("gravity"),friction:a.get("friction")});v.beforeStep(function(e,t){for(var n=0,o=e.length;n<o;n++)e[n].fixed&&Me(e[n].p,r.getNodeByIndex(n).getLayout())}),v.afterStep(function(e,t,i){for(var a=0,s=e.length;a<s;a++)e[a].fixed||r.getNodeByIndex(a).setLayout(e[a].p),n[o.getId(a)]=e[a].p;for(a=0,s=t.length;a<s;a++){var l=t[a],u=r.getEdgeByIndex(a),c=l.n1.p,d=l.n2.p,h=u.getLayout();(h=h?h.slice():[])[0]=h[0]||[],h[1]=h[1]||[],Me(h[0],c),Me(h[1],d),+l.curveness&&(h[2]=[(c[0]+d[0])/2-(c[1]-d[1])*l.curveness,(c[1]+d[1])/2-(d[0]-c[0])*l.curveness]),u.setLayout(h)}}),e.forceLayout=v,e.preservedPoints=n,v.step()}else e.forceLayout=null})}function XI(e,t){var n=[];return e.eachSeriesByType("graph",function(e){var r=e.get("coordinateSystem");if(!r||"view"===r){var o=e.getData(),i=[],a=[];Ma(o.mapArray(function(e){var t=o.getItemModel(e);return[+t.get("x"),+t.get("y")]}),i,a),a[0]-i[0]==0&&(a[0]+=1,i[0]-=1),a[1]-i[1]==0&&(a[1]+=1,i[1]-=1);var s=(a[0]-i[0])/(a[1]-i[1]),l=function(e,t,n){return ph(A(e.getBoxLayoutParams(),{aspect:n}),{width:t.getWidth(),height:t.getHeight()})}(e,t,s);isNaN(s)&&(i=[l.x,l.y],a=[l.x+l.width,l.y+l.height]);var u=a[0]-i[0],c=a[1]-i[1],d=l.width,h=l.height,p=e.coordinateSystem=new DT;p.zoomLimit=e.get("scaleLimit"),p.setBoundingRect(i[0],i[1],u,c),p.setViewRect(l.x,l.y,d,h),p.setCenter(e.get("center"),t),p.setZoom(e.get("zoom")),n.push(p)}}),n}var ZI=Ou.prototype,$I=Vu.prototype,KI=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function JI(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}!function(e){n(function(){return null!==e&&e.apply(this,arguments)||this},e)}(KI);var QI=function(e){function t(t){var n=e.call(this,t)||this;return n.type="ec-line",n}return n(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new KI},t.prototype.buildPath=function(e,t){JI(t)?ZI.buildPath.call(this,e,t):$I.buildPath.call(this,e,t)},t.prototype.pointAt=function(e){return JI(this.shape)?ZI.pointAt.call(this,e):$I.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var t=this.shape,n=JI(t)?[t.x2-t.x1,t.y2-t.y1]:$I.tangentAt.call(this,e);return Oe(n,n)},t}(ms),eA=["fromSymbol","toSymbol"];function tA(e){return"_"+e+"Type"}function nA(e,t,n){var r=t.getItemVisual(n,e);if(!r||"none"===r)return r;var o=t.getItemVisual(n,e+"Size"),i=t.getItemVisual(n,e+"Rotate"),a=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=Mm(o);return r+l+Tm(a||0,l)+(i||"")+(s||"")}function rA(e,t,n){var r=t.getItemVisual(n,e);if(r&&"none"!==r){var o=t.getItemVisual(n,e+"Size"),i=t.getItemVisual(n,e+"Rotate"),a=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=Mm(o),u=Tm(a||0,l),c=Cm(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=null==i||isNaN(i)?void 0:+i*Math.PI/180||0,c.name=e,c}}function oA(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var iA=function(e){function t(t,n,r){var o=e.call(this)||this;return o._createLine(t,n,r),o}return n(t,e),t.prototype._createLine=function(e,t,n){var r=e.hostModel,o=function(e){var t=new QI({name:"line",subPixelOptimize:!0});return oA(t.shape,e),t}(e.getItemLayout(t));o.shape.percent=0,oc(o,{shape:{percent:1}},r,t),this.add(o),O(eA,function(n){var r=rA(n,e,t);this.add(r),this[tA(n)]=nA(n,e,t)},this),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var r=e.hostModel,o=this.childOfName("line"),i=e.getItemLayout(t),a={shape:{}};oA(a.shape,i),rc(o,a,r,t),O(eA,function(n){var r=nA(n,e,t),o=tA(n);if(this[o]!==r){this.remove(this.childOfName(n));var i=rA(n,e,t);this.add(i)}this[o]=r},this),this._updateCommonStl(e,t,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,t,n){var r=e.hostModel,o=this.childOfName("line"),i=n&&n.emphasisLineStyle,a=n&&n.blurLineStyle,s=n&&n.selectLineStyle,l=n&&n.labelStatesModels,u=n&&n.emphasisDisabled,c=n&&n.focus,d=n&&n.blurScope;if(!n||e.hasItemOption){var h=e.getItemModel(t),p=h.getModel("emphasis");i=p.getModel("lineStyle").getLineStyle(),a=h.getModel(["blur","lineStyle"]).getLineStyle(),s=h.getModel(["select","lineStyle"]).getLineStyle(),u=p.get("disabled"),c=p.get("focus"),d=p.get("blurScope"),l=Gc(h)}var f=e.getItemVisual(t,"style"),g=f.stroke;o.useStyle(f),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=i,o.ensureState("blur").style=a,o.ensureState("select").style=s,O(eA,function(e){var t=this.childOfName(e);if(t){t.setColor(g),t.style.opacity=f.opacity;for(var n=0;n<$s.length;n++){var r=$s[n],i=o.getState(r);if(i){var a=i.style||{},s=t.ensureState(r),l=s.style||(s.style={});null!=a.stroke&&(l[t.__isEmptyBrush?"stroke":"fill"]=a.stroke),null!=a.opacity&&(l.opacity=a.opacity)}}t.markRedraw()}},this);var m=r.getRawValue(t);Wc(this,l,{labelDataIndex:t,labelFetcher:{getFormattedLabel:function(t,n){return r.getFormattedLabel(t,n,e.dataType)}},inheritColor:g||"#000",defaultOpacity:f.opacity,defaultText:(null==m?e.getName(t):isFinite(m)?Vo(m):m)+""});var v=this.getTextContent();if(v){var y=l.normal;v.__align=v.style.align,v.__verticalAlign=v.style.verticalAlign,v.__position=y.get("position")||"middle";var b=y.get("distance");U(b)||(b=[b,b]),v.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),Rl(this,c,d,u)},t.prototype.highlight=function(){xl(this)},t.prototype.downplay=function(){_l(this)},t.prototype.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},t.prototype.setLinePoints=function(e){var t=this.childOfName("line");oA(t.shape,e),t.dirty()},t.prototype.beforeUpdate=function(){var e=this,t=e.childOfName("fromSymbol"),n=e.childOfName("toSymbol"),r=e.getTextContent();if(t||n||r&&!r.ignore){for(var o=1,i=this.parent;i;)i.scaleX&&(o/=i.scaleX),i=i.parent;var a=e.childOfName("line");if(this.__dirty||a.__dirty){var s=a.shape.percent,l=a.pointAt(0),u=a.pointAt(s),c=De([],u,l);if(Oe(c,c),t&&(t.setPosition(l),S(t,0),t.scaleX=t.scaleY=o*s,t.markRedraw()),n&&(n.setPosition(u),S(n,1),n.scaleX=n.scaleY=o*s,n.markRedraw()),r&&!r.ignore){r.x=r.y=0,r.originX=r.originY=0;var d=void 0,h=void 0,p=r.__labelDistance,f=p[0]*o,g=p[1]*o,m=s/2,v=a.tangentAt(m),y=[v[1],-v[0]],b=a.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var x=v[0]<0?-1:1;if("start"!==r.__position&&"end"!==r.__position){var _=-Math.atan2(v[1],v[0]);u[0]<l[0]&&(_=Math.PI+_),r.rotation=_}var w=void 0;switch(r.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-g,h="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=g,h="top";break;default:w=0,h="middle"}switch(r.__position){case"end":r.x=c[0]*f+u[0],r.y=c[1]*g+u[1],d=c[0]>.8?"left":c[0]<-.8?"right":"center",h=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";break;case"start":r.x=-c[0]*f+l[0],r.y=-c[1]*g+l[1],d=c[0]>.8?"right":c[0]<-.8?"left":"center",h=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":r.x=f*x+l[0],r.y=l[1]+w,d=v[0]<0?"right":"left",r.originX=-f*x,r.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":r.x=b[0],r.y=b[1]+w,d="center",r.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":r.x=-f*x+u[0],r.y=u[1]+w,d=v[0]>=0?"right":"left",r.originX=f*x,r.originY=-w}r.scaleX=r.scaleY=o,r.setStyle({verticalAlign:r.__verticalAlign||h,align:r.__align||d})}}}function S(e,t){var n=e.__specifiedRotation;if(null==n){var r=a.tangentAt(t);e.attr("rotation",(1===t?-1:1)*Math.PI/2-Math.atan2(r[1],r[0]))}else e.attr("rotation",n)}},t}(Po),aA=function(){function e(e){this.group=new Po,this._LineCtor=e||iA}return e.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var n=this,r=n.group,o=n._lineData;n._lineData=e,o||r.removeAll();var i=sA(e);e.diff(o).add(function(n){t._doAdd(e,n,i)}).update(function(n,r){t._doUpdate(o,e,r,n,i)}).remove(function(e){r.remove(o.getItemGraphicEl(e))}).execute()},e.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},e.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=sA(e),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(e,t){function n(e){e.isGroup||function(e){return e.animators&&e.animators.length>0}(e)||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var r=e.start;r<e.end;r++)if(uA(t.getItemLayout(r))){var o=new this._LineCtor(t,r,this._seriesScope);o.traverse(n),this.group.add(o),t.setItemGraphicEl(r,o),this._progressiveEls.push(o)}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(e){Bc(this._progressiveEls||this.group,e)},e.prototype._doAdd=function(e,t,n){if(uA(e.getItemLayout(t))){var r=new this._LineCtor(e,t,n);e.setItemGraphicEl(t,r),this.group.add(r)}},e.prototype._doUpdate=function(e,t,n,r,o){var i=e.getItemGraphicEl(n);uA(t.getItemLayout(r))?(i?i.updateData(t,r,o):i=new this._LineCtor(t,r,o),t.setItemGraphicEl(r,i),this.group.add(i)):this.group.remove(i)},e}();function sA(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:Gc(t)}}function lA(e){return isNaN(e[0])||isNaN(e[1])}function uA(e){return e&&!lA(e[0])&&!lA(e[1])}var cA=[],dA=[],hA=[],pA=wn,fA=Ve,gA=Math.abs;function mA(e,t,n){for(var r,o=e[0],i=e[1],a=e[2],s=1/0,l=n*n,u=.1,c=.1;c<=.9;c+=.1)cA[0]=pA(o[0],i[0],a[0],c),cA[1]=pA(o[1],i[1],a[1],c),(p=gA(fA(cA,t)-l))<s&&(s=p,r=c);for(var d=0;d<32;d++){var h=r+u;dA[0]=pA(o[0],i[0],a[0],r),dA[1]=pA(o[1],i[1],a[1],r),hA[0]=pA(o[0],i[0],a[0],h),hA[1]=pA(o[1],i[1],a[1],h);var p=fA(dA,t)-l;if(gA(p)<.01)break;var f=fA(hA,t)-l;u/=2,p<0?f>=0?r+=u:r-=u:f>=0?r-=u:r+=u}return r}function vA(e,t){var n=[],r=Mn,o=[[],[],[]],i=[[],[]],a=[];t/=2,e.eachEdge(function(e,s){var l=e.getLayout(),u=e.getVisual("fromSymbol"),c=e.getVisual("toSymbol");l.__original||(l.__original=[Te(l[0]),Te(l[1])],l[2]&&l.__original.push(Te(l[2])));var d=l.__original;if(null!=l[2]){if(Me(o[0],d[0]),Me(o[1],d[2]),Me(o[2],d[1]),u&&"none"!==u){var h=FI(e.node1),p=mA(o,d[0],h*t);r(o[0][0],o[1][0],o[2][0],p,n),o[0][0]=n[3],o[1][0]=n[4],r(o[0][1],o[1][1],o[2][1],p,n),o[0][1]=n[3],o[1][1]=n[4]}c&&"none"!==c&&(h=FI(e.node2),p=mA(o,d[1],h*t),r(o[0][0],o[1][0],o[2][0],p,n),o[1][0]=n[1],o[2][0]=n[2],r(o[0][1],o[1][1],o[2][1],p,n),o[1][1]=n[1],o[2][1]=n[2]),Me(l[0],o[0]),Me(l[1],o[2]),Me(l[2],o[1])}else Me(i[0],d[0]),Me(i[1],d[1]),De(a,i[1],i[0]),Oe(a,a),u&&"none"!==u&&(h=FI(e.node1),Ae(i[0],i[0],a,h*t)),c&&"none"!==c&&(h=FI(e.node2),Ae(i[1],i[1],a,-h*t)),Me(l[0],i[0]),Me(l[1],i[1])})}function yA(e){return"view"===e.type}var bA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(e,t){var n=new Hw,r=new aA,o=this.group;this._controller=new _M(t.getZr()),this._controllerHost={target:o},o.add(n.group),o.add(r.group),this._symbolDraw=n,this._lineDraw=r,this._firstRender=!0},t.prototype.render=function(e,t,n){var r=this,o=e.coordinateSystem;this._model=e;var i=this._symbolDraw,a=this._lineDraw,s=this.group;if(yA(o)){var l={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?s.attr(l):rc(s,l,e)}vA(e.getGraph(),zI(e));var u=e.getData();i.updateData(u);var c=e.getEdgeData();a.updateData(c),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var d=e.forceLayout,h=e.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,h);var p=e.get("layout");u.graph.eachNode(function(t){var n=t.dataIndex,o=t.getGraphicEl(),i=t.getModel();if(o){o.off("drag").off("dragend");var a=i.get("draggable");a&&o.on("drag",function(i){switch(p){case"force":d.warmUp(),!r._layouting&&r._startForceLayoutIteration(d,h),d.setFixed(n),u.setItemLayout(n,[o.x,o.y]);break;case"circular":u.setItemLayout(n,[o.x,o.y]),t.setLayout({fixed:!0},!0),WI(e,"symbolSize",t,[i.offsetX,i.offsetY]),r.updateLayout(e);break;default:u.setItemLayout(n,[o.x,o.y]),OI(e.getGraph(),e),r.updateLayout(e)}}).on("dragend",function(){d&&d.setUnfixed(n)}),o.setDraggable(a,!!i.get("cursor")),"adjacency"===i.get(["emphasis","focus"])&&(Us(o).focus=t.getAdjacentDataIndices())}}),u.graph.eachEdge(function(e){var t=e.getGraphicEl(),n=e.getModel().get(["emphasis","focus"]);t&&"adjacency"===n&&(Us(t).focus={edge:[e.dataIndex],node:[e.node1.dataIndex,e.node2.dataIndex]})});var f="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),g=u.getLayout("cx"),m=u.getLayout("cy");u.graph.eachNode(function(e){UI(e,f,g,m)}),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,t){var n=this;!function r(){e.step(function(e){n.updateLayout(n._model),(n._layouting=!e)&&(t?n._layoutTimeout=setTimeout(r,16):r())})}()},t.prototype._updateController=function(e,t,n){var r=this,o=this._controller,i=this._controllerHost,a=this.group;o.setPointerChecker(function(t,r,o){var i=a.getBoundingRect();return i.applyTransform(a.transform),i.contain(r,o)&&!AM(t,n,e)}),yA(e.coordinateSystem)?(o.enable(e.get("roam")),i.zoomLimit=e.get("scaleLimit"),i.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(t){MM(i,t.dx,t.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){TM(i,t.scale,t.originX,t.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),r._updateNodeAndLinkScale(),vA(e.getGraph(),zI(e)),r._lineDraw.updateLayout(),n.updateLabelLayout()})):o.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,t=e.getData(),n=zI(e);t.eachItemGraphicEl(function(e,t){e&&e.setSymbolScale(n)})},t.prototype.updateLayout=function(e){vA(e.getGraph(),zI(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(hg);function xA(e){return"_EC_"+e}var _A=function(){function e(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[xA(e)]){var r=new wA(e,t);return r.hostGraph=this,this.nodes.push(r),n[xA(e)]=r,r}},e.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},e.prototype.getNodeById=function(e){return this._nodesMap[xA(e)]},e.prototype.addEdge=function(e,t,n){var r=this._nodesMap,o=this._edgesMap;if(X(e)&&(e=this.nodes[e]),X(t)&&(t=this.nodes[t]),e instanceof wA||(e=r[xA(e)]),t instanceof wA||(t=r[xA(t)]),e&&t){var i=e.id+"-"+t.id,a=new SA(e,t,n);return a.hostGraph=this,this._directed&&(e.outEdges.push(a),t.inEdges.push(a)),e.edges.push(a),e!==t&&t.edges.push(a),this.edges.push(a),o[i]=a,a}},e.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},e.prototype.getEdge=function(e,t){e instanceof wA&&(e=e.id),t instanceof wA&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},e.prototype.eachNode=function(e,t){for(var n=this.nodes,r=n.length,o=0;o<r;o++)n[o].dataIndex>=0&&e.call(t,n[o],o)},e.prototype.eachEdge=function(e,t){for(var n=this.edges,r=n.length,o=0;o<r;o++)n[o].dataIndex>=0&&n[o].node1.dataIndex>=0&&n[o].node2.dataIndex>=0&&e.call(t,n[o],o)},e.prototype.breadthFirstTraverse=function(e,t,n,r){if(t instanceof wA||(t=this._nodesMap[xA(t)]),t){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!e.call(r,t,null))for(var a=[t];a.length;){var s=a.shift(),l=s[o];for(i=0;i<l.length;i++){var u=l[i],c=u.node1===s?u.node2:u.node1;if(!c.__visited){if(e.call(r,c,s))return;a.push(c),c.__visited=!0}}}}},e.prototype.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,r=this.edges,o=0,i=n.length;o<i;o++)n[o].dataIndex=-1;for(o=0,i=e.count();o<i;o++)n[e.getRawIndex(o)].dataIndex=o;for(t.filterSelf(function(e){var n=r[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}),o=0,i=r.length;o<i;o++)r[o].dataIndex=-1;for(o=0,i=t.count();o<i;o++)r[t.getRawIndex(o)].dataIndex=o},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,r=this.edges,o=0;o<n.length;o++)t.addNode(n[o].id,n[o].dataIndex);for(o=0;o<r.length;o++){var i=r[o];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},e}(),wA=function(){function e(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==e?"":e,this.dataIndex=null==t?-1:t}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var n=this.edges[t];n.dataIndex<0||(e.edge.push(n.dataIndex),e.node.push(n.node1.dataIndex,n.node2.dataIndex))}return e},e.prototype.getTrajectoryDataIndices=function(){for(var e=me(),t=me(),n=0;n<this.edges.length;n++){var r=this.edges[n];if(!(r.dataIndex<0)){e.set(r.dataIndex,!0);for(var o=[r.node1],i=[r.node2],a=0;a<o.length;){var s=o[a];a++,t.set(s.dataIndex,!0);for(var l=0;l<s.inEdges.length;l++)e.set(s.inEdges[l].dataIndex,!0),o.push(s.inEdges[l].node1)}for(a=0;a<i.length;){var u=i[a];for(a++,t.set(u.dataIndex,!0),l=0;l<u.outEdges.length;l++)e.set(u.outEdges[l].dataIndex,!0),i.push(u.outEdges[l].node2)}}}return{edge:e.keys(),node:t.keys()}},e}(),SA=function(){function e(e,t,n){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}return e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var e=me(),t=me();e.set(this.dataIndex,!0);for(var n=[this.node1],r=[this.node2],o=0;o<n.length;){var i=n[o];o++,t.set(i.dataIndex,!0);for(var a=0;a<i.inEdges.length;a++)e.set(i.inEdges[a].dataIndex,!0),n.push(i.inEdges[a].node1)}for(o=0;o<r.length;){var s=r[o];for(o++,t.set(s.dataIndex,!0),a=0;a<s.outEdges.length;a++)e.set(s.outEdges[a].dataIndex,!0),r.push(s.outEdges[a].node2)}return{edge:e.keys(),node:t.keys()}},e}();function CA(e,t){return{getValue:function(n){var r=this[e][t];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function MA(e,t,n,r,o){for(var i=new _A(r),a=0;a<e.length;a++)i.addNode(re(e[a].id,e[a].name,a),a);var s=[],l=[],u=0;for(a=0;a<t.length;a++){var c=t[a],d=c.source,h=c.target;i.addEdge(d,h,u)&&(l.push(c),s.push(re(xi(c.id,null),d+" > "+h)),u++)}var p,f=n.get("coordinateSystem");if("cartesian2d"===f||"polar"===f)p=Qy(e,n);else{var g=np.get(f),m=g&&g.dimensions||[];L(m,"value")<0&&m.concat(["value"]);var v=jy(e,{coordDimensions:m,encodeDefine:n.getEncode()}).dimensions;(p=new Uy(v,n)).initData(e)}var y=new Uy(["value"],n);return y.initData(l,s),o&&o(p,y),ck({mainData:p,struct:i,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}R(wA,CA("hostGraph","data")),R(SA,CA("hostGraph","edgeData"));var TA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return n(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments);var n=this;function r(){return n._categoriesData}this.legendVisualProvider=new tC(r,r),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(t){e.prototype.mergeDefaultAndTheme.apply(this,arguments),pi(t,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,t){var n,r=e.edges||e.links||[],o=e.data||e.nodes||[],i=this;if(o&&r){AI(n=this)&&(n.__curvenessList=[],n.__edgeMap={},DI(n));var a=MA(o,r,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e){var t=i._categoriesModels[e.getShallow("category")];return t&&(t.parentModel=e.parentModel,e.parentModel=t),e});var n=hd.prototype.getModel;function r(e,t){var r=n.call(this,e,t);return r.resolveParentPath=o,r}function o(e){if(e&&("label"===e[0]||"label"===e[1])){var t=e.slice();return"label"===e[0]?t[0]="edgeLabel":"label"===e[1]&&(t[1]="edgeLabel"),t}return e}t.wrapMethod("getItemModel",function(e){return e.resolveParentPath=o,e.getModel=r,e})});return O(a.edges,function(e){!function(e,t,n,r){if(AI(n)){var o=PI(e,t,n),i=n.__edgeMap,a=i[LI(o)];i[o]&&!a?i[o].isForward=!0:a&&i[o]&&(a.isForward=!0,i[o].isForward=!1),i[o]=i[o]||[],i[o].push(r)}}(e.node1,e.node2,this,e.dataIndex)},this),a.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,t,n){if("edge"===n){var r=this.getData(),o=this.getDataParams(e,n),i=r.graph.getEdgeByIndex(e),a=r.getName(i.node1.dataIndex),s=r.getName(i.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),zf("nameValue",{name:l.join(" > "),value:o.value,noValue:null==o.value})}return $f({series:this,dataIndex:e,multipleSeries:t})},t.prototype._updateCategoriesData=function(){var e=B(this.option.categories||[],function(e){return null!=e.value?e:A({value:0},e)}),t=new Uy(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(e){return t.getItemModel(e)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(eg),kA={type:"graphRoam",event:"graphRoam",update:"none"},IA=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},AA=function(e){function t(t){var n=e.call(this,t)||this;return n.type="pointer",n}return n(t,e),t.prototype.getDefaultShape=function(){return new IA},t.prototype.buildPath=function(e,t){var n=Math.cos,r=Math.sin,o=t.r,i=t.width,a=t.angle,s=t.x-n(a)*i*(i>=o/3?1:2),l=t.y-r(a)*i*(i>=o/3?1:2);a=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+n(a)*i,t.y+r(a)*i),e.lineTo(t.x+n(t.angle)*o,t.y+r(t.angle)*o),e.lineTo(t.x-n(a)*i,t.y-r(a)*i),e.lineTo(s,l)},t}(ms);function DA(e,t){var n=null==e?"":e+"";return t&&(Y(t)?n=t.replace("{value}",n):j(t)&&(n=t(e))),n}var PA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){this.group.removeAll();var r=e.get(["axisLine","lineStyle","color"]),o=function(e,t){var n=e.get("center"),r=t.getWidth(),o=t.getHeight(),i=Math.min(r,o);return{cx:Fo(n[0],t.getWidth()),cy:Fo(n[1],t.getHeight()),r:Fo(e.get("radius"),i/2)}}(e,n);this._renderMain(e,t,n,r,o),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,t,n,r,o){var i=this.group,a=e.get("clockwise"),s=-e.get("startAngle")/180*Math.PI,l=-e.get("endAngle")/180*Math.PI,u=e.getModel("axisLine"),c=u.get("roundCap")?xS:Tu,d=u.get("show"),h=u.getModel("lineStyle"),p=h.get("width"),f=[s,l];Za(f,!a);for(var g=(l=f[1])-(s=f[0]),m=s,v=[],y=0;d&&y<r.length;y++){var b=new c({shape:{startAngle:m,endAngle:l=s+g*Math.min(Math.max(r[y][0],0),1),cx:o.cx,cy:o.cy,clockwise:a,r0:o.r-p,r:o.r},silent:!0});b.setStyle({fill:r[y][1]}),b.setStyle(h.getLineStyle(["color","width"])),v.push(b),m=l}v.reverse(),O(v,function(e){return i.add(e)});var x=function(e){if(e<=0)return r[0][1];var t;for(t=0;t<r.length;t++)if(r[t][0]>=e&&(0===t?0:r[t-1][0])<e)return r[t][1];return r[t-1][1]};this._renderTicks(e,t,n,x,o,s,l,a,p),this._renderTitleAndDetail(e,t,n,x,o),this._renderAnchor(e,o),this._renderPointer(e,t,n,x,o,s,l,a,p)},t.prototype._renderTicks=function(e,t,n,r,o,i,a,s,l){for(var u,c,d=this.group,h=o.cx,p=o.cy,f=o.r,g=+e.get("min"),m=+e.get("max"),v=e.getModel("splitLine"),y=e.getModel("axisTick"),b=e.getModel("axisLabel"),x=e.get("splitNumber"),_=y.get("splitNumber"),w=Fo(v.get("length"),f),S=Fo(y.get("length"),f),C=i,M=(a-i)/x,T=M/_,k=v.getModel("lineStyle").getLineStyle(),I=y.getModel("lineStyle").getLineStyle(),A=v.get("distance"),D=0;D<=x;D++){if(u=Math.cos(C),c=Math.sin(C),v.get("show")){var P=new Ou({shape:{x1:u*(f-(L=A?A+l:l))+h,y1:c*(f-L)+p,x2:u*(f-w-L)+h,y2:c*(f-w-L)+p},style:k,silent:!0});"auto"===k.stroke&&P.setStyle({stroke:r(D/x)}),d.add(P)}if(b.get("show")){var L=b.get("distance")+A,N=DA(Vo(D/x*(m-g)+g),b.get("formatter")),R=r(D/x),E=u*(f-w-L)+h,O=c*(f-w-L)+p,B=b.get("rotate"),z=0;"radial"===B?(z=-C+2*Math.PI)>Math.PI/2&&(z+=Math.PI):"tangential"===B?z=-C-Math.PI/2:X(B)&&(z=B*Math.PI/180),0===z?d.add(new Ps({style:Uc(b,{text:N,x:E,y:O,verticalAlign:c<-.8?"top":c>.8?"bottom":"middle",align:u<-.4?"left":u>.4?"right":"center"},{inheritColor:R}),silent:!0})):d.add(new Ps({style:Uc(b,{text:N,x:E,y:O,verticalAlign:"middle",align:"center"},{inheritColor:R}),silent:!0,originX:E,originY:O,rotation:z}))}if(y.get("show")&&D!==x){L=(L=y.get("distance"))?L+l:l;for(var F=0;F<=_;F++){u=Math.cos(C),c=Math.sin(C);var V=new Ou({shape:{x1:u*(f-L)+h,y1:c*(f-L)+p,x2:u*(f-S-L)+h,y2:c*(f-S-L)+p},silent:!0,style:I});"auto"===I.stroke&&V.setStyle({stroke:r((D+F/_)/x)}),d.add(V),C+=T}C-=T}else C+=M}},t.prototype._renderPointer=function(e,t,n,r,o,i,a,s,l){var u=this.group,c=this._data,d=this._progressEls,h=[],p=e.get(["pointer","show"]),f=e.getModel("progress"),g=f.get("show"),m=e.getData(),v=m.mapDimension("value"),y=+e.get("min"),b=+e.get("max"),x=[y,b],_=[i,a];function w(t,n){var r,i=m.getItemModel(t).getModel("pointer"),a=Fo(i.get("width"),o.r),s=Fo(i.get("length"),o.r),l=e.get(["pointer","icon"]),u=i.get("offsetCenter"),c=Fo(u[0],o.r),d=Fo(u[1],o.r),h=i.get("keepAspect");return(r=l?Cm(l,c-a/2,d-s,a,s,null,h):new AA({shape:{angle:-Math.PI/2,width:a,r:s,x:c,y:d}})).rotation=-(n+Math.PI/2),r.x=o.cx,r.y=o.cy,r}function S(e,t){var n=f.get("roundCap")?xS:Tu,r=f.get("overlap"),a=r?f.get("width"):l/m.count(),u=r?o.r-a:o.r-(e+1)*a,c=r?o.r:o.r-e*a,d=new n({shape:{startAngle:i,endAngle:t,cx:o.cx,cy:o.cy,clockwise:s,r0:u,r:c}});return r&&(d.z2=b-m.get(v,e)%b),d}(g||p)&&(m.diff(c).add(function(t){var n=m.get(v,t);if(p){var r=w(t,i);oc(r,{rotation:-((isNaN(+n)?_[0]:zo(n,x,_,!0))+Math.PI/2)},e),u.add(r),m.setItemGraphicEl(t,r)}if(g){var o=S(t,i),a=f.get("clip");oc(o,{shape:{endAngle:zo(n,x,_,a)}},e),u.add(o),js(e.seriesIndex,m.dataType,t,o),h[t]=o}}).update(function(t,n){var r=m.get(v,t);if(p){var o=c.getItemGraphicEl(n),a=o?o.rotation:i,s=w(t,a);s.rotation=a,rc(s,{rotation:-((isNaN(+r)?_[0]:zo(r,x,_,!0))+Math.PI/2)},e),u.add(s),m.setItemGraphicEl(t,s)}if(g){var l=d[n],y=S(t,l?l.shape.endAngle:i),b=f.get("clip");rc(y,{shape:{endAngle:zo(r,x,_,b)}},e),u.add(y),js(e.seriesIndex,m.dataType,t,y),h[t]=y}}).execute(),m.each(function(e){var t=m.getItemModel(e),n=t.getModel("emphasis"),o=n.get("focus"),i=n.get("blurScope"),a=n.get("disabled");if(p){var s=m.getItemGraphicEl(e),l=m.getItemVisual(e,"style"),u=l.fill;if(s instanceof _s){var c=s.style;s.useStyle(A({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(u);s.setStyle(t.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",r(zo(m.get(v,e),x,[0,1],!0))),s.z2EmphasisLift=0,zl(s,t),Rl(s,o,i,a)}if(g){var d=h[e];d.useStyle(m.getItemVisual(e,"style")),d.setStyle(t.getModel(["progress","itemStyle"]).getItemStyle()),d.z2EmphasisLift=0,zl(d,t),Rl(d,o,i,a)}}),this._progressEls=h)},t.prototype._renderAnchor=function(e,t){var n=e.getModel("anchor");if(n.get("show")){var r=n.get("size"),o=n.get("icon"),i=n.get("offsetCenter"),a=n.get("keepAspect"),s=Cm(o,t.cx-r/2+Fo(i[0],t.r),t.cy-r/2+Fo(i[1],t.r),r,r,null,a);s.z2=n.get("showAbove")?1:0,s.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(s)}},t.prototype._renderTitleAndDetail=function(e,t,n,r,o){var i=this,a=e.getData(),s=a.mapDimension("value"),l=+e.get("min"),u=+e.get("max"),c=new Po,d=[],h=[],p=e.isAnimationEnabled(),f=e.get(["pointer","showAbove"]);a.diff(this._data).add(function(e){d[e]=new Ps({silent:!0}),h[e]=new Ps({silent:!0})}).update(function(e,t){d[e]=i._titleEls[t],h[e]=i._detailEls[t]}).execute(),a.each(function(t){var n=a.getItemModel(t),i=a.get(s,t),g=new Po,m=r(zo(i,[l,u],[0,1],!0)),v=n.getModel("title");if(v.get("show")){var y=v.get("offsetCenter"),b=o.cx+Fo(y[0],o.r),x=o.cy+Fo(y[1],o.r);(I=d[t]).attr({z2:f?0:2,style:Uc(v,{x:b,y:x,text:a.getName(t),align:"center",verticalAlign:"middle"},{inheritColor:m})}),g.add(I)}var _=n.getModel("detail");if(_.get("show")){var w=_.get("offsetCenter"),S=o.cx+Fo(w[0],o.r),C=o.cy+Fo(w[1],o.r),M=Fo(_.get("width"),o.r),T=Fo(_.get("height"),o.r),k=e.get(["progress","show"])?a.getItemVisual(t,"style").fill:m,I=h[t],A=_.get("formatter");I.attr({z2:f?0:2,style:Uc(_,{x:S,y:C,text:DA(i,A),width:isNaN(M)?null:M,height:isNaN(T)?null:T,align:"center",verticalAlign:"middle"},{inheritColor:k})}),Jc(I,{normal:_},i,function(e){return DA(e,A)}),p&&Qc(I,t,a,e,{getFormattedLabel:function(e,t,n,r,o,a){return DA(a?a.interpolatedValue:i,A)}}),g.add(I)}c.add(g)}),this.group.add(c),this._titleEls=d,this._detailEls=h},t.type="gauge",t}(hg),LA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n}return n(t,e),t.prototype.getInitialData=function(e,t){return eC(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(eg),NA=["itemStyle","opacity"],RA=function(e){function t(t,n){var r=e.call(this)||this,o=r,i=new Nu,a=new Ps;return o.setTextContent(a),r.setTextGuideLine(i),r.updateData(t,n,!0),r}return n(t,e),t.prototype.updateData=function(e,t,n){var r=this,o=e.hostModel,i=e.getItemModel(t),a=e.getItemLayout(t),s=i.getModel("emphasis"),l=i.get(NA);l=null==l?1:l,n||uc(r),r.useStyle(e.getItemVisual(t,"style")),r.style.lineJoin="round",n?(r.setShape({points:a.points}),r.style.opacity=0,oc(r,{style:{opacity:l}},o,t)):rc(r,{style:{opacity:l},shape:{points:a.points}},o,t),zl(r,i),this._updateLabel(e,t),Rl(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e,t){var n=this,r=this.getTextGuideLine(),o=n.getTextContent(),i=e.hostModel,a=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"style"),u=l.fill;Wc(o,Gc(a),{labelFetcher:e.hostModel,labelDataIndex:t,defaultOpacity:l.opacity,defaultText:e.getName(t)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:u,outsideFill:u});var c=s.linePoints;r.setShape({points:c}),n.textGuideLineConfig={anchor:c?new kt(c[0][0],c[0][1]):null},rc(o,{style:{x:s.x,y:s.y}},i,t),o.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),i_(n,a_(a),{stroke:u})},t}(Pu),EA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreLabelLineUpdate=!0,n}return n(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),o=this._data,i=this.group;r.diff(o).add(function(e){var t=new RA(r,e);r.setItemGraphicEl(e,t),i.add(t)}).update(function(e,t){var n=o.getItemGraphicEl(t);n.updateData(r,e),i.add(n),r.setItemGraphicEl(e,n)}).remove(function(t){lc(o.getItemGraphicEl(t),e,t)}).execute(),this._data=r},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(hg),OA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new tC(W(this.getData,this),W(this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.getInitialData=function(e,t){return eC(this,{coordDimensions:["value"],encodeDefaulter:G(Eh,this)})},t.prototype._defaultLabelLine=function(e){pi(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.prototype.getDataParams=function(t){var n=this.getData(),r=e.prototype.getDataParams.call(this,t),o=n.mapDimension("value"),i=n.getSum(o);return r.percent=i?+(n.get(o,t)/i*100).toFixed(2):0,r.$vars.push("percent"),r},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(eg);function BA(e,t){e.eachSeriesByType("funnel",function(e){var n=e.getData(),r=n.mapDimension("value"),o=e.get("sort"),i=function(e,t){return ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t),a=e.get("orient"),s=i.width,l=i.height,u=function(e,t){for(var n=e.mapDimension("value"),r=e.mapArray(n,function(e){return e}),o=[],i="ascending"===t,a=0,s=e.count();a<s;a++)o[a]=a;return j(t)?o.sort(t):"none"!==t&&o.sort(function(e,t){return i?r[e]-r[t]:r[t]-r[e]}),o}(n,o),c=i.x,d=i.y,h="horizontal"===a?[Fo(e.get("minSize"),l),Fo(e.get("maxSize"),l)]:[Fo(e.get("minSize"),s),Fo(e.get("maxSize"),s)],p=n.getDataExtent(r),f=e.get("min"),g=e.get("max");null==f&&(f=Math.min(p[0],0)),null==g&&(g=p[1]);var m=e.get("funnelAlign"),v=e.get("gap"),y=(("horizontal"===a?s:l)-v*(n.count()-1))/n.count(),b=function(e,t){if("horizontal"===a){var o=zo(n.get(r,e)||0,[f,g],h,!0),i=void 0;switch(m){case"top":i=d;break;case"center":i=d+(l-o)/2;break;case"bottom":i=d+(l-o)}return[[t,i],[t,i+o]]}var u,p=zo(n.get(r,e)||0,[f,g],h,!0);switch(m){case"left":u=c;break;case"center":u=c+(s-p)/2;break;case"right":u=c+s-p}return[[u,t],[u+p,t]]};"ascending"===o&&(y=-y,v=-v,"horizontal"===a?c+=s:d+=l,u=u.reverse());for(var x=0;x<u.length;x++){var _=u[x],w=u[x+1],S=n.getItemModel(_);if("horizontal"===a){var C=S.get(["itemStyle","width"]);null==C?C=y:(C=Fo(C,s),"ascending"===o&&(C=-C));var M=b(_,c),T=b(w,c+C);c+=C+v,n.setItemLayout(_,{points:M.concat(T.slice().reverse())})}else{var k=S.get(["itemStyle","height"]);null==k?k=y:(k=Fo(k,l),"ascending"===o&&(k=-k)),M=b(_,d),T=b(w,d+k),d+=k+v,n.setItemLayout(_,{points:M.concat(T.slice().reverse())})}}!function(e){var t=e.hostModel.get("orient");e.each(function(n){var r,o,i,a,s=e.getItemModel(n),l=s.getModel("label").get("position"),u=s.getModel("labelLine"),c=e.getItemLayout(n),d=c.points,h="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(h)"insideLeft"===l?(o=(d[0][0]+d[3][0])/2+5,i=(d[0][1]+d[3][1])/2,r="left"):"insideRight"===l?(o=(d[1][0]+d[2][0])/2-5,i=(d[1][1]+d[2][1])/2,r="right"):(o=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,i=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,r="center"),a=[[o,i],[o,i]];else{var p=void 0,f=void 0,g=void 0,m=void 0,v=u.get("length");"left"===l?(p=(d[3][0]+d[0][0])/2,f=(d[3][1]+d[0][1])/2,o=(g=p-v)-5,r="right"):"right"===l?(p=(d[1][0]+d[2][0])/2,f=(d[1][1]+d[2][1])/2,o=(g=p+v)+5,r="left"):"top"===l?(p=(d[3][0]+d[0][0])/2,i=(m=(f=(d[3][1]+d[0][1])/2)-v)-5,r="center"):"bottom"===l?(p=(d[1][0]+d[2][0])/2,i=(m=(f=(d[1][1]+d[2][1])/2)+v)+5,r="center"):"rightTop"===l?(p="horizontal"===t?d[3][0]:d[1][0],f="horizontal"===t?d[3][1]:d[1][1],"horizontal"===t?(i=(m=f-v)-5,r="center"):(o=(g=p+v)+5,r="top")):"rightBottom"===l?(p=d[2][0],f=d[2][1],"horizontal"===t?(i=(m=f+v)+5,r="center"):(o=(g=p+v)+5,r="bottom")):"leftTop"===l?(p=d[0][0],f="horizontal"===t?d[0][1]:d[1][1],"horizontal"===t?(i=(m=f-v)-5,r="center"):(o=(g=p-v)-5,r="right")):"leftBottom"===l?(p="horizontal"===t?d[1][0]:d[3][0],f="horizontal"===t?d[1][1]:d[2][1],"horizontal"===t?(i=(m=f+v)+5,r="center"):(o=(g=p-v)-5,r="right")):(p=(d[1][0]+d[2][0])/2,f=(d[1][1]+d[2][1])/2,"horizontal"===t?(i=(m=f+v)+5,r="center"):(o=(g=p+v)+5,r="left")),"horizontal"===t?o=g=p:i=m=f,a=[[p,f],[g,m]]}c.label={linePoints:a,x:o,y:i,verticalAlign:"middle",textAlign:r,inside:h}})}(n)})}var zA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._dataGroup=new Po,n._initialized=!1,n}return n(t,e),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,t,n,r){this._progressiveEls=null;var o=this._dataGroup,i=e.getData(),a=this._data,s=e.coordinateSystem,l=s.dimensions,u=HA(e);if(i.diff(a).add(function(e){WA(VA(i,o,e,l,s),i,e,u)}).update(function(t,n){var r=a.getItemGraphicEl(n),o=FA(i,t,l,s);i.setItemGraphicEl(t,r),rc(r,{shape:{points:o}},e,t),uc(r),WA(r,i,t,u)}).remove(function(e){var t=a.getItemGraphicEl(e);o.remove(t)}).execute(),!this._initialized){this._initialized=!0;var c=function(e,t,n){var r=e.model,o=e.getRect(),i=new Is({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),a="horizontal"===r.get("layout")?"width":"height";return i.setShape(a,0),oc(i,{shape:{width:o.width,height:o.height}},t,n),i}(s,e,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(c)}this._data=i},t.prototype.incrementalPrepareRender=function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,t,n){for(var r=t.getData(),o=t.coordinateSystem,i=o.dimensions,a=HA(t),s=this._progressiveEls=[],l=e.start;l<e.end;l++){var u=VA(r,this._dataGroup,l,i,o);u.incremental=!0,WA(u,r,l,a),s.push(u)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(hg);function FA(e,t,n,r){for(var o,i=[],a=0;a<n.length;a++){var s=n[a],l=e.get(e.mapDimension(s),t);o=l,("category"===r.getAxis(s).type?null==o:null==o||isNaN(o))||i.push(r.dataToPoint(l,s))}return i}function VA(e,t,n,r,o){var i=FA(e,n,r,o),a=new Nu({shape:{points:i},z2:10});return t.add(a),e.setItemGraphicEl(n,a),a}function HA(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),ne(t=ri(t))&&(t=0),{smooth:t}}function WA(e,t,n,r){e.useStyle(t.getItemVisual(n,"style")),e.style.fill=null,e.setShape("smooth",r.smooth);var o=t.getItemModel(n),i=o.getModel("emphasis");zl(e,o,"lineStyle"),Rl(e,i.get("focus"),i.get("blurScope"),i.get("disabled"))}var GA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return n(t,e),t.prototype.getInitialData=function(e,t){return Qy(null,this,{useEncodeDefaulter:W(UA,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var t=this.coordinateSystem,n=this.getData(),r=[];return t.eachActiveState(n,function(t,o){e===t&&r.push(n.getRawIndex(o))}),r},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(eg);function UA(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var n={};return O(t.dimensions,function(e){var t=+e.replace("dim","");n[e]=t}),n}}var jA=["lineStyle","opacity"],YA={seriesType:"parallel",reset:function(e,t){var n=e.coordinateSystem,r={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(e,t){n.eachActiveState(t,function(e,n){var o=r[e];if("normal"===e&&t.hasItemOption){var i=t.getItemModel(n).get(jA,!0);null!=i&&(o=i)}t.ensureUniqueItemVisual(n,"style").opacity=o},e.start,e.end)}}}};function qA(e){!function(e){if(!e.parallel){var t=!1;O(e.series,function(e){e&&"parallel"===e.type&&(t=!0)}),t&&(e.parallel=[{}])}}(e),function(e){O(hi(e.parallelAxis),function(t){if(Z(t)){var n=t.parallelIndex||0,r=hi(e.parallel)[n];r&&r.parallelAxisDefault&&k(t,r.parallelAxisDefault,!1)}})}(e)}var XA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},O(ZA,function(e,t){n.getZr().on(t,this._handlers[t]=W(e,this))},this)),wg(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,t){Sg(this,"_throttledDispatchExpand"),O(this._handlers,function(e,n){t.getZr().off(n,e)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(A({type:"parallelAxisExpand"},e))},t.type="parallel",t}(lg),ZA={mousedown:function(e){$A(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if($A(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2)>5)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&$A(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r?null:{duration:0}})}}};function $A(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}var KA=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){var t=this.option;e&&k(t,e,!0),this._initDimensions()},t.prototype.contains=function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},t.prototype.setAxisExpand=function(e){O(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];O(F(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(e){return(e.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(xh),JA=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r)||this;return a.type=o||"value",a.axisIndex=i,a}return n(t,e),t.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},t}(Ex);function QA(e,t,n,r,o,i){e=e||0;var a=n[1]-n[0];if(null!=o&&(o=tD(o,[0,a])),null!=i&&(i=Math.max(i,null!=o?o:0)),"all"===r){var s=Math.abs(t[1]-t[0]);s=tD(s,[0,a]),o=i=tD(s,[o,i]),r=0}t[0]=tD(t[0],n),t[1]=tD(t[1],n);var l=eD(t,r);t[r]+=e;var u,c=o||0,d=n.slice();return l.sign<0?d[0]+=c:d[1]-=c,t[r]=tD(t[r],d),u=eD(t,r),null!=o&&(u.sign!==l.sign||u.span<o)&&(t[1-r]=t[r]+l.sign*o),u=eD(t,r),null!=i&&u.span>i&&(t[1-r]=t[r]+u.sign*i),t}function eD(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function tD(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var nD=O,rD=Math.min,oD=Math.max,iD=Math.floor,aD=Math.ceil,sD=Vo,lD=Math.PI,uD=function(){function e(e,t,n){this.type="parallel",this._axesMap=me(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}return e.prototype._init=function(e,t,n){var r=e.dimensions,o=e.parallelAxisIndex;nD(r,function(e,n){var r=o[n],i=t.getComponent("parallelAxis",r),a=this._axesMap.set(e,new JA(e,Jb(i),[0,0],i.get("type"),r)),s="category"===a.type;a.onBand=s&&i.get("boundaryGap"),a.inverse=i.get("inverse"),i.axis=a,a.model=i,a.coordinateSystem=i.coordinateSystem=this},this)},e.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},e.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),n=t.axisBase,r=t.layoutBase,o=t.pixelDimIndex,i=e[1-o],a=e[o];return i>=n&&i<=n+t.axisLength&&a>=r&&a<=r+t.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var r=n.getData();nD(this.dimensions,function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(r,r.mapDimension(e)),Kb(t.scale,t.model)},this)}},this)},e.prototype.resize=function(e,t){this._rect=ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var e,t=this._model,n=this._rect,r=["x","y"],o=["width","height"],i=t.get("layout"),a="horizontal"===i?0:1,s=n[o[a]],l=[0,s],u=this.dimensions.length,c=cD(t.get("axisExpandWidth"),l),d=cD(t.get("axisExpandCount")||0,[0,u]),h=t.get("axisExpandable")&&u>3&&u>d&&d>1&&c>0&&s>0,p=t.get("axisExpandWindow");p?(e=cD(p[1]-p[0],l),p[1]=p[0]+e):(e=cD(c*(d-1),l),(p=[c*(t.get("axisExpandCenter")||iD(u/2))-e/2])[1]=p[0]+e);var f=(s-e)/(u-d);f<3&&(f=0);var g=[iD(sD(p[0]/c,1))+1,aD(sD(p[1]/c,1))-1],m=f/c*p[0];return{layout:i,pixelDimIndex:a,layoutBase:n[r[a]],layoutLength:s,axisBase:n[r[1-a]],axisLength:n[o[1-a]],axisExpandable:h,axisExpandWidth:c,axisCollapseWidth:f,axisExpandWindow:p,axisCount:u,winInnerIndices:g,axisExpandWindow0Pos:m}},e.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,n=this.dimensions,r=this._makeLayoutInfo(),o=r.layout;t.each(function(e){var t=[0,r.axisLength],n=e.inverse?1:0;e.setExtent(t[n],t[1-n])}),nD(n,function(t,n){var i=(r.axisExpandable?hD:dD)(n,r),a={horizontal:{x:i.position,y:r.axisLength},vertical:{x:0,y:i.position}},s={horizontal:lD/2,vertical:0},l=[a[o].x+e.x,a[o].y+e.y],u=s[o],c=[1,0,0,1,0,0];wt(c,c,u),_t(c,c,l),this._axesLayout[t]={position:l,rotation:u,transform:c,axisNameAvailableWidth:i.axisNameAvailableWidth,axisLabelShow:i.axisLabelShow,nameTruncateMaxWidth:i.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(e){return this._axesMap.get(e)},e.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},e.prototype.eachActiveState=function(e,t,n,r){null==n&&(n=0),null==r&&(r=e.count());var o=this._axesMap,i=this.dimensions,a=[],s=[];O(i,function(t){a.push(e.mapDimension(t)),s.push(o.get(t).model)});for(var l=this.hasAxisBrushed(),u=n;u<r;u++){var c=void 0;if(l){c="active";for(var d=e.getValues(a,u),h=0,p=i.length;h<p;h++)if("inactive"===s[h].getActiveState(d[h])){c="inactive";break}}else c="normal";t(c,u)}},e.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,n=!1,r=0,o=e.length;r<o;r++)"normal"!==t.get(e[r]).model.getActiveState()&&(n=!0);return n},e.prototype.axisCoordToPoint=function(e,t){return Mc([e,0],this._axesLayout[t].transform)},e.prototype.getAxisLayout=function(e){return T(this._axesLayout[e])},e.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,r=t.axisExpandWindow.slice(),o=r[1]-r[0],i=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:r};var a,s=e[n]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",u=t.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),d=null!=c[0];if(u)d&&u&&s<o*c[0]?(l="jump",a=s-o*c[2]):d&&u&&s>o*(1-c[0])?(l="jump",a=s-o*(1-c[2])):(a=s-o*c[1])>=0&&(a=s-o*(1-c[1]))<=0&&(a=0),(a*=t.axisExpandWidth/u)?QA(a,r,i,"all"):l="none";else{var h=r[1]-r[0];(r=[oD(0,i[1]*s/h-h/2)])[1]=rD(i[1],r[0]+h),r[0]=r[1]-h}return{axisExpandWindow:r,behavior:l}},e}();function cD(e,t){return rD(oD(e,t[0]),t[1])}function dD(e,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*e,axisNameAvailableWidth:n,axisLabelShow:!0}}function hD(e,t){var n,r,o=t.layoutLength,i=t.axisExpandWidth,a=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,u=s,c=!1;return e<l[0]?(n=e*s,r=s):e<=l[1]?(n=t.axisExpandWindow0Pos+e*i-t.axisExpandWindow[0],u=i,c=!0):(n=o-(a-1-e)*s,r=s),{position:n,axisNameAvailableWidth:u,axisLabelShow:c,nameTruncateMaxWidth:r}}var pD={create:function(e,t){var n=[];return e.eachComponent("parallel",function(r,o){var i=new uD(r,e,t);i.name="parallel_"+o,i.resize(r,t),r.coordinateSystem=i,i.model=r,n.push(i)}),e.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var t=e.getReferringComponents("parallel",Ii).models[0];e.coordinateSystem=t.coordinateSystem}}),n}},fD=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.activeIntervals=[],n}return n(t,e),t.prototype.getAreaSelectStyle=function(){return Gi([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var t=this.activeIntervals=T(e);if(t)for(var n=t.length-1;n>=0;n--)Ho(t[n])},t.prototype.getActiveState=function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var r=0,o=t.length;r<o;r++)if(t[r][0]<=e&&e<=t[r][1])return"active";return"inactive"},t}(xh);R(fD,ix);var gD=!0,mD=Math.min,vD=Math.max,yD=Math.pow,bD="globalPan",xD={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},_D={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},wD={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},SD=0,CD=function(e){function t(t){var n=e.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=t,n.group=new Po,n._uid="brushController_"+SD++,O(KD,function(e,t){this._handlers[t]=W(e,this)},n),n}return n(t,e),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){xM(e).globalPan=n}(t,0,this._uid),O(this._handlers,function(e,n){t.on(n,e)}),this._brushType=e.brushType,this._brushOption=k(T(wD),e,!0)},t.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var r=xM(e);r[t]===n&&(r[t]=null)}(e,bD,this._uid),O(this._handlers,function(t,n){e.off(n,t)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};O(e,function(e){t[e.panelId]=T(e)})}else this._panels=null;return this},t.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=B(e,function(e){return k(T(wD),e,!0)});var t=this._covers,n=this._covers=[],r=this,o=this._creatingCover;return new xy(t,e,function(e,t){return i(e.__brushOption,t)},i).add(a).update(a).remove(function(e){t[e]!==o&&r.group.remove(t[e])}).execute(),this;function i(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function a(i,a){var s=e[i];if(null!=a&&t[a]===o)n[i]=t[a];else{var l=n[i]=null!=a?(t[a].__brushOption=s,t[a]):TD(r,MD(r,s));AD(r,l)}}},t.prototype.unmount=function(){return this.enableBrush(!1),ND(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(Xe);function MD(e,t){var n=QD[t.brushType].createCover(e,t);return n.__brushOption=t,ID(n,t),e.group.add(n),n}function TD(e,t){var n=DD(t);return n.endCreating&&(n.endCreating(e,t),ID(t,t.__brushOption)),t}function kD(e,t){var n=t.__brushOption;DD(t).updateCoverShape(e,t,n.range,n)}function ID(e,t){var n=t.z;null==n&&(n=1e4),e.traverse(function(e){e.z=n,e.z2=n})}function AD(e,t){DD(t).updateCommon(e,t),kD(e,t)}function DD(e){return QD[e.__brushOption.brushType]}function PD(e,t,n){var r,o=e._panels;if(!o)return gD;var i=e._transform;return O(o,function(e){e.isTargetByCursor(t,n,i)&&(r=e)}),r}function LD(e,t){var n=e._panels;if(!n)return gD;var r=t.__brushOption.panelId;return null!=r?n[r]:gD}function ND(e){var t=e._covers,n=t.length;return O(t,function(t){e.group.remove(t)},e),t.length=0,!!n}function RD(e,t){var n=B(e._covers,function(e){var t=e.__brushOption,n=T(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}});e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function ED(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function OD(e,t,n,r){var o=new Po;return o.add(new Is({name:"main",style:VD(n),silent:!0,draggable:!0,cursor:"move",drift:G(GD,e,t,o,["n","s","w","e"]),ondragend:G(RD,t,{isEnd:!0})})),O(r,function(n){o.add(new Is({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:G(GD,e,t,o,n),ondragend:G(RD,t,{isEnd:!0})}))}),o}function BD(e,t,n,r){var o=r.brushStyle.lineWidth||0,i=vD(o,6),a=n[0][0],s=n[1][0],l=a-o/2,u=s-o/2,c=n[0][1],d=n[1][1],h=c-i+o/2,p=d-i+o/2,f=c-a,g=d-s,m=f+o,v=g+o;FD(e,t,"main",a,s,f,g),r.transformable&&(FD(e,t,"w",l,u,i,v),FD(e,t,"e",h,u,i,v),FD(e,t,"n",l,u,m,i),FD(e,t,"s",l,p,m,i),FD(e,t,"nw",l,u,i,i),FD(e,t,"ne",h,u,i,i),FD(e,t,"sw",l,p,i,i),FD(e,t,"se",h,p,i,i))}function zD(e,t){var n=t.__brushOption,r=n.transformable,o=t.childAt(0);o.useStyle(VD(n)),o.attr({silent:!r,cursor:r?"move":"default"}),O([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(n){var o=t.childOfName(n.join("")),i=1===n.length?WD(e,n[0]):function(e,t){var n=[WD(e,t[0]),WD(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);o&&o.attr({silent:!r,invisible:!r,cursor:r?_D[i]+"-resize":null})})}function FD(e,t,n,r,o,i,a){var s=t.childOfName(n);s&&s.setShape(function(e){var t=mD(e[0][0],e[1][0]),n=mD(e[0][1],e[1][1]);return{x:t,y:n,width:vD(e[0][0],e[1][0])-t,height:vD(e[0][1],e[1][1])-n}}(YD(e,t,[[r,o],[r+i,o+a]])))}function VD(e){return D({strokeNoScale:!0},e.brushStyle)}function HD(e,t,n,r){var o=[mD(e,n),mD(t,r)],i=[vD(e,n),vD(t,r)];return[[o[0],i[0]],[o[1],i[1]]]}function WD(e,t){var n=Tc({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return Cc(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function GD(e,t,n,r,o,i){var a=n.__brushOption,s=e.toRectRange(a.range),l=jD(t,o,i);O(r,function(e){var t=xD[e];s[t[0]][t[1]]+=l[t[0]]}),a.range=e.fromRectRange(HD(s[0][0],s[1][0],s[0][1],s[1][1])),AD(t,n),RD(t,{isEnd:!1})}function UD(e,t,n,r){var o=t.__brushOption.range,i=jD(e,n,r);O(o,function(e){e[0]+=i[0],e[1]+=i[1]}),AD(e,t),RD(e,{isEnd:!1})}function jD(e,t,n){var r=e.group,o=r.transformCoordToLocal(t,n),i=r.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function YD(e,t,n){var r=LD(e,t);return r&&r!==gD?r.clipPath(n,e._transform):T(n)}function qD(e){var t=e.event;t.preventDefault&&t.preventDefault()}function XD(e,t,n){return e.childOfName("main").contain(t,n)}function ZD(e,t,n,r){var o,i=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],r=t[0],o=n[0]-r[0],i=n[1]-r[1];return yD(o*o+i*i,.5)>6}(e)||i){if(a&&!i){"single"===s.brushMode&&ND(e);var l=T(s);l.brushType=$D(l.brushType,a),l.panelId=a===gD?null:a.panelId,i=e._creatingCover=MD(e,l),e._covers.push(i)}if(i){var u=QD[$D(e._brushType,a)];i.__brushOption.range=u.getCreatingRange(YD(e,i,e._track)),r&&(TD(e,i),u.updateCommon(e,i)),kD(e,i),o={isEnd:r}}}else r&&"single"===s.brushMode&&s.removeOnClick&&PD(e,t,n)&&ND(e)&&(o={isEnd:r,removeOnClick:!0});return o}function $D(e,t){return"auto"===e?t.defaultBrushType:e}var KD={mousedown:function(e){if(this._dragging)JD(this,e);else if(!e.target||!e.target.draggable){qD(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=PD(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,r=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var r=e._zr;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}(e,t.offsetX,t.offsetY)){var r=e._zr,o=e._covers,i=PD(e,t,n);if(!e._dragging)for(var a=0;a<o.length;a++){var s=o[a].__brushOption;if(i&&(i===gD||s.panelId===i.panelId)&&QD[s.brushType].contain(o[a],n[0],n[1]))return}i&&r.setCursorStyle("crosshair")}}(this,e,r),this._dragging){qD(e);var o=ZD(this,e,r,!1);o&&RD(this,o)}},mouseup:function(e){JD(this,e)}};function JD(e,t){if(e._dragging){qD(t);var n=t.offsetX,r=t.offsetY,o=e.group.transformCoordToLocal(n,r),i=ZD(e,t,o,!0);e._dragging=!1,e._track=[],e._creatingCover=null,i&&RD(e,i)}}var QD={lineX:eP(0),lineY:eP(1),rect:{createCover:function(e,t){function n(e){return e}return OD({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=ED(e);return HD(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){BD(e,t,n,r)},updateCommon:zD,contain:XD},polygon:{createCover:function(e,t){var n=new Po;return n.add(new Nu({name:"main",style:VD(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Pu({name:"main",draggable:!0,drift:G(UD,e,t),ondragend:G(RD,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:YD(e,t,n)})},updateCommon:zD,contain:XD}};function eP(e){return{createCover:function(t,n){return OD({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=ED(t);return[mD(n[0][e],n[1][e]),vD(n[0][e],n[1][e])]},updateCoverShape:function(t,n,r,o){var i,a=LD(t,n);if(a!==gD&&a.getLinearBrushOtherExtent)i=a.getLinearBrushOtherExtent(e);else{var s=t._zr;i=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[r,i];e&&l.reverse(),BD(t,n,l,o)},updateCommon:zD,contain:XD}}function tP(e){return e=oP(e),function(t){return Ac(t,e)}}function nP(e,t){return e=oP(e),function(n){var r=null!=t?t:n,o=r?e.width:e.height,i=r?e.x:e.y;return[i,i+(o||0)]}}function rP(e,t,n){var r=oP(e);return function(e,o){return r.contain(o[0],o[1])&&!AM(e,t,n)}}function oP(e){return Ot.create(e)}var iP=["axisLine","axisTickLabel","axisName"],aP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(t,n){e.prototype.init.apply(this,arguments),(this._brushController=new CD(n.getZr())).on("brush",W(this._onBrush,this))},t.prototype.render=function(e,t,n,r){if(!function(e,t,n){return n&&"axisAreaSelect"===n.type&&t.findComponents({mainType:"parallelAxis",query:n})[0]===e}(e,t,r)){this.axisModel=e,this.api=n,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Po,this.group.add(this._axisGroup),e.get("show")){var i=function(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}(e,t),a=i.coordinateSystem,s=e.getAreaSelectStyle(),l=s.width,u=e.axis.dim,c=A({strokeContainThreshold:l},a.getAxisLayout(u)),d=new NC(e,c);O(iP,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(c,s,e,i,l,n),Ic(o,this._axisGroup,e)}}},t.prototype._refreshBrushController=function(e,t,n,r,o,i){var a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),u=Ot.create({x:a[0],y:-o/2,width:s,height:o});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:tP(u),isTargetByCursor:rP(u,i,r),getLinearBrushOtherExtent:nP(u,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers(function(e){var t=e.axis;return B(e.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(e[0],!0),t.dataToCoord(e[1],!0)]}})}(n))},t.prototype._onBrush=function(e){var t=e.areas,n=this.axisModel,r=n.axis,o=B(t,function(e){return[r.coordToData(e.range[0],!0),r.coordToData(e.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(lg),sP={type:"axisAreaSelect",event:"axisAreaSelected"},lP={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function uP(e){e.registerComponentView(XA),e.registerComponentModel(KA),e.registerCoordinateSystem("parallel",pD),e.registerPreprocessor(qA),e.registerComponentModel(fD),e.registerComponentView(aP),mC(e,"parallel",fD,lP),function(e){e.registerAction(sP,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(t){t.axis.model.setActiveIntervals(e.intervals)})}),e.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(t){t.setAxisExpand(e)})})}(e)}var cP=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},dP=function(e){function t(t){return e.call(this,t)||this}return n(t,e),t.prototype.getDefaultShape=function(){return new cP},t.prototype.buildPath=function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},t.prototype.highlight=function(){xl(this)},t.prototype.downplay=function(){_l(this)},t}(ms),hP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}return n(t,e),t.prototype.render=function(e,t,n){var r=this,o=e.getGraph(),i=this.group,a=e.layoutInfo,s=a.width,l=a.height,u=e.getData(),c=e.getData("edge"),d=e.get("orient");this._model=e,i.removeAll(),i.x=a.x,i.y=a.y,o.eachEdge(function(t){var n=new dP,r=Us(n);r.dataIndex=t.dataIndex,r.seriesIndex=e.seriesIndex,r.dataType="edge";var o,a,u,h,p,f,g,m,v=t.getModel(),y=v.getModel("lineStyle"),b=y.get("curveness"),x=t.node1.getLayout(),_=t.node1.getModel(),w=_.get("localX"),S=_.get("localY"),C=t.node2.getLayout(),M=t.node2.getModel(),T=M.get("localX"),k=M.get("localY"),I=t.getLayout();n.shape.extent=Math.max(1,I.dy),n.shape.orient=d,"vertical"===d?(o=(null!=w?w*s:x.x)+I.sy,a=(null!=S?S*l:x.y)+x.dy,u=(null!=T?T*s:C.x)+I.ty,p=o,f=a*(1-b)+(h=null!=k?k*l:C.y)*b,g=u,m=a*b+h*(1-b)):(o=(null!=w?w*s:x.x)+x.dx,a=(null!=S?S*l:x.y)+I.sy,p=o*(1-b)+(u=null!=T?T*s:C.x)*b,f=a,g=o*b+u*(1-b),m=h=(null!=k?k*l:C.y)+I.ty),n.setShape({x1:o,y1:a,x2:u,y2:h,cpx1:p,cpy1:f,cpx2:g,cpy2:m}),n.useStyle(y.getItemStyle()),pP(n.style,d,t);var A=""+v.get("value"),D=Gc(v,"edgeLabel");Wc(n,D,{labelFetcher:{getFormattedLabel:function(t,n,r,o,i,a){return e.getFormattedLabel(t,n,"edge",o,ie(i,D.normal&&D.normal.get("formatter"),A),a)}},labelDataIndex:t.dataIndex,defaultText:A}),n.setTextConfig({position:"inside"});var P=v.getModel("emphasis");zl(n,v,"lineStyle",function(e){var n=e.getItemStyle();return pP(n,d,t),n}),i.add(n),c.setItemGraphicEl(t.dataIndex,n);var L=P.get("focus");Rl(n,"adjacency"===L?t.getAdjacentDataIndices():"trajectory"===L?t.getTrajectoryDataIndices():L,P.get("blurScope"),P.get("disabled"))}),o.eachNode(function(t){var n=t.getLayout(),r=t.getModel(),o=r.get("localX"),a=r.get("localY"),c=r.getModel("emphasis"),d=new Is({shape:{x:null!=o?o*s:n.x,y:null!=a?a*l:n.y,width:n.dx,height:n.dy},style:r.getModel("itemStyle").getItemStyle(),z2:10});Wc(d,Gc(r),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(t,n,"node")}},labelDataIndex:t.dataIndex,defaultText:t.id}),d.disableLabelAnimation=!0,d.setStyle("fill",t.getVisual("color")),d.setStyle("decal",t.getVisual("style").decal),zl(d,r),i.add(d),u.setItemGraphicEl(t.dataIndex,d),Us(d).dataType="node";var h=c.get("focus");Rl(d,"adjacency"===h?t.getAdjacentDataIndices():"trajectory"===h?t.getTrajectoryDataIndices():h,c.get("blurScope"),c.get("disabled"))}),u.eachItemGraphicEl(function(t,o){u.getItemModel(o).get("draggable")&&(t.drift=function(t,i){r._focusAdjacencyDisabled=!0,this.shape.x+=t,this.shape.y+=i,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:u.getRawIndex(o),localX:this.shape.x/s,localY:this.shape.y/l})},t.ondragend=function(){r._focusAdjacencyDisabled=!1},t.draggable=!0,t.cursor="move")}),!this._data&&e.isAnimationEnabled()&&i.setClipPath(function(e,t,n){var r=new Is({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return oc(r,{shape:{width:e.width+20}},t,function(){i.removeClipPath()}),r}(i.getBoundingRect(),e)),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(hg);function pP(e,t,n){switch(e.fill){case"source":e.fill=n.node1.getVisual("color"),e.decal=n.node1.getVisual("style").decal;break;case"target":e.fill=n.node2.getVisual("color"),e.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),o=n.node2.getVisual("color");Y(r)&&Y(o)&&(e.fill=new ju(0,0,+("horizontal"===t),+("vertical"===t),[{color:r,offset:0},{color:o,offset:1}]))}}var fP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.getInitialData=function(e,t){var n=e.edges||e.links,r=e.data||e.nodes,o=e.levels;this.levelModels=[];for(var i=this.levelModels,a=0;a<o.length;a++)null!=o[a].depth&&o[a].depth>=0&&(i[o[a].depth]=new hd(o[a],this,t));if(r&&n){var s=MA(r,n,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e,t){var n=e.parentModel,r=n.getData().getItemLayout(t);if(r){var o=r.depth,i=n.levelModels[o];i&&(e.parentModel=i)}return e}),t.wrapMethod("getItemModel",function(e,t){var n=e.parentModel,r=n.getGraph().getEdgeByIndex(t).node1.getLayout();if(r){var o=r.depth,i=n.levelModels[o];i&&(e.parentModel=i)}return e})});return s.data}},t.prototype.setNodePosition=function(e,t){var n=(this.option.data||this.option.nodes)[e];n.localX=t[0],n.localY=t[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,t,n){function r(e){return isNaN(e)||null==e}if("edge"===n){var o=this.getDataParams(e,n),i=o.data,a=o.value;return zf("nameValue",{name:i.source+" -- "+i.target,value:a,noValue:r(a)})}var s=this.getGraph().getNodeByIndex(e).getLayout().value,l=this.getDataParams(e,n).data.name;return zf("nameValue",{name:null!=l?l+"":null,value:s,noValue:r(s)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(t,n){var r=e.prototype.getDataParams.call(this,t,n);if(null==r.value&&"node"===n){var o=this.getGraph().getNodeByIndex(t).getLayout().value;r.value=o}return r},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(eg);function gP(e,t){e.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),r=e.get("nodeGap"),o=function(e,t){return ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=o;var i=o.width,a=o.height,s=e.getGraph(),l=s.nodes,u=s.edges;!function(e){O(e,function(e){var t=MP(e.outEdges,CP),n=MP(e.inEdges,CP),r=e.getValue()||0,o=Math.max(t,n,r);e.setLayout({value:o},!0)})}(l),function(e,t,n,r,o,i,a,s,l){(function(e,t,n,r,o,i,a){for(var s=[],l=[],u=[],c=[],d=0,h=0;h<t.length;h++)s[h]=1;for(h=0;h<e.length;h++)l[h]=e[h].inEdges.length,0===l[h]&&u.push(e[h]);for(var p=-1;u.length;){for(var f=0;f<u.length;f++){var g=u[f],m=g.hostGraph.data.getRawDataItem(g.dataIndex),v=null!=m.depth&&m.depth>=0;v&&m.depth>p&&(p=m.depth),g.setLayout({depth:v?m.depth:d},!0),"vertical"===i?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var b=g.outEdges[y];s[t.indexOf(b)]=0;var x=b.node2;0==--l[e.indexOf(x)]&&c.indexOf(x)<0&&c.push(x)}}++d,u=c,c=[]}for(h=0;h<s.length;h++)if(1===s[h])throw new Error("Sankey is a DAG, the original data has cycle!");var _=p>d-1?p:d-1;a&&"left"!==a&&function(e,t,n,r){if("right"===t){for(var o=[],i=e,a=0;i.length;){for(var s=0;s<i.length;s++){var l=i[s];l.setLayout({skNodeHeight:a},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];o.indexOf(c.node1)<0&&o.push(c.node1)}}i=o,o=[],++a}O(e,function(e){mP(e)||e.setLayout({depth:Math.max(0,r-e.getLayout().skNodeHeight)},!0)})}else"justify"===t&&function(e,t){O(e,function(e){mP(e)||e.outEdges.length||e.setLayout({depth:t},!0)})}(e,r)}(e,a,0,_),function(e,t,n){O(e,function(e){var r=e.getLayout().depth*t;"vertical"===n?e.setLayout({y:r},!0):e.setLayout({x:r},!0)})}(e,"vertical"===i?(o-n)/_:(r-n)/_,i)})(e,t,n,o,i,s,l),function(e,t,n,r,o,i,a){var s=function(e,t){var n=[],r="vertical"===t?"y":"x",o=Li(e,function(e){return e.getLayout()[r]});return o.keys.sort(function(e,t){return e-t}),O(o.keys,function(e){n.push(o.buckets.get(e))}),n}(e,a);(function(e,t,n,r,o,i){var a=1/0;O(e,function(e){var t=e.length,s=0;O(e,function(e){s+=e.getLayout().value});var l="vertical"===i?(r-(t-1)*o)/s:(n-(t-1)*o)/s;l<a&&(a=l)}),O(e,function(e){O(e,function(e,t){var n=e.getLayout().value*a;"vertical"===i?(e.setLayout({x:t},!0),e.setLayout({dx:n},!0)):(e.setLayout({y:t},!0),e.setLayout({dy:n},!0))})}),O(t,function(e){var t=+e.getValue()*a;e.setLayout({dy:t},!0)})})(s,t,n,r,o,a),vP(s,o,n,r,a);for(var l=1;i>0;i--)yP(s,l*=.99,a),vP(s,o,n,r,a),TP(s,l,a),vP(s,o,n,r,a)}(e,t,i,o,r,a,s),function(e,t){var n="vertical"===t?"x":"y";O(e,function(e){e.outEdges.sort(function(e,t){return e.node2.getLayout()[n]-t.node2.getLayout()[n]}),e.inEdges.sort(function(e,t){return e.node1.getLayout()[n]-t.node1.getLayout()[n]})}),O(e,function(e){var t=0,n=0;O(e.outEdges,function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy}),O(e.inEdges,function(e){e.setLayout({ty:n},!0),n+=e.getLayout().dy})})}(e,s)}(l,u,n,r,i,a,0!==F(l,function(e){return 0===e.getLayout().value}).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}function mP(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&t.depth>=0}function vP(e,t,n,r,o){var i="vertical"===o?"x":"y";O(e,function(e){var a,s,l;e.sort(function(e,t){return e.getLayout()[i]-t.getLayout()[i]});for(var u=0,c=e.length,d="vertical"===o?"dx":"dy",h=0;h<c;h++)(l=u-(s=e[h]).getLayout()[i])>0&&(a=s.getLayout()[i]+l,"vertical"===o?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),u=s.getLayout()[i]+s.getLayout()[d]+t;if((l=u-t-("vertical"===o?r:n))>0)for(a=s.getLayout()[i]-l,"vertical"===o?s.setLayout({x:a},!0):s.setLayout({y:a},!0),u=a,h=c-2;h>=0;--h)(l=(s=e[h]).getLayout()[i]+s.getLayout()[d]+t-u)>0&&(a=s.getLayout()[i]-l,"vertical"===o?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),u=s.getLayout()[i]})}function yP(e,t,n){O(e.slice().reverse(),function(e){O(e,function(e){if(e.outEdges.length){var r=MP(e.outEdges,bP,n)/MP(e.outEdges,CP);if(isNaN(r)){var o=e.outEdges.length;r=o?MP(e.outEdges,xP,n)/o:0}if("vertical"===n){var i=e.getLayout().x+(r-SP(e,n))*t;e.setLayout({x:i},!0)}else{var a=e.getLayout().y+(r-SP(e,n))*t;e.setLayout({y:a},!0)}}})})}function bP(e,t){return SP(e.node2,t)*e.getValue()}function xP(e,t){return SP(e.node2,t)}function _P(e,t){return SP(e.node1,t)*e.getValue()}function wP(e,t){return SP(e.node1,t)}function SP(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function CP(e){return e.getValue()}function MP(e,t,n){for(var r=0,o=e.length,i=-1;++i<o;){var a=+t(e[i],n);isNaN(a)||(r+=a)}return r}function TP(e,t,n){O(e,function(e){O(e,function(e){if(e.inEdges.length){var r=MP(e.inEdges,_P,n)/MP(e.inEdges,CP);if(isNaN(r)){var o=e.inEdges.length;r=o?MP(e.inEdges,wP,n)/o:0}if("vertical"===n){var i=e.getLayout().x+(r-SP(e,n))*t;e.setLayout({x:i},!0)}else{var a=e.getLayout().y+(r-SP(e,n))*t;e.setLayout({y:a},!0)}}})})}function kP(e){e.eachSeriesByType("sankey",function(e){var t=e.getGraph(),n=t.nodes,r=t.edges;if(n.length){var o=1/0,i=-1/0;O(n,function(e){var t=e.getLayout().value;t<o&&(o=t),t>i&&(i=t)}),O(n,function(t){var n=new Yk({type:"color",mappingMethod:"linear",dataExtent:[o,i],visual:e.get("color")}).mapValueToVisual(t.getLayout().value),r=t.getModel().get(["itemStyle","color"]);null!=r?(t.setVisual("color",r),t.setVisual("style",{fill:r})):(t.setVisual("color",n),t.setVisual("style",{fill:n}))})}r.length&&O(r,function(e){var t=e.getModel().get("lineStyle");e.setVisual("style",t)})})}var IP=function(){function e(){}return e.prototype.getInitialData=function(e,t){var n,r,o=t.getComponent("xAxis",this.get("xAxisIndex")),i=t.getComponent("yAxis",this.get("yAxisIndex")),a=o.get("type"),s=i.get("type");"category"===a?(e.layout="horizontal",n=o.getOrdinalMeta(),r=!0):"category"===s?(e.layout="vertical",n=i.getOrdinalMeta(),r=!0):e.layout=e.layout||"horizontal";var l=["x","y"],u="horizontal"===e.layout?0:1,c=this._baseAxisDim=l[u],d=l[1-u],h=[o,i],p=h[u].get("type"),f=h[1-u].get("type"),g=e.data;if(g&&r){var m=[];O(g,function(e,t){var n;U(e)?(n=e.slice(),e.unshift(t)):U(e.value)?((n=A({},e)).value=n.value.slice(),e.value.unshift(t)):n=e,m.push(n)}),e.data=m}var v=this.defaultValueDimensions,y=[{name:c,type:Sy(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:Sy(f),dimsDef:v.slice()}];return eC(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:G(Rh,y,this)})},e.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},e}(),AP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return n(t,e),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(eg);R(AP,IP,!0);var DP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),o=this.group,i=this._data;this._data||o.removeAll();var a="horizontal"===e.get("layout")?1:0;r.diff(i).add(function(e){if(r.hasValue(e)){var t=NP(r.getItemLayout(e),r,e,a,!0);r.setItemGraphicEl(e,t),o.add(t)}}).update(function(e,t){var n=i.getItemGraphicEl(t);if(r.hasValue(e)){var s=r.getItemLayout(e);n?(uc(n),RP(s,n,r,e)):n=NP(s,r,e,a),o.add(n),r.setItemGraphicEl(e,n)}else o.remove(n)}).remove(function(e){var t=i.getItemGraphicEl(e);t&&o.remove(t)}).execute(),this._data=r},t.prototype.remove=function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(e){e&&t.remove(e)})},t.type="boxplot",t}(hg),PP=function(){},LP=function(e){function t(t){var n=e.call(this,t)||this;return n.type="boxplotBoxPath",n}return n(t,e),t.prototype.getDefaultShape=function(){return new PP},t.prototype.buildPath=function(e,t){var n=t.points,r=0;for(e.moveTo(n[r][0],n[r][1]),r++;r<4;r++)e.lineTo(n[r][0],n[r][1]);for(e.closePath();r<n.length;r++)e.moveTo(n[r][0],n[r][1]),r++,e.lineTo(n[r][0],n[r][1])},t}(ms);function NP(e,t,n,r,o){var i=e.ends,a=new LP({shape:{points:o?EP(i,r,e):i}});return RP(e,a,t,n,o),a}function RP(e,t,n,r,o){var i=n.hostModel;(0,zc[o?"initProps":"updateProps"])(t,{shape:{points:e.ends}},i,r),t.useStyle(n.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var a=n.getItemModel(r),s=a.getModel("emphasis");zl(t,a),Rl(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function EP(e,t,n){return B(e,function(e){return(e=e.slice())[t]=n.initBaseline,e})}var OP=O;function BP(e){var t=function(e){var t=[],n=[];return e.eachSeriesByType("boxplot",function(e){var r=e.getBaseAxis(),o=L(n,r);o<0&&(o=n.length,n[o]=r,t[o]={axis:r,seriesModels:[]}),t[o].seriesModels.push(e)}),t}(e);OP(t,function(e){var t=e.seriesModels;t.length&&(function(e){var t,n=e.axis,r=e.seriesModels,o=r.length,i=e.boxWidthList=[],a=e.boxOffsetList=[],s=[];if("category"===n.type)t=n.getBandWidth();else{var l=0;OP(r,function(e){l=Math.max(l,e.getData().count())});var u=n.getExtent();t=Math.abs(u[1]-u[0])/l}OP(r,function(e){var n=e.get("boxWidth");U(n)||(n=[n,n]),s.push([Fo(n[0],t)||0,Fo(n[1],t)||0])});var c=.8*t-2,d=c/o*.3,h=(c-d*(o-1))/o,p=h/2-c/2;OP(r,function(e,t){a.push(p),p+=d+h,i.push(Math.min(Math.max(h,s[t][0]),s[t][1]))})}(e),OP(t,function(t,n){!function(e,t,n){var r=e.coordinateSystem,o=e.getData(),i=n/2,a="horizontal"===e.get("layout")?0:1,s=1-a,l=["x","y"],u=o.mapDimension(l[a]),c=o.mapDimensionsAll(l[s]);if(!(null==u||c.length<5))for(var d=0;d<o.count();d++){var h=o.get(u,d),p=b(h,c[2],d),f=b(h,c[0],d),g=b(h,c[1],d),m=b(h,c[3],d),v=b(h,c[4],d),y=[];x(y,g,!1),x(y,m,!0),y.push(f,g,v,m),_(y,f),_(y,v),_(y,p),o.setItemLayout(d,{initBaseline:p[s],ends:y})}function b(e,n,i){var l,u=o.get(n,i),c=[];return c[a]=e,c[s]=u,isNaN(e)||isNaN(u)?l=[NaN,NaN]:(l=r.dataToPoint(c))[a]+=t,l}function x(e,t,n){var r=t.slice(),o=t.slice();r[a]+=i,o[a]-=i,n?e.push(r,o):e.push(o,r)}function _(e,t){var n=t.slice(),r=t.slice();n[a]-=i,r[a]+=i,e.push(n,r)}}(t,e.boxOffsetList[n],e.boxWidthList[n])}))})}var zP={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==Th){li("")}var n=function(e,t){for(var n=[],r=[],o=(t=t||{}).boundIQR,i="none"===o||0===o,a=0;a<e.length;a++){var s=Ho(e[a].slice()),l=ti(s,.25),u=ti(s,.5),c=ti(s,.75),d=s[0],h=s[s.length-1],p=(null==o?1.5:o)*(c-l),f=i?d:Math.max(d,l-p),g=i?h:Math.min(h,c+p),m=t.itemNameFormatter,v=j(m)?m({value:a}):Y(m)?m.replace("{value}",a+""):a+"";n.push([v,f,l,u,c,g]);for(var y=0;y<s.length;y++){var b=s[y];if(b<f||b>g){var x=[v,b];r.push(x)}}}return{boxData:n,outliers:r}}(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}},FP=["color","borderColor"],VP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,t,n){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,t,n,r){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},t.prototype.eachRendered=function(e){Bc(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;null!=this._isLargeDraw&&t===this._isLargeDraw||(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e){var t=e.getData(),n=this._data,r=this.group,o=t.getLayout("isSimpleBox"),i=e.get("clip",!0),a=e.coordinateSystem,s=a.getArea&&a.getArea();this._data||r.removeAll(),t.diff(n).add(function(n){if(t.hasValue(n)){var a=t.getItemLayout(n);if(i&&UP(s,a))return;var l=GP(a,n,!0);oc(l,{shape:{points:a.ends}},e,n),jP(l,t,n,o),r.add(l),t.setItemGraphicEl(n,l)}}).update(function(a,l){var u=n.getItemGraphicEl(l);if(t.hasValue(a)){var c=t.getItemLayout(a);i&&UP(s,c)?r.remove(u):(u?(rc(u,{shape:{points:c.ends}},e,a),uc(u)):u=GP(c),jP(u,t,a,o),r.add(u),t.setItemGraphicEl(a,u))}else r.remove(u)}).remove(function(e){var t=n.getItemGraphicEl(e);t&&r.remove(t)}).execute(),this._data=t},t.prototype._renderLarge=function(e){this._clear(),ZP(e,this.group);var t=e.get("clip",!0)?eS(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,t){for(var n,r=t.getData(),o=r.getLayout("isSimpleBox");null!=(n=e.next());){var i=GP(r.getItemLayout(n));jP(i,r,n,o),i.incremental=!0,this.group.add(i),this._progressiveEls.push(i)}},t.prototype._incrementalRenderLarge=function(e,t){ZP(t,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(hg),HP=function(){},WP=function(e){function t(t){var n=e.call(this,t)||this;return n.type="normalCandlestickBox",n}return n(t,e),t.prototype.getDefaultShape=function(){return new HP},t.prototype.buildPath=function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))},t}(ms);function GP(e,t,n){var r=e.ends;return new WP({shape:{points:n?YP(r,e):r},z2:100})}function UP(e,t){for(var n=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){n=!1;break}return n}function jP(e,t,n,r){var o=t.getItemModel(n);e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.__simpleBox=r,zl(e,o)}function YP(e,t){return B(e,function(e){return(e=e.slice())[1]=t.initBaseline,e})}var qP=function(){},XP=function(e){function t(t){var n=e.call(this,t)||this;return n.type="largeCandlestickBox",n}return n(t,e),t.prototype.getDefaultShape=function(){return new qP},t.prototype.buildPath=function(e,t){for(var n=t.points,r=0;r<n.length;)if(this.__sign===n[r++]){var o=n[r++];e.moveTo(o,n[r++]),e.lineTo(o,n[r++])}else r+=3},t}(ms);function ZP(e,t,n,r){var o=e.getData().getLayout("largePoints"),i=new XP({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(i);var a=new XP({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(a);var s=new XP({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(s),$P(1,i,e),$P(-1,a,e),$P(0,s,e),r&&(i.incremental=!0,a.incremental=!0),n&&n.push(i,a)}function $P(e,t,n,r){var o=n.get(["itemStyle",e>0?"borderColor":"borderColor0"])||n.get(["itemStyle",e>0?"color":"color0"]);0===e&&(o=n.get(["itemStyle","borderColorDoji"]));var i=n.getModel("itemStyle").getItemStyle(FP);t.useStyle(i),t.style.fill=null,t.style.stroke=o}var KP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return n(t,e),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,t,n){var r=t.getItemLayout(e);return r&&n.rect(r.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(eg);function JP(e){e&&U(e.series)&&O(e.series,function(e){Z(e)&&"k"===e.type&&(e.type="candlestick")})}R(KP,IP,!0);var QP=["itemStyle","borderColor"],eL=["itemStyle","borderColor0"],tL=["itemStyle","borderColorDoji"],nL=["itemStyle","color"],rL=["itemStyle","color0"],oL={seriesType:"candlestick",plan:ug(),performRawSeries:!0,reset:function(e,t){function n(e,t){return t.get(e>0?nL:rL)}function r(e,t){return t.get(0===e?tL:e>0?QP:eL)}if(!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(e,t){for(var o;null!=(o=e.next());){var i=t.getItemModel(o),a=t.getItemLayout(o).sign,s=i.getItemStyle();s.fill=n(a,i),s.stroke=r(a,i)||s.fill,A(t.ensureUniqueItemVisual(o,"style"),s)}}}}},iL={seriesType:"candlestick",plan:ug(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),r=function(e,t){var n,r=e.getBaseAxis(),o="category"===r.type?r.getBandWidth():(n=r.getExtent(),Math.abs(n[1]-n[0])/t.count()),i=Fo(oe(e.get("barMaxWidth"),o),o),a=Fo(oe(e.get("barMinWidth"),1),o),s=e.get("barWidth");return null!=s?Fo(s,o):Math.max(Math.min(o/2,i),a)}(e,n),o=["x","y"],i=n.getDimensionIndex(n.mapDimension(o[0])),a=B(n.mapDimensionsAll(o[1]),n.getDimensionIndex,n),s=a[0],l=a[1],u=a[2],c=a[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(i<0||a.length<4))return{progress:e.pipelineContext.large?function(n,r){for(var o,a,d=mb(4*n.count),h=0,p=[],f=[],g=r.getStore(),m=!!e.get(["itemStyle","borderColorDoji"]);null!=(a=n.next());){var v=g.get(i,a),y=g.get(s,a),b=g.get(l,a),x=g.get(u,a),_=g.get(c,a);isNaN(v)||isNaN(x)||isNaN(_)?(d[h++]=NaN,h+=3):(d[h++]=aL(g,a,y,b,l,m),p[0]=v,p[1]=x,o=t.dataToPoint(p,null,f),d[h++]=o?o[0]:NaN,d[h++]=o?o[1]:NaN,p[1]=_,o=t.dataToPoint(p,null,f),d[h++]=o?o[1]:NaN)}r.setLayout("largePoints",d)}:function(e,n){for(var o,a=n.getStore();null!=(o=e.next());){var d=a.get(i,o),h=a.get(s,o),p=a.get(l,o),f=a.get(u,o),g=a.get(c,o),m=Math.min(h,p),v=Math.max(h,p),y=C(m,d),b=C(v,d),x=C(f,d),_=C(g,d),w=[];M(w,b,0),M(w,y,1),w.push(k(_),k(b),k(x),k(y));var S=!!n.getItemModel(o).get(["itemStyle","borderColorDoji"]);n.setItemLayout(o,{sign:aL(a,o,h,p,l,S),initBaseline:h>p?b[1]:y[1],ends:w,brushRect:T(f,g,d)})}function C(e,n){var r=[];return r[0]=n,r[1]=e,isNaN(n)||isNaN(e)?[NaN,NaN]:t.dataToPoint(r)}function M(e,t,n){var o=t.slice(),i=t.slice();o[0]=Sc(o[0]+r/2,1,!1),i[0]=Sc(i[0]-r/2,1,!0),n?e.push(o,i):e.push(i,o)}function T(e,t,n){var o=C(e,n),i=C(t,n);return o[0]-=r/2,i[0]-=r/2,{x:o[0],y:o[1],width:r,height:i[1]-o[1]}}function k(e){return e[0]=Sc(e[0],1),e}}}}};function aL(e,t,n,r,o,i){return n>r?-1:n<r?1:i?0:t>0?e.get(o,t-1)<=r?1:-1:1}function sL(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}var lL=function(e){function t(t,n){var r=e.call(this)||this,o=new Ow(t,n),i=new Po;return r.add(o),r.add(i),r.updateData(t,n),r}return n(t,e),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,r=e.rippleNumber,o=this.childAt(1),i=0;i<r;i++){var a=Cm(t,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-i/r*e.period+e.effectOffset;a.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),a.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),o.add(a)}sL(o,e)},t.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),r=["symbolType","period","rippleScale","rippleNumber"],o=0;o<r.length;o++){var i=r[o];if(t[i]!==e[i])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}sL(n,e)},t.prototype.highlight=function(){xl(this)},t.prototype.downplay=function(){_l(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,t){var n=this,r=e.hostModel;this.childAt(0).updateData(e,t);var o=this.childAt(1),i=e.getItemModel(t),a=e.getItemVisual(t,"symbol"),s=Mm(e.getItemVisual(t,"symbolSize")),l=e.getItemVisual(t,"style"),u=l&&l.fill,c=i.getModel("emphasis");o.setScale(s),o.traverse(function(e){e.setStyle("fill",u)});var d=Tm(e.getItemVisual(t,"symbolOffset"),s);d&&(o.x=d[0],o.y=d[1]);var h=e.getItemVisual(t,"symbolRotate");o.rotation=(h||0)*Math.PI/180||0;var p={};p.showEffectOn=r.get("showEffectOn"),p.rippleScale=i.get(["rippleEffect","scale"]),p.brushType=i.get(["rippleEffect","brushType"]),p.period=1e3*i.get(["rippleEffect","period"]),p.effectOffset=t/e.count(),p.z=r.getShallow("z")||0,p.zlevel=r.getShallow("zlevel")||0,p.symbolType=a,p.color=u,p.rippleEffectColor=i.get(["rippleEffect","color"]),p.rippleNumber=i.get(["rippleEffect","number"]),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==p.showEffectOn&&n.startEffectAnimation(p):"normal"===e&&"render"!==p.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=p,Rl(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(Po),uL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(){this._symbolDraw=new Hw(lL)},t.prototype.render=function(e,t,n){var r=e.getData(),o=this._symbolDraw;o.updateData(r,{clipShape:this._getClipShape(e)}),this.group.add(o.group)},t.prototype._getClipShape=function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},t.prototype.updateTransform=function(e,t,n){var r=e.getData();this.group.dirty();var o=pS("").reset(e,t,n);o.progress&&o.progress({start:0,end:r.count(),count:r.count()},r),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Mt(t.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(hg),cL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return n(t,e),t.prototype.getInitialData=function(e,t){return Qy(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(eg),dL=function(e){function t(t,n,r){var o=e.call(this)||this;return o.add(o.createLine(t,n,r)),o._updateEffectSymbol(t,n),o}return n(t,e),t.prototype.createLine=function(e,t,n){return new iA(e,t,n)},t.prototype._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),r=n.get("symbolSize"),o=n.get("symbol");U(r)||(r=[r,r]);var i=e.getItemVisual(t,"style"),a=n.get("color")||i&&i.stroke,s=this.childAt(1);this._symbolType!==o&&(this.remove(s),(s=Cm(o,-.5,-.5,1,1,a)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",a),s.setStyle(n.getItemStyle(["color"])),s.scaleX=r[0],s.scaleY=r[1],s.setColor(a),this._symbolType=o,this._symbolScale=r,this._updateEffectAnimation(e,n,t))},t.prototype._updateEffectAnimation=function(e,t,n){var r=this.childAt(1);if(r){var o=e.getItemLayout(n),i=1e3*t.get("period"),a=t.get("loop"),s=t.get("roundTrip"),l=t.get("constantSpeed"),u=re(t.get("delay"),function(t){return t/e.count()*i/3});if(r.ignore=!0,this._updateAnimationPoints(r,o),l>0&&(i=this._getLineLength(r)/l*1e3),i!==this._period||a!==this._loop||s!==this._roundTrip){r.stopAnimation();var c=void 0;c=j(u)?u(n):u,r.__t>0&&(c=-i*r.__t),this._animateSymbol(r,i,c,a,s)}this._period=i,this._loop=a,this._roundTrip=s}},t.prototype._animateSymbol=function(e,t,n,r,o){if(t>0){e.__t=0;var i=this,a=e.animate("",r).when(o?2*t:t,{__t:o?2:1}).delay(n).during(function(){i._updateSymbolPosition(e)});r||a.done(function(){i.remove(e)}),a.start()}},t.prototype._getLineLength=function(e){return ze(e.__p1,e.__cp1)+ze(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},t.prototype.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},t.prototype._updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,r=e.__cp1,o=e.__t<1?e.__t:2-e.__t,i=[e.x,e.y],a=i.slice(),s=wn,l=Sn;i[0]=s(t[0],r[0],n[0],o),i[1]=s(t[1],r[1],n[1],o);var u=e.__t<1?l(t[0],r[0],n[0],o):l(n[0],r[0],t[0],1-o),c=e.__t<1?l(t[1],r[1],n[1],o):l(n[1],r[1],t[1],1-o);e.rotation=-Math.atan2(c,u)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*ze(a,i),1===o&&(i[0]=a[0]+(i[0]-a[0])/2,i[1]=a[1]+(i[1]-a[1])/2)):1===e.__lastT?e.scaleY=2*ze(t,i):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=i[0],e.y=i[1]},t.prototype.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},t}(Po),hL=function(e){function t(t,n,r){var o=e.call(this)||this;return o._createPolyline(t,n,r),o}return n(t,e),t.prototype._createPolyline=function(e,t,n){var r=e.getItemLayout(t),o=new Nu({shape:{points:r}});this.add(o),this._updateCommonStl(e,t,n)},t.prototype.updateData=function(e,t,n){var r=e.hostModel;rc(this.childAt(0),{shape:{points:e.getItemLayout(t)}},r,t),this._updateCommonStl(e,t,n)},t.prototype._updateCommonStl=function(e,t,n){var r=this.childAt(0),o=e.getItemModel(t),i=n&&n.emphasisLineStyle,a=n&&n.focus,s=n&&n.blurScope,l=n&&n.emphasisDisabled;if(!n||e.hasItemOption){var u=o.getModel("emphasis");i=u.getModel("lineStyle").getLineStyle(),l=u.get("disabled"),a=u.get("focus"),s=u.get("blurScope")}r.useStyle(e.getItemVisual(t,"style")),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=i,Rl(this,a,s,l)},t.prototype.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},t}(Po),pL=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return n(t,e),t.prototype.createLine=function(e,t,n){return new hL(e,t,n)},t.prototype._updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],r=0,o=1;o<t.length;o++){var i=t[o-1],a=t[o];r+=ze(i,a),n.push(r)}if(0!==r){for(o=0;o<n.length;o++)n[o]/=r;this._offsets=n,this._length=r}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var t=e.__t<1?e.__t:2-e.__t,n=this._points,r=this._offsets,o=n.length;if(r){var i,a=this._lastFrame;if(t<this._lastFramePercent){for(i=Math.min(a+1,o-1);i>=0&&!(r[i]<=t);i--);i=Math.min(i,o-2)}else{for(i=a;i<o&&!(r[i]>t);i++);i=Math.min(i-1,o-2)}var s=(t-r[i])/(r[i+1]-r[i]),l=n[i],u=n[i+1];e.x=l[0]*(1-s)+s*u[0],e.y=l[1]*(1-s)+s*u[1];var c=e.__t<1?u[0]-l[0]:l[0]-u[0],d=e.__t<1?u[1]-l[1]:l[1]-u[1];e.rotation=-Math.atan2(d,c)-Math.PI/2,this._lastFrame=i,this._lastFramePercent=t,e.ignore=!1}},t}(dL),fL=function(){this.polyline=!1,this.curveness=0,this.segs=[]},gL=function(e){function t(t){var n=e.call(this,t)||this;return n._off=0,n.hoverDataIdx=-1,n}return n(t,e),t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new fL},t.prototype.buildPath=function(e,t){var n,r=t.segs,o=t.curveness;if(t.polyline)for(n=this._off;n<r.length;){var i=r[n++];if(i>0){e.moveTo(r[n++],r[n++]);for(var a=1;a<i;a++)e.lineTo(r[n++],r[n++])}}else for(n=this._off;n<r.length;){var s=r[n++],l=r[n++],u=r[n++],c=r[n++];if(e.moveTo(s,l),o>0){var d=(s+u)/2-(l-c)*o,h=(l+c)/2-(u-s)*o;e.quadraticCurveTo(d,h,u,c)}else e.lineTo(u,c)}this.incremental&&(this._off=n,this.notClear=!0)},t.prototype.findDataIndex=function(e,t){var n=this.shape,r=n.segs,o=n.curveness,i=this.style.lineWidth;if(n.polyline)for(var a=0,s=0;s<r.length;){var l=r[s++];if(l>0)for(var u=r[s++],c=r[s++],d=1;d<l;d++)if(Ka(u,c,h=r[s++],p=r[s++],i,e,t))return a;a++}else for(a=0,s=0;s<r.length;){u=r[s++],c=r[s++];var h=r[s++],p=r[s++];if(o>0){if(Qa(u,c,(u+h)/2-(c-p)*o,(c+p)/2-(h-u)*o,h,p,i,e,t))return a}else if(Ka(u,c,h,p,i,e,t))return a;a++}return-1},t.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t),r=this.getBoundingRect();return e=n[0],t=n[1],r.contain(e,t)?(this.hoverDataIdx=this.findDataIndex(e,t))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape.segs,n=1/0,r=1/0,o=-1/0,i=-1/0,a=0;a<t.length;){var s=t[a++],l=t[a++];n=Math.min(s,n),o=Math.max(s,o),r=Math.min(l,r),i=Math.max(l,i)}e=this._rect=new Ot(n,r,o,i)}return e},t}(ms),mL=function(){function e(){this.group=new Po}return e.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},e.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(e,t){var n=this._newAdded[0],r=t.getLayout("linesPoints"),o=n&&n.shape.segs;if(o&&o.length<2e4){var i=o.length,a=new Float32Array(i+r.length);a.set(o),a.set(r,i),n.setShape({segs:a})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:r}),this._setCommon(s,t),s.__startIndex=e.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},e.prototype._create=function(){var e=new gL({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},e.prototype._setCommon=function(e,t,n){var r=t.hostModel;e.setShape({polyline:r.get("polyline"),curveness:r.get(["lineStyle","curveness"])}),e.useStyle(r.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var o=t.getVisual("style");o&&o.stroke&&e.setStyle("stroke",o.stroke),e.setStyle("fill",null);var i=Us(e);i.seriesIndex=r.seriesIndex,e.on("mousemove",function(t){i.dataIndex=null;var n=e.hoverDataIdx;n>0&&(i.dataIndex=n+e.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),vL={seriesType:"lines",plan:ug(),reset:function(e){var t=e.coordinateSystem;if(t){var n=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(o,i){var a=[];if(r){var s=void 0,l=o.end-o.start;if(n){for(var u=0,c=o.start;c<o.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var d=0,h=[];for(c=o.start;c<o.end;c++){var p=e.getLineCoords(c,a);n&&(s[d++]=p);for(var f=0;f<p;f++)h=t.dataToPoint(a[f],!1,h),s[d++]=h[0],s[d++]=h[1]}i.setLayout("linesPoints",s)}else for(c=o.start;c<o.end;c++){var g=i.getItemModel(c),m=(p=e.getLineCoords(c,a),[]);if(n)for(var v=0;v<p;v++)m.push(t.dataToPoint(a[v]));else{m[0]=t.dataToPoint(a[0]),m[1]=t.dataToPoint(a[1]);var y=g.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}i.setItemLayout(c,m)}}}}}},yL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),o=this._updateLineDraw(r,e),i=e.get("zlevel"),a=e.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(i).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&a>0&&(l||s.configLayer(i,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),o.updateData(r);var u=e.get("clip",!0)&&eS(e.coordinateSystem,!1,e);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=i,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,t,n){var r=e.getData();this._updateLineDraw(r,e).incrementalPrepareUpdate(r),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,t,n){var r=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var i=vL.reset(e,t,n);i.progress&&i.progress({start:0,end:r.count(),count:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(e,t){var n=this._lineDraw,r=this._showEffect(t),o=!!t.get("polyline"),i=t.pipelineContext.large;return n&&r===this._hasEffet&&o===this._isPolyline&&i===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=i?new mL:new aA(o?r?pL:hL:r?dL:iA),this._hasEffet=r,this._isPolyline=o,this._isLargeDraw=i),this.group.add(n.group),n},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.type="lines",t}(hg),bL="undefined"==typeof Uint32Array?Array:Uint32Array,xL="undefined"==typeof Float64Array?Array:Float64Array;function _L(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=B(t,function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),I([t,e[0],e[1]])}))}var wL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return n(t,e),t.prototype.init=function(t){t.data=t.data||[],_L(t);var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(t){if(_L(t),t.data){var n=this._processFlatCoordsArray(t.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(t.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=ve(this._flatCoords,t.flatCoords),this._flatCoordsOffset=ve(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],r=this._flatCoordsOffset[2*e+1],o=0;o<r;o++)t[o]=t[o]||[],t[o][0]=this._flatCoords[n+2*o],t[o][1]=this._flatCoords[n+2*o+1];return r}var i=this._getCoordsFromItemModel(e);for(o=0;o<i.length;o++)t[o]=t[o]||[],t[o][0]=i[o][0],t[o][1]=i[o][1];return i.length},t.prototype._processFlatCoordsArray=function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),X(e[0])){for(var n=e.length,r=new bL(n),o=new xL(n),i=0,a=0,s=0,l=0;l<n;){s++;var u=e[l++];r[a++]=i+t,r[a++]=u;for(var c=0;c<u;c++){var d=e[l++],h=e[l++];o[i++]=d,o[i++]=h}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,a),flatCoords:o,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,t){var n=new Uy(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(e,t,r,o){if(e instanceof Array)return NaN;n.hasItemOption=!0;var i=e.value;return null!=i?i instanceof Array?i[o]:i:void 0}),n},t.prototype.formatTooltip=function(e,t,n){var r=this.getData().getItemModel(e),o=r.get("name");if(o)return o;var i=r.get("fromName"),a=r.get("toName"),s=[];return null!=i&&s.push(i),null!=a&&s.push(a),zf("nameValue",{name:s.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),t=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&t>0?t+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(eg);function SL(e){return e instanceof Array||(e=[e,e]),e}var CL={seriesType:"lines",reset:function(e){var t=SL(e.get("symbol")),n=SL(e.get("symbolSize")),r=e.getData();return r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]),{dataEach:r.hasItemOption?function(e,t){var n=e.getItemModel(t),r=SL(n.getShallow("symbol",!0)),o=SL(n.getShallow("symbolSize",!0));r[0]&&e.setItemVisual(t,"fromSymbol",r[0]),r[1]&&e.setItemVisual(t,"toSymbol",r[1]),o[0]&&e.setItemVisual(t,"fromSymbolSize",o[0]),o[1]&&e.setItemVisual(t,"toSymbolSize",o[1])}:null}}},ML=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=c.createCanvas();this.canvas=e}return e.prototype.update=function(e,t,n,r,o,i){var a=this._getBrush(),s=this._getGradient(o,"inRange"),l=this._getGradient(o,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,d=c.getContext("2d"),h=e.length;c.width=t,c.height=n;for(var p=0;p<h;++p){var f=e[p],g=f[0],m=f[1],v=r(f[2]);d.globalAlpha=v,d.drawImage(a,g-u,m-u)}if(!c.width||!c.height)return c;for(var y=d.getImageData(0,0,c.width,c.height),b=y.data,x=0,_=b.length,w=this.minOpacity,S=this.maxOpacity-w;x<_;){v=b[x+3]/256;var C=4*Math.floor(255*v);if(v>0){var M=i(v)?s:l;v>0&&(v=v*S+w),b[x++]=M[C],b[x++]=M[C+1],b[x++]=M[C+2],b[x++]=M[C+3]*v*256}else x+=4}return d.putImageData(y,0,0),c},e.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=c.createCanvas()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var r=e.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-t,t,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),e},e.prototype._getGradient=function(e,t){for(var n=this._gradientPixels,r=n[t]||(n[t]=new Uint8ClampedArray(1024)),o=[0,0,0,0],i=0,a=0;a<256;a++)e[t](a/255,!0,o),r[i++]=o[0],r[i++]=o[1],r[i++]=o[2],r[i++]=o[3];return r},e}();function TL(e){var t=e.dimensions;return"lng"===t[0]&&"lat"===t[1]}var kL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r;t.eachComponent("visualMap",function(t){t.eachTargetSeries(function(n){n===e&&(r=t)})}),this._progressiveEls=null,this.group.removeAll();var o=e.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):TL(o)&&this._renderOnGeo(o,e,r,n)},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll()},t.prototype.incrementalRender=function(e,t,n,r){var o=t.coordinateSystem;o&&(TL(o)?this.render(t,n,r):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,r,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Bc(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,t,n,r,o){var i,a,s,l,u=e.coordinateSystem,c=tS(u,"cartesian2d");if(c){var d=u.getAxis("x"),h=u.getAxis("y");i=d.getBandWidth()+.5,a=h.getBandWidth()+.5,s=d.scale.getExtent(),l=h.scale.getExtent()}for(var p=this.group,f=e.getData(),g=e.getModel(["emphasis","itemStyle"]).getItemStyle(),m=e.getModel(["blur","itemStyle"]).getItemStyle(),v=e.getModel(["select","itemStyle"]).getItemStyle(),y=e.get(["itemStyle","borderRadius"]),b=Gc(e),x=e.getModel("emphasis"),_=x.get("focus"),w=x.get("blurScope"),S=x.get("disabled"),C=c?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],M=n;M<r;M++){var T=void 0,k=f.getItemVisual(M,"style");if(c){var I=f.get(C[0],M),A=f.get(C[1],M);if(isNaN(f.get(C[2],M))||isNaN(I)||isNaN(A)||I<s[0]||I>s[1]||A<l[0]||A>l[1])continue;var D=u.dataToPoint([I,A]);T=new Is({shape:{x:D[0]-i/2,y:D[1]-a/2,width:i,height:a},style:k})}else{if(isNaN(f.get(C[1],M)))continue;T=new Is({z2:1,shape:u.dataToRect([f.get(C[0],M)]).contentShape,style:k})}if(f.hasItemOption){var P=f.getItemModel(M),L=P.getModel("emphasis");g=L.getModel("itemStyle").getItemStyle(),m=P.getModel(["blur","itemStyle"]).getItemStyle(),v=P.getModel(["select","itemStyle"]).getItemStyle(),y=P.get(["itemStyle","borderRadius"]),_=L.get("focus"),w=L.get("blurScope"),S=L.get("disabled"),b=Gc(P)}T.shape.r=y;var N=e.getRawValue(M),R="-";N&&null!=N[2]&&(R=N[2]+""),Wc(T,b,{labelFetcher:e,labelDataIndex:M,defaultOpacity:k.opacity,defaultText:R}),T.ensureState("emphasis").style=g,T.ensureState("blur").style=m,T.ensureState("select").style=v,Rl(T,_,w,S),T.incremental=o,o&&(T.states.emphasis.hoverLayer=!0),p.add(T),f.setItemGraphicEl(M,T),this._progressiveEls&&this._progressiveEls.push(T)}},t.prototype._renderOnGeo=function(e,t,n,r){var o=n.targetVisuals.inRange,i=n.targetVisuals.outOfRange,a=t.getData(),s=this._hmLayer||this._hmLayer||new ML;s.blurSize=t.get("blurSize"),s.pointSize=t.get("pointSize"),s.minOpacity=t.get("minOpacity"),s.maxOpacity=t.get("maxOpacity");var l=e.getViewRect().clone(),u=e.getRoamTransform();l.applyTransform(u);var c=Math.max(l.x,0),d=Math.max(l.y,0),h=Math.min(l.width+l.x,r.getWidth()),p=Math.min(l.height+l.y,r.getHeight()),f=h-c,g=p-d,m=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],v=a.mapArray(m,function(t,n,r){var o=e.dataToPoint([t,n]);return o[0]-=c,o[1]-=d,o.push(r),o}),y=n.getExtent(),b="visualMap.continuous"===n.type?function(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(e){return e>=t[0]&&e<=t[1]}}(y,n.option.range):function(e,t,n){var r=e[1]-e[0],o=(t=B(t,function(t){return{interval:[(t.interval[0]-e[0])/r,(t.interval[1]-e[0])/r]}})).length,i=0;return function(e){var r;for(r=i;r<o;r++)if((a=t[r].interval)[0]<=e&&e<=a[1]){i=r;break}if(r===o)for(r=i-1;r>=0;r--){var a;if((a=t[r].interval)[0]<=e&&e<=a[1]){i=r;break}}return r>=0&&r<o&&n[r]}}(y,n.getPieceList(),n.option.selected);s.update(v,f,g,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:i.color.getColorMapper()},b);var x=new _s({style:{width:f,height:g,x:c,y:d,image:s.canvas},silent:!0});this.group.add(x)},t.type="heatmap",t}(hg),IL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.getInitialData=function(e,t){return Qy(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=np.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(eg),AL=["itemStyle","borderWidth"],DL=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],PL=new cu,LL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=this.group,o=e.getData(),i=this._data,a=e.coordinateSystem,s=a.getBaseAxis().isHorizontal(),l=a.master.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:DL[+s],categoryDim:DL[1-+s]};return o.diff(i).add(function(e){if(o.hasValue(e)){var t=VL(o,e),n=NL(o,e,t,u),i=GL(o,u,n);o.setItemGraphicEl(e,i),r.add(i),XL(i,u,n)}}).update(function(e,t){var n=i.getItemGraphicEl(t);if(o.hasValue(e)){var a=VL(o,e),s=NL(o,e,a,u),l=jL(o,s);n&&l!==n.__pictorialShapeStr&&(r.remove(n),o.setItemGraphicEl(e,null),n=null),n?function(e,t,n){var r=n.animationModel,o=n.dataIndex;rc(e.__pictorialBundle,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,o),n.symbolRepeat?OL(e,t,n,!0):BL(e,t,n,!0),zL(e,n,!0),FL(e,t,n,!0)}(n,u,s):n=GL(o,u,s,!0),o.setItemGraphicEl(e,n),n.__pictorialSymbolMeta=s,r.add(n),XL(n,u,s)}else r.remove(n)}).remove(function(e){var t=i.getItemGraphicEl(e);t&&UL(i,e,t.__pictorialSymbolMeta.animationModel,t)}).execute(),this._data=o,this.group},t.prototype.remove=function(e,t){var n=this.group,r=this._data;e.get("animation")?r&&r.eachItemGraphicEl(function(t){UL(r,Us(t).dataIndex,e,t)}):n.removeAll()},t.type="pictorialBar",t}(hg);function NL(e,t,n,r){var o=e.getItemLayout(t),i=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),d={dataIndex:t,layout:o,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:a,symbolRepeat:i,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:c?n:null,hoverScale:c&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};!function(e,t,n,r,o){var i,a=r.valueDim,s=e.get("symbolBoundingData"),l=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(n[a.wh]<=0);if(U(s)){var d=[RL(l,s[0])-u,RL(l,s[1])-u];d[1]<d[0]&&d.reverse(),i=d[c]}else i=null!=s?RL(l,s)-u:t?r.coordSysExtent[a.index][c]-u:n[a.wh];o.boundingLength=i,t&&(o.repeatCutLength=n[a.wh]),o.pxSign=i>0?1:-1}(n,i,o,r,d),function(e,t,n,r,o,i,a,s,l,u){var c,d=l.valueDim,h=l.categoryDim,p=Math.abs(n[h.wh]),f=e.getItemVisual(t,"symbolSize");(c=U(f)?f.slice():null==f?["100%","100%"]:[f,f])[h.index]=Fo(c[h.index],p),c[d.index]=Fo(c[d.index],r?p:Math.abs(i)),u.symbolSize=c,(u.symbolScale=[c[0]/s,c[1]/s])[d.index]*=(l.isHorizontal?-1:1)*a}(e,t,o,i,0,d.boundingLength,d.pxSign,u,r,d),function(e,t,n,r,o){var i=e.get(AL)||0;i&&(PL.attr({scaleX:t[0],scaleY:t[1],rotation:n}),PL.updateTransform(),i/=PL.getLineScale(),i*=t[r.valueDim.index]),o.valueLineWidth=i||0}(n,d.symbolScale,l,r,d);var h=d.symbolSize,p=Tm(n.get("symbolOffset"),h);return function(e,t,n,r,o,i,a,s,l,u,c,d){var h=c.categoryDim,p=c.valueDim,f=d.pxSign,g=Math.max(t[p.index]+s,0),m=g;if(r){var v=Math.abs(l),y=re(e.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var x=Fo(y,t[p.index]),_=Math.max(g+2*x,0),w=b?0:2*x,S=oi(r),C=S?r:ZL((v+w)/_);_=g+2*(x=(v-C*g)/2/(b?C:Math.max(C-1,1))),w=b?0:2*x,S||"fixed"===r||(C=u?ZL((Math.abs(u)+w)/_):0),m=C*_-w,d.repeatTimes=C,d.symbolMargin=x}var M=f*(m/2),T=d.pathPosition=[];T[h.index]=n[h.wh]/2,T[p.index]="start"===a?M:"end"===a?l-M:l/2,i&&(T[0]+=i[0],T[1]+=i[1]);var k=d.bundlePosition=[];k[h.index]=n[h.xy],k[p.index]=n[p.xy];var I=d.barRectShape=A({},n);I[p.wh]=f*Math.max(Math.abs(n[p.wh]),Math.abs(T[p.index]+M)),I[h.wh]=n[h.wh];var D=d.clipShape={};D[h.xy]=-n[h.xy],D[h.wh]=c.ecSize[h.wh],D[p.xy]=0,D[p.wh]=n[p.wh]}(n,h,o,i,0,p,s,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function RL(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function EL(e){var t=e.symbolPatternSize,n=Cm(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function OL(e,t,n,r){var o=e.__pictorialBundle,i=n.symbolSize,a=n.valueLineWidth,s=n.pathPosition,l=t.valueDim,u=n.repeatTimes||0,c=0,d=i[t.valueDim.index]+a+2*n.symbolMargin;for(YL(e,function(e){e.__pictorialAnimationIndex=c,e.__pictorialRepeatTimes=u,c<u?qL(e,null,f(c),n,r):qL(e,null,{scaleX:0,scaleY:0},n,r,function(){o.remove(e)}),c++});c<u;c++){var h=EL(n);h.__pictorialAnimationIndex=c,h.__pictorialRepeatTimes=u,o.add(h);var p=f(c);qL(h,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,r)}function f(e){var t=s.slice(),r=n.pxSign,o=e;return("start"===n.symbolRepeatDirection?r>0:r<0)&&(o=u-1-e),t[l.index]=d*(o-u/2+.5)+s[l.index],{x:t[0],y:t[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function BL(e,t,n,r){var o=e.__pictorialBundle,i=e.__pictorialMainPath;i?qL(i,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(i=e.__pictorialMainPath=EL(n),o.add(i),qL(i,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function zL(e,t,n){var r=A({},t.barRectShape),o=e.__pictorialBarRect;o?qL(o,null,{shape:r},t,n):((o=e.__pictorialBarRect=new Is({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,e.add(o))}function FL(e,t,n,r){if(n.symbolClip){var o=e.__pictorialClipPath,i=A({},n.clipShape),a=t.valueDim,s=n.animationModel,l=n.dataIndex;if(o)rc(o,{shape:i},s,l);else{i[a.wh]=0,o=new Is({shape:i}),e.__pictorialBundle.setClipPath(o),e.__pictorialClipPath=o;var u={};u[a.wh]=n.clipShape[a.wh],zc[r?"updateProps":"initProps"](o,{shape:u},s,l)}}}function VL(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=HL,n.isAnimationEnabled=WL,n}function HL(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function WL(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function GL(e,t,n,r){var o=new Po,i=new Po;return o.add(i),o.__pictorialBundle=i,i.x=n.bundlePosition[0],i.y=n.bundlePosition[1],n.symbolRepeat?OL(o,t,n):BL(o,0,n),zL(o,n,r),FL(o,t,n,r),o.__pictorialShapeStr=jL(e,n),o.__pictorialSymbolMeta=n,o}function UL(e,t,n,r){var o=r.__pictorialBarRect;o&&o.removeTextContent();var i=[];YL(r,function(e){i.push(e)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),O(i,function(e){ac(e,{scaleX:0,scaleY:0},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function jL(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function YL(e,t,n){O(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function qL(e,t,n,r,o,i){t&&e.attr(t),r.symbolClip&&!o?n&&e.attr(n):n&&zc[o?"updateProps":"initProps"](e,n,r.animationModel,r.dataIndex,i)}function XL(e,t,n){var r=n.dataIndex,o=n.itemModel,i=o.getModel("emphasis"),a=i.getModel("itemStyle").getItemStyle(),s=o.getModel(["blur","itemStyle"]).getItemStyle(),l=o.getModel(["select","itemStyle"]).getItemStyle(),u=o.getShallow("cursor"),c=i.get("focus"),d=i.get("blurScope"),h=i.get("scale");YL(e,function(e){if(e instanceof _s){var t=e.style;e.useStyle(A({image:t.image,x:t.x,y:t.y,width:t.width,height:t.height},n.style))}else e.useStyle(n.style);var r=e.ensureState("emphasis");r.style=a,h&&(r.scaleX=1.1*e.scaleX,r.scaleY=1.1*e.scaleY),e.ensureState("blur").style=s,e.ensureState("select").style=l,u&&(e.cursor=u),e.z2=n.z2});var p=t.valueDim.posDesc[+(n.boundingLength>0)];Wc(e.__pictorialBarRect,Gc(o),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:Rw(t.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:p}),Rl(e,c,d,i.get("disabled"))}function ZL(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var $L=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return n(t,e),t.prototype.getInitialData=function(t){return t.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=gd(vS.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(vS),KL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}return n(t,e),t.prototype.render=function(e,t,n){var r=e.getData(),o=this,i=this.group,a=e.getLayerSeries(),s=r.getLayout("layoutInfo"),l=s.rect,u=s.boundaryGap;function c(e){return e.name}i.x=0,i.y=l.y+u[0];var d=new xy(this._layersSeries||[],a,c,c),h=[];function p(t,n,s){var l=o._layers;if("remove"!==t){for(var u,c,d=[],p=[],f=a[n].indices,g=0;g<f.length;g++){var m=r.getItemLayout(f[g]),v=m.x,y=m.y0,b=m.y;d.push(v,y),p.push(v,y+b),u=r.getItemVisual(f[g],"style")}var x=r.getItemLayout(f[0]),_=e.getModel("label").get("margin"),w=e.getModel("emphasis");if("add"===t){var S=h[n]=new Po;c=new Kw({shape:{points:d,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),S.add(c),i.add(S),e.isAnimationEnabled()&&c.setClipPath(function(e,t,n){var r=new Is({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return oc(r,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,function(){c.removeClipPath()}),r}(c.getBoundingRect(),e))}else S=l[s],c=S.childAt(0),i.add(S),h[n]=S,rc(c,{shape:{points:d,stackedOnPoints:p}},e),uc(c);Wc(c,Gc(e),{labelDataIndex:f[g-1],defaultText:r.getName(f[g-1]),inheritColor:u.fill},{normal:{verticalAlign:"middle"}}),c.setTextConfig({position:null,local:!0});var C=c.getTextContent();C&&(C.x=x.x-_,C.y=x.y0+x.y/2),c.useStyle(u),r.setItemGraphicEl(n,c),zl(c,e),Rl(c,w.get("focus"),w.get("blurScope"),w.get("disabled"))}else i.remove(l[n])}d.add(W(p,this,"add")).update(W(p,this,"update")).remove(W(p,this,"remove")).execute(),this._layersSeries=a,this._layers=h},t.type="themeRiver",t}(hg),JL=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new tC(W(this.getData,this),W(this.getRawData,this))},t.prototype.fixData=function(e){var t=e.length,n={},r=Li(e,function(e){return n.hasOwnProperty(e[0]+"")||(n[e[0]+""]=-1),e[2]}),o=[];r.buckets.each(function(e,t){o.push({name:t,dataList:e})});for(var i=o.length,a=0;a<i;++a){for(var s=o[a].name,l=0;l<o[a].dataList.length;++l){var u=o[a].dataList[l][0]+"";n[u]=a}for(var u in n)n.hasOwnProperty(u)&&n[u]!==a&&(n[u]=a,e[t]=[u,0,s],t++)}return e},t.prototype.getInitialData=function(e,t){for(var n=this.getReferringComponents("singleAxis",Ii).models[0].get("type"),r=F(e.data,function(e){return void 0!==e[2]}),o=this.fixData(r||[]),i=[],a=this.nameMap=me(),s=0,l=0;l<o.length;++l)i.push(o[l][2]),a.get(o[l][2])||(a.set(o[l][2],s),s++);var u=jy(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Sy(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,c=new Uy(u,this);return c.initData(o),c},t.prototype.getLayerSeries=function(){for(var e=this.getData(),t=e.count(),n=[],r=0;r<t;++r)n[r]=r;var o=e.mapDimension("single"),i=Li(n,function(t){return e.get("name",t)}),a=[];return i.buckets.each(function(t,n){t.sort(function(t,n){return e.get(o,t)-e.get(o,n)}),a.push({name:n,indices:t})}),a},t.prototype.getAxisTooltipData=function(e,t,n){U(e)||(e=e?[e]:[]);for(var r,o=this.getData(),i=this.getLayerSeries(),a=[],s=i.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,c=-1,d=i[l].indices.length,h=0;h<d;++h){var p=o.get(e[0],i[l].indices[h]),f=Math.abs(p-t);f<=u&&(r=p,u=f,c=i[l].indices[h])}a.push(c)}return{dataIndices:a,nestestValue:r}},t.prototype.formatTooltip=function(e,t,n){var r=this.getData();return zf("nameValue",{name:r.getName(e),value:r.get(r.mapDimension("value"),e)})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(eg);function QL(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),n=e.coordinateSystem,r={},o=n.getRect();r.rect=o;var i=e.get("boundaryGap"),a=n.getAxis();r.boundaryGap=i,"horizontal"===a.orient?(i[0]=Fo(i[0],o.height),i[1]=Fo(i[1],o.height),eN(t,e,o.height-i[0]-i[1])):(i[0]=Fo(i[0],o.width),i[1]=Fo(i[1],o.width),eN(t,e,o.width-i[0]-i[1])),t.setLayout("layoutInfo",r)})}function eN(e,t,n){if(e.count())for(var r,o=t.coordinateSystem,i=t.getLayerSeries(),a=e.mapDimension("single"),s=e.mapDimension("value"),l=B(i,function(t){return B(t.indices,function(t){var n=o.dataToPoint(e.get(a,t));return n[1]=e.get(s,t),n})}),u=function(e){for(var t=e.length,n=e[0].length,r=[],o=[],i=0,a=0;a<n;++a){for(var s=0,l=0;l<t;++l)s+=e[l][a][1];s>i&&(i=s),r.push(s)}for(var u=0;u<n;++u)o[u]=(i-r[u])/2;i=0;for(var c=0;c<n;++c){var d=r[c]+o[c];d>i&&(i=d)}return{y0:o,max:i}}(l),c=u.y0,d=n/u.max,h=i.length,p=i[0].indices.length,f=0;f<p;++f){r=c[f]*d,e.setItemLayout(i[0].indices[f],{layerIndex:0,x:l[0][f][0],y0:r,y:l[0][f][1]*d});for(var g=1;g<h;++g)r+=l[g-1][f][1]*d,e.setItemLayout(i[g].indices[f],{layerIndex:g,x:l[g][f][0],y0:r,y:l[g][f][1]*d})}}var tN=function(e){function t(t,n,r,o){var i=e.call(this)||this;i.z2=2,i.textConfig={inside:!0},Us(i).seriesIndex=n.seriesIndex;var a=new Ps({z2:4,silent:t.getModel().get(["label","silent"])});return i.setTextContent(a),i.updateData(!0,t,n,r,o),i}return n(t,e),t.prototype.updateData=function(e,t,n,r,o){this.node=t,t.piece=this,n=n||this._seriesModel,r=r||this._ecModel;var i=this;Us(i).dataIndex=t.dataIndex;var a=t.getModel(),s=a.getModel("emphasis"),l=t.getLayout(),u=A({},l);u.label=null;var c=t.getVisual("style");c.lineJoin="bevel";var d=t.getVisual("decal");d&&(c.decal=Km(d,o));var h=SS(a.getModel("itemStyle"),u,!0);A(u,h),O($s,function(e){var t=i.ensureState(e),n=a.getModel([e,"itemStyle"]);t.style=n.getItemStyle();var r=SS(n,u);r&&(t.shape=r)}),e?(i.setShape(u),i.shape.r=l.r0,oc(i,{shape:{r:l.r}},n,t.dataIndex)):(rc(i,{shape:u},n),uc(i)),i.useStyle(c),this._updateLabel(n);var p=a.getShallow("cursor");p&&i.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=r||this._ecModel;var f=s.get("focus");Rl(this,"ancestor"===f?t.getAncestorsIndices():"descendant"===f?t.getDescendantIndices():f,s.get("blurScope"),s.get("disabled"))},t.prototype._updateLabel=function(e){var t=this,n=this.node.getModel(),r=n.getModel("label"),o=this.node.getLayout(),i=o.endAngle-o.startAngle,a=(o.startAngle+o.endAngle)/2,s=Math.cos(a),l=Math.sin(a),u=this,c=u.getTextContent(),d=this.node.dataIndex,h=r.get("minAngle")/180*Math.PI,p=r.get("show")&&!(null!=h&&Math.abs(i)<h);function f(e,t){var n=e.get(t);return null==n?r.get(t):n}c.ignore=!p,O(Ks,function(r){var h="normal"===r?n.getModel("label"):n.getModel([r,"label"]),p="normal"===r,g=p?c:c.ensureState(r),m=e.getFormattedLabel(d,r);p&&(m=m||t.node.name),g.style=Uc(h,{},null,"normal"!==r,!0),m&&(g.style.text=m);var v=h.get("show");null==v||p||(g.ignore=!v);var y,b=f(h,"position"),x=p?u:u.states[r],_=x.style.fill;x.textConfig={outsideFill:"inherit"===h.get("color")?_:null,inside:"outside"!==b};var w=f(h,"distance")||0,S=f(h,"align");"outside"===b?(y=o.r+w,S=a>Math.PI/2?"right":"left"):S&&"center"!==S?"left"===S?(y=o.r0+w,a>Math.PI/2&&(S="right")):"right"===S&&(y=o.r-w,a>Math.PI/2&&(S="left")):(y=i===2*Math.PI&&0===o.r0?0:(o.r+o.r0)/2,S="center"),g.style.align=S,g.style.verticalAlign=f(h,"verticalAlign")||"middle",g.x=y*s+o.cx,g.y=y*l+o.cy;var C=f(h,"rotate"),M=0;"radial"===C?(M=ts(-a))>Math.PI/2&&M<1.5*Math.PI&&(M+=Math.PI):"tangential"===C?(M=Math.PI/2-a)>Math.PI/2?M-=Math.PI:M<-Math.PI/2&&(M+=Math.PI):X(C)&&(M=C*Math.PI/180),g.rotation=ts(M)}),c.dirtyStyle()},t}(Tu),nN="sunburstRootToNode",rN="sunburstHighlight",oN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n,r){var o=this;this.seriesModel=e,this.api=n,this.ecModel=t;var i=e.getData(),a=i.tree.root,s=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),c=[];s.eachNode(function(e){c.push(e)});var d=this._oldChildren||[];!function(r,o){function s(e){return e.getId()}function c(s,c){!function(r,o){if(u||!r||r.getValue()||(r=null),r!==a&&o!==a)if(o&&o.piece)r?(o.piece.updateData(!1,r,e,t,n),i.setItemGraphicEl(r.dataIndex,o.piece)):function(e){e&&e.piece&&(l.remove(e.piece),e.piece=null)}(o);else if(r){var s=new tN(r,e,t,n);l.add(s),i.setItemGraphicEl(r.dataIndex,s)}}(null==s?null:r[s],null==c?null:o[c])}0===r.length&&0===o.length||new xy(o,r,s,s).add(c).update(c).remove(G(c,null)).execute()}(c,d),function(r,i){i.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,r,e,t,n):(o.virtualPiece=new tN(r,e,t,n),l.add(o.virtualPiece)),i.piece.off("click"),o.virtualPiece.on("click",function(e){o._rootToNode(i.parentNode)})):o.virtualPiece&&(l.remove(o.virtualPiece),o.virtualPiece=null)}(a,s),this._initEvents(),this._oldChildren=c},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(t){var n=!1;e.seriesModel.getViewRoot().eachNode(function(r){if(!n&&r.piece&&r.piece===t.target){var o=r.getModel().get("nodeClick");if("rootToNode"===o)e._rootToNode(r);else if("link"===o){var i=r.getModel(),a=i.get("link");a&&sh(a,i.get("target",!0)||"_blank")}n=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:nN,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,t){var n=t.getData().getItemLayout(0);if(n){var r=e[0]-n.cx,o=e[1]-n.cy,i=Math.sqrt(r*r+o*o);return i<=n.r&&i>=n.r0}},t.type="sunburst",t}(hg),iN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreStyleOnData=!0,n}return n(t,e),t.prototype.getInitialData=function(e,t){var n={name:e.name,children:e.data};aN(n);var r=this._levelModels=B(e.levels||[],function(e){return new hd(e,this,t)},this),o=bk.createTree(n,this,function(e){e.wrapMethod("getItemModel",function(e,t){var n=o.getNodeByDataIndex(t),i=r[n.depth];return i&&(e.parentModel=i),e})});return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(t){var n=e.prototype.getDataParams.apply(this,arguments),r=this.getData().tree.getNodeByDataIndex(t);return n.treePathInfo=Sk(r,this),n},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)},t.prototype.enableAriaDecal=function(){Ak(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(eg);function aN(e){var t=0;O(e.children,function(e){aN(e);var n=e.value;U(n)&&(n=n[0]),t+=n});var n=e.value;U(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=t),n<0&&(n=0),U(e.value)?e.value[0]=n:e.value=n}var sN=Math.PI/180;function lN(e,t,n){t.eachSeriesByType(e,function(e){var t=e.get("center"),r=e.get("radius");U(r)||(r=[0,r]),U(t)||(t=[t,t]);var o=n.getWidth(),i=n.getHeight(),a=Math.min(o,i),s=Fo(t[0],o),l=Fo(t[1],i),u=Fo(r[0],a/2),c=Fo(r[1],a/2),d=-e.get("startAngle")*sN,h=e.get("minAngle")*sN,p=e.getData().tree.root,f=e.getViewRoot(),g=f.depth,m=e.get("sort");null!=m&&uN(f,m);var v=0;O(f.children,function(e){!isNaN(e.getValue())&&v++});var y=f.getValue(),b=Math.PI/(y||v)*2,x=f.depth>0,_=f.height-(x?-1:1),w=(c-u)/(_||1),S=e.get("clockwise"),C=e.get("stillShowZeroSum"),M=S?1:-1,T=function(t,n){if(t){var r=n;if(t!==p){var o=t.getValue(),i=0===y&&C?b:o*b;i<h&&(i=h),r=n+M*i;var c=t.depth-g-(x?-1:1),d=u+w*c,f=u+w*(c+1),m=e.getLevelModel(t);if(m){var v=m.get("r0",!0),_=m.get("r",!0),k=m.get("radius",!0);null!=k&&(v=k[0],_=k[1]),null!=v&&(d=Fo(v,a/2)),null!=_&&(f=Fo(_,a/2))}t.setLayout({angle:i,startAngle:n,endAngle:r,clockwise:S,cx:s,cy:l,r0:d,r:f})}if(t.children&&t.children.length){var I=0;O(t.children,function(e){I+=T(e,n+I)})}return r-n}};if(x){var k=u,I=u+w,A=2*Math.PI;p.setLayout({angle:A,startAngle:d,endAngle:d+A,clockwise:S,cx:s,cy:l,r0:k,r:I})}T(f,d)})}function uN(e,t){var n=e.children||[];e.children=function(e,t){if(j(t)){var n=B(e,function(e,t){var n=e.getValue();return{params:{depth:e.depth,height:e.height,dataIndex:e.dataIndex,getValue:function(){return n}},index:t}});return n.sort(function(e,n){return t(e.params,n.params)}),B(n,function(t){return e[t.index]})}var r="asc"===t;return e.sort(function(e,t){var n=(e.getValue()-t.getValue())*(r?1:-1);return 0===n?(e.dataIndex-t.dataIndex)*(r?-1:1):n})}(n,t),n.length&&O(e.children,function(e){uN(e,t)})}function cN(e){var t={};e.eachSeriesByType("sunburst",function(e){var n=e.getData(),r=n.tree;r.eachNode(function(o){var i=o.getModel().getModel("itemStyle").getItemStyle();i.fill||(i.fill=function(e,n,r){for(var o=e;o&&o.depth>1;)o=o.parentNode;var i=n.getColorFromPalette(o.name||o.dataIndex+"",t);return e.depth>1&&Y(i)&&(i=Xn(i,(e.depth-1)/(r-1)*.5)),i}(o,e,r.root.height)),A(n.ensureUniqueItemVisual(o.dataIndex,"style"),i)})})}var dN={color:"fill",borderColor:"stroke"},hN={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},pN=Ci(),fN=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,t){return Qy(null,this)},t.prototype.getDataParams=function(t,n,r){var o=e.prototype.getDataParams.call(this,t,n);return r&&(o.info=pN(r).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(eg);function gN(e,t){return t=t||[0,0],B(["x","y"],function(n,r){var o=this.getAxis(n),i=t[r],a=e[r]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-a)-o.dataToCoord(i+a))},this)}function mN(e,t){return t=t||[0,0],B([0,1],function(n){var r=t[n],o=e[n]/2,i=[],a=[];return i[n]=r-o,a[n]=r+o,i[1-n]=a[1-n]=t[1-n],Math.abs(this.dataToPoint(i)[n]-this.dataToPoint(a)[n])},this)}function vN(e,t){var n=this.getAxis(),r=t instanceof Array?t[0]:t,o=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(r-o)-n.dataToCoord(r+o))}function yN(e,t){return t=t||[0,0],B(["Radius","Angle"],function(n,r){var o=this["get"+n+"Axis"](),i=t[r],a=e[r]/2,s="category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-a)-o.dataToCoord(i+a));return"Angle"===n&&(s=s*Math.PI/180),s},this)}function bN(e,t,n,r){return e&&(e.legacy||!1!==e.legacy&&!n&&!r&&"tspan"!==t&&("text"===t||xe(e,"text")))}function xN(e,t,n){var r,o,i,a=e;if("text"===t)i=a;else{i={},xe(a,"text")&&(i.text=a.text),xe(a,"rich")&&(i.rich=a.rich),xe(a,"textFill")&&(i.fill=a.textFill),xe(a,"textStroke")&&(i.stroke=a.textStroke),xe(a,"fontFamily")&&(i.fontFamily=a.fontFamily),xe(a,"fontSize")&&(i.fontSize=a.fontSize),xe(a,"fontStyle")&&(i.fontStyle=a.fontStyle),xe(a,"fontWeight")&&(i.fontWeight=a.fontWeight),o={type:"text",style:i,silent:!0},r={};var s=xe(a,"textPosition");n?r.position=s?a.textPosition:"inside":s&&(r.position=a.textPosition),xe(a,"textPosition")&&(r.position=a.textPosition),xe(a,"textOffset")&&(r.offset=a.textOffset),xe(a,"textRotation")&&(r.rotation=a.textRotation),xe(a,"textDistance")&&(r.distance=a.textDistance)}return _N(i,e),O(i.rich,function(e){_N(e,e)}),{textConfig:r,textContent:o}}function _N(e,t){t&&(t.font=t.textFont||t.font,xe(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),xe(t,"textAlign")&&(e.align=t.textAlign),xe(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),xe(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),xe(t,"textWidth")&&(e.width=t.textWidth),xe(t,"textHeight")&&(e.height=t.textHeight),xe(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),xe(t,"textPadding")&&(e.padding=t.textPadding),xe(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),xe(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),xe(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),xe(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),xe(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),xe(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),xe(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function wN(e,t,n){var r=e;r.textPosition=r.textPosition||n.position||"inside",null!=n.offset&&(r.textOffset=n.offset),null!=n.rotation&&(r.textRotation=n.rotation),null!=n.distance&&(r.textDistance=n.distance);var o=r.textPosition.indexOf("inside")>=0,i=e.fill||"#000";SN(r,t);var a=null==r.textFill;return o?a&&(r.textFill=n.insideFill||"#fff",!r.textStroke&&n.insideStroke&&(r.textStroke=n.insideStroke),!r.textStroke&&(r.textStroke=i),null==r.textStrokeWidth&&(r.textStrokeWidth=2)):(a&&(r.textFill=e.fill||n.outsideFill||"#000"),!r.textStroke&&n.outsideStroke&&(r.textStroke=n.outsideStroke)),r.text=t.text,r.rich=t.rich,O(t.rich,function(e){SN(e,e)}),r}function SN(e,t){t&&(xe(t,"fill")&&(e.textFill=t.fill),xe(t,"stroke")&&(e.textStroke=t.fill),xe(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),xe(t,"font")&&(e.font=t.font),xe(t,"fontStyle")&&(e.fontStyle=t.fontStyle),xe(t,"fontWeight")&&(e.fontWeight=t.fontWeight),xe(t,"fontSize")&&(e.fontSize=t.fontSize),xe(t,"fontFamily")&&(e.fontFamily=t.fontFamily),xe(t,"align")&&(e.textAlign=t.align),xe(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),xe(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),xe(t,"width")&&(e.textWidth=t.width),xe(t,"height")&&(e.textHeight=t.height),xe(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),xe(t,"padding")&&(e.textPadding=t.padding),xe(t,"borderColor")&&(e.textBorderColor=t.borderColor),xe(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),xe(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),xe(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),xe(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),xe(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),xe(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),xe(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),xe(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),xe(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),xe(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var CN={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},MN=H(CN),TN=(z(uo,function(e,t){return e[t]=1,e},{}),uo.join(", "),["","style","shape","extra"]),kN=Ci();function IN(e,t,n,r,o){var i=e+"Animation",a=tc(e,r,o)||{},s=kN(t).userDuring;return a.duration>0&&(a.during=s?W(EN,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),A(a,n[i]),a}function AN(e,t,n,r){var o=(r=r||{}).dataIndex,i=r.isInit,a=r.clearStyle,s=n.isAnimationEnabled(),l=kN(e),u=t.style;l.userDuring=t.during;var c={},d={};if(function(e,t,n){for(var r=0;r<MN.length;r++){var o=MN[r],i=CN[o],a=t[o];a&&(n[i[0]]=a[0],n[i[1]]=a[1])}for(r=0;r<uo.length;r++){var s=uo[r];null!=t[s]&&(n[s]=t[s])}}(0,t,d),BN("shape",t,d),BN("extra",t,d),!i&&s&&(function(e,t,n){for(var r=t.transition,o=LN(r)?uo:hi(r||[]),i=0;i<o.length;i++){var a=o[i];if("style"!==a&&"shape"!==a&&"extra"!==a){var s=e[a];n[a]=s}}}(e,t,c),ON("shape",e,t,c),ON("extra",e,t,c),function(e,t,n,r){if(n){var o,i=e.style;if(i){var a=n.transition,s=t.transition;if(a&&!LN(a)){var l=hi(a);!o&&(o=r.style={});for(var u=0;u<l.length;u++){var c=i[f=l[u]];o[f]=c}}else if(e.getAnimationStyleProps&&(LN(s)||LN(a)||L(s,"style")>=0)){var d=e.getAnimationStyleProps(),h=d?d.style:null;if(h){!o&&(o=r.style={});var p=H(n);for(u=0;u<p.length;u++){var f;h[f=p[u]]&&(c=i[f],o[f]=c)}}}}}}(e,t,u,c)),d.style=u,function(e,t,n){var r=t.style;if(!e.isGroup&&r){if(n){e.useStyle({});for(var o=e.animators,i=0;i<o.length;i++){var a=o[i];"style"===a.targetName&&a.changeTarget(e.style)}}e.setStyle(r)}t&&(t.style=null,t&&e.attr(t),t.style=r)}(e,d,a),function(e,t){xe(t,"silent")&&(e.silent=t.silent),xe(t,"ignore")&&(e.ignore=t.ignore),e instanceof fa&&xe(t,"invisible")&&(e.invisible=t.invisible),e instanceof ms&&xe(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}(e,t),s)if(i){var h={};O(TN,function(e){var n=e?t[e]:t;n&&n.enterFrom&&(e&&(h[e]=h[e]||{}),A(e?h[e]:h,n.enterFrom))});var p=IN("enter",e,t,n,o);p.duration>0&&e.animateFrom(h,p)}else!function(e,t,n,r,o){if(o){var i=IN("update",e,t,r,n);i.duration>0&&e.animateFrom(o,i)}}(e,t,o||0,n,c);DN(e,t),u?e.dirty():e.markRedraw()}function DN(e,t){for(var n=kN(e).leaveToProps,r=0;r<TN.length;r++){var o=TN[r],i=o?t[o]:t;i&&i.leaveTo&&(n||(n=kN(e).leaveToProps={}),o&&(n[o]=n[o]||{}),A(o?n[o]:n,i.leaveTo))}}function PN(e,t,n,r){if(e){var o=e.parent,i=kN(e).leaveToProps;if(i){var a=IN("update",e,t,n,0);a.done=function(){o.remove(e),r&&r()},e.animateTo(i,a)}else o.remove(e),r&&r()}}function LN(e){return"all"===e}var NN={},RN={setTransform:function(e,t){return NN.el[e]=t,this},getTransform:function(e){return NN.el[e]},setShape:function(e,t){var n=NN.el;return(n.shape||(n.shape={}))[e]=t,n.dirtyShape&&n.dirtyShape(),this},getShape:function(e){var t=NN.el.shape;if(t)return t[e]},setStyle:function(e,t){var n=NN.el,r=n.style;return r&&(r[e]=t,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(e){var t=NN.el.style;if(t)return t[e]},setExtra:function(e,t){return(NN.el.extra||(NN.el.extra={}))[e]=t,this},getExtra:function(e){var t=NN.el.extra;if(t)return t[e]}};function EN(){var e=this,t=e.el;if(t){var n=kN(t).userDuring,r=e.userDuring;n===r?(NN.el=t,r(RN)):e.el=e.userDuring=null}}function ON(e,t,n,r){var o=n[e];if(o){var i,a=t[e];if(a){var s=n.transition,l=o.transition;if(l)if(!i&&(i=r[e]={}),LN(l))A(i,a);else for(var u=hi(l),c=0;c<u.length;c++){var d=a[p=u[c]];i[p]=d}else if(LN(s)||L(s,e)>=0){!i&&(i=r[e]={});var h=H(a);for(c=0;c<h.length;c++){var p;d=a[p=h[c]],zN(o[p],d)&&(i[p]=d)}}}}}function BN(e,t,n){var r=t[e];if(r)for(var o=n[e]={},i=H(r),a=0;a<i.length;a++){var s=i[a];o[s]=Tr(r[s])}}function zN(e,t){return E(e)?e!==t:null!=e&&isFinite(e)}var FN=Ci(),VN=["percent","easing","shape","style","extra"];function HN(e){e.stopAnimation("keyframe"),e.attr(FN(e))}function WN(e,t,n){if(n.isAnimationEnabled()&&t)if(U(t))O(t,function(t){WN(e,t,n)});else{var r=t.keyframes,o=t.duration;if(n&&null==o){var i=tc("enter",n,0);o=i&&i.duration}if(r&&o){var a=FN(e);O(TN,function(n){var i;n&&!e[n]||(r.sort(function(e,t){return e.percent-t.percent}),O(r,function(r){var s=e.animators,l=n?r[n]:r;if(l){var u=H(l);if(n||(u=F(u,function(e){return L(VN,e)<0})),u.length){i||((i=e.animate(n,t.loop,!0)).scope="keyframe");for(var c=0;c<s.length;c++)s[c]!==i&&s[c].targetName===i.targetName&&s[c].stopTracks(u);n&&(a[n]=a[n]||{});var d=n?a[n]:a;O(u,function(t){d[t]=((n?e[n]:e)||{})[t]}),i.whenWithKeys(o*r.percent,l,u,r.easing)}}}),i&&i.delay(t.delay||0).duration(o).start(t.easing))})}}}var GN="emphasis",UN="normal",jN="blur",YN="select",qN=[UN,GN,jN,YN],XN={normal:["itemStyle"],emphasis:[GN,"itemStyle"],blur:[jN,"itemStyle"],select:[YN,"itemStyle"]},ZN={normal:["label"],emphasis:[GN,"label"],blur:[jN,"label"],select:[YN,"label"]},$N=["x","y"],KN={normal:{},emphasis:{},blur:{},select:{}},JN={cartesian2d:function(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:W(gN,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(t){return e.dataToPoint(t)},size:W(mN,e)}}},single:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(t){return e.dataToPoint(t)},size:W(vN,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:function(r){var o=t.dataToRadius(r[0]),i=n.dataToAngle(r[1]),a=e.coordToPoint([o,i]);return a.push(o,i*Math.PI/180),a},size:W(yN,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(t,n){return e.dataToPoint(t,n)}}}}};function QN(e){return e instanceof ms}function eR(e){return e instanceof fa}var tR=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n,r){this._progressiveEls=null;var o=this._data,i=e.getData(),a=this.group,s=aR(e,i,t,n);o||a.removeAll(),i.diff(o).add(function(t){lR(n,null,t,s(t,r),e,a,i)}).remove(function(t){var n=o.getItemGraphicEl(t);n&&PN(n,pN(n).option,e)}).update(function(t,l){var u=o.getItemGraphicEl(l);lR(n,u,t,s(t,r),e,a,i)}).execute();var l=e.get("clip",!0)?eS(e.coordinateSystem,!1,e):null;l?a.setClipPath(l):a.removeClipPath(),this._data=i},t.prototype.incrementalPrepareRender=function(e,t,n){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,t,n,r,o){var i=t.getData(),a=aR(t,i,n,r),s=this._progressiveEls=[];function l(e){e.isGroup||(e.incremental=!0,e.ensureState("emphasis").hoverLayer=!0)}for(var u=e.start;u<e.end;u++){var c=lR(null,null,u,a(u,o),t,this.group,i);c&&(c.traverse(l),s.push(c))}},t.prototype.eachRendered=function(e){Bc(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,t,n,r){var o=t.element;if(null==o||n.name===o)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===o)return!0;return!1},t.type="custom",t}(hg);function nR(e){var t,n=e.type;if("path"===n){var r=e.shape,o=null!=r.width&&null!=r.height?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=yR(r);t=vc(i,null,o,r.layout||"center"),pN(t).customPathData=i}else if("image"===n)t=new _s({}),pN(t).customImagePath=e.style.image;else if("text"===n)t=new Ps({});else if("group"===n)t=new Po;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var a=mc(n);if(!a){li("")}t=new a}return pN(t).customGraphicType=n,t.name=e.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function rR(e,t,n,r,o,i,a){HN(t);var s=o&&o.normal.cfg;s&&t.setTextConfig(s),r&&null==r.transition&&(r.transition=$N);var l=r&&r.style;if(l){if("text"===t.type){var u=l;xe(u,"textFill")&&(u.fill=u.textFill),xe(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,d=QN(t)?l.decal:null;e&&d&&(d.dirty=!0,c=Km(d,e)),l.__decalPattern=c}eR(t)&&l&&(c=l.__decalPattern)&&(l.decal=c),AN(t,r,i,{dataIndex:n,isInit:a,clearStyle:!0}),WN(t,r.keyframeAnimation,i)}function oR(e,t,n,r,o){var i=t.isGroup?null:t,a=o&&o[e].cfg;if(i){var s=i.ensureState(e);if(!1===r){var l=i.getState(e);l&&(l.style=null)}else s.style=r||null;a&&(s.textConfig=a),vl(i)}}function iR(e,t,n){var r=n===UN,o=r?t:hR(t,n),i=o?o.z2:null;null!=i&&((r?e:e.ensureState(n)).z2=i||0)}function aR(e,t,n,r){var o=e.get("renderItem"),i=e.coordinateSystem,a={};i&&(a=i.prepareCustoms?i.prepareCustoms(i):JN[i.type](i));for(var s,l,u=D({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:function(e,n){return null==n&&(n=s),t.getStore().get(t.getDimensionIndex(e||0),n)},style:function(n,r){null==r&&(r=s);var o=t.getItemVisual(r,"style"),i=o&&o.fill,a=o&&o.opacity,l=y(r,UN).getItemStyle();null!=i&&(l.fill=i),null!=a&&(l.opacity=a);var u={inheritColor:Y(i)?i:"#000"},c=b(r,UN),d=Uc(c,null,u,!1,!0);d.text=c.getShallow("show")?oe(e.getFormattedLabel(r,UN),Rw(t,r)):null;var h=jc(c,u,!1);return _(n,l),l=wN(l,d,h),n&&x(l,n),l.legacy=!0,l},ordinalRawValue:function(e,n){null==n&&(n=s),e=e||0;var r=t.getDimensionInfo(e);if(!r){var o=t.getDimensionIndex(e);return o>=0?t.getStore().get(o,n):void 0}var i=t.get(r.name,n),a=r&&r.ordinalMeta;return a?a.categories[i]:i},styleEmphasis:function(n,r){null==r&&(r=s);var o=y(r,GN).getItemStyle(),i=b(r,GN),a=Uc(i,null,null,!0,!0);a.text=i.getShallow("show")?ie(e.getFormattedLabel(r,GN),e.getFormattedLabel(r,UN),Rw(t,r)):null;var l=jc(i,null,!0);return _(n,o),o=wN(o,a,l),n&&x(o,n),o.legacy=!0,o},visual:function(e,n){if(null==n&&(n=s),xe(dN,e)){var r=t.getItemVisual(n,"style");return r?r[dN[e]]:null}if(xe(hN,e))return t.getItemVisual(n,e)},barLayout:function(e){if("cartesian2d"===i.type)return function(e){var t=[],n=e.axis,r="axis0";if("category"===n.type){for(var o=n.getBandWidth(),i=0;i<e.count;i++)t.push(D({bandWidth:o,axisKey:r,stackId:vb+i},e));var a=wb(t),s=[];for(i=0;i<e.count;i++){var l=a[r][vb+i];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}(D({axis:i.getBaseAxis()},e))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(e){return $c(e,n)}},a.api||{}),c={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:sR(e.getData())},d={},h={},p={},f={},g=0;g<qN.length;g++){var m=qN[g];p[m]=e.getModel(XN[m]),f[m]=e.getModel(ZN[m])}function v(e){return e===s?l||(l=t.getItemModel(e)):t.getItemModel(e)}function y(e,n){return t.hasItemOption?e===s?d[n]||(d[n]=v(e).getModel(XN[n])):v(e).getModel(XN[n]):p[n]}function b(e,n){return t.hasItemOption?e===s?h[n]||(h[n]=v(e).getModel(ZN[n])):v(e).getModel(ZN[n]):f[n]}return function(e,n){return s=e,l=null,d={},h={},o&&o(D({dataIndexInside:e,dataIndex:t.getRawIndex(e),actionType:n?n.type:null},c),u)};function x(e,t){for(var n in t)xe(t,n)&&(e[n]=t[n])}function _(e,t){e&&(e.textFill&&(t.textFill=e.textFill),e.textPosition&&(t.textPosition=e.textPosition))}}function sR(e){var t={};return O(e.dimensions,function(n){var r=e.getDimensionInfo(n);if(!r.isExtraCoord){var o=r.coordDim;(t[o]=t[o]||[])[r.coordDimIndex]=e.getDimensionIndex(n)}}),t}function lR(e,t,n,r,o,i,a){if(r){var s=uR(e,t,n,r,o,i);return s&&a.setItemGraphicEl(n,s),s&&Rl(s,r.focus,r.blurScope,r.emphasisDisabled),s}i.remove(t)}function uR(e,t,n,r,o,i){var a=-1,s=t;t&&cR(t,r,o)&&(a=L(i.childrenRef(),t),t=null);var l,u,c=!t,d=t;d?d.clearStates():(d=nR(r),s&&(l=s,(u=d).copyTransform(l),eR(u)&&eR(l)&&(u.setStyle(l.style),u.z=l.z,u.z2=l.z2,u.zlevel=l.zlevel,u.invisible=l.invisible,u.ignore=l.ignore,QN(u)&&QN(l)&&u.setShape(l.shape)))),!1===r.morph?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),KN.normal.cfg=KN.normal.conOpt=KN.emphasis.cfg=KN.emphasis.conOpt=KN.blur.cfg=KN.blur.conOpt=KN.select.cfg=KN.select.conOpt=null,KN.isLegacy=!1,function(e,t,n,r,o,i){if(!e.isGroup){dR(n,null,i),dR(n,GN,i);var a=i.normal.conOpt,s=i.emphasis.conOpt,l=i.blur.conOpt,u=i.select.conOpt;if(null!=a||null!=s||null!=u||null!=l){var c=e.getTextContent();if(!1===a)c&&e.removeTextContent();else{a=i.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=nR(a),e.setTextContent(c)),rR(null,c,t,a,null,r,o);for(var d=a&&a.style,h=0;h<qN.length;h++){var p=qN[h];if(p!==UN)oR(p,c,0,pR(a,i[p].conOpt,p),null)}d?c.dirty():c.markRedraw()}}}}(d,n,r,o,c,KN),function(e,t,n,r,o){var i=n.clipPath;if(!1===i)e&&e.getClipPath()&&e.removeClipPath();else if(i){var a=e.getClipPath();a&&cR(a,i,r)&&(a=null),a||(a=nR(i),e.setClipPath(a)),rR(null,a,t,i,null,r,o)}}(d,n,r,o,c),rR(e,d,n,r,KN,o,c),xe(r,"info")&&(pN(d).info=r.info);for(var h=0;h<qN.length;h++){var p=qN[h];if(p!==UN)oR(p,d,0,pR(r,hR(r,p),p),KN)}return function(e,t,n){if(!e.isGroup){var r=e,o=n.currentZ,i=n.currentZLevel;r.z=o,r.zlevel=i;var a=t.z2;null!=a&&(r.z2=a||0);for(var s=0;s<qN.length;s++)iR(r,t,qN[s])}}(d,r,o),"group"===r.type&&function(e,t,n,r,o){var i=r.children,a=i?i.length:0,s=r.$mergeChildren,l="byName"===s||r.diffChildrenByName,u=!1===s;if(a||l||u){if(l)return c={api:e,oldChildren:t.children()||[],newChildren:i||[],dataIndex:n,seriesModel:o,group:t},void new xy(c.oldChildren,c.newChildren,gR,gR,c).add(mR).update(mR).remove(vR).execute();var c;u&&t.removeAll();for(var d=0;d<a;d++){var h=i[d],p=t.childAt(d);h?(null==h.ignore&&(h.ignore=!1),uR(e,p,n,h,o,t)):p.ignore=!0}for(var f=t.childCount()-1;f>=d;f--){var g=t.childAt(f);fR(t,g,o)}}}(e,d,n,r,o),a>=0?i.replaceAt(d,a):i.add(d),d}function cR(e,t,n){var r,o=pN(e),i=t.type,a=t.shape,s=t.style;return n.isUniversalTransitionEnabled()||null!=i&&i!==o.customGraphicType||"path"===i&&(r=a)&&(xe(r,"pathData")||xe(r,"d"))&&yR(a)!==o.customPathData||"image"===i&&xe(s,"image")&&s.image!==o.customImagePath}function dR(e,t,n){var r=t?hR(e,t):e,o=t?pR(e,r,GN):e.style,i=e.type,a=r?r.textConfig:null,s=e.textContent,l=s?t?hR(s,t):s:null;if(o&&(n.isLegacy||bN(o,i,!!a,!!l))){n.isLegacy=!0;var u=xN(o,i,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var d=t?n[t]:n.normal;d.cfg=a,d.conOpt=l}function hR(e,t){return t?e?e[t]:null:e}function pR(e,t,n){var r=t&&t.style;return null==r&&n===GN&&e&&(r=e.styleEmphasis),r}function fR(e,t,n){t&&PN(t,pN(e).option,n)}function gR(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function mR(e,t){var n=this.context,r=null!=e?n.newChildren[e]:null,o=null!=t?n.oldChildren[t]:null;uR(n.api,o,n.dataIndex,r,n.seriesModel,n.group)}function vR(e){var t=this.context,n=t.oldChildren[e];n&&PN(n,pN(n).option,t.seriesModel)}function yR(e){return e&&(e.pathData||e.d)}var bR=Ci(),xR=T,_R=W,wR=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(e,t,n,r){var o=t.get("value"),i=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,r||this._lastValue!==o||this._lastStatus!==i){this._lastValue=o,this._lastStatus=i;var a=this._group,s=this._handle;if(!i||"hide"===i)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,o,e,t,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var c=this._moveAnimation=this.determineAnimation(e,t);if(a){var d=G(SR,t,c);this.updatePointerEl(a,l,d),this.updateLabelEl(a,l,d,t)}else a=this._group=new Po,this.createPointerEl(a,l,e,t),this.createLabelEl(a,l,e,t),n.getZr().add(a);kR(a,t,!0),this._renderHandle(o)}},e.prototype.remove=function(e){this.clear(e)},e.prototype.dispose=function(e){this.clear(e)},e.prototype.determineAnimation=function(e,t){var n=t.get("animation"),r=e.axis,o="category"===r.type,i=t.get("snap");if(!i&&!o)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(o&&r.getBandWidth()>a)return!0;if(i){var s=HC(e).seriesDataCount,l=r.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===n},e.prototype.makeElOption=function(e,t,n,r,o){},e.prototype.createPointerEl=function(e,t,n,r){var o=t.pointer;if(o){var i=bR(e).pointerEl=new zc[o.type](xR(t.pointer));e.add(i)}},e.prototype.createLabelEl=function(e,t,n,r){if(t.label){var o=bR(e).labelEl=new Ps(xR(t.label));e.add(o),MR(o,r)}},e.prototype.updatePointerEl=function(e,t,n){var r=bR(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),n(r,{shape:t.pointer.shape}))},e.prototype.updateLabelEl=function(e,t,n,r){var o=bR(e).labelEl;o&&(o.setStyle(t.label.style),n(o,{x:t.label.x,y:t.label.y}),MR(o,r))},e.prototype._renderHandle=function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,r=this._api.getZr(),o=this._handle,i=n.getModel("handle"),a=n.get("status");if(!i.get("show")||!a||"hide"===a)return o&&r.remove(o),void(this._handle=null);this._handle||(t=!0,o=this._handle=Pc(i.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){pt(e.event)},onmousedown:_R(this._onHandleDragMove,this,0,0),drift:_R(this._onHandleDragMove,this),ondragend:_R(this._onHandleDragEnd,this)}),r.add(o)),kR(o,n,!1),o.setStyle(i.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=i.get("size");U(s)||(s=[s,s]),o.scaleX=s[0]/2,o.scaleY=s[1]/2,wg(this,"_doDispatchAxisPointer",i.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},e.prototype._moveHandleToValue=function(e,t){SR(this._axisPointerModel,!t&&this._moveAnimation,this._handle,TR(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(e,t){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(TR(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(TR(r)),bR(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,r=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),Sg(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}},e}();function SR(e,t,n,r){CR(bR(n).lastProp,r)||(bR(n).lastProp=r,t?rc(n,r,e):(n.stopAnimation(),n.attr(r)))}function CR(e,t){if(Z(e)&&Z(t)){var n=!0;return O(t,function(t,r){n=n&&CR(e[r],t)}),!!n}return e===t}function MR(e,t){e[t.get(["label","show"])?"show":"hide"]()}function TR(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function kR(e,t,n){var r=t.get("z"),o=t.get("zlevel");e&&e.traverse(function(e){"group"!==e.type&&(null!=r&&(e.z=r),null!=o&&(e.zlevel=o),e.silent=n)})}function IR(e){var t,n=e.get("type"),r=e.getModel(n+"Style");return"line"===n?(t=r.getLineStyle()).fill=null:"shadow"===n&&((t=r.getAreaStyle()).stroke=null),t}function AR(e,t,n,r,o){var i=DR(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),a=n.getModel("label"),s=eh(a.get("padding")||0),l=a.getFont(),u=go(i,l),c=o.position,d=u.width+s[1]+s[3],h=u.height+s[0]+s[2],p=o.align;"right"===p&&(c[0]-=d),"center"===p&&(c[0]-=d/2);var f=o.verticalAlign;"bottom"===f&&(c[1]-=h),"middle"===f&&(c[1]-=h/2),function(e,t,n,r){var o=r.getWidth(),i=r.getHeight();e[0]=Math.min(e[0]+t,o)-t,e[1]=Math.min(e[1]+n,i)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}(c,d,h,r);var g=a.get("backgroundColor");g&&"auto"!==g||(g=t.get(["axisLine","lineStyle","color"])),e.label={x:c[0],y:c[1],style:Uc(a,{text:i,font:l,fill:a.getTextColor(),padding:s,backgroundColor:g}),z2:10}}function DR(e,t,n,r,o){e=t.scale.parse(e);var i=t.scale.getLabel({value:e},{precision:o.precision}),a=o.formatter;if(a){var s={value:ex(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};O(r,function(e){var t=n.getSeriesByIndex(e.seriesIndex),r=e.dataIndexInside,o=t&&t.getDataParams(r);o&&s.seriesData.push(o)}),Y(a)?i=a.replace("{value}",i):j(a)&&(i=a(s))}return i}function PR(e,t,n){var r=[1,0,0,1,0,0];return wt(r,r,n.rotation),_t(r,r,n.position),Mc([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function LR(e,t,n,r,o,i){var a=NC.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get(["label","margin"]),AR(t,r,o,i,{position:PR(r.axis,e,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function NR(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function RR(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function ER(e,t,n,r,o,i){return{cx:e,cy:t,r0:n,r:r,startAngle:o,endAngle:i,clockwise:!0}}var OR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.makeElOption=function(e,t,n,r,o){var i=n.axis,a=i.grid,s=r.get("type"),l=BR(a,i).getOtherAxis(i).getGlobalExtent(),u=i.toGlobalCoord(i.dataToCoord(t,!0));if(s&&"none"!==s){var c=IR(r),d=zR[s](i,u,l);d.style=c,e.graphicKey=d.type,e.pointer=d}LR(t,e,SC(a.model,n),n,r,o)},t.prototype.getHandleTransform=function(e,t,n){var r=SC(t.axis.grid.model,t,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var o=PR(t.axis,e,r);return{x:o[0],y:o[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,n,r){var o=n.axis,i=o.grid,a=o.getGlobalExtent(!0),s=BR(i,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,u=[e.x,e.y];u[l]+=t[l],u[l]=Math.min(a[1],u[l]),u[l]=Math.max(a[0],u[l]);var c=(s[1]+s[0])/2,d=[c,c];return d[l]=u[l],{x:u[0],y:u[1],rotation:e.rotation,cursorPoint:d,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},t}(wR);function BR(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var zR={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:NR([t,n[0]],[t,n[1]],FR(e))}},shadow:function(e,t,n){var r=Math.max(1,e.getBandWidth()),o=n[1]-n[0];return{type:"Rect",shape:RR([t-r/2,n[0]],[r,o],FR(e))}}};function FR(e){return"x"===e.dim?0:1}var VR=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(xh),HR=Ci(),WR=O;function GR(e,t,n){if(!o.node){var r=t.getZr();HR(r).records||(HR(r).records={}),function(e,t){function n(n,r){e.on(n,function(n){var o=function(e){var t={showTip:[],hideTip:[]},n=function(r){var o=t[r.type];o?o.push(r):(r.dispatchAction=n,e.dispatchAction(r))};return{dispatchAction:n,pendings:t}}(t);WR(HR(e).records,function(e){e&&r(e,n,o.dispatchAction)}),function(e,t){var n,r=e.showTip.length,o=e.hideTip.length;r?n=e.showTip[r-1]:o&&(n=e.hideTip[o-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}(o.pendings,t)})}HR(e).initialized||(HR(e).initialized=!0,n("click",G(jR,"click")),n("mousemove",G(jR,"mousemove")),n("globalout",UR))}(r,t),(HR(r).records[e]||(HR(r).records[e]={})).handler=n}}function UR(e,t,n){e.handler("leave",null,n)}function jR(e,t,n,r){t.handler(e,n,r)}function YR(e,t){if(!o.node){var n=t.getZr();(HR(n).records||{})[e]&&(HR(n).records[e]=null)}}var qR=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=t.getComponent("tooltip"),o=e.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";GR("axisPointer",n,function(e,t,n){"none"!==o&&("leave"===e||o.indexOf(e)>=0)&&n({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})})},t.prototype.remove=function(e,t){YR("axisPointer",t)},t.prototype.dispose=function(e,t){YR("axisPointer",t)},t.type="axisPointer",t}(lg);function XR(e,t){var n,r=[],o=e.seriesIndex;if(null==o||!(n=t.getSeriesByIndex(o)))return{point:[]};var i=n.getData(),a=Si(i,e);if(null==a||a<0||U(a))return{point:[]};var s=i.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u).dim,d=u.dim,h="x"===c||"radius"===c?1:0,p=i.mapDimension(d),f=[];f[h]=i.get(p,a),f[1-h]=i.get(i.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(f)||[]}else r=l.dataToPoint(i.getValues(B(l.dimensions,function(e){return i.mapDimension(e)}),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var ZR=Ci();function $R(e,t,n){var r=e.currTrigger,o=[e.x,e.y],i=e,a=e.dispatchAction||W(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){tE(o)&&(o=XR({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var l=tE(o),u=i.axesInfo,c=s.axesInfo,d="leave"===r||tE(o),h={},p={},f={list:[],map:{}},g={showPointer:G(JR,p),showTooltip:G(QR,f)};O(s.coordSysMap,function(e,t){var n=l||e.containPoint(o);O(s.coordSysAxesInfo[t],function(e,t){var r=e.axis,i=function(e,t){for(var n=0;n<(e||[]).length;n++){var r=e[n];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}(u,e);if(!d&&n&&(!u||i)){var a=i&&i.value;null!=a||l||(a=r.pointToData(o)),null!=a&&KR(e,a,g,!1,h)}})});var m={};return O(c,function(e,t){var n=e.linkGroup;n&&!p[t]&&O(n.axesInfo,function(t,r){var o=p[r];if(t!==e&&o){var i=o.value;n.mapper&&(i=e.axis.scale.parse(n.mapper(i,eE(t),eE(e)))),m[e.key]=i}})}),O(m,function(e,t){KR(c[t],e,g,!0,h)}),function(e,t,n){var r=n.axesInfo=[];O(t,function(t,n){var o=t.axisPointerModel.option,i=e[n];i?(!t.useHandle&&(o.status="show"),o.value=i.value,o.seriesDataIndices=(i.payloadBatch||[]).slice()):!t.useHandle&&(o.status="hide"),"show"===o.status&&r.push({axisDim:t.axis.dim,axisIndex:t.axis.model.componentIndex,value:o.value})})}(p,c,h),function(e,t,n,r){if(!tE(t)&&e.list.length){var o=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:e.list})}else r({type:"hideTip"})}(f,o,e,a),function(e,t,n){var r=n.getZr(),o="axisPointerLastHighlights",i=ZR(r)[o]||{},a=ZR(r)[o]={};O(e,function(e,t){var n=e.axisPointerModel.option;"show"===n.status&&e.triggerEmphasis&&O(n.seriesDataIndices,function(e){var t=e.seriesIndex+" | "+e.dataIndex;a[t]=e})});var s=[],l=[];O(i,function(e,t){!a[t]&&l.push(e)}),O(a,function(e,t){!i[t]&&s.push(e)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}(c,0,n),h}}function KR(e,t,n,r,o){var i=e.axis;if(!i.scale.isBlank()&&i.containData(t))if(e.involveSeries){var a=function(e,t){var n=t.axis,r=n.dim,o=e,i=[],a=Number.MAX_VALUE,s=-1;return O(t.seriesModels,function(t,l){var u,c,d=t.getData().mapDimensionsAll(r);if(t.getAxisTooltipData){var h=t.getAxisTooltipData(d,e,n);c=h.dataIndices,u=h.nestestValue}else{if(!(c=t.getData().indicesOfNearest(d[0],e,"category"===n.type?.5:null)).length)return;u=t.getData().get(d[0],c[0])}if(null!=u&&isFinite(u)){var p=e-u,f=Math.abs(p);f<=a&&((f<a||p>=0&&s<0)&&(a=f,s=p,o=u,i.length=0),O(c,function(e){i.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})}))}}),{payloadBatch:i,snapToValue:o}}(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==o.seriesIndex&&A(o,s[0]),!r&&e.snap&&i.containData(l)&&null!=l&&(t=l),n.showPointer(e,t,s),n.showTooltip(e,a,l)}else n.showPointer(e,t)}function JR(e,t,n,r){e[t.key]={value:n,payloadBatch:r}}function QR(e,t,n,r){var o=n.payloadBatch,i=t.axis,a=i.model,s=t.axisPointerModel;if(t.triggerTooltip&&o.length){var l=t.coordSys.model,u=GC(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:i.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function eE(e){var t=e.axis.model,n={},r=n.axisDim=e.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=t.componentIndex,n.axisName=n[r+"AxisName"]=t.name,n.axisId=n[r+"AxisId"]=t.id,n}function tE(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}function nE(e){jC.registerAxisPointerClass("CartesianAxisPointer",OR),e.registerComponentModel(VR),e.registerComponentView(qR),e.registerPreprocessor(function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!U(t)&&(e.axisPointer.link=[t])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(e,t,n){var r=t.getComponent("tooltip"),o=t.getComponent("axisPointer"),i=o.get("link",!0)||[],a=[];O(n.getCoordinateSystems(),function(n){if(n.axisPointerEnabled){var s=GC(n.model),l=e.coordSysAxesInfo[s]={};e.coordSysMap[s]=n;var u=n.model.getModel("tooltip",r);if(O(n.getAxes(),G(p,!1,null)),n.getTooltipAxes&&r&&u.get("show")){var c="axis"===u.get("trigger"),d="cross"===u.get(["axisPointer","type"]),h=n.getTooltipAxes(u.get(["axisPointer","axis"]));(c||d)&&O(h.baseAxes,G(p,!d||"cross",c)),d&&O(h.otherAxes,G(p,"cross",!1))}}function p(r,s,c){var d=c.model.getModel("axisPointer",o),h=d.get("show");if(h&&("auto"!==h||r||WC(d))){null==s&&(s=d.get("triggerTooltip")),d=r?function(e,t,n,r,o,i){var a=t.getModel("axisPointer"),s={};O(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){s[e]=T(a.get(e))}),s.snap="category"!==e.type&&!!i,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===o){var u=a.get(["label","show"]);if(l.show=null==u||u,!i){var c=s.lineStyle=a.get("crossStyle");c&&D(l,c.textStyle)}}return e.model.getModel("axisPointer",new hd(s,n,r))}(c,u,o,t,r,s):d;var p=d.get("snap"),f=d.get("triggerEmphasis"),g=GC(c.model),m=s||p||"category"===c.type,v=e.axesInfo[g]={key:g,axis:c,coordSys:n,axisPointerModel:d,triggerTooltip:s,triggerEmphasis:f,involveSeries:m,snap:p,useHandle:WC(d),seriesModels:[],linkGroup:null};l[g]=v,e.seriesInvolved=e.seriesInvolved||m;var y=function(e,t){for(var n=t.model,r=t.dim,o=0;o<e.length;o++){var i=e[o]||{};if(FC(i[r+"AxisId"],n.id)||FC(i[r+"AxisIndex"],n.componentIndex)||FC(i[r+"AxisName"],n.name))return o}}(i,c);if(null!=y){var b=a[y]||(a[y]={axesInfo:{}});b.axesInfo[g]=v,b.mapper=i[y].mapper,v.linkGroup=b}}}})}(n,e,t),n.seriesInvolved&&function(e,t){t.eachSeries(function(t){var n=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),o=t.get(["tooltip","show"],!0);n&&"none"!==r&&!1!==r&&"item"!==r&&!1!==o&&!1!==t.get(["axisPointer","show"],!0)&&O(e.coordSysAxesInfo[GC(n.model)],function(e){var r=e.axis;n.getAxis(r.dim)===r&&(e.seriesModels.push(t),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=t.getData().count())})})}(n,e),n}(e,t)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},$R)}var rE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.makeElOption=function(e,t,n,r,o){var i=n.axis;"angle"===i.dim&&(this.animationThreshold=Math.PI/18);var a=i.polar,s=a.getOtherAxis(i).getExtent(),l=i.dataToCoord(t),u=r.get("type");if(u&&"none"!==u){var c=IR(r),d=oE[u](i,a,l,s);d.style=c,e.graphicKey=d.type,e.pointer=d}var h=function(e,t,n,r,o){var i=t.axis,a=i.dataToCoord(e),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,c,d=r.getRadiusAxis().getExtent();if("radius"===i.dim){var h=[1,0,0,1,0,0];wt(h,h,s),_t(h,h,[r.cx,r.cy]),l=Mc([a,-o],h);var p=t.getModel("axisLabel").get("rotate")||0,f=NC.innerTextLayout(s,p*Math.PI/180,-1);u=f.textAlign,c=f.textVerticalAlign}else{var g=d[1];l=r.coordToPoint([g+o,a]);var m=r.cx,v=r.cy;u=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",c=Math.abs(l[1]-v)/g<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:u,verticalAlign:c}}(t,n,0,a,r.get(["label","margin"]));AR(e,n,r,o,h)},t}(wR),oE={line:function(e,t,n,r){return"angle"===e.dim?{type:"Line",shape:NR(t.coordToPoint([r[0],n]),t.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,r){var o=Math.max(1,e.getBandWidth()),i=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:ER(t.cx,t.cy,r[0],r[1],(-n-o/2)*i,(o/2-n)*i)}:{type:"Sector",shape:ER(t.cx,t.cy,n-o/2,n+o/2,0,2*Math.PI)}}},iE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.findAxisModel=function(e){var t;return this.ecModel.eachComponent(e,function(e){e.getCoordSysModel()===this&&(t=e)},this),t},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(xh),aE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Ii).models[0]},t.type="polarAxis",t}(xh);R(aE,ix);var sE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="angleAxis",t}(aE),lE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="radiusAxis",t}(aE),uE=function(e){function t(t,n){return e.call(this,"radius",t,n)||this}return n(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t}(Ex);uE.prototype.dataToRadius=Ex.prototype.dataToCoord,uE.prototype.radiusToData=Ex.prototype.coordToData;var cE=Ci(),dE=function(e){function t(t,n){return e.call(this,"angle",t,n||[0,360])||this}return n(t,e),t.prototype.pointToData=function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,t=e.getLabelModel(),n=e.scale,r=n.getExtent(),o=n.count();if(r[1]-r[0]<1)return 0;var i=r[0],a=e.dataToCoord(i+1)-e.dataToCoord(i),s=Math.abs(a),l=go(null==i?"":i+"",t.getFont(),"center","top"),u=Math.max(l.height,7)/s;isNaN(u)&&(u=1/0);var c=Math.max(0,Math.floor(u)),d=cE(e.model),h=d.lastAutoInterval,p=d.lastTickCount;return null!=h&&null!=p&&Math.abs(h-c)<=1&&Math.abs(p-o)<=1&&h>c?c=h:(d.lastTickCount=o,d.lastAutoInterval=c),c},t}(Ex);dE.prototype.dataToAngle=Ex.prototype.dataToCoord,dE.prototype.angleToData=Ex.prototype.coordToData;var hE=["radius","angle"],pE=function(){function e(e){this.dimensions=hE,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new uE,this._angleAxis=new dE,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},e.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},e.prototype.getAxis=function(e){return this["_"+e+"Axis"]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(e){var t=[],n=this._angleAxis,r=this._radiusAxis;return n.scale.type===e&&t.push(n),r.scale.type===e&&t.push(r),t},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},e.prototype.dataToPoint=function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},e.prototype.pointToData=function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},e.prototype.pointToCoord=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,r=this.getAngleAxis(),o=r.getExtent(),i=Math.min(o[0],o[1]),a=Math.max(o[0],o[1]);r.inverse?i=a-360:a=i+360;var s=Math.sqrt(t*t+n*n);t/=s,n/=s;for(var l=Math.atan2(-n,t)/Math.PI*180,u=l<i?1:-1;l<i||l>a;)l+=360*u;return[s,l]},e.prototype.coordToPoint=function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},e.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),r=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*r,endAngle:-n[1]*r,clockwise:e.inverse,contain:function(e,t){var n=e-this.cx,r=t-this.cy,o=n*n+r*r-1e-4,i=this.r,a=this.r0;return o<=i*i&&o>=a*a}}},e.prototype.convertToPixel=function(e,t,n){return fE(t)===this?this.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){return fE(t)===this?this.pointToData(n):null},e}();function fE(e){var t=e.seriesModel,n=e.polarModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}function gE(e,t){var n=this,r=n.getAngleAxis(),o=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),e.eachSeries(function(e){if(e.coordinateSystem===n){var t=e.getData();O(ox(t,"radius"),function(e){o.scale.unionExtentFromData(t,e)}),O(ox(t,"angle"),function(e){r.scale.unionExtentFromData(t,e)})}}),Kb(r.scale,r.model),Kb(o.scale,o.model),"category"===r.type&&!r.onBand){var i=r.getExtent(),a=360/r.scale.count();r.inverse?i[1]+=a:i[1]-=a,r.setExtent(i[0],i[1])}}function mE(e,t){if(e.type=t.get("type"),e.scale=Jb(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),function(e){return"angleAxis"===e.mainType}(t)){e.inverse=e.inverse!==t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}t.axis=e,e.model=t}var vE={dimensions:hE,create:function(e,t){var n=[];return e.eachComponent("polar",function(e,r){var o=new pE(r+"");o.update=gE;var i=o.getRadiusAxis(),a=o.getAngleAxis(),s=e.findAxisModel("radiusAxis"),l=e.findAxisModel("angleAxis");mE(i,s),mE(a,l),function(e,t,n){var r=t.get("center"),o=n.getWidth(),i=n.getHeight();e.cx=Fo(r[0],o),e.cy=Fo(r[1],i);var a=e.getRadiusAxis(),s=Math.min(o,i)/2,l=t.get("radius");null==l?l=[0,"100%"]:U(l)||(l=[0,l]);var u=[Fo(l[0],s),Fo(l[1],s)];a.inverse?a.setExtent(u[1],u[0]):a.setExtent(u[0],u[1])}(o,e,t),n.push(o),e.coordinateSystem=o,o.model=e}),e.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var t=e.getReferringComponents("polar",Ii).models[0];e.coordinateSystem=t.coordinateSystem}}),n}},yE=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function bE(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],n]),o=e.coordToPoint([t[1],n]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}function xE(e){return e.getRadiusAxis().inverse?0:1}function _E(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}var wE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return n(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,r=n.polar,o=r.getRadiusAxis().getExtent(),i=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=B(n.getViewLabels(),function(e){e=T(e);var t=n.scale,r="ordinal"===t.type?t.getRawOrdinalNumber(e.tickValue):e.tickValue;return e.coord=n.dataToCoord(r),e});_E(s),_E(i),O(yE,function(t){!e.get([t,"show"])||n.scale.isBlank()&&"axisLine"!==t||SE[t](this.group,e,r,i,a,o,s)},this)}},t.type="angleAxis",t}(jC),SE={axisLine:function(e,t,n,r,o,i){var a,s=t.getModel(["axisLine","lineStyle"]),l=xE(n),u=l?0:1;(a=0===i[u]?new cu({shape:{cx:n.cx,cy:n.cy,r:i[l]},style:s.getLineStyle(),z2:1,silent:!0}):new Iu({shape:{cx:n.cx,cy:n.cy,r:i[l],r0:i[u]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,e.add(a)},axisTick:function(e,t,n,r,o,i){var a=t.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),l=i[xE(n)],u=B(r,function(e){return new Ou({shape:bE(n,[l,l+s],e.coord)})});e.add(xc(u,{style:D(a.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,n,r,o,i){if(o.length){for(var a=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),u=i[xE(n)],c=[],d=0;d<o.length;d++)for(var h=0;h<o[d].length;h++)c.push(new Ou({shape:bE(n,[u,u+l],o[d][h].coord)}));e.add(xc(c,{style:D(s.getModel("lineStyle").getLineStyle(),D(a.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,n,r,o,i,a){var s=t.getCategories(!0),l=t.getModel("axisLabel"),u=l.get("margin"),c=t.get("triggerEvent");O(a,function(r,o){var a=l,d=r.tickValue,h=i[xE(n)],p=n.coordToPoint([h+u,r.coord]),f=n.cx,g=n.cy,m=Math.abs(p[0]-f)/h<.3?"center":p[0]>f?"left":"right",v=Math.abs(p[1]-g)/h<.3?"middle":p[1]>g?"top":"bottom";if(s&&s[d]){var y=s[d];Z(y)&&y.textStyle&&(a=new hd(y.textStyle,l,l.ecModel))}var b=new Ps({silent:NC.isLabelSilent(t),style:Uc(a,{x:p[0],y:p[1],fill:a.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:r.formattedLabel,align:m,verticalAlign:v})});if(e.add(b),c){var x=NC.makeAxisEventDataBase(t);x.targetType="axisLabel",x.value=r.rawLabel,Us(b).eventData=x}},this)},splitLine:function(e,t,n,r,o,i){var a=t.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=0;c<r.length;c++){var d=l++%s.length;u[d]=u[d]||[],u[d].push(new Ou({shape:bE(n,i,r[c].coord)}))}for(c=0;c<u.length;c++)e.add(xc(u[c],{style:D({stroke:s[c%s.length]},a.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,n,r,o,i){if(o.length){for(var a=t.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<o.length;l++)for(var u=0;u<o[l].length;u++)s.push(new Ou({shape:bE(n,i,o[l][u].coord)}));e.add(xc(s,{style:a.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,n,r,o,i){if(r.length){var a=t.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=Math.PI/180,d=-r[0].coord*c,h=Math.min(i[0],i[1]),p=Math.max(i[0],i[1]),f=t.get("clockwise"),g=1,m=r.length;g<=m;g++){var v=g===m?r[0].coord:r[g].coord,y=l++%s.length;u[y]=u[y]||[],u[y].push(new Tu({shape:{cx:n.cx,cy:n.cy,r0:h,r:p,startAngle:d,endAngle:-v*c,clockwise:f},silent:!0})),d=-v*c}for(g=0;g<u.length;g++)e.add(xc(u[g],{style:D({fill:s[g%s.length]},a.getAreaStyle()),silent:!0}))}}},CE=["axisLine","axisTickLabel","axisName"],ME=["splitLine","splitArea","minorSplitLine"],TE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return n(t,e),t.prototype.render=function(e,t){if(this.group.removeAll(),e.get("show")){var n=this._axisGroup,r=this._axisGroup=new Po;this.group.add(r);var o=e.axis,i=o.polar,a=i.getAngleAxis(),s=o.getTicksCoords(),l=o.getMinorTicksCoords(),u=a.getExtent()[0],c=o.getExtent(),d=function(e,t,n){return{position:[e.cx,e.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}(i,e,u),h=new NC(e,d);O(CE,h.add,h),r.add(h.getGroup()),Ic(n,r,e),O(ME,function(t){e.get([t,"show"])&&!o.scale.isBlank()&&kE[t](this.group,e,i,u,c,s,l)},this)}},t.type="radiusAxis",t}(jC),kE={splitLine:function(e,t,n,r,o,i){var a=t.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=0;c<i.length;c++){var d=l++%s.length;u[d]=u[d]||[],u[d].push(new cu({shape:{cx:n.cx,cy:n.cy,r:Math.max(i[c].coord,0)}}))}for(c=0;c<u.length;c++)e.add(xc(u[c],{style:D({stroke:s[c%s.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,n,r,o,i,a){if(a.length){for(var s=t.getModel("minorSplitLine").getModel("lineStyle"),l=[],u=0;u<a.length;u++)for(var c=0;c<a[u].length;c++)l.push(new cu({shape:{cx:n.cx,cy:n.cy,r:a[u][c].coord}}));e.add(xc(l,{style:D({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(e,t,n,r,o,i){if(i.length){var a=t.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var u=[],c=i[0].coord,d=1;d<i.length;d++){var h=l++%s.length;u[h]=u[h]||[],u[h].push(new Tu({shape:{cx:n.cx,cy:n.cy,r0:c,r:i[d].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=i[d].coord}for(d=0;d<u.length;d++)e.add(xc(u[d],{style:D({fill:s[d%s.length]},a.getAreaStyle()),silent:!0}))}}};function IE(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function AE(e,t){return t.dim+e.model.componentIndex}function DE(e,t,n){var r={},o=function(e){var t={};O(e,function(e,n){var r=e.getData(),o=e.coordinateSystem,i=o.getBaseAxis(),a=AE(o,i),s=i.getExtent(),l="category"===i.type?i.getBandWidth():Math.abs(s[1]-s[0])/r.count(),u=t[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},c=u.stacks;t[a]=u;var d=IE(e);c[d]||u.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var h=Fo(e.get("barWidth"),l),p=Fo(e.get("barMaxWidth"),l),f=e.get("barGap"),g=e.get("barCategoryGap");h&&!c[d].width&&(h=Math.min(u.remainedWidth,h),c[d].width=h,u.remainedWidth-=h),p&&(c[d].maxWidth=p),null!=f&&(u.gap=f),null!=g&&(u.categoryGap=g)});var n={};return O(t,function(e,t){n[t]={};var r=e.stacks,o=e.bandWidth,i=Fo(e.categoryGap,o),a=Fo(e.gap,1),s=e.remainedWidth,l=e.autoWidthCount,u=(s-i)/(l+(l-1)*a);u=Math.max(u,0),O(r,function(e,t){var n=e.maxWidth;n&&n<u&&(n=Math.min(n,s),e.width&&(n=Math.min(n,e.width)),s-=n,e.width=n,l--)}),u=(s-i)/(l+(l-1)*a),u=Math.max(u,0);var c,d=0;O(r,function(e,t){e.width||(e.width=u),c=e,d+=e.width*(1+a)}),c&&(d-=c.width*a);var h=-d/2;O(r,function(e,r){n[t][r]=n[t][r]||{offset:h,width:e.width},h+=e.width*(1+a)})}),n}(F(t.getSeriesByType(e),function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type}));t.eachSeriesByType(e,function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),n=e.coordinateSystem,i=n.getBaseAxis(),a=AE(n,i),s=IE(e),l=o[a][s],u=l.offset,c=l.width,d=n.getOtherAxis(i),h=e.coordinateSystem.cx,p=e.coordinateSystem.cy,f=e.get("barMinHeight")||0,g=e.get("barMinAngle")||0;r[s]=r[s]||[];for(var m=t.mapDimension(d.dim),v=t.mapDimension(i.dim),y=Ky(t,m),b="radius"!==i.dim||!e.get("roundCap",!0),x=d.dataToCoord(0),_=0,w=t.count();_<w;_++){var S=t.get(m,_),C=t.get(v,_),M=S>=0?"p":"n",T=x;y&&(r[s][C]||(r[s][C]={p:x,n:x}),T=r[s][C][M]);var k=void 0,I=void 0,A=void 0,D=void 0;if("radius"===d.dim){var P=d.dataToCoord(S)-x,L=i.dataToCoord(C);Math.abs(P)<f&&(P=(P<0?-1:1)*f),k=T,I=T+P,D=(A=L-u)-c,y&&(r[s][C][M]=I)}else{var N=d.dataToCoord(S,b)-x,R=i.dataToCoord(C);Math.abs(N)<g&&(N=(N<0?-1:1)*g),I=(k=R+u)+c,A=T,D=T+N,y&&(r[s][C][M]=D)}t.setItemLayout(_,{cx:h,cy:p,r0:k,r:I,startAngle:-A*Math.PI/180,endAngle:-D*Math.PI/180,clockwise:A>=D})}}})}var PE={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},LE={splitNumber:5},NE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="polar",t}(lg);function RE(e,t){t=t||{};var n=e.coordinateSystem,r=e.axis,o={},i=r.position,a=r.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};o.position=["vertical"===a?u.vertical[i]:l[0],"horizontal"===a?u.horizontal[i]:l[3]],o.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),re(t.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var c=t.rotate;return null==c&&(c=e.get(["axisLabel","rotate"])),o.labelRotation="top"===i?-c:c,o.z2=1,o}var EE=["axisLine","axisTickLabel","axisName"],OE=["splitArea","splitLine"],BE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="SingleAxisPointer",n}return n(t,e),t.prototype.render=function(t,n,r,o){var i=this.group;i.removeAll();var a=this._axisGroup;this._axisGroup=new Po;var s=RE(t),l=new NC(t,s);O(EE,l.add,l),i.add(this._axisGroup),i.add(l.getGroup()),O(OE,function(e){t.get([e,"show"])&&zE[e](this,this.group,this._axisGroup,t)},this),Ic(a,this._axisGroup,t),e.prototype.render.call(this,t,n,r,o)},t.prototype.remove=function(){XC(this)},t.type="singleAxis",t}(jC),zE={splitLine:function(e,t,n,r){var o=r.axis;if(!o.scale.isBlank()){var i=r.getModel("splitLine"),a=i.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),u=r.coordinateSystem.getRect(),c=o.isHorizontal(),d=[],h=0,p=o.getTicksCoords({tickModel:i}),f=[],g=[],m=0;m<p.length;++m){var v=o.toGlobalCoord(p[m].coord);c?(f[0]=v,f[1]=u.y,g[0]=v,g[1]=u.y+u.height):(f[0]=u.x,f[1]=v,g[0]=u.x+u.width,g[1]=v);var y=new Ou({shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},silent:!0});wc(y.shape,l);var b=h++%s.length;d[b]=d[b]||[],d[b].push(y)}var x=a.getLineStyle(["color"]);for(m=0;m<d.length;++m)t.add(xc(d[m],{style:D({stroke:s[m%s.length]},x),silent:!0}))}},splitArea:function(e,t,n,r){qC(e,n,r,r)}},FE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(xh);R(FE,ix.prototype);var VE=function(e){function t(t,n,r,o,i){var a=e.call(this,t,n,r)||this;return a.type=o||"value",a.position=i||"bottom",a}return n(t,e),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.pointToData=function(e,t){return this.coordinateSystem.pointToData(e)[0]},t}(Ex),HE=["single"],WE=function(){function e(e,t,n){this.type="single",this.dimension="single",this.dimensions=HE,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,n)}return e.prototype._init=function(e,t,n){var r=this.dimension,o=new VE(r,Jb(e),[0,0],e.get("type"),e.get("position")),i="category"===o.type;o.onBand=i&&e.get("boundaryGap"),o.inverse=e.get("inverse"),o.orient=e.get("orient"),e.axis=o,o.model=e,o.coordinateSystem=this,this._axis=o},e.prototype.update=function(e,t){e.eachSeries(function(e){if(e.coordinateSystem===this){var t=e.getData();O(t.mapDimensionsAll(this.dimension),function(e){this._axis.scale.unionExtentFromData(t,e)},this),Kb(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(e,t){this._rect=ph({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),r=n?[0,e.width]:[0,e.height],o=t.inverse?1:0;t.setExtent(r[o],r[1-o]),this._updateAxisTransform(t,n?e.x:e.y)},e.prototype._updateAxisTransform=function(e,t){var n=e.getExtent(),r=n[0]+n[1],o=e.isHorizontal();e.toGlobalCoord=o?function(e){return e+t}:function(e){return r-e+t},e.toLocalCoord=o?function(e){return e-t}:function(e){return r-e+t}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},e.prototype.pointToData=function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},e.prototype.dataToPoint=function(e){var t=this.getAxis(),n=this.getRect(),r=[],o="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),r[o]=t.toGlobalCoord(t.dataToCoord(+e)),r[1-o]=0===o?n.y+n.height/2:n.x+n.width/2,r},e.prototype.convertToPixel=function(e,t,n){return GE(t)===this?this.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){return GE(t)===this?this.pointToData(n):null},e}();function GE(e){var t=e.seriesModel,n=e.singleAxisModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}var UE={create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(r,o){var i=new WE(r,e,t);i.name="single_"+o,i.resize(r,t),r.coordinateSystem=i,n.push(i)}),e.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var t=e.getReferringComponents("singleAxis",Ii).models[0];e.coordinateSystem=t&&t.coordinateSystem}}),n},dimensions:HE},jE=["x","y"],YE=["width","height"],qE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.makeElOption=function(e,t,n,r,o){var i=n.axis,a=i.coordinateSystem,s=$E(a,1-ZE(i)),l=a.dataToPoint(t)[0],u=r.get("type");if(u&&"none"!==u){var c=IR(r),d=XE[u](i,l,s);d.style=c,e.graphicKey=d.type,e.pointer=d}LR(t,e,RE(n),n,r,o)},t.prototype.getHandleTransform=function(e,t,n){var r=RE(t,{labelInside:!1});r.labelMargin=n.get(["handle","margin"]);var o=PR(t.axis,e,r);return{x:o[0],y:o[1],rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,t,n,r){var o=n.axis,i=o.coordinateSystem,a=ZE(o),s=$E(i,a),l=[e.x,e.y];l[a]+=t[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var u=$E(i,1-a),c=(u[1]+u[0])/2,d=[c,c];return d[a]=l[a],{x:l[0],y:l[1],rotation:e.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}},t}(wR),XE={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:NR([t,n[0]],[t,n[1]],ZE(e))}},shadow:function(e,t,n){var r=e.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:RR([t-r/2,n[0]],[r,o],ZE(e))}}};function ZE(e){return e.isHorizontal()?0:1}function $E(e,t){var n=e.getRect();return[n[jE[t]],n[jE[t]]+n[YE[t]]]}var KE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="single",t}(lg),JE=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(t,n,r){var o=vh(t);e.prototype.init.apply(this,arguments),QE(t,o)},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),QE(this.option,t)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(xh);function QE(e,t){var n,r=e.cellSize;1===(n=U(r)?r:e.cellSize=[r,r]).length&&(n[1]=n[0]);var o=B([0,1],function(e){return function(e,t){return null!=e[ch[t][0]]||null!=e[ch[t][1]]&&null!=e[ch[t][2]]}(t,e)&&(n[e]="auto"),null!=n[e]&&"auto"!==n[e]});mh(e,t,{type:"box",ignoreSize:o})}var eO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){var r=this.group;r.removeAll();var o=e.coordinateSystem,i=o.getRangeInfo(),a=o.getOrient(),s=t.getLocaleModel();this._renderDayRect(e,i,r),this._renderLines(e,i,a,r),this._renderYearText(e,i,a,r),this._renderMonthText(e,s,a,r),this._renderWeekText(e,s,i,a,r)},t.prototype._renderDayRect=function(e,t,n){for(var r=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),i=r.getCellWidth(),a=r.getCellHeight(),s=t.start.time;s<=t.end.time;s=r.getNextNDay(s,1).time){var l=r.dataToRect([s],!1).tl,u=new Is({shape:{x:l[0],y:l[1],width:i,height:a},cursor:"default",style:o});n.add(u)}},t.prototype._renderLines=function(e,t,n,r){var o=this,i=e.coordinateSystem,a=e.getModel(["splitLine","lineStyle"]).getLineStyle(),s=e.get(["splitLine","show"]),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=t.start,c=0;u.time<=t.end.time;c++){h(u.formatedDate),0===c&&(u=i.getDateInfo(t.start.y+"-"+t.start.m));var d=u.date;d.setMonth(d.getMonth()+1),u=i.getDateInfo(d)}function h(t){o._firstDayOfMonth.push(i.getDateInfo(t)),o._firstDayPoints.push(i.dataToRect([t],!1).tl);var l=o._getLinePointsOfOneWeek(e,t,n);o._tlpoints.push(l[0]),o._blpoints.push(l[l.length-1]),s&&o._drawSplitline(l,a,r)}h(i.getNextNDay(t.end.time,1).formatedDate),s&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,l,n),a,r),s&&this._drawSplitline(o._getEdgesPoints(o._blpoints,l,n),a,r)},t.prototype._getEdgesPoints=function(e,t,n){var r=[e[0].slice(),e[e.length-1].slice()],o="horizontal"===n?0:1;return r[0][o]=r[0][o]-t/2,r[1][o]=r[1][o]+t/2,r},t.prototype._drawSplitline=function(e,t,n){var r=new Nu({z2:20,shape:{points:e},style:t});n.add(r)},t.prototype._getLinePointsOfOneWeek=function(e,t,n){for(var r=e.coordinateSystem,o=r.getDateInfo(t),i=[],a=0;a<7;a++){var s=r.getNextNDay(o.time,a),l=r.dataToRect([s.time],!1);i[2*s.day]=l.tl,i[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return i},t.prototype._formatterLabel=function(e,t){return Y(e)&&e?(n=e,O(t,function(e,t){n=n.replace("{"+t+"}",e)}),n):j(e)?e(t):t.nameMap;var n},t.prototype._yearTextPositionControl=function(e,t,n,r,o){var i=t[0],a=t[1],s=["center","bottom"];"bottom"===r?(a+=o,s=["center","top"]):"left"===r?i-=o:"right"===r?(i+=o,s=["center","top"]):a-=o;var l=0;return"left"!==r&&"right"!==r||(l=Math.PI/2),{rotation:l,x:i,y:a,style:{align:s[0],verticalAlign:s[1]}}},t.prototype._renderYearText=function(e,t,n,r){var o=e.getModel("yearLabel");if(o.get("show")){var i=o.get("margin"),a=o.get("position");a||(a="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,d={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],u],right:[s[c][0],u]},h=t.start.y;+t.end.y>+t.start.y&&(h=h+"-"+t.end.y);var p=o.get("formatter"),f={start:t.start.y,end:t.end.y,nameMap:h},g=this._formatterLabel(p,f),m=new Ps({z2:30,style:Uc(o,{text:g})});m.attr(this._yearTextPositionControl(m,d[a],n,a,i)),r.add(m)}},t.prototype._monthTextPositionControl=function(e,t,n,r,o){var i="left",a="top",s=e[0],l=e[1];return"horizontal"===n?(l+=o,t&&(i="center"),"start"===r&&(a="bottom")):(s+=o,t&&(a="middle"),"start"===r&&(i="right")),{x:s,y:l,align:i,verticalAlign:a}},t.prototype._renderMonthText=function(e,t,n,r){var o=e.getModel("monthLabel");if(o.get("show")){var i=o.get("nameMap"),a=o.get("margin"),s=o.get("position"),l=o.get("align"),u=[this._tlpoints,this._blpoints];i&&!Y(i)||(i&&(t=Sd(i)||t),i=t.get(["time","monthAbbr"])||[]);var c="start"===s?0:1,d="horizontal"===n?0:1;a="start"===s?-a:a;for(var h="center"===l,p=0;p<u[c].length-1;p++){var f=u[c][p].slice(),g=this._firstDayOfMonth[p];if(h){var m=this._firstDayPoints[p];f[d]=(m[d]+u[0][p+1][d])/2}var v=o.get("formatter"),y=i[+g.m-1],b={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:y},x=this._formatterLabel(v,b),_=new Ps({z2:30,style:A(Uc(o,{text:x}),this._monthTextPositionControl(f,h,n,s,a))});r.add(_)}}},t.prototype._weekTextPositionControl=function(e,t,n,r,o){var i="center",a="middle",s=e[0],l=e[1],u="start"===n;return"horizontal"===t?(s=s+r+(u?1:-1)*o[0]/2,i=u?"right":"left"):(l=l+r+(u?1:-1)*o[1]/2,a=u?"bottom":"top"),{x:s,y:l,align:i,verticalAlign:a}},t.prototype._renderWeekText=function(e,t,n,r,o){var i=e.getModel("dayLabel");if(i.get("show")){var a=e.coordinateSystem,s=i.get("position"),l=i.get("nameMap"),u=i.get("margin"),c=a.getFirstDayOfWeek();l&&!Y(l)||(l&&(t=Sd(l)||t),l=t.get(["time","dayOfWeekShort"])||B(t.get(["time","dayOfWeekAbbr"]),function(e){return e[0]}));var d=a.getNextNDay(n.end.time,7-n.lweek).time,h=[a.getCellWidth(),a.getCellHeight()];u=Fo(u,Math.min(h[1],h[0])),"start"===s&&(d=a.getNextNDay(n.start.time,-(7+n.fweek)).time,u=-u);for(var p=0;p<7;p++){var f,g=a.getNextNDay(d,p),m=a.dataToRect([g.time],!1).center;f=Math.abs((p+c)%7);var v=new Ps({z2:30,style:A(Uc(i,{text:l[f]}),this._weekTextPositionControl(m,r,s,u,h))});o.add(v)}}},t.type="calendar",t}(lg),tO=864e5,nO=function(){function e(t,n,r){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(e){var t=(e=Ko(e)).getFullYear(),n=e.getMonth()+1,r=n<10?"0"+n:""+n,o=e.getDate(),i=o<10?"0"+o:""+o,a=e.getDay();return{y:t+"",m:r,d:i,day:a=Math.abs((a+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+r+"-"+i,date:e}},e.prototype.getNextNDay=function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},e.prototype.update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,r=["width","height"],o=this._model.getCellSize().slice(),i=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];O([0,1],function(e){u(o,e)&&(i[r[e]]=o[e]*a[e])});var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=ph(i,s);function u(e,t){return null!=e[t]&&"auto"!==e[t]}O([0,1],function(e){u(o,e)||(o[e]=l[r[e]]/a[e])}),this._sw=o[0],this._sh=o[1]},e.prototype.dataToPoint=function(e,t){U(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),r=this._rangeInfo,o=n.formatedDate;if(t&&!(n.time>=r.start.time&&n.time<r.end.time+tO))return[NaN,NaN];var i=n.day,a=this._getRangeInfo([r.start.time,o]).nthWeek;return"vertical"===this._orient?[this._rect.x+i*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+i*this._sh+this._sh/2]},e.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},e.prototype.dataToRect=function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},e.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,r):this._getDateByWeeksAndDay(t,n-1,r)},e.prototype.convertToPixel=function(e,t,n){var r=rO(t);return r===this?r.dataToPoint(n):null},e.prototype.convertFromPixel=function(e,t,n){var r=rO(t);return r===this?r.pointToData(n):null},e.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var e,t=this._model.get("range");if(U(t)&&1===t.length&&(t=t[0]),U(t))e=t;else{var n=t.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var r=this.getDateInfo(n),o=r.date;o.setMonth(o.getMonth()+1);var i=this.getNextNDay(o,-1);e=[r.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return t;var a=this._getRangeInfo(e);return a.start.time>a.end.time&&e.reverse(),e},e.prototype._getRangeInfo=function(e){var t,n=[this.getDateInfo(e[0]),this.getDateInfo(e[1])];n[0].time>n[1].time&&(t=!0,n.reverse());var r=Math.floor(n[1].time/tO)-Math.floor(n[0].time/tO)+1,o=new Date(n[0].time),i=o.getDate(),a=n[1].date.getDate();o.setDate(i+r-1);var s=o.getDate();if(s!==a)for(var l=o.getTime()-n[1].time>0?1:-1;(s=o.getDate())!==a&&(o.getTime()-n[1].time)*l>0;)r-=l,o.setDate(s-l);var u=Math.floor((r+n[0].day+6)/7),c=t?1-u:u-1;return t&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:r,weeks:u,nthWeek:c,fweek:n[0].day,lweek:n[1].day}},e.prototype._getDateByWeeksAndDay=function(e,t,n){var r=this._getRangeInfo(n);if(e>r.weeks||0===e&&t<r.fweek||e===r.weeks&&t>r.lweek)return null;var o=7*(e-1)-r.fweek+t,i=new Date(r.start.time);return i.setDate(+r.start.d+o),this.getDateInfo(i)},e.create=function(t,n){var r=[];return t.eachComponent("calendar",function(o){var i=new e(o,t,n);r.push(i),o.coordinateSystem=i}),t.eachSeries(function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=r[e.get("calendarIndex")||0])}),r},e.dimensions=["time","value"],e}();function rO(e){var t=e.calendarModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem:null}function oO(e,t){var n;return O(t,function(t){null!=e[t]&&"auto"!==e[t]&&(n=!0)}),n}var iO=["transition","enterFrom","leaveTo"],aO=iO.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function sO(e,t,n){if(n&&(!e[n]&&t[n]&&(e[n]={}),e=e[n],t=t[n]),e&&t)for(var r=n?iO:aO,o=0;o<r.length;o++){var i=r[o];null==e[i]&&null!=t[i]&&(e[i]=t[i])}}var lO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.preventAutoZ=!0,n}return n(t,e),t.prototype.mergeOption=function(t,n){var r=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,t,n),this.option.elements=r},t.prototype.optionUpdated=function(e,t){var n=this.option,r=(t?n:e).elements,o=n.elements=t?[]:n.elements,i=[];this._flatten(r,i,null);var a=vi(o,i,"normalMerge"),s=this._elOptionsToUpdate=[];O(a,function(e,t){var n=e.newOption;n&&(s.push(n),function(e,t){var n=e.existing;if(t.id=e.keyInfo.id,!t.type&&n&&(t.type=n.type),null==t.parentId){var r=t.parentOption;r?t.parentId=r.id:n&&(t.parentId=n.parentId)}t.parentOption=null}(e,n),function(e,t,n){var r=A({},n),o=e[t],i=n.$action||"merge";"merge"===i?o?(k(o,r,!0),mh(o,r,{ignoreSize:!0}),yh(n,o),sO(n,o),sO(n,o,"shape"),sO(n,o,"style"),sO(n,o,"extra"),n.clipPath=o.clipPath):e[t]=r:"replace"===i?e[t]=r:"remove"===i&&o&&(e[t]=null)}(o,t,n),function(e,t){if(e&&(e.hv=t.hv=[oO(t,["left","right"]),oO(t,["top","bottom"])],"group"===e.type)){var n=e,r=t;null==n.width&&(n.width=r.width=0),null==n.height&&(n.height=r.height=0)}}(o[t],n))},this),n.elements=F(o,function(e){return e&&delete e.$action,null!=e})},t.prototype._flatten=function(e,t,n){O(e,function(e){if(e){n&&(e.parentOption=n),t.push(e);var r=e.children;r&&r.length&&this._flatten(r,t,e),delete e.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(xh),uO={path:null,compoundPath:null,group:Po,image:_s,text:Ps},cO=Ci(),dO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(){this._elMap=me()},t.prototype.render=function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},t.prototype._updateElements=function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,r=this.group,o=e.get("z"),i=e.get("zlevel");O(t,function(t){var a=xi(t.id,null),s=null!=a?n.get(a):null,l=xi(t.parentId,null),u=null!=l?n.get(l):r,c=t.type,d=t.style;"text"===c&&d&&t.hv&&t.hv[1]&&(d.textVerticalAlign=d.textBaseline=d.verticalAlign=d.align=null);var h=t.textContent,p=t.textConfig;if(d&&bN(d,c,!!p,!!h)){var f=xN(d,c,!0);!p&&f.textConfig&&(p=t.textConfig=f.textConfig),!h&&f.textContent&&(h=f.textContent)}var g=function(e){return e=A({},e),O(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(uh),function(t){delete e[t]}),e}(t),m=t.$action||"merge",v="merge"===m,y="replace"===m;if(v){var b=s;(T=!s)?b=pO(a,u,t.type,n):(b&&(cO(b).isNew=!1),HN(b)),b&&(AN(b,g,e,{isInit:T}),gO(b,t,o,i))}else if(y){fO(s,t,n,e);var x=pO(a,u,t.type,n);x&&(AN(x,g,e,{isInit:!0}),gO(x,t,o,i))}else"remove"===m&&(DN(s,t),fO(s,t,n,e));var _=n.get(a);if(_&&h)if(v){var w=_.getTextContent();w?w.attr(h):_.setTextContent(new Ps(h))}else y&&_.setTextContent(new Ps(h));if(_){var S=t.clipPath;if(S){var C=S.type,M=void 0,T=!1;if(v){var k=_.getClipPath();M=(T=!k||cO(k).type!==C)?hO(C):k}else y&&(T=!0,M=hO(C));_.setClipPath(M),AN(M,S,e,{isInit:T}),WN(M,S.keyframeAnimation,e)}var I=cO(_);_.setTextConfig(p),I.option=t,function(e,t,n){var r=Us(e).eventData;e.silent||e.ignore||r||(r=Us(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),r&&(r.info=n.info)}(_,e,t),Ec({el:_,componentModel:e,itemName:_.name,itemTooltipOption:t.tooltip}),WN(_,t.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,t){for(var n=e.option.elements,r=this.group,o=this._elMap,i=t.getWidth(),a=t.getHeight(),s=["x","y"],l=0;l<n.length;l++)if((f=null!=(p=xi((h=n[l]).id,null))?o.get(p):null)&&f.isGroup){var u=(g=f.parent)===r,c=cO(f),d=cO(g);c.width=Fo(c.option.width,u?i:d.width)||0,c.height=Fo(c.option.height,u?a:d.height)||0}for(l=n.length-1;l>=0;l--){var h,p,f;if(f=null!=(p=xi((h=n[l]).id,null))?o.get(p):null){var g=f.parent,m=(d=cO(g),{}),v=fh(f,h,g===r?{width:i,height:a}:{width:d.width,height:d.height},null,{hv:h.hv,boundingMode:h.bounding},m);if(!cO(f).isNew&&v){for(var y=h.transition,b={},x=0;x<s.length;x++){var _=s[x],w=m[_];y&&(LN(y)||L(y,_)>=0)?b[_]=w:f[_]=w}rc(f,b,e,0)}else f.attr(m)}}},t.prototype._clear=function(){var e=this,t=this._elMap;t.each(function(n){fO(n,cO(n).option,t,e._lastGraphicModel)}),this._elMap=me()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(lg);function hO(e){var t=new(xe(uO,e)?uO[e]:mc(e))({});return cO(t).type=e,t}function pO(e,t,n,r){var o=hO(n);return t.add(o),r.set(e,o),cO(o).id=e,cO(o).isNew=!0,o}function fO(e,t,n,r){e&&e.parent&&("group"===e.type&&e.traverse(function(e){fO(e,t,n,r)}),PN(e,t,r),n.removeKey(cO(e).id))}function gO(e,t,n,r){e.isGroup||O([["cursor",fa.prototype.cursor],["zlevel",r||0],["z",n||0],["z2",0]],function(n){var r=n[0];xe(t,r)?e[r]=oe(t[r],n[1]):null==e[r]&&(e[r]=n[1])}),O(H(t),function(n){if(0===n.indexOf("on")){var r=t[n];e[n]=j(r)?r:null}}),xe(t,"draggable")&&(e.draggable=t.draggable),null!=t.name&&(e.name=t.name),null!=t.id&&(e.id=t.id)}var mO=["x","y","radius","angle","single"],vO=["cartesian2d","polar","singleAxis"];function yO(e){return e+"Axis"}function bO(e){var t=e.ecModel,n={infoList:[],infoMap:me()};return e.eachTargetAxis(function(e,r){var o=t.getComponent(yO(e),r);if(o){var i=o.getCoordSysModel();if(i){var a=i.uid,s=n.infoMap.get(a);s||(s={model:i,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(o)}}}),n}var xO=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),_O=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return n(t,e),t.prototype.init=function(e,t,n){var r=wO(e);this.settledOption=r,this.mergeDefaultAndTheme(e,n),this._doInit(r)},t.prototype.mergeOption=function(e){var t=wO(e);k(this.option,e,!0),k(this.settledOption,t,!0),this._doInit(t)},t.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var n=this.settledOption;O([["start","startValue"],["end","endValue"]],function(e,r){"value"===this._rangePropMode[r]&&(t[e[0]]=n[e[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=me();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each(function(e){e.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return O(mO,function(n){var r=this.getReferringComponents(yO(n),Ai);if(r.specified){t=!0;var o=new xO;O(r.models,function(e){o.add(e.componentIndex)}),e.set(n,o)}},this),t},t.prototype._fillAutoTargetAxisByOrient=function(e,t){var n=this.ecModel,r=!0;if(r){var o="vertical"===t?"y":"x";i(n.findComponents({mainType:o+"Axis"}),o)}function i(t,n){var o=t[0];if(o){var i=new xO;if(i.add(o.componentIndex),e.set(n,i),r=!1,"x"===n||"y"===n){var a=o.getReferringComponents("grid",Ii).models[0];a&&O(t,function(e){o.componentIndex!==e.componentIndex&&a===e.getReferringComponents("grid",Ii).models[0]&&i.add(e.componentIndex)})}}}r&&i(n.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single"),r&&O(mO,function(t){if(r){var o=n.findComponents({mainType:yO(t),filter:function(e){return"category"===e.get("type",!0)}});if(o[0]){var i=new xO;i.add(o[0].componentIndex),e.set(t,i),r=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(t){!e&&(e=t)},this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var t=this._rangePropMode,n=this.get("rangeMode");O([["start","startValue"],["end","endValue"]],function(r,o){var i=null!=e[r[0]],a=null!=e[r[1]];i&&!a?t[o]="percent":!i&&a?t[o]="value":n?t[o]=n[o]:i&&(t[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(t,n){null==e&&(e=this.ecModel.getComponent(yO(t),n))},this),e},t.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each(function(n,r){O(n.indexList,function(n){e.call(t,r,n)})})},t.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},t.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(yO(e),t)},t.prototype.setRawRange=function(e){var t=this.option,n=this.settledOption;O([["start","startValue"],["end","endValue"]],function(r){null==e[r[0]]&&null==e[r[1]]||(t[r[0]]=n[r[0]]=e[r[0]],t[r[1]]=n[r[1]]=e[r[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var t=this.option;O(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),r=0;r<n.length;r++)for(var o=n[r],i=this._targetAxisInfoMap.get(o),a=0;a<i.indexList.length;a++){var s=this.getAxisProxy(o,i.indexList[a]);if(s.hostedBy(this))return s;t||(t=s)}return t},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(xh);function wO(e){var t={};return O(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var SO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="dataZoom.select",t}(_O),CO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n,r){this.dataZoomModel=e,this.ecModel=t,this.api=n},t.type="dataZoom",t}(lg),MO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="dataZoom.select",t}(CO),TO=O,kO=Ho,IO=function(){function e(e,t,n,r){this._dimName=e,this._axisIndex=t,this.ecModel=r,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(function(e){var t=e.get("coordinateSystem");return L(vO,t)>=0}(t)){var n=yO(this._dimName),r=t.getReferringComponents(n,Ii).models[0];r&&this._axisIndex===r.componentIndex&&e.push(t)}},this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return T(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,r=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),i=[0,100],a=[],s=[];TO(["start","end"],function(l,u){var c=e[l],d=e[l+"Value"];"percent"===o[u]?(null==c&&(c=i[u]),d=r.parse(zo(c,i,n))):(t=!0,c=zo(d=null==d?n[u]:r.parse(d),n,i)),s[u]=null==d||isNaN(d)?n[u]:d,a[u]=null==c||isNaN(c)?i[u]:c}),kO(s),kO(a);var l=this._minMaxSpan;function u(e,t,n,o,i){var a=i?"Span":"ValueSpan";QA(0,e,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)t[s]=zo(e[s],n,o,!0),i&&(t[s]=r.parse(t[s]))}return t?u(s,a,n,i,!1):u(a,s,i,n,!0),{valueWindow:s,percentWindow:a}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var r=[1/0,-1/0];TO(n,function(e){!function(e,t,n){t&&O(ox(t,n),function(n){var r=t.getApproximateExtent(n);r[0]<e[0]&&(e[0]=r[0]),r[1]>e[1]&&(e[1]=r[1])})}(r,e.getData(),t)});var o=e.getAxisModel(),i=Xb(o.axis.scale,o,r).calculate();return[i.min,i.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),o=e.get("filterMode"),i=this._valueWindow;"none"!==o&&TO(r,function(e){var t=e.getData(),r=t.mapDimensionsAll(n);if(r.length){if("weakFilter"===o){var a=t.getStore(),s=B(r,function(e){return t.getDimensionIndex(e)},t);t.filterSelf(function(e){for(var t,n,o,l=0;l<r.length;l++){var u=a.get(s[l],e),c=!isNaN(u),d=u<i[0],h=u>i[1];if(c&&!d&&!h)return!0;c&&(o=!0),d&&(t=!0),h&&(n=!0)}return o&&t&&n})}else TO(r,function(n){if("empty"===o)e.setData(t=t.map(n,function(e){return function(e){return e>=i[0]&&e<=i[1]}(e)?e:NaN}));else{var r={};r[n]=i,t.selectRange(r)}});TO(r,function(e){t.setApproximateExtent(i,e)})}})}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;TO(["min","max"],function(r){var o=t.get(r+"Span"),i=t.get(r+"ValueSpan");null!=i&&(i=this.getAxisModel().axis.scale.parse(i)),null!=i?o=zo(n[0]+i,n,[0,100],!0):null!=o&&(i=zo(o,[0,100],n,!0)-n[0]),e[r+"Span"]=o,e[r+"ValueSpan"]=i},this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var r=Uo(n,[0,500]);r=Math.min(r,20);var o=e.axis.scale.rawExtentInfo;0!==t[0]&&o.setDeterminedMinMax("min",+n[0].toFixed(r)),100!==t[1]&&o.setDeterminedMinMax("max",+n[1].toFixed(r)),o.freeze()}},e}(),AO={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,o){var i=e.getComponent(yO(r),o);t(r,o,i,n)})})}t(function(e,t,n,r){n.__dzAxisProxy=null});var n=[];t(function(t,r,o,i){o.__dzAxisProxy||(o.__dzAxisProxy=new IO(t,r,i,e),n.push(o.__dzAxisProxy))});var r=me();return O(n,function(e){O(e.getTargetSeriesModels(),function(e){r.set(e.uid,e)})}),r},overallReset:function(e,t){e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(t,n){e.getAxisProxy(t,n).reset(e)}),e.eachTargetAxis(function(n,r){e.getAxisProxy(n,r).filterData(e,t)})}),e.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),r=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:r[0],endValue:r[1]})}})}},DO=!1;function PO(e){DO||(DO=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,AO),function(e){e.registerAction("dataZoom",function(e,t){O(function(e,t){var n,r=me(),o=[],i=me();e.eachComponent({mainType:"dataZoom",query:t},function(e){i.get(e.uid)||s(e)});do{n=!1,e.eachComponent("dataZoom",a)}while(n);function a(e){!i.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis(function(e,n){var o=r.get(e);o&&o[n]&&(t=!0)}),t}(e)&&(s(e),n=!0)}function s(e){i.set(e.uid,!0),o.push(e),e.eachTargetAxis(function(e,t){(r.get(e)||r.set(e,[]))[t]=!0})}return o}(t,e),function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function LO(e){e.registerComponentModel(SO),e.registerComponentView(MO),PO(e)}var NO=function(){},RO={};function EO(e,t){RO[e]=t}function OO(e){return RO[e]}var BO=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;O(this.option.feature,function(e,n){var r=OO(n);r&&(r.getDefaultOption&&(r.defaultOption=r.getDefaultOption(t)),k(e,r.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(xh);function zO(e,t){var n=eh(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),new Is({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}var FO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(e,t,n,r){var o=this.group;if(o.removeAll(),e.get("show")){var i=+e.get("itemSize"),a="vertical"===e.get("orient"),s=e.get("feature")||{},l=this._features||(this._features={}),u=[];O(s,function(e,t){u.push(t)}),new xy(this._featureNames||[],u).add(c).update(c).remove(G(c,null)).execute(),this._featureNames=u,function(e,t,n){var r=t.getBoxLayoutParams(),o=t.get("padding"),i={width:n.getWidth(),height:n.getHeight()},a=ph(r,i,o);hh(t.get("orient"),e,t.get("itemGap"),a.width,a.height),fh(e,r,i,o)}(o,e,n),o.add(zO(o.getBoundingRect(),e)),a||o.eachChild(function(e){var t=e.__title,r=e.ensureState("emphasis"),a=r.textConfig||(r.textConfig={}),s=e.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!j(l)&&t){var u=l.style||(l.style={}),c=go(t,Ps.makeFont(u)),d=e.x+o.x,h=!1;e.y+o.y+i+c.height>n.getHeight()&&(a.position="top",h=!0);var p=h?-5-c.height:i+10;d+c.width/2>n.getWidth()?(a.position=["100%",p],u.align="right"):d-c.width/2<0&&(a.position=[0,p],u.align="left")}})}function c(c,d){var h,p=u[c],f=u[d],g=s[p],m=new hd(g,e,e.ecModel);if(r&&null!=r.newTitle&&r.featureName===p&&(g.title=r.newTitle),p&&!f){if(function(e){return 0===e.indexOf("my")}(p))h={onclick:m.option.onclick,featureName:p};else{var v=OO(p);if(!v)return;h=new v}l[p]=h}else if(!(h=l[f]))return;h.uid=fd("toolbox-feature"),h.model=m,h.ecModel=t,h.api=n;var y=h instanceof NO;p||!f?!m.get("show")||y&&h.unusable?y&&h.remove&&h.remove(t,n):(function(r,s,l){var u,c,d=r.getModel("iconStyle"),h=r.getModel(["emphasis","iconStyle"]),p=s instanceof NO&&s.getIcons?s.getIcons():r.get("icon"),f=r.get("title")||{};Y(p)?(u={})[l]=p:u=p,Y(f)?(c={})[l]=f:c=f;var g=r.iconPaths={};O(u,function(l,u){var p=Pc(l,{},{x:-i/2,y:-i/2,width:i,height:i});p.setStyle(d.getItemStyle()),p.ensureState("emphasis").style=h.getItemStyle();var f=new Ps({style:{text:c[u],align:h.get("textAlign"),borderRadius:h.get("textBorderRadius"),padding:h.get("textPadding"),fill:null},ignore:!0});p.setTextContent(f),Ec({el:p,componentModel:e,itemName:u,formatterParamsExtra:{title:c[u]}}),p.__title=c[u],p.on("mouseover",function(){var t=h.getItemStyle(),r=a?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";f.setStyle({fill:h.get("textFill")||t.fill||t.stroke||"#000",backgroundColor:h.get("textBackgroundColor")}),p.setTextConfig({position:h.get("textPosition")||r}),f.ignore=!e.get("showTitle"),n.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==r.get(["iconStatus",u])&&n.leaveEmphasis(this),f.hide()}),("emphasis"===r.get(["iconStatus",u])?xl:_l)(p),o.add(p),p.on("click",W(s.onclick,s,t,n,u)),g[u]=p})}(m,h,p),m.setIconStatus=function(e,t){var n=this.option,r=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,r[e]&&("emphasis"===t?xl:_l)(r[e])},h instanceof NO&&h.render&&h.render(m,t,n,r)):y&&h.dispose&&h.dispose(t,n)}},t.prototype.updateView=function(e,t,n,r){O(this._features,function(e){e instanceof NO&&e.updateView&&e.updateView(e.model,t,n,r)})},t.prototype.remove=function(e,t){O(this._features,function(n){n instanceof NO&&n.remove&&n.remove(e,t)}),this.group.removeAll()},t.prototype.dispose=function(e,t){O(this._features,function(n){n instanceof NO&&n.dispose&&n.dispose(e,t)})},t.type="toolbox",t}(lg),VO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onclick=function(e,t){var n=this.model,r=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),a=i?"svg":n.get("type",!0)||"png",s=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),l=o.browser;if(j(MouseEvent)&&(l.newEdge||!l.ie&&!l.edge)){var u=document.createElement("a");u.download=r+"."+a,u.target="_blank",u.href=s;var c=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});u.dispatchEvent(c)}else if(window.navigator.msSaveOrOpenBlob||i){var d=s.split(","),h=d[0].indexOf("base64")>-1,p=i?decodeURIComponent(d[1]):d[1];h&&(p=window.atob(p));var f=r+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var g=p.length,m=new Uint8Array(g);g--;)m[g]=p.charCodeAt(g);var v=new Blob([m]);window.navigator.msSaveOrOpenBlob(v,f)}else{var y=document.createElement("iframe");document.body.appendChild(y);var b=y.contentWindow,x=b.document;x.open("image/svg+xml","replace"),x.write(p),x.close(),b.focus(),x.execCommand("SaveAs",!0,f),document.body.removeChild(y)}}else{var _=n.get("lang"),w='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',S=window.open();S.document.write(w),S.document.title=r}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(NO),HO="__ec_magicType_stack__",WO=[["line","bar"],["stack"]],GO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return O(e.get("type"),function(e){t[e]&&(n[e]=t[e])}),n},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,t,n){var r=this.model,o=r.get(["seriesIndex",n]);if(UO[n]){var i,a={series:[]};O(WO,function(e){L(e,n)>=0&&O(e,function(e){r.setIconStatus(e,"normal")})}),r.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},function(e){var t=e.subType,o=e.id,i=UO[n](t,o,e,r);i&&(D(i,e.option),a.series.push(i));var s=e.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var u=l.dim+"Axis",c=e.getReferringComponents(u,Ii).models[0].componentIndex;a[u]=a[u]||[];for(var d=0;d<=c;d++)a[u][c]=a[u][c]||{};a[u][c].boundaryGap="bar"===n}}});var s=n;"stack"===n&&(i=k({stack:r.option.title.tiled,tiled:r.option.title.stack},r.option.title),"emphasis"!==r.get(["iconStatus",n])&&(s="tiled")),t.dispatchAction({type:"changeMagicType",currentType:s,newOption:a,newTitle:i,featureName:"magicType"})}},t}(NO),UO={line:function(e,t,n,r){if("bar"===e)return k({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,n,r){if("line"===e)return k({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,n,r){var o=n.get("stack")===HO;if("line"===e||"bar"===e)return r.setIconStatus("stack",o?"normal":"emphasis"),k({id:t,stack:o?"":HO},r.get(["option","stack"])||{},!0)}};ay({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var jO=new Array(60).join("-"),YO="\t";function qO(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var XO=new RegExp("[\t]+","g");var ZO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onclick=function(e,t){setTimeout(function(){t.dispatchAction({type:"hideTip"})});var n=t.getDom(),r=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=r.get("backgroundColor")||"#fff";var i=document.createElement("h4"),a=r.get("lang")||[];i.innerHTML=a[0]||r.get("title"),i.style.cssText="margin:10px 20px",i.style.color=r.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var u=r.get("optionToContent"),c=r.get("contentToOption"),d=function(e){var t,n,r,o=function(e){var t={},n=[],r=[];return e.eachRawSeries(function(e){var o=e.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(e);else{var i=o.getBaseAxis();if("category"===i.type){var a=i.dim+"_"+i.index;t[a]||(t[a]={categoryAxis:i,valueAxis:o.getOtherAxis(i),series:[]},r.push({axisDim:i.dim,axisIndex:i.index})),t[a].series.push(e)}else n.push(e)}}),{seriesGroupByCategoryAxis:t,other:n,meta:r}}(e);return{value:F([(n=o.seriesGroupByCategoryAxis,r=[],O(n,function(e,t){var n=e.categoryAxis,o=e.valueAxis.dim,i=[" "].concat(B(e.series,function(e){return e.name})),a=[n.model.getCategories()];O(e.series,function(e){var t=e.getRawData();a.push(e.getRawData().mapArray(t.mapDimension(o),function(e){return e}))});for(var s=[i.join(YO)],l=0;l<a[0].length;l++){for(var u=[],c=0;c<a.length;c++)u.push(a[c][l]);s.push(u.join(YO))}r.push(s.join("\n"))}),r.join("\n\n"+jO+"\n\n")),(t=o.other,B(t,function(e){var t=e.getRawData(),n=[e.name],r=[];return t.each(t.dimensions,function(){for(var e=arguments.length,o=arguments[e-1],i=t.getName(o),a=0;a<e-1;a++)r[a]=arguments[a];n.push((i?i+YO:"")+r.join(YO))}),n.join("\n")}).join("\n\n"+jO+"\n\n"))],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join("\n\n"+jO+"\n\n"),meta:o.meta}}(e);if(j(u)){var h=u(t.getOption());Y(h)?s.innerHTML=h:J(h)&&s.appendChild(h)}else{l.readOnly=r.get("readOnly");var p=l.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=r.get("textColor"),p.borderColor=r.get("textareaBorderColor"),p.backgroundColor=r.get("textareaColor"),l.value=d.value,s.appendChild(l)}var f=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+r.get("buttonColor"),m+=";color:"+r.get("buttonTextColor");var b=this;function x(){n.removeChild(o),b._dom=null}ht(v,"click",x),ht(y,"click",function(){if(null==c&&null!=u||null!=c&&null==u)x();else{var e;try{e=j(c)?c(s,t.getOption()):function(e,t){var n=e.split(new RegExp("\n*"+jO+"\n*","g")),r={series:[]};return O(n,function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(YO)>=0)return!0}(e)){var o=function(e){for(var t=e.split(/\n+/g),n=[],r=B(qO(t.shift()).split(XO),function(e){return{name:e,data:[]}}),o=0;o<t.length;o++){var i=qO(t[o]).split(XO);n.push(i.shift());for(var a=0;a<i.length;a++)r[a]&&(r[a].data[o]=i[a])}return{series:r,categories:n}}(e),i=t[n],a=i.axisDim+"Axis";i&&(r[a]=r[a]||[],r[a][i.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else o=function(e){for(var t=e.split(/\n+/g),n=qO(t.shift()),r=[],o=0;o<t.length;o++){var i=qO(t[o]);if(i){var a=i.split(XO),s="",l=void 0,u=!1;isNaN(a[0])?(u=!0,s=a[0],a=a.slice(1),r[o]={name:s,value:[]},l=r[o].value):l=r[o]=[];for(var c=0;c<a.length;c++)l.push(+a[c]);1===l.length&&(u?r[o].value=l[0]:r[o]=l[0])}}return{name:n,data:r}}(e),r.series.push(o)}),r}(l.value,f)}catch(e){throw x(),new Error("Data view format error "+e)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),x()}}),v.innerHTML=a[1],y.innerHTML=a[2],y.style.cssText=v.style.cssText=m,!r.get("readOnly")&&g.appendChild(y),g.appendChild(v),o.appendChild(i),o.appendChild(s),o.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},t.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,t){this.remove(e,t)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(NO);function $O(e,t){return B(e,function(e,n){var r=t&&t[n];if(Z(r)&&!U(r)){Z(e)&&!U(e)||(e={value:e});var o=null!=r.name&&null==e.name;return e=D(e,r),o&&delete e.name,e}return e})}ay({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];O(e.newOption.series,function(e){var r=t.getSeriesByName(e.name)[0];if(r){var o=r.get("data");n.push({name:e.name,data:$O(e.data,o)})}else n.push(A({type:"scatter"},e))}),t.mergeOption(D({series:n},e.newOption))});var KO=O,JO=Ci();function QO(e){var t=JO(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var eB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onclick=function(e,t){!function(e){JO(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(NO);ay({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var tB=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],nB=function(){function e(e,t,n){var r=this;this._targetInfoList=[];var o=oB(t,e);O(iB,function(e,t){(!n||!n.include||L(n.include,t)>=0)&&e(o,r._targetInfoList)})}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var r=lB[e.brushType](0,n,t);e.__rangeOffset={offset:cB[e.brushType](r.values,e.range,[1,1]),xyMinMax:r.xyMinMax}}}),e},e.prototype.matchOutputRanges=function(e,t,n){O(e,function(e){var r=this.findTargetInfo(e,t);r&&!0!==r&&O(r.coordSyses,function(r){var o=lB[e.brushType](1,r,e.range,!0);n(e,o.values,r,t)})},this)},e.prototype.setInputRanges=function(e,t){O(e,function(e){var n,r,o,i,a,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=lB[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?cB[e.brushType](l.values,u.offset,(n=l.xyMinMax,r=u.xyMinMax,o=hB(n),i=hB(r),a=[o[0]/i[0],o[1]/i[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}},this)},e.prototype.makePanelOpts=function(e,t){return B(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:tP(r),isTargetByCursor:rP(r,e,n.coordSysModel),getLinearBrushOtherExtent:nP(r)}})},e.prototype.controlSeries=function(e,t,n){var r=this.findTargetInfo(e,n);return!0===r||r&&L(r.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,r=oB(t,e),o=0;o<n.length;o++){var i=n[o],a=e.panelId;if(a){if(i.panelId===a)return i}else for(var s=0;s<aB.length;s++)if(aB[s](r,i))return i}return!0},e}();function rB(e){return e[0]>e[1]&&e.reverse(),e}function oB(e,t){return Ti(e,t,{includeMainTypes:tB})}var iB={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,o=e.gridModels,i=me(),a={},s={};(n||r||o)&&(O(n,function(e){var t=e.axis.grid.model;i.set(t.id,t),a[t.id]=!0}),O(r,function(e){var t=e.axis.grid.model;i.set(t.id,t),s[t.id]=!0}),O(o,function(e){i.set(e.id,e),a[e.id]=!0,s[e.id]=!0}),i.each(function(e){var o=e.coordinateSystem,i=[];O(o.getCartesians(),function(e,t){(L(n,e.getAxis("x").model)>=0||L(r,e.getAxis("y").model)>=0)&&i.push(e)}),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:i[0],coordSyses:i,getPanelRect:sB.grid,xAxisDeclared:a[e.id],yAxisDeclared:s[e.id]})}))},geo:function(e,t){O(e.geoModels,function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:sB.geo})})}},aB=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,o=e.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&r&&(o=r.axis.grid.model),o&&o===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],sB={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Cc(e)),t}},lB={lineX:G(uB,0),lineY:G(uB,1),rect:function(e,t,n,r){var o=e?t.pointToData([n[0][0],n[1][0]],r):t.dataToPoint([n[0][0],n[1][0]],r),i=e?t.pointToData([n[0][1],n[1][1]],r):t.dataToPoint([n[0][1],n[1][1]],r),a=[rB([o[0],i[0]]),rB([o[1],i[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,n,r){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:B(n,function(n){var i=e?t.pointToData(n,r):t.dataToPoint(n,r);return o[0][0]=Math.min(o[0][0],i[0]),o[1][0]=Math.min(o[1][0],i[1]),o[0][1]=Math.max(o[0][1],i[0]),o[1][1]=Math.max(o[1][1],i[1]),i}),xyMinMax:o}}};function uB(e,t,n,r){var o=n.getAxis(["x","y"][e]),i=rB(B([0,1],function(e){return t?o.coordToData(o.toLocalCoord(r[e]),!0):o.toGlobalCoord(o.dataToCoord(r[e]))})),a=[];return a[e]=i,a[1-e]=[NaN,NaN],{values:i,xyMinMax:a}}var cB={lineX:G(dB,0),lineY:G(dB,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return B(e,function(e,r){return[e[0]-n[0]*t[r][0],e[1]-n[1]*t[r][1]]})}};function dB(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function hB(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var pB,fB,gB=O,mB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(e,t,n,r){this._brushController||(this._brushController=new CD(n.getZr()),this._brushController.on("brush",W(this._onBrush,this)).mount()),function(e,t,n,r,o){var i=n._isZoomActive;r&&"takeGlobalCursor"===r.type&&(i="dataZoomSelect"===r.key&&r.dataZoomSelectActive),n._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var a=new nB(yB(e),t,{include:["grid"]}).makePanelOpts(o,function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(a).enableBrush(!(!i||!a.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,r,n),function(e,t){e.setIconStatus("back",function(e){return QO(e).length}(t)>1?"emphasis":"normal")}(e,t)},t.prototype.onclick=function(e,t,n){vB[n].call(this)},t.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},r=this.ecModel;this._brushController.updateCovers([]),new nB(yB(this.model),r,{include:["grid"]}).matchOutputRanges(t,r,function(e,t,n){if("cartesian2d"===n.type){var r=e.brushType;"rect"===r?(o("x",n,t[0]),o("y",n,t[1])):o({lineX:"x",lineY:"y"}[r],n,t)}}),function(e,t){var n=QO(e);KO(t,function(t,r){for(var o=n.length-1;o>=0&&!n[o][r];o--);if(o<0){var i=e.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(i){var a=i.getPercentRange();n[0][r]={dataZoomId:r,start:a[0],end:a[1]}}}}),n.push(t)}(r,n),this._dispatchZoomAction(n)}function o(e,t,o){var i=t.getAxis(e),a=i.model,s=function(e,t,n){var r;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(e,t.componentIndex)&&(r=n)}),r}(e,a,r),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=QA(0,o.slice(),i.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},t.prototype._dispatchZoomAction=function(e){var t=[];gB(e,function(e,n){t.push(T(e))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(NO),vB={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=QO(e),n=t[t.length-1];t.length>1&&t.pop();var r={};return KO(n,function(e,n){for(var o=t.length-1;o>=0;o--)if(e=t[o][n]){r[n]=e;break}}),r}(this.ecModel))}};function yB(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}pB="dataZoom",fB=function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var r=t.getModel(n),o=[],i=Ti(e,yB(r));return gB(i.xAxisModels,function(e){return a(e,"xAxis","xAxisIndex")}),gB(i.yAxisModels,function(e){return a(e,"yAxis","yAxisIndex")}),o}function a(e,t,n){var i=e.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:"\0_ec_\0toolbox-dataZoom_"+t+i};a[n]=i,o.push(a)}},le(null==Wh.get(pB)&&fB),Wh.set(pB,fB);var bB=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(xh);function xB(e){var t=e.get("confine");return null!=t?!!t:"richText"===e.get("renderMode")}function _B(e){if(o.domSupported)for(var t=document.documentElement.style,n=0,r=e.length;n<r;n++)if(e[n]in t)return e[n]}var wB=_B(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function SB(e,t){if(!e)return t;t=Qd(t,!0);var n=e.indexOf(t);return(e=-1===n?t:"-"+e.slice(0,n)+"-"+t).toLowerCase()}var CB=SB(_B(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),MB=SB(wB,"transform"),TB="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(o.transform3dSupported?"will-change:transform;":"");function kB(e,t,n){var r=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!o.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=o.transform3dSupported,s="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+MB+":"+s+";":[["top",0],["left",0],[wB,s]]}function IB(e,t,n){var r=[],i=e.get("transitionDuration"),a=e.get("backgroundColor"),s=e.get("shadowBlur"),l=e.get("shadowColor"),u=e.get("shadowOffsetX"),c=e.get("shadowOffsetY"),d=e.getModel("textStyle"),h=Xf(e,"html"),p=u+"px "+c+"px "+s+"px "+l;return r.push("box-shadow:"+p),t&&i&&r.push(function(e,t){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+e/2+"s "+n,i="opacity"+r+",visibility"+r;return t||(r=" "+e+"s "+n,i+=o.transformSupported?","+MB+r:",left"+r+",top"+r),CB+":"+i}(i,n)),a&&r.push("background-color:"+a),O(["width","color","radius"],function(t){var n="border-"+t,o=Qd(n),i=e.get(o);null!=i&&r.push(n+":"+i+("color"===t?"":"px"))}),r.push(function(e){var t=[],n=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont()),n&&t.push("line-height:"+Math.round(3*n/2)+"px");var o=e.get("textShadowColor"),i=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return o&&i&&t.push("text-shadow:"+a+"px "+s+"px "+i+"px "+o),O(["decoration","align"],function(n){var r=e.get(n);r&&t.push("text-"+n+":"+r)}),t.join(";")}(d)),null!=h&&r.push("padding:"+eh(h).join("px ")+"px"),r.join(";")+";"}function AB(e,t,n,r,o){var i=t&&t.painter;if(n){var a=i&&i.getViewportRoot();a&&function(e,t,n,r,o){et(Qe,t,r,o,!0)&&et(e,n,Qe[0],Qe[1])}(e,a,document.body,r,o)}else{e[0]=r,e[1]=o;var s=i&&i.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var DB=function(){function e(e,t,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,o.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=t.getZr(),a=this._appendToBody=n&&n.appendToBody;AB(this._styleCoord,i,a,t.getWidth()/2,t.getHeight()/2),a?document.body.appendChild(r):e.appendChild(r),this._container=e;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(e){if(e=e||window.event,!s._enterable){var t=i.handler;dt(i.painter.getViewportRoot(),e,!0),t.dispatch("mousemove",e)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(e){var t,n,r,o=this._container,i=(n="position",(r=(t=o).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t))?r[n]:null),a=o.style;"absolute"!==a.position&&"absolute"!==i&&(a.position="relative");var s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},e.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,r=n.style,o=this._styleCoord;n.innerHTML?r.cssText=TB+IB(e,!this._firstShow,this._longHide)+kB(o[0],o[1],!0)+"border-color:"+ah(t)+";"+(e.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(e,t,n,r,o){var i=this.el;if(null!=e){var a="";if(Y(o)&&"item"===n.get("trigger")&&!xB(n)&&(a=function(e,t,n){if(!Y(n)||"inside"===n)return"";var r=e.get("backgroundColor"),o=e.get("borderWidth");t=ah(t);var i,a,s="left"===(i=n)?"right":"right"===i?"left":"top"===i?"bottom":"top",l=Math.max(1.5*Math.round(o),6),u="",c=MB+":";L(["left","right"],s)>-1?(u+="top:50%",c+="translateY(-50%) rotate("+(a="left"===s?-225:-45)+"deg)"):(u+="left:50%",c+="translateX(-50%) rotate("+(a="top"===s?225:45)+"deg)");var d=a*Math.PI/180,h=l+o,p=h*Math.abs(Math.cos(d))+h*Math.abs(Math.sin(d)),f=t+" solid "+o+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",(u+=";"+s+":-"+Math.round(100*((p-Math.SQRT2*o)/2+Math.SQRT2*o-(p-h)/2))/100+"px")+";"+c+";","border-bottom:"+f,"border-right:"+f,"background-color:"+r+";"].join("")+'"></div>'}(n,r,o)),Y(e))i.innerHTML=e+a;else if(e){i.innerHTML="",U(e)||(e=[e]);for(var s=0;s<e.length;s++)J(e[s])&&e[s].parentNode!==i&&i.appendChild(e[s]);if(a&&i.childNodes.length){var l=document.createElement("div");l.innerHTML=a,i.appendChild(l)}}}else i.innerHTML=""},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},e.prototype.moveTo=function(e,t){var n=this._styleCoord;if(AB(n,this._zr,this._appendToBody,e,t),null!=n[0]&&null!=n[1]){var r=this.el.style;O(kB(n[0],n[1]),function(e){r[e[0]]=e[1]})}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",o.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(W(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}(),PB=function(){function e(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),RB(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return e.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(e,t,n,r,o){var i=this;Z(e)&&li(""),this.el&&this._zr.remove(this.el);var a=n.getModel("textStyle");this.el=new Ps({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:a.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:Xf(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),O(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(e){i.el.style[e]=n.get(e)}),O(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(e){i.el.style[e]=a.get(e)||0}),this._zr.add(this.el);var s=this;this.el.on("mouseover",function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0}),this.el.on("mouseout",function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1})},e.prototype.setEnterable=function(e){this._enterable=e},e.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),n=NB(e.style);return[t.width+n.left+n.right,t.height+n.top+n.bottom]},e.prototype.moveTo=function(e,t){var n=this.el;if(n){var r=this._styleCoord;RB(r,this._zr,e,t),e=r[0],t=r[1];var o=n.style,i=LB(o.borderWidth||0),a=NB(o);n.x=e+i+a.left,n.y=t+i+a.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(e){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(W(this.hide,this),e)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function LB(e){return Math.max(0,e)}function NB(e){var t=LB(e.shadowBlur||0),n=LB(e.shadowOffsetX||0),r=LB(e.shadowOffsetY||0);return{left:LB(t-n),right:LB(t+n),top:LB(t-r),bottom:LB(t+r)}}function RB(e,t,n,r){e[0]=n,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var EB=new Is({shape:{x:-1,y:-1,width:2,height:2}}),OB=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(e,t){if(!o.node&&t.getDom()){var n,r=e.getComponent("tooltip"),i=this._renderMode="auto"===(n=r.get("renderMode"))?o.domSupported?"html":"richText":n||"html";this._tooltipContent="richText"===i?new PB(t):new DB(t.getDom(),t,{appendToBody:r.get("appendToBody",!0)})}},t.prototype.render=function(e,t,n){if(!o.node&&n.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n;var r=this._tooltipContent;r.update(e),r.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?wg(this,"_updatePosition",50,"fixRate"):Sg(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");GR("itemTooltip",this._api,W(function(t,n,r){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,r):"leave"===t&&this._hide(r))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,t=this._ecModel,n=this._api,r=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==r&&"click"!==r){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&o.manuallyShowTip(e,t,n,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,t,n,r){if(r.from!==this.uid&&!o.node&&n.getDom()){var i=zB(r,n);this._ticket="";var a=r.dataByCoordSys,s=function(e,t,n){var r=ki(e).queryOptionMap,o=r.keys()[0];if(o&&"series"!==o){var i,a=Di(t,o,r.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(a)return n.getViewOfComponentModel(a).group.traverse(function(t){var n=Us(t).tooltipConfig;if(n&&n.name===e.name)return i=t,!0}),i?{componentMainType:o,componentIndex:a.componentIndex,el:i}:void 0}}(r,t,n);if(s){var l=s.el.getBoundingRect().clone();l.applyTransform(s.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:s.el,position:r.position,positionDefault:"bottom"},i)}else if(r.tooltip&&null!=r.x&&null!=r.y){var u=EB;u.x=r.x,u.y=r.y,u.update(),Us(u).tooltipConfig={name:null,option:r.tooltip},this._tryShow({offsetX:r.x,offsetY:r.y,target:u},i)}else if(a)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,dataByCoordSys:a,tooltipOption:r.tooltipOption},i);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,r))return;var c=XR(r,t),d=c.point[0],h=c.point[1];null!=d&&null!=h&&this._tryShow({offsetX:d,offsetY:h,target:c.el,position:r.position,positionDefault:"bottom"},i)}else null!=r.x&&null!=r.y&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target},i))}},t.prototype.manuallyHideTip=function(e,t,n,r){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,r.from!==this.uid&&this._hide(zB(r,n))},t.prototype._manuallyAxisShowTip=function(e,t,n,r){var o=r.seriesIndex,i=r.dataIndex,a=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=i&&null!=a){var s=t.getSeriesByIndex(o);if(s&&"axis"===BB([s.getData().getItemModel(i),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:i,position:r.position}),!0}},t.prototype._tryShow=function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var r=e.dataByCoordSys;if(r&&r.length)this._showAxisTooltip(r,e);else if(n){var o,i;this._lastDataByCoordSys=null,hm(n,function(e){return null!=Us(e).dataIndex?(o=e,!0):null!=Us(e).tooltipConfig?(i=e,!0):void 0},!0),o?this._showSeriesItemTooltip(e,o,t):i?this._showComponentItemTooltip(e,i,t):this._hide(t)}else this._lastDataByCoordSys=null,this._hide(t)}},t.prototype._showOrMove=function(e,t){var n=e.get("showDelay");t=W(t,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(t,n):t()},t.prototype._showAxisTooltip=function(e,t){var n=this._ecModel,r=this._tooltipModel,o=[t.offsetX,t.offsetY],i=BB([t.tooltipOption],r),a=this._renderMode,s=[],l=zf("section",{blocks:[],noHeader:!0}),u=[],c=new Zf;O(e,function(e){O(e.dataByAxis,function(e){var t=n.getComponent(e.axisDim+"Axis",e.axisIndex),o=e.value;if(t&&null!=o){var i=DR(o,t.axis,n,e.seriesDataIndices,e.valueLabelOpt),d=zf("section",{header:i,noHeader:!ue(i),sortBlocks:!0,blocks:[]});l.blocks.push(d),O(e.seriesDataIndices,function(l){var h=n.getSeriesByIndex(l.seriesIndex),p=l.dataIndexInside,f=h.getDataParams(p);if(!(f.dataIndex<0)){f.axisDim=e.axisDim,f.axisIndex=e.axisIndex,f.axisType=e.axisType,f.axisId=e.axisId,f.axisValue=ex(t.axis,{value:o}),f.axisValueLabel=i,f.marker=c.makeTooltipMarker("item",ah(f.color),a);var g=Qp(h.formatTooltip(p,!0,null)),m=g.frag;if(m){var v=BB([h],r).get("valueFormatter");d.blocks.push(v?A({valueFormatter:v},m):m)}g.text&&u.push(g.text),s.push(f)}})}})}),l.blocks.reverse(),u.reverse();var d=t.position,h=i.get("order"),p=Uf(l,c,a,h,n.get("useUTC"),i.get("textStyle"));p&&u.unshift(p);var f="richText"===a?"\n\n":"<br/>",g=u.join(f);this._showOrMove(i,function(){this._updateContentNotChangedOnAxis(e,s)?this._updatePosition(i,d,o[0],o[1],this._tooltipContent,s):this._showTooltipContent(i,g,s,Math.random()+"",o[0],o[1],d,null,c)})},t.prototype._showSeriesItemTooltip=function(e,t,n){var r=this._ecModel,o=Us(t),i=o.seriesIndex,a=r.getSeriesByIndex(i),s=o.dataModel||a,l=o.dataIndex,u=o.dataType,c=s.getData(u),d=this._renderMode,h=e.positionDefault,p=BB([c.getItemModel(l),s,a&&(a.coordinateSystem||{}).model],this._tooltipModel,h?{position:h}:null),f=p.get("trigger");if(null==f||"item"===f){var g=s.getDataParams(l,u),m=new Zf;g.marker=m.makeTooltipMarker("item",ah(g.color),d);var v=Qp(s.formatTooltip(l,!1,u)),y=p.get("order"),b=p.get("valueFormatter"),x=v.frag,_=x?Uf(b?A({valueFormatter:b},x):x,m,d,y,r.get("useUTC"),p.get("textStyle")):v.text,w="item_"+s.name+"_"+l;this._showOrMove(p,function(){this._showTooltipContent(p,_,g,w,e.offsetX,e.offsetY,e.position,e.target,m)}),n({type:"showTip",dataIndexInside:l,dataIndex:c.getRawIndex(l),seriesIndex:i,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,t,n){var r=Us(t),o=r.tooltipConfig.option||{};Y(o)&&(o={content:o,formatter:o});var i=[o],a=this._ecModel.getComponent(r.componentMainType,r.componentIndex);a&&i.push(a),i.push({formatter:o.content});var s=e.positionDefault,l=BB(i,this._tooltipModel,s?{position:s}:null),u=l.get("content"),c=Math.random()+"",d=new Zf;this._showOrMove(l,function(){var n=T(l.get("formatterParams")||{});this._showTooltipContent(l,u,n,c,e.offsetX,e.offsetY,e.position,t,d)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,t,n,r,o,i,a,s,l){if(this._ticket="",e.get("showContent")&&e.get("show")){var u=this._tooltipContent;u.setEnterable(e.get("enterable"));var c=e.get("formatter");a=a||e.get("position");var d=t,h=this._getNearestPoint([o,i],n,e.get("trigger"),e.get("borderColor")).color;if(c)if(Y(c)){var p=e.ecModel.get("useUTC"),f=U(n)?n[0]:n;d=c,f&&f.axisType&&f.axisType.indexOf("time")>=0&&(d=Ed(f.axisValue,d,p)),d=oh(d,n,!0)}else if(j(c)){var g=W(function(t,r){t===this._ticket&&(u.setContent(r,l,e,h,a),this._updatePosition(e,a,o,i,u,n,s))},this);this._ticket=r,d=c(n,r,g)}else d=c;u.setContent(d,l,e,h,a),u.show(e,h),this._updatePosition(e,a,o,i,u,n,s)}},t.prototype._getNearestPoint=function(e,t,n,r){return"axis"===n||U(t)?{color:r||("html"===this._renderMode?"#fff":"none")}:U(t)?void 0:{color:r||t.color||t.borderColor}},t.prototype._updatePosition=function(e,t,n,r,o,i,a){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var u=o.getSize(),c=e.get("align"),d=e.get("verticalAlign"),h=a&&a.getBoundingRect().clone();if(a&&h.applyTransform(a.transform),j(t)&&(t=t([n,r],i,o.el,h,{viewSize:[s,l],contentSize:u.slice()})),U(t))n=Fo(t[0],s),r=Fo(t[1],l);else if(Z(t)){var p=t;p.width=u[0],p.height=u[1];var f=ph(p,{width:s,height:l});n=f.x,r=f.y,c=null,d=null}else if(Y(t)&&a){var g=function(e,t,n,r){var o=n[0],i=n[1],a=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-o/2,l=t.y+c/2-i/2;break;case"top":s=t.x+u/2-o/2,l=t.y-i-a;break;case"bottom":s=t.x+u/2-o/2,l=t.y+c+a;break;case"left":s=t.x-o-a,l=t.y+c/2-i/2;break;case"right":s=t.x+u+a,l=t.y+c/2-i/2}return[s,l]}(t,h,u,e.get("borderWidth"));n=g[0],r=g[1]}else g=function(e,t,n,r,o,i,a){var s=n.getSize(),l=s[0],u=s[1];return null!=i&&(e+l+i+2>r?e-=l+i:e+=i),null!=a&&(t+u+a>o?t-=u+a:t+=a),[e,t]}(n,r,o,s,l,c?null:20,d?null:20),n=g[0],r=g[1];c&&(n-=FB(c)?u[0]/2:"right"===c?u[0]:0),d&&(r-=FB(d)?u[1]/2:"bottom"===d?u[1]:0),xB(e)&&(g=function(e,t,n,r,o){var i=n.getSize(),a=i[0],s=i[1];return e=Math.min(e+a,r)-a,t=Math.min(t+s,o)-s,[e=Math.max(e,0),t=Math.max(t,0)]}(n,r,o,s,l),n=g[0],r=g[1]),o.moveTo(n,r)},t.prototype._updateContentNotChangedOnAxis=function(e,t){var n=this._lastDataByCoordSys,r=this._cbParamsList,o=!!n&&n.length===e.length;return o&&O(n,function(n,i){var a=n.dataByAxis||[],s=(e[i]||{}).dataByAxis||[];(o=o&&a.length===s.length)&&O(a,function(e,n){var i=s[n]||{},a=e.seriesDataIndices||[],l=i.seriesDataIndices||[];(o=o&&e.value===i.value&&e.axisType===i.axisType&&e.axisId===i.axisId&&a.length===l.length)&&O(a,function(e,t){var n=l[t];o=o&&e.seriesIndex===n.seriesIndex&&e.dataIndex===n.dataIndex}),r&&O(e.seriesDataIndices,function(e){var n=e.seriesIndex,i=t[n],a=r[n];i&&a&&a.data!==i.data&&(o=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=t,!!o},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,t){!o.node&&t.getDom()&&(Sg(this,"_updatePosition"),this._tooltipContent.dispose(),YR("itemTooltip",t))},t.type="tooltip",t}(lg);function BB(e,t,n){var r,o=t.ecModel;n?(r=new hd(n,o,o),r=new hd(t.option,r,o)):r=t;for(var i=e.length-1;i>=0;i--){var a=e[i];a&&(a instanceof hd&&(a=a.get("tooltip",!0)),Y(a)&&(a={formatter:a}),a&&(r=new hd(a,r,o)))}return r}function zB(e,t){return e.dispatchAction||W(t.dispatchAction,t)}function FB(e){return"center"===e||"middle"===e}var VB=["rect","polygon","keep","clear"];function HB(e,t){var n=hi(e?e.brush:[]);if(n.length){var r=[];O(n,function(e){var t=e.hasOwnProperty("toolbox")?e.toolbox:[];t instanceof Array&&(r=r.concat(t))});var o=e&&e.toolbox;U(o)&&(o=o[0]),o||(o={feature:{}},e.toolbox=[o]);var i=o.feature||(o.feature={}),a=i.brush||(i.brush={}),s=a.type||(a.type=[]);s.push.apply(s,r),function(e){var t={};O(e,function(e){t[e]=1}),e.length=0,O(t,function(t,n){e.push(n)})}(s),t&&!s.length&&s.push.apply(s,VB)}}var WB=O;function GB(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function UB(e,t,n){var r={};return WB(t,function(t){var o,i=r[t]=((o=function(){}).prototype.__hidden=o.prototype,new o);WB(e[t],function(e,r){if(Yk.isValidType(r)){var o={type:r,visual:e};n&&n(o,t),i[r]=new Yk(o),"opacity"===r&&((o=T(o)).type="colorAlpha",i.__hidden.__alphaForOpacity=new Yk(o))}})}),r}function jB(e,t,n){var r;O(n,function(e){t.hasOwnProperty(e)&&GB(t[e])&&(r=!0)}),r&&O(n,function(n){t.hasOwnProperty(n)&&GB(t[n])?e[n]=T(t[n]):delete e[n]})}var YB={lineX:qB(0),lineY:qB(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&ux(n.range,e[0],e[1])},rect:function(e,t,n){var r=n.range;if(!e||r.length<=1)return!1;var o=e.x,i=e.y,a=e.width,s=e.height,l=r[0];return!!(ux(r,o,i)||ux(r,o+a,i)||ux(r,o,i+s)||ux(r,o+a,i+s)||Ot.create(e).contain(l[0],l[1])||Lc(o,i,o+a,i,r)||Lc(o,i,o,i+s,r)||Lc(o+a,i,o+a,i+s,r)||Lc(o,i+s,o+a,i+s,r))||void 0}}};function qB(e){var t=["x","y"],n=["width","height"];return{point:function(t,n,r){if(t){var o=r.range;return XB(t[e],o)}},rect:function(r,o,i){if(r){var a=i.range,s=[r[t[e]],r[t[e]]+r[n[e]]];return s[1]<s[0]&&s.reverse(),XB(s[0],a)||XB(s[1],a)||XB(a[0],s)||XB(a[1],s)}}}}function XB(e,t){return t[0]<=e&&e<=t[1]}var ZB=["inBrush","outOfBrush"],$B="__ecBrushSelect",KB="__ecInBrushSelectEvent";function JB(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new nB(t.option,e)).setInputRanges(t.areas,e)})}function QB(e,t,n){var r,o,i=[];e.eachComponent({mainType:"brush"},function(e){n&&"takeGlobalCursor"===n.type&&e.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),JB(e),e.eachComponent({mainType:"brush"},function(t,n){var a={brushId:t.id,brushIndex:n,brushName:t.name,areas:T(t.areas),selected:[]};i.push(a);var s=t.option,l=s.brushLink,u=[],c=[],d=[],h=!1;n||(r=s.throttleType,o=s.throttleDelay);var p=B(t.areas,function(e){var t=nz[e.brushType],n=D({boundingRect:t?t(e):void 0},e);return n.selectors=function(e){var t=e.brushType,n={point:function(r){return YB[t].point(r,n,e)},rect:function(r){return YB[t].rect(r,n,e)}};return n}(n),n}),f=UB(t.option,ZB,function(e){e.mappingMethod="fixed"});function g(e){return"all"===l||!!u[e]}function m(e){return!!e.length}U(l)&&O(l,function(e){u[e]=1}),e.eachSeries(function(n,r){var o=d[r]=[];"parallel"===n.subType?function(e,t){var n=e.coordinateSystem;h=h||n.hasAxisBrushed(),g(t)&&n.eachActiveState(e.getData(),function(e,t){"active"===e&&(c[t]=1)})}(n,r):function(n,r,o){if(n.brushSelector&&!function(e,t){var n=e.option.seriesIndex;return null!=n&&"all"!==n&&(U(n)?L(n,t)<0:t!==n)}(t,r)&&(O(p,function(r){t.brushTargetManager.controlSeries(r,n,e)&&o.push(r),h=h||m(o)}),g(r)&&m(o))){var i=n.getData();i.each(function(e){tz(n,o,i,e)&&(c[e]=1)})}}(n,r,o)}),e.eachSeries(function(e,t){var n={seriesId:e.id,seriesIndex:t,seriesName:e.name,dataIndex:[]};a.selected.push(n);var r=d[t],o=e.getData(),i=g(t)?function(e){return c[e]?(n.dataIndex.push(o.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(t){return tz(e,r,o,t)?(n.dataIndex.push(o.getRawIndex(t)),"inBrush"):"outOfBrush"};(g(t)?h:m(r))&&function(e,t,n,r,o,i){var a,s={};function l(e){return sm(n,a,e)}function u(e,t){um(n,a,e,t)}function c(e,o){a=e;var i=n.getRawDataItem(a);if(!i||!1!==i.visualMap)for(var c=r.call(undefined,e),d=t[c],h=s[c],p=0,f=h.length;p<f;p++){var g=h[p];d[g]&&d[g].applyVisual(e,l,u)}}O(e,function(e){var n=Yk.prepareVisualTypes(t[e]);s[e]=n}),n.each(c)}(ZB,f,o,i)})}),function(e,t,n,r,o){if(o){var i=e.getZr();if(!i[KB])i[$B]||(i[$B]=ez),wg(i,$B,n,t)(e,r)}}(t,r,o,i,n)}function ez(e,t){if(!e.isDisposed()){var n=e.getZr();n[KB]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[KB]=!1}}function tz(e,t,n,r){for(var o=0,i=t.length;o<i;o++){var a=t[o];if(e.brushSelector(r,n,a.selectors,a))return!0}}var nz={rect:function(e){return rz(e.range)},polygon:function(e){for(var t,n=e.range,r=0,o=n.length;r<o;r++){t=t||[[1/0,-1/0],[1/0,-1/0]];var i=n[r];i[0]<t[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&rz(t)}};function rz(e){return new Ot(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var oz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t,this.model,(this._brushController=new CD(t.getZr())).on("brush",W(this._onBrush,this)).mount()},t.prototype.render=function(e,t,n,r){this.model=e,this._updateController(e,t,n,r)},t.prototype.updateTransform=function(e,t,n,r){JB(t),this._updateController(e,t,n,r)},t.prototype.updateVisual=function(e,t,n,r){this.updateTransform(e,t,n,r)},t.prototype.updateView=function(e,t,n,r){this._updateController(e,t,n,r)},t.prototype._updateController=function(e,t,n,r){(!r||r.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var t=this.model.id,n=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:t,areas:T(n),$from:t}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:t,areas:T(n),$from:t})},t.type="brush",t}(lg),iz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.areas=[],n.brushOption={},n}return n(t,e),t.prototype.optionUpdated=function(e,t){var n=this.option;!t&&jB(n,e,["inBrush","outOfBrush"]);var r=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},r.hasOwnProperty("liftZ")||(r.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=B(e,function(e){return az(this.option,e)},this))},t.prototype.setBrushOption=function(e){this.brushOption=az(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(xh);function az(e,t){return k({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new hd(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var sz=["rect","polygon","lineX","lineY","keep","clear"],lz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.render=function(e,t,n){var r,o,i;t.eachComponent({mainType:"brush"},function(e){r=e.brushType,o=e.brushOption.brushMode||"single",i=i||!!e.areas.length}),this._brushType=r,this._brushMode=o,O(e.get("type",!0),function(t){e.setIconStatus(t,("keep"===t?"multiple"===o:"clear"===t?i:t===r)?"emphasis":"normal")})},t.prototype.updateView=function(e,t,n){this.render(e,t,n)},t.prototype.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return O(e.get("type",!0),function(e){t[e]&&(n[e]=t[e])}),n},t.prototype.onclick=function(e,t,n){var r=this._brushType,o=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?r:r!==n&&n,brushMode:"keep"===n?"multiple"===o?"single":"multiple":o}})},t.getDefaultOption=function(e){return{show:!0,type:sz.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}},t}(NO),uz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return n(t,e),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(xh),cz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.render=function(e,t,n){if(this.group.removeAll(),e.get("show")){var r=this.group,o=e.getModel("textStyle"),i=e.getModel("subtextStyle"),a=e.get("textAlign"),s=oe(e.get("textBaseline"),e.get("textVerticalAlign")),l=new Ps({style:Uc(o,{text:e.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=e.get("subtext"),d=new Ps({style:Uc(i,{text:c,fill:i.getTextColor(),y:u.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),h=e.get("link"),p=e.get("sublink"),f=e.get("triggerEvent",!0);l.silent=!h&&!f,d.silent=!p&&!f,h&&l.on("click",function(){sh(h,"_"+e.get("target"))}),p&&d.on("click",function(){sh(p,"_"+e.get("subtarget"))}),Us(l).eventData=Us(d).eventData=f?{componentType:"title",componentIndex:e.componentIndex}:null,r.add(l),c&&r.add(d);var g=r.getBoundingRect(),m=e.getBoxLayoutParams();m.width=g.width,m.height=g.height;var v=ph(m,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));a||("middle"===(a=e.get("left")||e.get("right"))&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),r.x=v.x,r.y=v.y,r.markRedraw();var y={align:a,verticalAlign:s};l.setStyle(y),d.setStyle(y),g=r.getBoundingRect();var b=v.margin,x=e.getItemStyle(["color","opacity"]);x.fill=e.get("backgroundColor");var _=new Is({shape:{x:g.x-b[3],y:g.y-b[0],width:g.width+b[1]+b[3],height:g.height+b[0]+b[2],r:e.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});r.add(_)}},t.type="title",t}(lg),dz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode="box",n}return n(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},t.prototype.mergeOption=function(t){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(e>=t&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,t=this.option,n=t.data||[],r=t.axisType,o=this._names=[];"category"===r?(e=[],O(n,function(t,n){var r,i=xi(gi(t),"");Z(t)?(r=T(t)).value=n:r=n,e.push(r),o.push(i)})):e=n;var i={category:"ordinal",time:"time",value:"number"}[r]||"number";(this._data=new Uy([{name:"value",type:i}],this)).initData(e,o)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(xh),hz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="timeline.slider",t.defaultOption=gd(dz.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(dz);R(hz,Jp.prototype);var pz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="timeline",t}(lg),fz=function(e){function t(t,n,r,o){var i=e.call(this,t,n,r)||this;return i.type=o||"value",i}return n(t,e),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},t}(Ex),gz=Math.PI,mz=Ci(),vz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(e,t){this.api=t},t.prototype.render=function(e,t,n){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var r=this._layout(e,n),o=this._createGroup("_mainGroup"),i=this._createGroup("_labelGroup"),a=this._axis=this._createAxis(r,e);e.formatTooltip=function(e){return zf("nameValue",{noName:!0,value:a.scale.getLabel({value:e})})},O(["AxisLine","AxisTick","Control","CurrentPointer"],function(t){this["_render"+t](r,o,a,e)},this),this._renderAxisLabel(r,i,a,e),this._position(r,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,t){var n,r,o,i,a=e.get(["label","position"]),s=e.get("orient"),l=function(e,t){return ph(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}(e,t),u={horizontal:"center",vertical:(n=null==a||"auto"===a?"horizontal"===s?l.y+l.height/2<t.getHeight()/2?"-":"+":l.x+l.width/2<t.getWidth()/2?"+":"-":Y(a)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][a]:a)>=0||"+"===n?"left":"right"},c={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:gz/2},h="vertical"===s?l.height:l.width,p=e.getModel("controlStyle"),f=p.get("show",!0),g=f?p.get("itemSize"):0,m=f?p.get("itemGap"):0,v=g+m,y=e.get(["label","rotate"])||0;y=y*gz/180;var b=p.get("position",!0),x=f&&p.get("showPlayBtn",!0),_=f&&p.get("showPrevBtn",!0),w=f&&p.get("showNextBtn",!0),S=0,C=h;"left"===b||"bottom"===b?(x&&(r=[0,0],S+=v),_&&(o=[S,0],S+=v),w&&(i=[C-g,0],C-=v)):(x&&(r=[C-g,0],C-=v),_&&(o=[0,0],S+=v),w&&(i=[C-g,0],C-=v));var M=[S,C];return e.get("inverse")&&M.reverse(),{viewRect:l,mainLength:h,orient:s,rotation:d[s],labelRotation:y,labelPosOpt:n,labelAlign:e.get(["label","align"])||u[s],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||c[s],playPosition:r,prevBtnPosition:o,nextBtnPosition:i,axisExtent:M,controlSize:g,controlGap:m}},t.prototype._position=function(e,t){var n=this._mainGroup,r=this._labelGroup,o=e.viewRect;if("vertical"===e.orient){var i=[1,0,0,1,0,0],a=o.x,s=o.y+o.height;_t(i,i,[-a,-s]),wt(i,i,-gz/2),_t(i,i,[a,s]),(o=o.clone()).applyTransform(i)}var l=m(o),u=m(n.getBoundingRect()),c=m(r.getBoundingRect()),d=[n.x,n.y],h=[r.x,r.y];h[0]=d[0]=l[0][0];var p,f=e.labelPosOpt;function g(e){e.originX=l[0][0]-e.x,e.originY=l[1][0]-e.y}function m(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function v(e,t,n,r,o){e[r]+=n[r][o]-t[r][o]}null==f||Y(f)?(v(d,u,l,1,p="+"===f?0:1),v(h,c,l,1,1-p)):(v(d,u,l,1,p=f>=0?0:1),h[1]=d[1]+f),n.setPosition(d),r.setPosition(h),n.rotation=r.rotation=e.rotation,g(n),g(r)},t.prototype._createAxis=function(e,t){var n=t.getData(),r=t.get("axisType"),o=function(e,t){if(t=t||e.get("type"))switch(t){case"category":return new db({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new kb({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new pb}}(t,r);o.getTicks=function(){return n.mapArray(["value"],function(e){return{value:e}})};var i=n.getDataExtent("value");o.setExtent(i[0],i[1]),o.calcNiceTicks();var a=new fz("value",o,e.axisExtent,r);return a.model=t,a},t.prototype._createGroup=function(e){var t=this[e]=new Po;return this.group.add(t),t},t.prototype._renderAxisLine=function(e,t,n,r){var o=n.getExtent();if(r.get(["lineStyle","show"])){var i=new Ou({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:A({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});t.add(i);var a=this._progressLine=new Ou({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:D({lineCap:"round",lineWidth:i.style.lineWidth},r.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});t.add(a)}},t.prototype._renderAxisTick=function(e,t,n,r){var o=this,i=r.getData(),a=n.scale.getTicks();this._tickSymbols=[],O(a,function(e){var a=n.dataToCoord(e.value),s=i.getItemModel(e.value),l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["progress","itemStyle"]),d={x:a,y:0,onclick:W(o._changeTimeline,o,e.value)},h=yz(s,l,t,d);h.ensureState("emphasis").style=u.getItemStyle(),h.ensureState("progress").style=c.getItemStyle(),Nl(h);var p=Us(h);s.get("tooltip")?(p.dataIndex=e.value,p.dataModel=r):p.dataIndex=p.dataModel=null,o._tickSymbols.push(h)})},t.prototype._renderAxisLabel=function(e,t,n,r){var o=this;if(n.getLabelModel().get("show")){var i=r.getData(),a=n.getViewLabels();this._tickLabels=[],O(a,function(r){var a=r.tickValue,s=i.getItemModel(a),l=s.getModel("label"),u=s.getModel(["emphasis","label"]),c=s.getModel(["progress","label"]),d=n.dataToCoord(r.tickValue),h=new Ps({x:d,y:0,rotation:e.labelRotation-e.rotation,onclick:W(o._changeTimeline,o,a),silent:!1,style:Uc(l,{text:r.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});h.ensureState("emphasis").style=Uc(u),h.ensureState("progress").style=Uc(c),t.add(h),Nl(h),mz(h).dataIndex=a,o._tickLabels.push(h)})}},t.prototype._renderControl=function(e,t,n,r){var o=e.controlSize,i=e.rotation,a=r.getModel("controlStyle").getItemStyle(),s=r.getModel(["emphasis","controlStyle"]).getItemStyle(),l=r.getPlayState(),u=r.get("inverse",!0);function c(e,n,l,u){if(e){var c=bo(oe(r.get(["controlStyle",n+"BtnSize"]),o),o),d=function(e,t,n,r){var o=r.style,i=Pc(e.get(["controlStyle",t]),r||{},new Ot(n[0],n[1],n[2],n[3]));return o&&i.setStyle(o),i}(r,n+"Icon",[0,-c/2,c,c],{x:e[0],y:e[1],originX:o/2,originY:0,rotation:u?-i:0,rectHover:!0,style:a,onclick:l});d.ensureState("emphasis").style=s,t.add(d),Nl(d)}}c(e.nextBtnPosition,"next",W(this._changeTimeline,this,u?"-":"+")),c(e.prevBtnPosition,"prev",W(this._changeTimeline,this,u?"+":"-")),c(e.playPosition,l?"stop":"play",W(this._handlePlayClick,this,!l),!0)},t.prototype._renderCurrentPointer=function(e,t,n,r){var o=r.getData(),i=r.getCurrentIndex(),a=o.getItemModel(i).getModel("checkpointStyle"),s=this,l={onCreate:function(e){e.draggable=!0,e.drift=W(s._handlePointerDrag,s),e.ondragend=W(s._handlePointerDragend,s),bz(e,s._progressLine,i,n,r,!0)},onUpdate:function(e){bz(e,s._progressLine,i,n,r)}};this._currentPointer=yz(a,a,this._mainGroup,{},this._currentPointer,l)},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,t){var n=this._toAxisCoord(e)[0],r=Ho(this._axis.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=n,o.dirty());var i=this._findNearestTick(n),a=this.model;(t||i!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(i)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var t=e.model;e._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){return Mc(e,this._mainGroup.getLocalTransform(),!0)},t.prototype._findNearestTick=function(e){var t,n=this.model.getData(),r=1/0,o=this._axis;return n.each(["value"],function(n,i){var a=o.dataToCoord(n),s=Math.abs(a-e);s<r&&(r=s,t=i)}),t},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),t=this._tickSymbols,n=this._tickLabels;if(t)for(var r=0;r<t.length;r++)t&&t[r]&&t[r].toggleState("progress",r<e);if(n)for(r=0;r<n.length;r++)n&&n[r]&&n[r].toggleState("progress",mz(n[r]).dataIndex<=e)},t.type="timeline.slider",t}(pz);function yz(e,t,n,r,o,i){var a=t.get("color");o?(o.setColor(a),n.add(o),i&&i.onUpdate(o)):((o=Cm(e.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(o),i&&i.onCreate(o));var s=t.getItemStyle(["color"]);o.setStyle(s),r=k({rectHover:!0,z2:100},r,!0);var l=Mm(e.get("symbolSize"));r.scaleX=l[0]/2,r.scaleY=l[1]/2;var u=Tm(e.get("symbolOffset"),l);u&&(r.x=(r.x||0)+u[0],r.y=(r.y||0)+u[1]);var c=e.get("symbolRotate");return r.rotation=(c||0)*Math.PI/180||0,o.attr(r),o.updateTransform(),o}function bz(e,t,n,r,o,i){if(!e.dragging){var a=o.getModel("checkpointStyle"),s=r.dataToCoord(o.getData().get("value",n));if(i||!a.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function xz(e){var t=e&&e.timeline;U(t)||(t=t?[t]:[]),O(t,function(e){e&&function(e){var t=e.type,n={number:"value",time:"time"};if(n[t]&&(e.axisType=n[t],delete e.type),_z(e),wz(e,"controlPosition")){var r=e.controlStyle||(e.controlStyle={});wz(r,"position")||(r.position=e.controlPosition),"none"!==r.position||wz(r,"show")||(r.show=!1,delete r.position),delete e.controlPosition}O(e.data||[],function(e){Z(e)&&!U(e)&&(!wz(e,"value")&&wz(e,"name")&&(e.value=e.name),_z(e))})}(e)})}function _z(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},o=r.normal||(r.normal={}),i={normal:1,emphasis:1};O(r,function(e,t){i[t]||wz(o,t)||(o[t]=e)}),n.label&&!wz(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function wz(e,t){return e.hasOwnProperty(t)}function Sz(e,t){if(!e)return!1;for(var n=U(e)?e:[e],r=0;r<n.length;r++)if(n[r]&&n[r][t])return!0;return!1}function Cz(e){pi(e,"label",["show"])}var Mz=Ci(),Tz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return n(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(o.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,t){this._mergeOption(e,t,!1,!1)},t.prototype._mergeOption=function(e,t,n,r){var o=this.mainType;n||t.eachSeries(function(e){var n=e.get(this.mainType,!0),i=Mz(e)[o];n&&n.data?(i?i._mergeOption(n,t,!0):(r&&Cz(n),O(n.data,function(e){e instanceof Array?(Cz(e[0]),Cz(e[1])):Cz(e)}),A(i=this.createMarkerModelFromSeries(n,this,t),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),i.__hostSeries=e),Mz(e)[o]=i):Mz(e)[o]=null},this)},t.prototype.formatTooltip=function(e,t,n){var r=this.getData(),o=this.getRawValue(e),i=r.getName(e);return zf("section",{header:this.name,blocks:[zf("nameValue",{name:i,value:o,noName:!i,noValue:null==o})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.getMarkerModelFromSeries=function(e,t){return Mz(e)[t]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(xh);R(Tz,Jp.prototype);var kz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(Tz);function Iz(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Az(e,t,n,r,o,i){var a=[],s=Ky(t,r)?t.getCalculationInfo("stackResultDimension"):r,l=Ez(t,s,e),u=t.indicesOfNearest(s,l)[0];a[o]=t.get(n,u),a[i]=t.get(s,u);var c=t.get(r,u),d=Wo(t.get(r,u));return(d=Math.min(d,20))>=0&&(a[i]=+a[i].toFixed(d)),[a,c]}var Dz={min:G(Az,"min"),max:G(Az,"max"),average:G(Az,"average"),median:G(Az,"median")};function Pz(e,t){if(t){var n=e.getData(),r=e.coordinateSystem,o=r&&r.dimensions;if(!function(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}(t)&&!U(t.coord)&&U(o)){var i=Lz(t,n,r,e);if((t=T(t)).type&&Dz[t.type]&&i.baseAxis&&i.valueAxis){var a=L(o,i.baseAxis.dim),s=L(o,i.valueAxis.dim),l=Dz[t.type](n,i.baseDataDim,i.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else t.coord=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis]}if(null!=t.coord&&U(o))for(var u=t.coord,c=0;c<2;c++)Dz[u[c]]&&(u[c]=Ez(n,n.mapDimension(o[c]),u[c]));else t.coord=[];return t}}function Lz(e,t,n,r){var o={};return null!=e.valueIndex||null!=e.valueDim?(o.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,o.valueAxis=n.getAxis(function(e,t){var n=e.getData().getDimensionInfo(t);return n&&n.coordDim}(r,o.valueDataDim)),o.baseAxis=n.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=r.getBaseAxis(),o.valueAxis=n.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function Nz(e,t){return!(e&&e.containData&&t.coord&&!Iz(t))||e.containData(t.coord)}function Rz(e,t){return e?function(e,n,r,o){return rf(o<2?e.coord&&e.coord[o]:e.value,t[o])}:function(e,n,r,o){return rf(e.value,t[o])}}function Ez(e,t,n){if("average"===n){var r=0,o=0;return e.each(t,function(e,t){isNaN(e)||(r+=e,o++)}),r/o}return"median"===n?e.getMedian(t):e.getDataExtent(t)["max"===n?1:0]}var Oz=Ci(),Bz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.init=function(){this.markerGroupMap=me()},t.prototype.render=function(e,t,n){var r=this,o=this.markerGroupMap;o.each(function(e){Oz(e).keep=!1}),t.eachSeries(function(e){var o=Tz.getMarkerModelFromSeries(e,r.type);o&&r.renderSeries(e,o,t,n)}),o.each(function(e){!Oz(e).keep&&r.group.remove(e.group)})},t.prototype.markKeep=function(e){Oz(e).keep=!0},t.prototype.toggleBlurSeries=function(e,t){var n=this;O(e,function(e){var r=Tz.getMarkerModelFromSeries(e,n.type);r&&r.getData().eachItemGraphicEl(function(e){e&&(t?wl(e):Sl(e))})})},t.type="marker",t}(lg);function zz(e,t,n){var r=t.coordinateSystem;e.each(function(o){var i,a=e.getItemModel(o),s=Fo(a.get("x"),n.getWidth()),l=Fo(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(t.getMarkerPosition)i=t.getMarkerPosition(e.getValues(e.dimensions,o));else if(r){var u=e.get(r.dimensions[0],o),c=e.get(r.dimensions[1],o);i=r.dataToPoint([u,c])}}else i=[s,l];isNaN(s)||(i[0]=s),isNaN(l)||(i[1]=l),e.setItemLayout(o,i)})}var Fz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries(function(e){var t=Tz.getMarkerModelFromSeries(e,"markPoint");t&&(zz(t.getData(),e,n),this.markerGroupMap.get(e.id).updateLayout())},this)},t.prototype.renderSeries=function(e,t,n,r){var o=e.coordinateSystem,i=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(i)||s.set(i,new Hw),u=function(e,t,n){var r;r=e?B(e&&e.dimensions,function(e){return A(A({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})}):[{name:"value",type:"float"}];var o=new Uy(r,n),i=B(n.get("data"),G(Pz,t));e&&(i=F(i,G(Nz,e)));var a=Rz(!!e,r);return o.initData(i,null,a),o}(o,e,t);t.setData(u),zz(t.getData(),e,r),u.each(function(e){var n=u.getItemModel(e),r=n.getShallow("symbol"),o=n.getShallow("symbolSize"),i=n.getShallow("symbolRotate"),s=n.getShallow("symbolOffset"),l=n.getShallow("symbolKeepAspect");if(j(r)||j(o)||j(i)||j(s)){var c=t.getRawValue(e),d=t.getDataParams(e);j(r)&&(r=r(c,d)),j(o)&&(o=o(c,d)),j(i)&&(i=i(c,d)),j(s)&&(s=s(c,d))}var h=n.getModel("itemStyle").getItemStyle(),p=lm(a,"color");h.fill||(h.fill=p),u.setItemVisual(e,{symbol:r,symbolSize:o,symbolRotate:i,symbolOffset:s,symbolKeepAspect:l,style:h})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(e){e.traverse(function(e){Us(e).dataModel=t})}),this.markKeep(l),l.group.silent=t.get("silent")||e.get("silent")},t.type="markPoint",t}(Bz),Vz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Tz),Hz=Ci(),Wz=function(e,t,n,r){var o,i=e.getData();if(U(r))o=r;else{var a=r.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=r.xAxis||null!=r.yAxis){var s=void 0,l=void 0;if(null!=r.yAxis||null!=r.xAxis)s=t.getAxis(null!=r.yAxis?"y":"x"),l=re(r.yAxis,r.xAxis);else{var u=Lz(r,i,t,e);s=u.valueAxis,l=Ez(i,Jy(i,u.valueDataDim),a)}var c="x"===s.dim?0:1,d=1-c,h=T(r),p={coord:[]};h.type=null,h.coord=[],h.coord[d]=-1/0,p.coord[d]=1/0;var f=n.get("precision");f>=0&&X(l)&&(l=+l.toFixed(Math.min(f,20))),h.coord[c]=p.coord[c]=l,o=[h,p,{type:a,valueIndex:r.valueIndex,value:l}]}else o=[]}var g=[Pz(e,o[0]),Pz(e,o[1]),A({},o[2])];return g[2].type=g[2].type||null,k(g[2],g[0]),k(g[2],g[1]),g};function Gz(e){return!isNaN(e)&&!isFinite(e)}function Uz(e,t,n,r){var o=1-e,i=r.dimensions[e];return Gz(t[o])&&Gz(n[o])&&t[e]===n[e]&&r.getAxis(i).containData(t[e])}function jz(e,t){if("cartesian2d"===e.type){var n=t[0].coord,r=t[1].coord;if(n&&r&&(Uz(1,n,r,e)||Uz(0,n,r,e)))return!0}return Nz(e,t[0])&&Nz(e,t[1])}function Yz(e,t,n,r,o){var i,a=r.coordinateSystem,s=e.getItemModel(t),l=Fo(s.get("x"),o.getWidth()),u=Fo(s.get("y"),o.getHeight());if(isNaN(l)||isNaN(u)){if(r.getMarkerPosition)i=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,d=e.get(c[0],t),h=e.get(c[1],t);i=a.dataToPoint([d,h])}if(tS(a,"cartesian2d")){var p=a.getAxis("x"),f=a.getAxis("y");c=a.dimensions,Gz(e.get(c[0],t))?i[0]=p.toGlobalCoord(p.getExtent()[n?0:1]):Gz(e.get(c[1],t))&&(i[1]=f.toGlobalCoord(f.getExtent()[n?0:1]))}isNaN(l)||(i[0]=l),isNaN(u)||(i[1]=u)}else i=[l,u];e.setItemLayout(t,i)}var qz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries(function(e){var t=Tz.getMarkerModelFromSeries(e,"markLine");if(t){var r=t.getData(),o=Hz(t).from,i=Hz(t).to;o.each(function(t){Yz(o,t,!0,e,n),Yz(i,t,!1,e,n)}),r.each(function(e){r.setItemLayout(e,[o.getItemLayout(e),i.getItemLayout(e)])}),this.markerGroupMap.get(e.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,t,n,r){var o=e.coordinateSystem,i=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(i)||s.set(i,new aA);this.group.add(l.group);var u=function(e,t,n){var r;r=e?B(e&&e.dimensions,function(e){return A(A({},t.getData().getDimensionInfo(t.getData().mapDimension(e))||{}),{name:e,ordinalMeta:null})}):[{name:"value",type:"float"}];var o=new Uy(r,n),i=new Uy(r,n),a=new Uy([],n),s=B(n.get("data"),G(Wz,t,e,n));e&&(s=F(s,G(jz,e)));var l=Rz(!!e,r);return o.initData(B(s,function(e){return e[0]}),null,l),i.initData(B(s,function(e){return e[1]}),null,l),a.initData(B(s,function(e){return e[2]})),a.hasItemOption=!0,{from:o,to:i,line:a}}(o,e,t),c=u.from,d=u.to,h=u.line;Hz(t).from=c,Hz(t).to=d,t.setData(h);var p=t.get("symbol"),f=t.get("symbolSize"),g=t.get("symbolRotate"),m=t.get("symbolOffset");function v(t,n,o){var i=t.getItemModel(n);Yz(t,n,o,e,r);var s=i.getModel("itemStyle").getItemStyle();null==s.fill&&(s.fill=lm(a,"color")),t.setItemVisual(n,{symbolKeepAspect:i.get("symbolKeepAspect"),symbolOffset:oe(i.get("symbolOffset",!0),m[o?0:1]),symbolRotate:oe(i.get("symbolRotate",!0),g[o?0:1]),symbolSize:oe(i.get("symbolSize"),f[o?0:1]),symbol:oe(i.get("symbol",!0),p[o?0:1]),style:s})}U(p)||(p=[p,p]),U(f)||(f=[f,f]),U(g)||(g=[g,g]),U(m)||(m=[m,m]),u.from.each(function(e){v(c,e,!0),v(d,e,!1)}),h.each(function(e){var t=h.getItemModel(e).getModel("lineStyle").getLineStyle();h.setItemLayout(e,[c.getItemLayout(e),d.getItemLayout(e)]),null==t.stroke&&(t.stroke=c.getItemVisual(e,"style").fill),h.setItemVisual(e,{fromSymbolKeepAspect:c.getItemVisual(e,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(e,"symbolOffset"),fromSymbolRotate:c.getItemVisual(e,"symbolRotate"),fromSymbolSize:c.getItemVisual(e,"symbolSize"),fromSymbol:c.getItemVisual(e,"symbol"),toSymbolKeepAspect:d.getItemVisual(e,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(e,"symbolOffset"),toSymbolRotate:d.getItemVisual(e,"symbolRotate"),toSymbolSize:d.getItemVisual(e,"symbolSize"),toSymbol:d.getItemVisual(e,"symbol"),style:t})}),l.updateData(h),u.line.eachItemGraphicEl(function(e){Us(e).dataModel=t,e.traverse(function(e){Us(e).dataModel=t})}),this.markKeep(l),l.group.silent=t.get("silent")||e.get("silent")},t.type="markLine",t}(Bz),Xz=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.createMarkerModelFromSeries=function(e,n,r){return new t(e,n,r)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Tz),Zz=Ci(),$z=function(e,t,n,r){var o=r[0],i=r[1];if(o&&i){var a=Pz(e,o),s=Pz(e,i),l=a.coord,u=s.coord;l[0]=re(l[0],-1/0),l[1]=re(l[1],-1/0),u[0]=re(u[0],1/0),u[1]=re(u[1],1/0);var c=I([{},a,s]);return c.coord=[a.coord,s.coord],c.x0=a.x,c.y0=a.y,c.x1=s.x,c.y1=s.y,c}};function Kz(e){return!isNaN(e)&&!isFinite(e)}function Jz(e,t,n,r){var o=1-e;return Kz(t[o])&&Kz(n[o])}function Qz(e,t){var n=t.coord[0],r=t.coord[1],o={coord:n,x:t.x0,y:t.y0},i={coord:r,x:t.x1,y:t.y1};return tS(e,"cartesian2d")?!(!n||!r||!Jz(1,n,r)&&!Jz(0,n,r))||function(e,t,n){return!(e&&e.containZone&&t.coord&&n.coord&&!Iz(t)&&!Iz(n))||e.containZone(t.coord,n.coord)}(e,o,i):Nz(e,o)||Nz(e,i)}function eF(e,t,n,r,o){var i,a=r.coordinateSystem,s=e.getItemModel(t),l=Fo(s.get(n[0]),o.getWidth()),u=Fo(s.get(n[1]),o.getHeight());if(isNaN(l)||isNaN(u)){if(r.getMarkerPosition){var c=e.getValues(["x0","y0"],t),d=e.getValues(["x1","y1"],t),h=a.clampData(c),p=a.clampData(d),f=[];"x0"===n[0]?f[0]=h[0]>p[0]?d[0]:c[0]:f[0]=h[0]>p[0]?c[0]:d[0],"y0"===n[1]?f[1]=h[1]>p[1]?d[1]:c[1]:f[1]=h[1]>p[1]?c[1]:d[1],i=r.getMarkerPosition(f,n,!0)}else{var g=[y=e.get(n[0],t),b=e.get(n[1],t)];a.clampData&&a.clampData(g,g),i=a.dataToPoint(g,!0)}if(tS(a,"cartesian2d")){var m=a.getAxis("x"),v=a.getAxis("y"),y=e.get(n[0],t),b=e.get(n[1],t);Kz(y)?i[0]=m.toGlobalCoord(m.getExtent()["x0"===n[0]?0:1]):Kz(b)&&(i[1]=v.toGlobalCoord(v.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(i[0]=l),isNaN(u)||(i[1]=u)}else i=[l,u];return i}var tF=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],nF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.updateTransform=function(e,t,n){t.eachSeries(function(e){var t=Tz.getMarkerModelFromSeries(e,"markArea");if(t){var r=t.getData();r.each(function(t){var o=B(tF,function(o){return eF(r,t,o,e,n)});r.setItemLayout(t,o),r.getItemGraphicEl(t).setShape("points",o)})}},this)},t.prototype.renderSeries=function(e,t,n,r){var o=e.coordinateSystem,i=e.id,a=e.getData(),s=this.markerGroupMap,l=s.get(i)||s.set(i,{group:new Po});this.group.add(l.group),this.markKeep(l);var u=function(e,t,n){var r,o;if(e){var i=B(e&&e.dimensions,function(e){var n=t.getData();return A(A({},n.getDimensionInfo(n.mapDimension(e))||{}),{name:e,ordinalMeta:null})});o=B(["x0","y0","x1","y1"],function(e,t){return{name:e,type:i[t%2].type}}),r=new Uy(o,n)}else r=new Uy(o=[{name:"value",type:"float"}],n);var a=B(n.get("data"),G($z,t,e,n));e&&(a=F(a,G(Qz,e)));var s=e?function(e,t,n,r){return rf(e.coord[Math.floor(r/2)][r%2],o[r])}:function(e,t,n,r){return rf(e.value,o[r])};return r.initData(a,null,s),r.hasItemOption=!0,r}(o,e,t);t.setData(u),u.each(function(t){var n=B(tF,function(n){return eF(u,t,n,e,r)}),i=o.getAxis("x").scale,s=o.getAxis("y").scale,l=i.getExtent(),c=s.getExtent(),d=[i.parse(u.get("x0",t)),i.parse(u.get("x1",t))],h=[s.parse(u.get("y0",t)),s.parse(u.get("y1",t))];Ho(d),Ho(h);var p=!!(l[0]>d[1]||l[1]<d[0]||c[0]>h[1]||c[1]<h[0]);u.setItemLayout(t,{points:n,allClipped:p});var f=u.getItemModel(t).getModel("itemStyle").getItemStyle(),g=lm(a,"color");f.fill||(f.fill=g,Y(f.fill)&&(f.fill=er(f.fill,.4))),f.stroke||(f.stroke=g),u.setItemVisual(t,"style",f)}),u.diff(Zz(l).data).add(function(e){var t=u.getItemLayout(e);if(!t.allClipped){var n=new Pu({shape:{points:t.points}});u.setItemGraphicEl(e,n),l.group.add(n)}}).update(function(e,n){var r=Zz(l).data.getItemGraphicEl(n),o=u.getItemLayout(e);o.allClipped?r&&l.group.remove(r):(r?rc(r,{shape:{points:o.points}},t,e):r=new Pu({shape:{points:o.points}}),u.setItemGraphicEl(e,r),l.group.add(r))}).remove(function(e){var t=Zz(l).data.getItemGraphicEl(e);l.group.remove(t)}).execute(),u.eachItemGraphicEl(function(e,n){var r=u.getItemModel(n),o=u.getItemVisual(n,"style");e.useStyle(u.getItemVisual(n,"style")),Wc(e,Gc(r),{labelFetcher:t,labelDataIndex:n,defaultText:u.getName(n)||"",inheritColor:Y(o.fill)?er(o.fill,1):"#000"}),zl(e,r),Rl(e,null,null,r.get(["emphasis","disabled"])),Us(e).dataModel=t}),Zz(l).data=u,l.group.silent=t.get("silent")||e.get("silent")},t.type="markArea",t}(Bz),rF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return n(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),U(t)&&O(t,function(e,r){Y(e)&&(e={type:e}),t[r]=k(e,function(e,t){return"all"===t?{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,e.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var r=e[n].get("name");if(this.isSelected(r)){this.select(r),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries(function(r){var o,i=r.name;if(n.push(i),r.legendVisualProvider){var a=r.legendVisualProvider.getAllNames();e.isSeriesFiltered(r)||(n=n.concat(a)),a.length?t=t.concat(a):o=!0}else o=!0;o&&_i(r)&&t.push(r.name)}),this._availableNames=n;var r=this.get("data")||t,o=me(),i=B(r,function(e){return(Y(e)||X(e))&&(e={name:e}),o.get(e.name)?null:(o.set(e.name,!0),new hd(e,this,this.ecModel))},this);this._data=F(i,function(e){return!!e})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&O(this._data,function(e){t[e.get("name")]=!1}),t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;O(e,function(e){t[e.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;O(e,function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]})},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&L(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(xh),oF=G,iF=O,aF=Po,sF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return n(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new aF),this.group.add(this._selectorGroup=new aF),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),i=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===i?"right":"left");var a=e.get("selector",!0),s=e.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===i?"end":"start"),this.renderInner(o,e,t,n,a,i,s);var l=e.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=e.get("padding"),d=ph(l,u,c),h=this.layoutInner(e,o,d,r,a,s),p=ph(D({width:h.width,height:h.height},l),u,c);this.group.x=p.x-h.x,this.group.y=p.y-h.y,this.group.markRedraw(),this.group.add(this._backgroundEl=zO(h,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,r,o,i,a){var s=this.getContentGroup(),l=me(),u=t.get("selectedMode"),c=[];n.eachRawSeries(function(e){!e.get("legendHoverLink")&&c.push(e.id)}),iF(t.getData(),function(o,i){var a=o.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var d=new aF;return d.newline=!0,void s.add(d)}var h=n.getSeriesByName(a)[0];if(!l.get(a))if(h){var p=h.getData(),f=p.getVisual("legendLineStyle")||{},g=p.getVisual("legendIcon"),m=p.getVisual("style");this._createItem(h,a,i,o,t,e,f,m,g,u,r).on("click",oF(lF,a,null,r,c)).on("mouseover",oF(cF,h.name,null,r,c)).on("mouseout",oF(dF,h.name,null,r,c)),l.set(a,!0)}else n.eachRawSeries(function(n){if(!l.get(a)&&n.legendVisualProvider){var s=n.legendVisualProvider;if(!s.containName(a))return;var d=s.indexOfName(a),h=s.getItemVisual(d,"style"),p=s.getItemVisual(d,"legendIcon"),f=Yn(h.fill);f&&0===f[3]&&(f[3]=.2,h=A(A({},h),{fill:tr(f,"rgba")})),this._createItem(n,a,i,o,t,e,{},h,p,u,r).on("click",oF(lF,null,a,r,c)).on("mouseover",oF(cF,null,a,r,c)).on("mouseout",oF(dF,null,a,r,c)),l.set(a,!0)}},this)},this),o&&this._createSelector(o,t,r,i,a)},t.prototype._createSelector=function(e,t,n,r,o){var i=this.getSelectorGroup();iF(e,function(e){var r=e.type,o=new Ps({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===r?"legendAllSelect":"legendInverseSelect"})}});i.add(o),Wc(o,{normal:t.getModel("selectorLabel"),emphasis:t.getModel(["emphasis","selectorLabel"])},{defaultText:e.title}),Nl(o)})},t.prototype._createItem=function(e,t,n,r,o,i,a,s,l,u,c){var d=e.visualDrawType,h=o.get("itemWidth"),p=o.get("itemHeight"),f=o.isSelected(t),g=r.get("symbolRotate"),m=r.get("symbolKeepAspect"),v=r.get("icon"),y=function(e,t,n,r,o,i,a){function s(e,t){"auto"===e.lineWidth&&(e.lineWidth=t.lineWidth>0?2:0),iF(e,function(n,r){"inherit"===e[r]&&(e[r]=t[r])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=0===e.lastIndexOf("empty",0)?"fill":"stroke",d=l.getShallow("decal");u.decal=d&&"inherit"!==d?Km(d,a):r.decal,"inherit"===u.fill&&(u.fill=r[o]),"inherit"===u.stroke&&(u.stroke=r[c]),"inherit"===u.opacity&&(u.opacity=("fill"===o?r:n).opacity),s(u,r);var h=t.getModel("lineStyle"),p=h.getLineStyle();if(s(p,n),"auto"===u.fill&&(u.fill=r.fill),"auto"===u.stroke&&(u.stroke=r.fill),"auto"===p.stroke&&(p.stroke=r.fill),!i){var f=t.get("inactiveBorderWidth"),g=u[c];u.lineWidth="auto"===f?r.lineWidth>0&&g?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),p.stroke=h.get("inactiveColor"),p.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:p}}(l=v||l||"roundRect",r,a,s,d,f,c),b=new aF,x=r.getModel("textStyle");if(!j(e.getLegendIcon)||v&&"inherit"!==v){var _="inherit"===v&&e.getData().getVisual("symbol")?"inherit"===g?e.getData().getVisual("symbolRotate"):g:0;b.add(function(e){var t=e.icon||"roundRect",n=Cm(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}({itemWidth:h,itemHeight:p,icon:l,iconRotate:_,itemStyle:y.itemStyle,lineStyle:y.lineStyle,symbolKeepAspect:m}))}else b.add(e.getLegendIcon({itemWidth:h,itemHeight:p,icon:l,iconRotate:g,itemStyle:y.itemStyle,lineStyle:y.lineStyle,symbolKeepAspect:m}));var w="left"===i?h+5:-5,S=i,C=o.get("formatter"),M=t;Y(C)&&C?M=C.replace("{name}",null!=t?t:""):j(C)&&(M=C(t));var T=f?x.getTextColor():r.get("inactiveColor");b.add(new Ps({style:Uc(x,{text:M,x:w,y:p/2,fill:T,align:S,verticalAlign:"middle"},{inheritColor:T})}));var k=new Is({shape:b.getBoundingRect(),invisible:!0}),I=r.getModel("tooltip");return I.get("show")&&Ec({el:k,componentModel:o,itemName:t,itemTooltipOption:I.option}),b.add(k),b.eachChild(function(e){e.silent=!0}),k.silent=!u,this.getContentGroup().add(b),Nl(b),b.__legendDataIndex=n,b},t.prototype.layoutInner=function(e,t,n,r,o,i){var a=this.getContentGroup(),s=this.getSelectorGroup();hh(e.get("orient"),a,e.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),o){hh("horizontal",s,e.get("selectorItemGap",!0));var c=s.getBoundingRect(),d=[-c.x,-c.y],h=e.get("selectorButtonGap",!0),p=e.getOrient().index,f=0===p?"width":"height",g=0===p?"height":"width",m=0===p?"y":"x";"end"===i?d[p]+=l[f]+h:u[p]+=c[f]+h,d[1-p]+=l[g]/2-c[g]/2,s.x=d[0],s.y=d[1],a.x=u[0],a.y=u[1];var v={x:0,y:0};return v[f]=l[f]+h+c[f],v[g]=Math.max(l[g],c[g]),v[m]=Math.min(0,c[m]+d[1-p]),v}return a.x=u[0],a.y=u[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(lg);function lF(e,t,n,r){dF(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),cF(e,t,n,r)}function uF(e){for(var t,n=e.getZr().storage.getDisplayList(),r=0,o=n.length;r<o&&!(t=n[r].states.emphasis);)r++;return t&&t.hoverLayer}function cF(e,t,n,r){uF(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function dF(e,t,n,r){uF(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function hF(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0})}function pF(e,t,n){var r,o={},i="toggleSelected"===e;return n.eachComponent("legend",function(n){i&&null!=r?n[r?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?n[e]():(n[e](t.name),r=n.isSelected(t.name)),O(n.getData(),function(e){var t=e.get("name");if("\n"!==t&&""!==t){var r=n.isSelected(t);o.hasOwnProperty(t)?o[t]=o[t]&&r:o[t]=r}})}),"allSelect"===e||"inverseSelect"===e?{selected:o}:{name:t.name,selected:o}}function fF(e){e.registerComponentModel(rF),e.registerComponentView(sF),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,hF),e.registerSubTypeDefaulter("legend",function(){return"plain"}),function(e){e.registerAction("legendToggleSelect","legendselectchanged",G(pF,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",G(pF,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",G(pF,"inverseSelect")),e.registerAction("legendSelect","legendselected",G(pF,"select")),e.registerAction("legendUnSelect","legendunselected",G(pF,"unSelect"))}(e)}var gF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,r){var o=vh(t);e.prototype.init.call(this,t,n,r),mF(this,t,o)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),mF(this,this.option,t)},t.type="legend.scroll",t.defaultOption=gd(rF.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(rF);function mF(e,t,n){var r=[1,1];r[e.getOrient().index]=0,mh(t,n,{type:"box",ignoreSize:!!r})}var vF=Po,yF=["width","height"],bF=["x","y"],xF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return n(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new vF),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new vF)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,r,o,i,a,s){var l=this;e.prototype.renderInner.call(this,t,n,r,o,i,a,s);var u=this._controllerGroup,c=n.get("pageIconSize",!0),d=U(c)?c:[c,c];p("pagePrev",0);var h=n.getModel("pageTextStyle");function p(e,t){var r=e+"DataIndex",i=Pc(n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:W(l._pageGo,l,r,n,o)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});i.name=e,u.add(i)}u.add(new Ps({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},t.prototype.layoutInner=function(e,t,n,r,o,i){var a=this.getSelectorGroup(),s=e.getOrient().index,l=yF[s],u=bF[s],c=yF[1-s],d=bF[1-s];o&&hh("horizontal",a,e.get("selectorItemGap",!0));var h=e.get("selectorButtonGap",!0),p=a.getBoundingRect(),f=[-p.x,-p.y],g=T(n);o&&(g[l]=n[l]-p[l]-h);var m=this._layoutContentAndController(e,r,g,s,l,c,d,u);if(o){if("end"===i)f[s]+=m[l]+h;else{var v=p[l]+h;f[s]-=v,m[u]-=v}m[l]+=p[l]+h,f[1-s]+=m[d]+m[c]/2-p[c]/2,m[c]=Math.max(m[c],p[c]),m[d]=Math.min(m[d],p[d]+f[1-s]),a.x=f[0],a.y=f[1],a.markRedraw()}return m},t.prototype._layoutContentAndController=function(e,t,n,r,o,i,a,s){var l=this.getContentGroup(),u=this._containerGroup,c=this._controllerGroup;hh(e.get("orient"),l,e.get("itemGap"),r?n.width:null,r?null:n.height),hh("horizontal",c,e.get("pageButtonItemGap",!0));var d=l.getBoundingRect(),h=c.getBoundingRect(),p=this._showController=d[o]>n[o],f=[-d.x,-d.y];t||(f[r]=l[s]);var g=[0,0],m=[-h.x,-h.y],v=oe(e.get("pageButtonGap",!0),e.get("itemGap",!0));p&&("end"===e.get("pageButtonPosition",!0)?m[r]+=n[o]-h[o]:g[r]+=h[o]+v),m[1-r]+=d[i]/2-h[i]/2,l.setPosition(f),u.setPosition(g),c.setPosition(m);var y={x:0,y:0};if(y[o]=p?n[o]:d[o],y[i]=Math.max(d[i],h[i]),y[a]=Math.min(0,h[a]+m[1-r]),u.__rectSize=n[o],p){var b={x:0,y:0};b[o]=Math.max(n[o]-h[o]-v,0),b[i]=y[i],u.setClipPath(new Is({shape:b})),u.__rectSize=b[o]}else c.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(e);return null!=x.pageIndex&&rc(l,{x:x.contentPosition[0],y:x.contentPosition[1]},p?e:null),this._updatePageInfoView(e,x),y},t.prototype._pageGo=function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;O(["pagePrev","pageNext"],function(r){var o=null!=t[r+"DataIndex"],i=n.childOfName(r);i&&(i.setStyle("fill",o?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),i.cursor=o?"pointer":"default")});var r=n.childOfName("pageText"),o=e.get("pageFormatter"),i=t.pageIndex,a=null!=i?i+1:0,s=t.pageCount;r&&o&&r.setStyle("text",Y(o)?o.replace("{current}",null==a?"":a+"").replace("{total}",null==s?"":s+""):o({current:a,total:s}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,o=e.getOrient().index,i=yF[o],a=bF[o],s=this._findTargetItemIndex(t),l=n.children(),u=l[s],c=l.length,d=c?1:0,h={contentPosition:[n.x,n.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return h;var p=y(u);h.contentPosition[o]=-p.s;for(var f=s+1,g=p,m=p,v=null;f<=c;++f)(!(v=y(l[f]))&&m.e>g.s+r||v&&!b(v,g.s))&&(g=m.i>g.i?m:v)&&(null==h.pageNextDataIndex&&(h.pageNextDataIndex=g.i),++h.pageCount),m=v;for(f=s-1,g=p,m=p,v=null;f>=-1;--f)(v=y(l[f]))&&b(m,v.s)||!(g.i<m.i)||(m=g,null==h.pagePrevDataIndex&&(h.pagePrevDataIndex=g.i),++h.pageCount,++h.pageIndex),g=v;return h;function y(e){if(e){var t=e.getBoundingRect(),n=t[a]+e[a];return{s:n,e:n+t[i],i:e.__legendDataIndex}}}function b(e,t){return e.e>=t&&e.s<=t+r}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild(function(r,o){var i=r.__legendDataIndex;null==n&&null!=i&&(n=o),i===e&&(t=o)}),null!=t?t:n):0;var t,n},t.type="legend.scroll",t}(sF);function _F(e){vy(fF),e.registerComponentModel(gF),e.registerComponentView(xF),function(e){e.registerAction("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(e){e.setScrollDataIndex(n)})})}(e)}var wF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="dataZoom.inside",t.defaultOption=gd(_O.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(_O),SF=Ci();function CF(e,t,n){SF(e).coordSysRecordMap.each(function(e){var r=e.dataZoomInfoMap.get(t.uid);r&&(r.getRange=n)})}function MF(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function TF(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function kF(e,t,n,r){return e.coordinateSystem.containPoint([n,r])}var IF=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return n(t,e),t.prototype.render=function(t,n,r){e.prototype.render.apply(this,arguments),t.noTarget()?this._clear():(this.range=t.getPercentRange(),CF(r,t,{pan:W(AF.pan,this),zoom:W(AF.zoom,this),scrollMove:W(AF.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){!function(e,t){for(var n=SF(e).coordSysRecordMap,r=n.keys(),o=0;o<r.length;o++){var i=r[o],a=n.get(i),s=a.dataZoomInfoMap;if(s){var l=t.uid;s.get(l)&&(s.removeKey(l),s.keys().length||MF(n,a))}}}(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(CO),AF={zoom:function(e,t,n,r){var o=this.range,i=o.slice(),a=e.axisModels[0];if(a){var s=PF[t](null,[r.originX,r.originY],a,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(i[1]-i[0])+i[0],u=Math.max(1/r.scale,0);i[0]=(i[0]-l)*u+l,i[1]=(i[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return QA(0,i,[0,100],0,c.minSpan,c.maxSpan),this.range=i,o[0]!==i[0]||o[1]!==i[1]?i:void 0}},pan:DF(function(e,t,n,r,o,i){var a=PF[r]([i.oldX,i.oldY],[i.newX,i.newY],t,o,n);return a.signal*(e[1]-e[0])*a.pixel/a.pixelLength}),scrollMove:DF(function(e,t,n,r,o,i){return PF[r]([0,0],[i.scrollDelta,i.scrollDelta],t,o,n).signal*(e[1]-e[0])*i.scrollDelta})};function DF(e){return function(t,n,r,o){var i=this.range,a=i.slice(),s=t.axisModels[0];if(s)return QA(e(a,s,t,n,r,o),a,[0,100],"all"),this.range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}}var PF={grid:function(e,t,n,r,o){var i=n.axis,a={},s=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===i.dim?(a.pixel=t[0]-e[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=i.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=i.inverse?-1:1),a},polar:function(e,t,n,r,o){var i=n.axis,a={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===n.mainType?(a.pixel=t[0]-e[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=i.inverse?1:-1):(a.pixel=t[1]-e[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=i.inverse?-1:1),a},singleAxis:function(e,t,n,r,o){var i=n.axis,a=o.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===i.orient?(s.pixel=t[0]-e[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=i.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=i.inverse?-1:1),s}};function LF(e){PO(e),e.registerComponentModel(wF),e.registerComponentView(IF),function(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(e,t){var n=SF(t),r=n.coordSysRecordMap||(n.coordSysRecordMap=me());r.each(function(e){e.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(e){O(bO(e).infoList,function(n){var o=n.model.uid,i=r.get(o)||r.set(o,function(e,t){var n={model:t,containsPoint:G(kF,t),dispatchAction:G(TF,e),dataZoomInfoMap:null,controller:null},r=n.controller=new _M(e.getZr());return O(["pan","zoom","scrollMove"],function(e){r.on(e,function(t){var r=[];n.dataZoomInfoMap.each(function(o){if(t.isAvailableBehavior(o.model.option)){var i=(o.getRange||{})[e],a=i&&i(o.dzReferCoordSysInfo,n.model.mainType,n.controller,t);!o.model.get("disabled",!0)&&a&&r.push({dataZoomId:o.model.id,start:a[0],end:a[1]})}}),r.length&&n.dispatchAction(r)})}),n}(t,n.model));(i.dataZoomInfoMap||(i.dataZoomInfoMap=me())).set(e.uid,{dzReferCoordSysInfo:n,model:e,getRange:null})})}),r.each(function(e){var t,n=e.controller,o=e.dataZoomInfoMap;if(o){var i=o.keys()[0];null!=i&&(t=o.get(i))}if(t){var a=function(e){var t,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return e.each(function(e){var i=e.model,a=!i.get("disabled",!0)&&(!i.get("zoomLock",!0)||"move");r[n+a]>r[n+t]&&(t=a),o=o&&i.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}(o);n.enable(a.controlType,a.opt),n.setPointerChecker(e.containsPoint),wg(e,"dispatchAction",t.model.get("throttle",!0),"fixRate")}else MF(r,e)})})}(e)}var NF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=gd(_O.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(_O),RF=Is,EF="horizontal",OF="vertical",BF=["line","bar","candlestick","scatter"],zF={easing:"cubicOut",duration:100,delay:0},FF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return n(t,e),t.prototype.init=function(e,t){this.api=t,this._onBrush=W(this._onBrush,this),this._onBrushEnd=W(this._onBrushEnd,this)},t.prototype.render=function(t,n,r,o){if(e.prototype.render.apply(this,arguments),wg(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),!1!==t.get("show")){if(t.noTarget())return this._clear(),void this.group.removeAll();o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Sg(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var t=this._displayables.sliderGroup=new Po;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,t=this.api,n=e.get("brushSelect")?7:0,r=this._findCoordRect(),o={width:t.getWidth(),height:t.getHeight()},i=this._orient===EF?{right:o.width-r.x-r.width,top:o.height-30-7-n,width:r.width,height:30}:{right:7,top:r.y,width:30,height:r.height},a=vh(e.option);O(["right","top","width","height"],function(e){"ph"===a[e]&&(a[e]=i[e])});var s=ph(a,o);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===OF&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,t=this._location,n=this._orient,r=this.dataZoomModel.getFirstTargetAxisModel(),o=r&&r.get("inverse"),i=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;i.attr(n!==EF||o?n===EF&&o?{scaleY:a?1:-1,scaleX:-1}:n!==OF||o?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var s=e.getBoundingRect([i]);e.x=t.x-s.x,e.y=t.y-s.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,t=this._size,n=this._displayables.sliderGroup,r=e.get("brushSelect");n.add(new RF({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var o=new RF({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:W(this._onClickPanel,this)}),i=this.api.getZr();r?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",i.on("mousemove",this._onBrush),i.on("mouseup",this._onBrushEnd)):(i.off("mousemove",this._onBrush),i.off("mouseup",this._onBrushEnd)),n.add(o)},t.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var t=this._size,n=this._shadowSize||[],r=e.series,o=r.getRawData(),i=r.getShadowDim&&r.getShadowDim(),a=i&&o.getDimensionInfo(i)?r.getShadowDim():e.otherDim;if(null!=a){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(o!==this._shadowData||a!==this._shadowDim||t[0]!==n[0]||t[1]!==n[1]){var u=o.getDataExtent(a),c=.3*(u[1]-u[0]);u=[u[0]-c,u[1]+c];var d,h=[0,t[1]],p=[0,t[0]],f=[[t[0],0],[0,0]],g=[],m=p[1]/(o.count()-1),v=0,y=Math.round(o.count()/t[0]);o.each([a],function(e,t){if(y>0&&t%y)v+=m;else{var n=null==e||isNaN(e)||""===e,r=n?0:zo(e,u,h,!0);n&&!d&&t?(f.push([f[f.length-1][0],0]),g.push([g[g.length-1][0],0])):!n&&d&&(f.push([v,0]),g.push([v,0])),f.push([v,r]),g.push([v,r]),v+=m,d=n}}),s=this._shadowPolygonPts=f,l=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=a,this._shadowSize=[t[0],t[1]];for(var b=this.dataZoomModel,x=0;x<3;x++){var _=w(1===x);this._displayables.sliderGroup.add(_),this._displayables.dataShadowSegs.push(_)}}}function w(e){var t=b.getModel(e?"selectedDataBackground":"dataBackground"),n=new Po,r=new Pu({shape:{points:s},segmentIgnoreThreshold:1,style:t.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),o=new Nu({shape:{points:l},segmentIgnoreThreshold:1,style:t.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(r),n.add(o),n}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,r=this.ecModel;return e.eachTargetAxis(function(o,i){O(e.getAxisProxy(o,i).getTargetSeriesModels(),function(e){if(!(n||!0!==t&&L(BF,e.get("type"))<0)){var a,s=r.getComponent(yO(o),i).axis,l=function(e){return{x:"y",y:"x",radius:"angle",angle:"radius"}[e]}(o),u=e.coordinateSystem;null!=l&&u.getOtherAxis&&(a=u.getOtherAxis(s).inverse),l=e.getData().mapDimension(l),n={thisAxis:s,series:e,thisDim:o,otherDim:l,otherAxisInverse:a}}},this)},this),n}},t.prototype._renderHandle=function(){var e=this.group,t=this._displayables,n=t.handles=[null,null],r=t.handleLabels=[null,null],o=this._displayables.sliderGroup,i=this._size,a=this.dataZoomModel,s=this.api,l=a.get("borderRadius")||0,u=a.get("brushSelect"),c=t.filler=new RF({silent:u,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});o.add(c),o.add(new RF({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:i[0],height:i[1],r:l},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),O([0,1],function(t){var i=a.get("handleIcon");!_m[i]&&i.indexOf("path://")<0&&i.indexOf("image://")<0&&(i="path://"+i);var s=Cm(i,-1,0,2,2,null,!0);s.attr({cursor:VF(this._orient),draggable:!0,drift:W(this._onDragMove,this,t),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=a.get("handleSize");this._handleHeight=Fo(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(a.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),Nl(s);var c=a.get("handleColor");null!=c&&(s.style.fill=c),o.add(n[t]=s);var d=a.getModel("textStyle");e.add(r[t]=new Ps({silent:!0,invisible:!0,style:Uc(d,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:d.getTextColor(),font:d.getFont()}),z2:10}))},this);var d=c;if(u){var h=Fo(a.get("moveHandleSize"),i[1]),p=t.moveHandle=new Is({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:i[1]-.5,height:h}}),f=.8*h,g=t.moveHandleIcon=Cm(a.get("moveHandleIcon"),-f/2,-f/2,f,f,"#fff",!0);g.silent=!0,g.y=i[1]+h/2-.5,p.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(i[1]/2,Math.max(h,10));(d=t.moveZone=new Is({invisible:!0,shape:{y:i[1]-m,height:h+m}})).on("mouseover",function(){s.enterEmphasis(p)}).on("mouseout",function(){s.leaveEmphasis(p)}),o.add(p),o.add(g),o.add(d)}d.attr({draggable:!0,cursor:VF(this._orient),drift:W(this._onDragMove,this,"all"),ondragstart:W(this._showDataInfo,this,!0),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[zo(e[0],[0,100],t,!0),zo(e[1],[0,100],t,!0)]},t.prototype._updateInterval=function(e,t){var n=this.dataZoomModel,r=this._handleEnds,o=this._getViewExtent(),i=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];QA(t,r,o,n.get("zoomLock")?"all":e,null!=i.minSpan?zo(i.minSpan,a,o,!0):null,null!=i.maxSpan?zo(i.maxSpan,a,o,!0):null);var s=this._range,l=this._range=Ho([zo(r[0],o,a,!0),zo(r[1],o,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},t.prototype._updateView=function(e){var t=this._displayables,n=this._handleEnds,r=Ho(n.slice()),o=this._size;O([0,1],function(e){var r=t.handles[e],i=this._handleHeight;r.attr({scaleX:i/2,scaleY:i/2,x:n[e]+(e?-1:1),y:o[1]/2-i/2})},this),t.filler.setShape({x:r[0],y:0,width:r[1]-r[0],height:o[1]});var i={x:r[0],width:r[1]-r[0]};t.moveHandle&&(t.moveHandle.setShape(i),t.moveZone.setShape(i),t.moveZone.getBoundingRect(),t.moveHandleIcon&&t.moveHandleIcon.attr("x",i.x+i.width/2));for(var a=t.dataShadowSegs,s=[0,r[0],r[1],o[0]],l=0;l<a.length;l++){var u=a[l],c=u.getClipPath();c||(c=new Is,u.setClipPath(c)),c.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:o[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var t=this.dataZoomModel,n=this._displayables,r=n.handleLabels,o=this._orient,i=["",""];if(t.get("showDetail")){var a=t.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,u=e?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();i=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var c=Ho(this._handleEnds.slice());function d(e){var t=Cc(n.handles[e].parent,this.group),a=Tc(0===e?"right":"left",t),s=this._handleWidth/2+5,l=Mc([c[e]+(0===e?-s:s),this._size[1]/2],t);r[e].setStyle({x:l[0],y:l[1],verticalAlign:o===EF?"middle":a,align:o===EF?a:"center",text:i[e]})}d.call(this,0),d.call(this,1)},t.prototype._formatLabel=function(e,t){var n=this.dataZoomModel,r=n.get("labelFormatter"),o=n.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var i=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(o,20));return j(r)?r(e,i):Y(r)?r.replace("{value}",i):i},t.prototype._showDataInfo=function(e){e=this._dragging||e;var t=this._displayables,n=t.handleLabels;n[0].attr("invisible",!e),n[1].attr("invisible",!e),t.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](t.moveHandle,1)},t.prototype._onDragMove=function(e,t,n,r){this._dragging=!0,pt(r.event);var o=Mc([t,n],this._displayables.sliderGroup.getLocalTransform(),!0),i=this._updateInterval(e,o[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),i&&a&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var t=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var r=this._handleEnds,o=(r[0]+r[1])/2,i=this._updateInterval("all",n[0]-o);this._updateView(),i&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){var t=e.offsetX,n=e.offsetY;this._brushStart=new kt(t,n),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var t=this._displayables.brushRect;if(this._brushing=!1,t){t.attr("ignore",!0);var n=t.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var r=this._getViewExtent(),o=[0,100];this._range=Ho([zo(n.x,r,o,!0),zo(n.x+n.width,r,o,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(pt(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,t){var n=this._displayables,r=this.dataZoomModel,o=n.brushRect;o||(o=n.brushRect=new RF({silent:!0,style:r.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(o)),o.attr("ignore",!1);var i=this._brushStart,a=this._displayables.sliderGroup,s=a.transformCoordToLocal(e,t),l=a.transformCoordToLocal(i.x,i.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),o.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},t.prototype._dispatchZoomAction=function(e){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?zF:null,start:t[0],end:t[1]})},t.prototype._findCoordRect=function(){var e,t=bO(this.dataZoomModel).infoList;if(!e&&t.length){var n=t[0].model.coordinateSystem;e=n.getRect&&n.getRect()}if(!e){var r=this.api.getWidth(),o=this.api.getHeight();e={x:.2*r,y:.2*o,width:.6*r,height:.6*o}}return e},t.type="dataZoom.slider",t}(CO);function VF(e){return"vertical"===e?"ns-resize":"ew-resize"}function HF(e){e.registerComponentModel(NF),e.registerComponentView(FF),PO(e)}var WF=function(e,t,n){var r=T((GF[e]||{})[t]);return n&&U(r)?r[r.length-1]:r},GF={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},UF=Yk.mapVisual,jF=Yk.eachVisual,YF=U,qF=O,XF=Ho,ZF=zo,$F=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return n(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},t.prototype.optionUpdated=function(e,t){var n=this.option;!t&&jB(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var t=this.stateList;e=W(e,this),this.controllerVisuals=UB(this.option.controller,t,e),this.targetVisuals=UB(this.option.target,t,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(e,n){t.push(n)}):t=hi(e),t},t.prototype.eachTargetSeries=function(e,t){O(this.getTargetSeriesIndices(),function(n){var r=this.ecModel.getSeriesByIndex(n);r&&e.call(t,r)},this)},t.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},t.prototype.formatValueText=function(e,t,n){var r,o=this.option,i=o.precision,a=this.dataBound,s=o.formatter;n=n||["<",">"],U(e)&&(e=e.slice(),r=!0);var l=t?e:r?[u(e[0]),u(e[1])]:u(e);return Y(s)?s.replace("{value}",r?l[0]:l).replace("{value2}",r?l[1]:l):j(s)?r?s(e[0],e[1]):s(e):r?e[0]===a[0]?n[0]+" "+l[1]:e[1]===a[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function u(e){return e===a[0]?"min":e===a[1]?"max":(+e).toFixed(Math.min(i,20))}},t.prototype.resetExtent=function(){var e=this.option,t=XF([e.min,e.max]);this._dataExtent=t},t.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(null!=t)return e.getDimensionIndex(t);for(var n=e.dimensions,r=n.length-1;r>=0;r--){var o=n[r],i=e.getDimensionInfo(o);if(!i.isCalculationCoord)return i.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},r=t.target||(t.target={}),o=t.controller||(t.controller={});k(r,n),k(o,n);var i=this.isCategory();function a(n){YF(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")}}a.call(this,r),a.call(this,o),function(e,t,n){var r=e[t],o=e[n];r&&!o&&(o=e[n]={},qF(r,function(e,t){if(Yk.isValidType(t)){var n=WF(t,"inactive",i);null!=n&&(o[t]=n,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}}))}.call(this,r,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,r=this.get("inactiveColor"),o=this.getItemSymbol()||"roundRect";qF(this.stateList,function(a){var s=this.itemSize,l=e[a];l||(l=e[a]={color:i?r:[r]}),null==l.symbol&&(l.symbol=t&&T(t)||(i?o:[o])),null==l.symbolSize&&(l.symbolSize=n&&T(n)||(i?s[0]:[s[0],s[0]])),l.symbol=UF(l.symbol,function(e){return"none"===e?o:e});var u=l.symbolSize;if(null!=u){var c=-1/0;jF(u,function(e){e>c&&(c=e)}),l.symbolSize=UF(u,function(e){return ZF(e,[0,c],[0,s[0]],!0)})}},this)}.call(this,o)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(xh),KF=[20,140],JF=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=KF[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=KF[1])},t.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):U(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),O(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),t=Ho((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},t.prototype.getValueState=function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries(function(n){var r=[],o=n.getData();o.each(this.getDataDimensionIndex(o),function(t,n){e[0]<=t&&t<=e[1]&&r.push(n)},this),t.push({seriesId:n.id,dataIndex:r})},this),t},t.prototype.getVisualMeta=function(e){var t=QF(this,"outOfRange",this.getExtent()),n=QF(this,"inRange",this.option.range.slice()),r=[];function o(t,n){r.push({value:t,color:e(t,n)})}for(var i=0,a=0,s=n.length,l=t.length;a<l&&(!n.length||t[a]<=n[0]);a++)t[a]<n[i]&&o(t[a],"outOfRange");for(var u=1;i<s;i++,u=0)u&&r.length&&o(n[i],"outOfRange"),o(n[i],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<t[a])&&(u&&(r.length&&o(r[r.length-1].value,"outOfRange"),u=0),o(t[a],"outOfRange"));var c=r.length;return{stops:r,outerColors:[c?r[0].color:"transparent",c?r[c-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=gd($F.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}($F);function QF(e,t,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,o=n[0],i=[],a=0;a<=200&&o<n[1];a++)i.push(o),o+=r;return i.push(n[1]),i}var eV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return n(t,e),t.prototype.init=function(e,t){this.ecModel=e,this.api=t},t.prototype.render=function(e,t,n,r){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,t,n,r):this.group.removeAll()},t.prototype.renderBackground=function(e){var t=this.visualMapModel,n=eh(t.get("padding")||0),r=e.getBoundingRect();e.add(new Is({z2:-1,silent:!0,shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[3]+n[1],height:r.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,t,n){var r=(n=n||{}).forceState,o=this.visualMapModel,i={};if("color"===t){var a=o.get("contentColor");i.color=a}function s(e){return i[e]}function l(e,t){i[e]=t}var u=o.controllerVisuals[r||o.getValueState(e)];return O(Yk.prepareVisualTypes(u),function(r){var o=u[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",o=u.__alphaForOpacity),Yk.dependsOn(r,t)&&o&&o.applyVisual(e,s,l)}),i[t]},t.prototype.positionGroup=function(e){var t=this.visualMapModel,n=this.api;fh(e,t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},t.prototype.doRender=function(e,t,n,r){},t.type="visualMap",t}(lg),tV=[["left","right","width"],["top","bottom","height"]];function nV(e,t,n){var r=e.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var i={width:t.getWidth(),height:t.getHeight()},a="horizontal"===r.orient?1:0,s=tV[a],l=[0,null,10],u={},c=0;c<3;c++)u[tV[1-a][c]]=l[c],u[s[c]]=2===c?n[0]:r[s[c]];var d=[["x","width",3],["y","height",0]][a],h=ph(u,i,r.padding);return s[(h.margin[d[2]]||0)+h[d[0]]+.5*h[d[1]]<.5*i[d[1]]?0:1]}function rV(e,t){return O(e||[],function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var oV=zo,iV=O,aV=Math.min,sV=Math.max,lV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return n(t,e),t.prototype.doRender=function(e,t,n,r){this._api=n,r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},t.prototype._renderEndsText=function(e,t,n){if(t){var r=t[1-n];r=null!=r?r+"":"";var o=this.visualMapModel,i=o.get("textGap"),a=o.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===n?-i:a[1]+i],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Ps({style:Uc(d,{x:l[0],y:l[1],verticalAlign:"horizontal"===c?"middle":u,align:"horizontal"===c?u:"center",text:r})}))}},t.prototype._renderBar=function(e){var t=this.visualMapModel,n=this._shapes,r=t.itemSize,o=this._orient,i=this._useHandle,a=nV(t,this.api,r),s=n.mainGroup=this._createBarGroup(a),l=new Po;s.add(l),l.add(n.outOfRange=uV()),l.add(n.inRange=uV(null,i?dV(this._orient):null,W(this._dragHandle,this,"all",!1),W(this._dragHandle,this,"all",!0))),l.setClipPath(new Is({shape:{x:0,y:0,width:r[0],height:r[1],r:3}}));var u=t.textStyleModel.getTextRect("\u56fd"),c=sV(u.width,u.height);i&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(t,s,0,r,c,o),this._createHandle(t,s,1,r,c,o)),this._createIndicator(t,s,r,c,o),e.add(s)},t.prototype._createHandle=function(e,t,n,r,o,i){var a=W(this._dragHandle,this,n,!1),s=W(this._dragHandle,this,n,!0),l=bo(e.get("handleSize"),r[0]),u=Cm(e.get("handleIcon"),-l/2,-l/2,l,l,null,!0),c=dV(this._orient);u.attr({cursor:c,draggable:!0,drift:a,ondragend:s,onmousemove:function(e){pt(e.event)}}),u.x=r[0]/2,u.useStyle(e.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),Fl(u,!0),t.add(u);var d=this.visualMapModel.textStyleModel,h=new Ps({cursor:c,draggable:!0,drift:a,onmousemove:function(e){pt(e.event)},ondragend:s,style:Uc(d,{x:0,y:0,text:""})});h.ensureState("blur").style={opacity:.1},h.stateTransition={duration:200},this.group.add(h);var p=[l,0],f=this._shapes;f.handleThumbs[n]=u,f.handleLabelPoints[n]=p,f.handleLabels[n]=h},t.prototype._createIndicator=function(e,t,n,r,o){var i=bo(e.get("indicatorSize"),n[0]),a=Cm(e.get("indicatorIcon"),-i/2,-i/2,i,i,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=e.getModel("indicatorStyle").getItemStyle();if(a instanceof _s){var l=a.style;a.useStyle(A({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else a.useStyle(s);t.add(a);var u=this.visualMapModel.textStyleModel,c=new Ps({silent:!0,invisible:!0,style:Uc(u,{x:0,y:0,text:""})});this.group.add(c);var d=[("horizontal"===o?r/2:6)+n[0]/2,0],h=this._shapes;h.indicator=a,h.indicatorLabel=c,h.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,t,n,r){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([n,r],this._shapes.mainGroup,!0);this._updateInterval(e,o[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():cV(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),r=[0,e.itemSize[1]];this._handleEnds=[oV(t[0],n,r,!0),oV(t[1],n,r,!0)]},t.prototype._updateInterval=function(e,t){t=t||0;var n=this.visualMapModel,r=this._handleEnds,o=[0,n.itemSize[1]];QA(t,r,o,e,0);var i=n.getExtent();this._dataInterval=[oV(r[0],o,i,!0),oV(r[1],o,i,!0)]},t.prototype._updateView=function(e){var t=this.visualMapModel,n=t.getExtent(),r=this._shapes,o=[0,t.itemSize[1]],i=e?o:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,i,"inRange"),s=this._createBarVisual(n,n,o,"outOfRange");r.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),r.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(i,a)},t.prototype._createBarVisual=function(e,t,n,r){var o={forceState:r,convertOpacityToAlpha:!0},i=this._makeColorGradient(e,o),a=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],s=this._createBarPoints(n,a);return{barColor:new ju(0,0,0,1,i),barPoints:s,handlesColor:[i[0].color,i[i.length-1].color]}},t.prototype._makeColorGradient=function(e,t){var n=[],r=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var i=e[0]+r*o;if(i>e[1])break;n.push({color:this.getControllerVisual(i,"color",t),offset:o/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},t.prototype._createBarPoints=function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},t.prototype._createBarGroup=function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new Po("horizontal"!==t||n?"horizontal"===t&&n?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||n?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,t){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,o=n.handleThumbs,i=n.handleLabels,a=r.itemSize,s=r.getExtent();iV([0,1],function(l){var u=o[l];u.setStyle("fill",t.handlesColor[l]),u.y=e[l];var c=oV(e[l],[0,a[1]],s,!0),d=this.getControllerVisual(c,"symbolSize");u.scaleX=u.scaleY=d/a[0],u.x=a[0]-d/2;var h=Mc(n.handleLabelPoints[l],Cc(u,this.group));i[l].setStyle({x:h[0],y:h[1],text:r.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,t,n,r){var o=this.visualMapModel,i=o.getExtent(),a=o.itemSize,s=[0,a[1]],l=this._shapes,u=l.indicator;if(u){u.attr("invisible",!1);var c=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),d=this.getControllerVisual(e,"symbolSize"),h=oV(e,i,s,!0),p=a[0]-d/2,f={x:u.x,y:u.y};u.y=h,u.x=p;var g=Mc(l.indicatorLabelPoint,Cc(u,this.group)),m=l.indicatorLabel;m.attr("invisible",!1);var v=this._applyTransform("left",l.mainGroup),y="horizontal"===this._orient;m.setStyle({text:(n||"")+o.formatValueText(t),verticalAlign:y?v:"middle",align:y?"center":v});var b={x:p,y:h,style:{fill:c}},x={style:{x:g[0],y:g[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var _={duration:100,easing:"cubicInOut",additive:!0};u.x=f.x,u.y=f.y,u.animateTo(b,_),m.animateTo(x,_)}else u.attr(b),m.attr(x);this._firstShowIndicator=!1;var w=this._shapes.handleLabels;if(w)for(var S=0;S<w.length;S++)this._api.enterBlur(w[S])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,r=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);r[1]=aV(sV(0,r[1]),n[1]),e._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,t){var n=this.visualMapModel,r=n.itemSize;if(n.option.hoverLink){var o=[0,r[1]],i=n.getExtent();e=aV(sV(o[0],e),o[1]);var a=function(e,t,n){var r=6,o=e.get("hoverLinkDataSize");return o&&(r=oV(o,t,n,!0)/2),r}(n,i,o),s=[e-a,e+a],l=oV(e,o,i,!0),u=[oV(s[0],o,i,!0),oV(s[1],o,i,!0)];s[0]<o[0]&&(u[0]=-1/0),s[1]>o[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",a):u[1]===1/0?this._showIndicator(l,u[0],"> ",a):this._showIndicator(l,l,"\u2248 ",a));var c=this._hoverLinkDataIndices,d=[];(t||cV(n))&&(d=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var h=function(e,t){var n={},r={};return o(e||[],n),o(t||[],r,n),[i(n),i(r)];function o(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=xi(e[r].seriesId,null);if(null==i)return;for(var a=hi(e[r].dataIndex),s=n&&n[i],l=0,u=a.length;l<u;l++){var c=a[l];s&&s[c]?s[c]=null:(t[i]||(t[i]={}))[c]=1}}}function i(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&null!=e[r])if(t)n.push(+r);else{var o=i(e[r],!0);o.length&&n.push({seriesId:r,dataIndex:o})}return n}}(c,d);this._dispatchHighDown("downplay",rV(h[0],n)),this._dispatchHighDown("highlight",rV(h[1],n))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(hm(e.target,function(e){var n=Us(e);if(null!=n.dataIndex)return t=n,!0},!0),t){var n=this.ecModel.getSeriesByIndex(t.seriesIndex),r=this.visualMapModel;if(r.isTargetSeries(n)){var o=n.getData(t.dataType),i=o.getStore().get(r.getDataDimensionIndex(o),t.dataIndex);isNaN(i)||this._showIndicator(i,i)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var n=0;n<t.length;n++)this._api.leaveBlur(t[n])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",rV(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,t,n,r){var o=Cc(t,r?null:this.group);return U(e)?Mc(e,o,n):Tc(e,o,n)},t.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(eV);function uV(e,t,n,r){return new Pu({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(e){pt(e.event)},ondragend:r})}function cV(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function dV(e){return"vertical"===e?"ns-resize":"ew-resize"}var hV={type:"selectDataRange",event:"dataRangeSelected",update:"update"},pV=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(t){t.setSelected(e.selected)})},fV=[{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(t){var r,o,i,a,s,l=e.pipelineContext;!t.isTargetSeries(e)||l&&l.large||n.push((r=t.stateList,o=t.targetVisuals,i=W(t.getValueState,t),a=t.getDataDimensionIndex(e.getData()),s={},O(r,function(e){var t=Yk.prepareVisualTypes(o[e]);s[e]=t}),{progress:function(e,t){var n,r;function l(e){return sm(t,r,e)}function u(e,n){um(t,r,e,n)}null!=a&&(n=t.getDimensionIndex(a));for(var c=t.getStore();null!=(r=e.next());){var d=t.getRawDataItem(r);if(!d||!1!==d.visualMap)for(var h=null!=a?c.get(n,r):r,p=i(h),f=o[p],g=s[p],m=0,v=g.length;m<v;m++){var y=g[m];f[y]&&f[y].applyVisual(h,l,u)}}}}))}),n}},{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),r=[];t.eachComponent("visualMap",function(t){if(t.isTargetSeries(e)){var o=t.getVisualMeta(W(gV,null,e,t))||{stops:[],outerColors:[]},i=t.getDataDimensionIndex(n);i>=0&&(o.dimension=i,r.push(o))}}),e.getData().setVisual("visualMeta",r)}}];function gV(e,t,n,r){for(var o=t.targetVisuals[r],i=Yk.prepareVisualTypes(o),a={color:lm(e.getData(),"color")},s=0,l=i.length;s<l;s++){var u=i[s],c=o["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,d,h)}return a.color;function d(e){return a[e]}function h(e,t){a[e]=t}}var mV=O;function vV(e){var t=e&&e.visualMap;U(t)||(t=t?[t]:[]),mV(t,function(e){if(e){yV(e,"splitList")&&!yV(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&U(t)&&mV(t,function(e){Z(e)&&(yV(e,"start")&&!yV(e,"min")&&(e.min=e.start),yV(e,"end")&&!yV(e,"max")&&(e.max=e.end))})}})}function yV(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var bV=!1;function xV(e){bV||(bV=!0,e.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"}),e.registerAction(hV,pV),O(fV,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(vV))}function _V(e){e.registerComponentModel(JF),e.registerComponentView(lV),xV(e)}var wV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n._pieceList=[],n}return n(t,e),t.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],SV[this._mode].call(this,this._pieceList),this._resetSelected(t,n);var o=this.option.categories;this.resetVisual(function(e,t){"categories"===r?(e.mappingMethod="category",e.categories=T(o)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=B(this._pieceList,function(e){return e=T(e),"inRange"!==t&&(e.visual=null),e}))})},t.prototype.completeVisualOption=function(){var t=this.option,n={},r=Yk.listVisualTypes(),o=this.isCategory();function i(e,t,n){return e&&e[t]&&e[t].hasOwnProperty(n)}O(t.pieces,function(e){O(r,function(t){e.hasOwnProperty(t)&&(n[t]=1)})}),O(n,function(e,n){var r=!1;O(this.stateList,function(e){r=r||i(t,e,n)||i(t.target,e,n)},this),!r&&O(this.stateList,function(e){(t[e]||(t[e]={}))[n]=WF(n,"inRange"===e?"active":"inactive",o)})},this),e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,t){var n=this.option,r=this._pieceList,o=(t?n:e).selected||{};if(n.selected=o,O(r,function(e,t){var n=this.getSelectedMapKey(e);o.hasOwnProperty(n)||(o[n]=!0)},this),"single"===n.selectedMode){var i=!1;O(r,function(e,t){var n=this.getSelectedMapKey(e);o[n]&&(i?o[n]=!1:i=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=T(e)},t.prototype.getValueState=function(e){var t=Yk.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var t=[],n=this._pieceList;return this.eachTargetSeries(function(r){var o=[],i=r.getData();i.each(this.getDataDimensionIndex(i),function(t,r){Yk.findPieceIndex(t,n)===e&&o.push(r)},this),t.push({seriesId:r.id,dataIndex:o})},this),t},t.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],n=["",""],r=this,o=this._pieceList.slice();if(o.length){var i=o[0].interval[0];i!==-1/0&&o.unshift({interval:[-1/0,i]}),(i=o[o.length-1].interval[1])!==1/0&&o.push({interval:[i,1/0]})}else o.push({interval:[-1/0,1/0]});var a=-1/0;return O(o,function(e){var t=e.interval;t&&(t[0]>a&&s([a,t[0]],"outOfRange"),s(t.slice()),a=t[1])},this),{stops:t,outerColors:n}}function s(o,i){var a=r.getRepresentValue({interval:o});i||(i=r.getValueState(a));var s=e(a,i);o[0]===-1/0?n[0]=s:o[1]===1/0?n[1]=s:t.push({value:o[0],color:s},{value:o[1],color:s})}},t.type="visualMap.piecewise",t.defaultOption=gd($F.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}($F),SV={splitNumber:function(e){var t=this.option,n=Math.min(t.precision,20),r=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var i=(r[1]-r[0])/o;+i.toFixed(n)!==i&&n<5;)n++;t.precision=n,i=+i.toFixed(n),t.minOpen&&e.push({interval:[-1/0,r[0]],close:[0,0]});for(var a=0,s=r[0];a<o;s+=i,a++){var l=a===o-1?r[1]:s+i;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[r[1],1/0],close:[0,0]}),ni(e),O(e,function(e,t){e.index=t,e.text=this.formatValueText(e.interval)},this)},categories:function(e){var t=this.option;O(t.categories,function(t){e.push({text:this.formatValueText(t,!0),value:t})},this),CV(t,e)},pieces:function(e){var t=this.option;O(t.pieces,function(t,n){Z(t)||(t={value:t});var r={text:"",index:n};if(null!=t.label&&(r.text=t.label),t.hasOwnProperty("value")){var o=r.value=t.value;r.interval=[o,o],r.close=[1,1]}else{for(var i=r.interval=[],a=r.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],c=0;c<2;c++){for(var d=[["gte","gt","min"],["lte","lt","max"]][c],h=0;h<3&&null==i[c];h++)i[c]=t[d[h]],a[c]=s[h],u[c]=2===h;null==i[c]&&(i[c]=l[c])}u[0]&&i[1]===1/0&&(a[0]=0),u[1]&&i[0]===-1/0&&(a[1]=0),i[0]===i[1]&&a[0]&&a[1]&&(r.value=i[0])}r.visual=Yk.retrieveVisuals(t),e.push(r)},this),CV(t,e),ni(e),O(e,function(e){var t=e.close,n=[["<","\u2264"][t[1]],[">","\u2265"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,n)},this)}};function CV(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}var MV=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return n(t,e),t.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),r=t.textStyleModel,o=r.getFont(),i=r.getTextColor(),a=this._getItemAlign(),s=t.itemSize,l=this._getViewData(),u=l.endsText,c=re(t.get("showLabel",!0),!u);u&&this._renderEndsText(e,u[0],s,c,a),O(l.viewPieceList,function(r){var l=r.piece,u=new Po;u.onclick=W(this._onItemClick,this,l),this._enableHoverLink(u,r.indexInModelPieceList);var d=t.getRepresentValue(l);if(this._createItemSymbol(u,d,[0,0,s[0],s[1]]),c){var h=this.visualMapModel.getValueState(d);u.add(new Ps({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,verticalAlign:"middle",align:a,font:o,fill:i,opacity:"outOfRange"===h?.5:1}}))}e.add(u)},this),u&&this._renderEndsText(e,u[1],s,c,a),hh(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,t){var n=this;e.on("mouseover",function(){return r("highlight")}).on("mouseout",function(){return r("downplay")});var r=function(e){var r=n.visualMapModel;r.option.hoverLink&&n.api.dispatchAction({type:e,batch:rV(r.findTargetDataIndices(t),r)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return nV(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},t.prototype._renderEndsText=function(e,t,n,r,o){if(t){var i=new Po,a=this.visualMapModel.textStyleModel;i.add(new Ps({style:Uc(a,{x:r?"right"===o?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:r?o:"center",text:t})})),e.add(i)}},t.prototype._getViewData=function(){var e=this.visualMapModel,t=B(e.getPieceList(),function(e,t){return{piece:e,indexInModelPieceList:t}}),n=e.get("text"),r=e.get("orient"),o=e.get("inverse");return("horizontal"===r?o:!o)?t.reverse():n&&(n=n.slice().reverse()),{viewPieceList:t,endsText:n}},t.prototype._createItemSymbol=function(e,t,n){e.add(Cm(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},t.prototype._onItemClick=function(e){var t=this.visualMapModel,n=t.option,r=n.selectedMode;if(r){var o=T(n.selected),i=t.getSelectedMapKey(e);"single"===r||!0===r?(o[i]=!0,O(o,function(e,t){o[t]=t===i})):o[i]=!o[i],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(eV);function TV(e){e.registerComponentModel(wV),e.registerComponentView(MV),xV(e)}var kV={label:{enabled:!0},decal:{show:!1}},IV=Ci(),AV={};function DV(e,t){var n=e.getModel("aria");if(n.get("enabled")){var r=T(kV);k(r.label,e.getLocaleModel().get("aria"),!1),k(n.option,r,!1),function(){if(n.getModel("decal").get("show")){var t=me();e.eachSeries(function(e){if(!e.isColorBySeries()){var n=t.get(e.type);n||(n={},t.set(e.type,n)),IV(e).scope=n}}),e.eachRawSeries(function(t){if(!e.isSeriesFiltered(t))if(j(t.enableAriaDecal))t.enableAriaDecal();else{var n=t.getData();if(t.isColorBySeries()){var r=Yh(t.ecModel,t.name,AV,e.getSeriesCount()),o=n.getVisual("decal");n.setVisual("decal",u(o,r))}else{var i=t.getRawData(),a={},s=IV(t).scope;n.each(function(e){var t=n.getRawIndex(e);a[t]=e});var l=i.count();i.each(function(e){var r=a[e],o=i.getName(e)||e+"",c=Yh(t.ecModel,o,s,l),d=n.getItemVisual(r,"decal");n.setItemVisual(r,"decal",u(d,c))})}}function u(e,t){var n=e?A(A({},t),e):t;return n.dirty=!0,n}})}}(),function(){var r=e.getLocaleModel().get("aria"),i=n.getModel("label");if(i.option=D(i.option,r),i.get("enabled")){var a=t.getZr().dom;if(i.get("description"))a.setAttribute("aria-label",i.get("description"));else{var s,l=e.getSeriesCount(),u=i.get(["data","maxCount"])||10,c=i.get(["series","maxCount"])||10,d=Math.min(l,c);if(!(l<1)){var h=function(){var t=e.get("title");return t&&t.length&&(t=t[0]),t&&t.text}();s=h?o(i.get(["general","withTitle"]),{title:h}):i.get(["general","withoutTitle"]);var p=[];s+=o(l>1?i.get(["series","multiple","prefix"]):i.get(["series","single","prefix"]),{seriesCount:l}),e.eachSeries(function(t,n){if(n<d){var r=void 0,a=t.get("name")?"withName":"withoutName";r=o(r=l>1?i.get(["series","multiple",a]):i.get(["series","single",a]),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:(b=t.subType,e.getLocaleModel().get(["series","typeNames"])[b]||"\u81ea\u5b9a\u4e49\u56fe")});var s=t.getData();s.count()>u?r+=o(i.get(["data","partialData"]),{displayCnt:u}):r+=i.get(["data","allData"]);for(var c=i.get(["data","separator","middle"]),h=i.get(["data","separator","end"]),f=[],g=0;g<s.count();g++)if(g<u){var m=s.getName(g),v=s.getValues(g),y=i.get(["data",m?"withName":"withoutName"]);f.push(o(y,{name:m,value:v.join(c)}))}r+=f.join(c)+h,p.push(r)}var b});var f=i.getModel(["series","multiple","separator"]),g=f.get("middle"),m=f.get("end");s+=p.join(g)+m,a.setAttribute("aria-label",s)}}}}()}function o(e,t){if(!Y(e))return e;var n=e;return O(t,function(e,t){n=n.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)}),n}}function PV(e){if(e&&e.aria){var t=e.aria;null!=t.show&&(t.enabled=t.show),t.label=t.label||{},O(["description","general","series","data"],function(e){null!=t[e]&&(t.label[e]=t[e])})}}var LV={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},NV=function(){function e(e){if(null==(this._condVal=Y(e)?new RegExp(e):te(e)?e:null)){li("")}}return e.prototype.evaluate=function(e){var t=typeof e;return Y(t)?this._condVal.test(e):!!X(t)&&this._condVal.test(e+"")},e}(),RV=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),EV=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},e}(),OV=function(){function e(){}return e.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},e}(),BV=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),zV=function(){function e(){}return e.prototype.evaluate=function(){for(var e=!!this.valueParser,t=(0,this.getValue)(this.valueGetterParam),n=e?this.valueParser(t):null,r=0;r<this.subCondList.length;r++)if(!this.subCondList[r].evaluate(e?n:t))return!1;return!0},e}();function FV(e,t){if(!0===e||!1===e){var n=new RV;return n.value=e,n}return HV(e)||li(""),e.and?VV("and",e,t):e.or?VV("or",e,t):e.not?function(e,t){var n=e.not;HV(n)||li("");var r=new BV;return r.child=FV(n,t),r.child||li(""),r}(e,t):function(e,t){for(var n=t.prepareGetValue(e),r=[],o=H(e),i=e.parser,a=i?af(i):null,s=0;s<o.length;s++){var l=o[s];if("parser"!==l&&!t.valueGetterAttrMap.get(l)){var u=xe(LV,l)?LV[l]:l,c=e[l],d=a?a(c):c,h=df(u,d)||"reg"===u&&new NV(d);h||li(""),r.push(h)}}r.length||li("");var p=new zV;return p.valueGetterParam=n,p.valueParser=a,p.getValue=t.getValue,p.subCondList=r,p}(e,t)}function VV(e,t,n){var r=t[e];U(r)||li(""),r.length||li("");var o="and"===e?new EV:new OV;return o.children=B(r,function(e){return FV(e,n)}),o.children.length||li(""),o}function HV(e){return Z(e)&&!E(e)}var WV=function(){function e(e,t){this._cond=FV(e,t)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}(),GV={type:"echarts:filter",transform:function(e){for(var t,n,r,o=e.upstream,i=(n=e.config,r={valueGetterAttrMap:me({dimension:!0}),prepareGetValue:function(e){var t=e.dimension;xe(e,"dimension")||li("");var n=o.getDimensionInfo(t);return n||li(""),{dimIdx:n.index}},getValue:function(e){return o.retrieveValueFromItem(t,e.dimIdx)}},new WV(n,r)),a=[],s=0,l=o.count();s<l;s++)t=o.getRawDataItem(s),i.evaluate()&&a.push(t);return{data:a}}},UV={type:"echarts:sort",transform:function(e){var t=e.upstream,n=e.config,r="",o=hi(n);o.length||li(r);var i=[];O(o,function(e){var n=e.dimension,o=e.order,a=e.parser,s=e.incomparable;if(null==n&&li(r),"asc"!==o&&"desc"!==o&&li(r),s&&"min"!==s&&"max"!==s){li("")}if("asc"!==o&&"desc"!==o){li("")}var l=t.getDimensionInfo(n);l||li(r);var u=a?af(a):null;a&&!u&&li(r),i.push({dimIdx:l.index,parser:u,comparator:new uf(o,s)})});var a=t.sourceFormat;a!==Th&&a!==kh&&li(r);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(e,n){for(var r=0;r<i.length;r++){var o=i[r],a=t.retrieveValueFromItem(e,o.dimIdx),s=t.retrieveValueFromItem(n,o.dimIdx);o.parser&&(a=o.parser(a),s=o.parser(s));var l=o.comparator.evaluate(a,s);if(0!==l)return l}return 0}),{data:s}}},jV=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return n(t,e),t.prototype.init=function(t,n,r){e.prototype.init.call(this,t,n,r),this._sourceManager=new Df(this),Pf(this)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),Pf(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Ph},t}(xh),YV=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dataset",t}return n(t,e),t.type="dataset",t}(lg),qV=$a.CMD;function XV(e,t){return Math.abs(e-t)<1e-5}function ZV(e){var t,n,r,o,i,a=e.data,s=e.len(),l=[],u=0,c=0,d=0,h=0;function p(e,n){t&&t.length>2&&l.push(t),t=[e,n]}function f(e,n,r,o){XV(e,r)&&XV(n,o)||t.push(e,n,r,o,r,o)}function g(e,n,r,o,i,a){var s=Math.abs(n-e),l=4*Math.tan(s/4)/3,u=n<e?-1:1,c=Math.cos(e),d=Math.sin(e),h=Math.cos(n),p=Math.sin(n),f=c*i+r,g=d*a+o,m=h*i+r,v=p*a+o,y=i*l*u,b=a*l*u;t.push(f-y*d,g+b*c,m+y*p,v-b*h,m,v)}for(var m=0;m<s;){var v=a[m++],y=1===m;switch(y&&(d=u=a[m],h=c=a[m+1],v!==qV.L&&v!==qV.C&&v!==qV.Q||(t=[d,h])),v){case qV.M:u=d=a[m++],c=h=a[m++],p(d,h);break;case qV.L:f(u,c,n=a[m++],r=a[m++]),u=n,c=r;break;case qV.C:t.push(a[m++],a[m++],a[m++],a[m++],u=a[m++],c=a[m++]);break;case qV.Q:n=a[m++],r=a[m++],o=a[m++],i=a[m++],t.push(u+2/3*(n-u),c+2/3*(r-c),o+2/3*(n-o),i+2/3*(r-i),o,i),u=o,c=i;break;case qV.A:var b=a[m++],x=a[m++],_=a[m++],w=a[m++],S=a[m++],C=a[m++]+S;m+=1;var M=!a[m++];n=Math.cos(S)*_+b,r=Math.sin(S)*w+x,y?p(d=n,h=r):f(u,c,n,r),u=Math.cos(C)*_+b,c=Math.sin(C)*w+x;for(var T=(M?-1:1)*Math.PI/2,k=S;M?k>C:k<C;k+=T)g(k,M?Math.max(k+T,C):Math.min(k+T,C),b,x,_,w);break;case qV.R:d=u=a[m++],h=c=a[m++],n=d+a[m++],r=h+a[m++],p(n,h),f(n,h,n,r),f(n,r,d,r),f(d,r,d,h),f(d,h,n,h);break;case qV.Z:t&&f(u,c,d,h),u=d,c=h}}return t&&t.length>2&&l.push(t),l}function $V(e,t,n,r,o,i,a,s,l,u){if(XV(e,n)&&XV(t,r)&&XV(o,a)&&XV(i,s))l.push(a,s);else{var c=2/u,d=c*c,h=a-e,p=s-t,f=Math.sqrt(h*h+p*p);h/=f,p/=f;var g=n-e,m=r-t,v=o-a,y=i-s,b=g*g+m*m,x=v*v+y*y;if(b<d&&x<d)l.push(a,s);else{var _=h*g+p*m,w=-h*v-p*y;if(b-_*_<d&&_>=0&&x-w*w<d&&w>=0)l.push(a,s);else{var S=[],C=[];bn(e,n,o,a,.5,S),bn(t,r,i,s,.5,C),$V(S[0],C[0],S[1],C[1],S[2],C[2],S[3],C[3],l,u),$V(S[4],C[4],S[5],C[5],S[6],C[6],S[7],C[7],l,u)}}}}function KV(e,t,n){var r=e[t],o=e[1-t],i=Math.abs(r/o),a=Math.ceil(Math.sqrt(i*n)),s=Math.floor(n/a);0===s&&(s=1,a=n);for(var l=[],u=0;u<a;u++)l.push(s);var c=n-a*s;if(c>0)for(u=0;u<c;u++)l[u%a]+=1;return l}function JV(e,t,n){for(var r=e.r0,o=e.r,i=e.startAngle,a=e.endAngle,s=Math.abs(a-i),l=s*o,u=o-r,c=l>Math.abs(u),d=KV([l,u],c?0:1,t),h=(c?s:u)/d.length,p=0;p<d.length;p++)for(var f=(c?u:s)/d[p],g=0;g<d[p];g++){var m={};c?(m.startAngle=i+h*p,m.endAngle=i+h*(p+1),m.r0=r+f*g,m.r=r+f*(g+1)):(m.startAngle=i+f*g,m.endAngle=i+f*(g+1),m.r0=r+h*p,m.r=r+h*(p+1)),m.clockwise=e.clockwise,m.cx=e.cx,m.cy=e.cy,n.push(m)}}function QV(e,t,n,r){return e*r-n*t}function eH(e,t,n,r,o,i,a,s){var l=n-e,u=r-t,c=a-o,d=s-i,h=QV(c,d,l,u);if(Math.abs(h)<1e-6)return null;var p=QV(e-o,t-i,c,d)/h;return p<0||p>1?null:new kt(p*l+e,p*u+t)}function tH(e,t,n){var r=new kt;kt.sub(r,n,t),r.normalize();var o=new kt;return kt.sub(o,e,t),o.dot(r)}function nH(e,t){var n=e[e.length-1];n&&n[0]===t[0]&&n[1]===t[1]||e.push(t)}function rH(e){var t=e.points,n=[],r=[];Ma(t,n,r);var o=new Ot(n[0],n[1],r[0]-n[0],r[1]-n[1]),i=o.width,a=o.height,s=o.x,l=o.y,u=new kt,c=new kt;return i>a?(u.x=c.x=s+i/2,u.y=l,c.y=l+a):(u.y=c.y=l+a/2,u.x=s,c.x=s+i),function(e,t,n){for(var r=e.length,o=[],i=0;i<r;i++){var a=e[i],s=e[(i+1)%r],l=eH(a[0],a[1],s[0],s[1],t.x,t.y,n.x,n.y);l&&o.push({projPt:tH(l,t,n),pt:l,idx:i})}if(o.length<2)return[{points:e},{points:e}];o.sort(function(e,t){return e.projPt-t.projPt});var u=o[0],c=o[o.length-1];if(c.idx<u.idx){var d=u;u=c,c=d}var h=[u.pt.x,u.pt.y],p=[c.pt.x,c.pt.y],f=[h],g=[p];for(i=u.idx+1;i<=c.idx;i++)nH(f,e[i].slice());for(nH(f,p),nH(f,h),i=c.idx+1;i<=u.idx+r;i++)nH(g,e[i%r].slice());return nH(g,h),nH(g,p),[{points:f},{points:g}]}(t,u,c)}function oH(e,t,n,r){if(1===n)r.push(t);else{var o=Math.floor(n/2),i=e(t);oH(e,i[0],o,r),oH(e,i[1],n-o,r)}return r}function iH(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function aH(e,t){var n=e.length,r=t.length;if(n===r)return[e,t];for(var o=[],i=[],a=n<r?e:t,s=Math.min(n,r),l=Math.abs(r-n)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,d=[a[0],a[1]],h=l,p=2;p<s;){var f=a[p-2],g=a[p-1],m=a[p++],v=a[p++],y=a[p++],b=a[p++],x=a[p++],_=a[p++];if(h<=0)d.push(m,v,y,b,x,_);else{for(var w=Math.min(h,c-1)+1,S=1;S<=w;S++){var C=S/w;bn(f,m,y,x,C,o),bn(g,v,b,_,C,i),f=o[3],g=i[3],d.push(o[1],i[1],o[2],i[2],f,g),m=o[5],v=i[5],y=o[6],b=i[6]}h-=w-1}}return a===e?[d,t]:[e,d]}function sH(e,t){for(var n=e.length,r=e[n-2],o=e[n-1],i=[],a=0;a<t.length;)i[a++]=r,i[a++]=o;return i}function lH(e){for(var t=0,n=0,r=0,o=e.length,i=0,a=o-2;i<o;a=i,i+=2){var s=e[a],l=e[a+1],u=e[i],c=e[i+1],d=s*c-u*l;t+=d,n+=(s+u)*d,r+=(l+c)*d}return 0===t?[e[0]||0,e[1]||0]:[n/t/3,r/t/3,t]}function uH(e,t,n,r){for(var o=(e.length-2)/6,i=1/0,a=0,s=e.length,l=s-2,u=0;u<o;u++){for(var c=6*u,d=0,h=0;h<s;h+=2){var p=0===h?c:(c+h-2)%l+2,f=e[p]-n[0],g=e[p+1]-n[1],m=t[h]-r[0]-f,v=t[h+1]-r[1]-g;d+=m*m+v*v}d<i&&(i=d,a=u)}return a}function cH(e){for(var t=[],n=e.length,r=0;r<n;r+=2)t[r]=e[n-r-2],t[r+1]=e[n-r-1];return t}function dH(e){return e.__isCombineMorphing}var hH="__mOriginal_";function pH(e,t,n){var r=hH+t,o=e[r]||e[t];e[r]||(e[r]=e[t]);var i=n.replace,a=n.after,s=n.before;e[t]=function(){var e,t=arguments;return s&&s.apply(this,t),e=i?i.apply(this,t):o.apply(this,t),a&&a.apply(this,t),e}}function fH(e,t){var n=hH+t;e[n]&&(e[t]=e[n],e[n]=null)}function gH(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<r.length;){var i=r[o],a=r[o+1];r[o++]=t[0]*i+t[2]*a+t[4],r[o++]=t[1]*i+t[3]*a+t[5]}}function mH(e,t){var n=e.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),o=function(e,t){for(var n,r,o,i=[],a=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],u=t[s],c=void 0,d=void 0;l?u?(r=c=(n=aH(l,u))[0],o=d=n[1]):(d=sH(o||l,l),c=l):(c=sH(r||u,u),d=u),i.push(c),a.push(d)}return[i,a]}(ZV(n),ZV(r)),i=o[0],a=o[1],s=e.getComputedTransform(),l=t.getComputedTransform();s&&gH(i,s),l&&gH(a,l),pH(t,"updateTransform",{replace:function(){this.transform=null}}),t.transform=null;var u=function(e,t,n,r){for(var o,i=[],a=0;a<e.length;a++){var s=e[a],l=t[a],u=lH(s),c=lH(l);null==o&&(o=u[2]<0!=c[2]<0);var d=[],h=[],p=0,f=1/0,g=[],m=s.length;o&&(s=cH(s));for(var v=6*uH(s,l,u,c),y=m-2,b=0;b<y;b+=2){var x=(v+b)%y+2;d[b+2]=s[x]-u[0],d[b+3]=s[x+1]-u[1]}d[0]=s[v]-u[0],d[1]=s[v+1]-u[1];for(var _=r/10,w=-r/2;w<=r/2;w+=_){var S=Math.sin(w),C=Math.cos(w),M=0;for(b=0;b<s.length;b+=2){var T=d[b],k=d[b+1],I=l[b]-c[0],A=l[b+1]-c[1],D=I*C-A*S,P=I*S+A*C;g[b]=D,g[b+1]=P;var L=D-T,N=P-k;M+=L*L+N*N}if(M<f){f=M,p=w;for(var R=0;R<g.length;R++)h[R]=g[R]}}i.push({from:d,to:h,fromCp:u,toCp:c,rotation:-p})}return i}(i,a,0,Math.PI),c=[];pH(t,"buildPath",{replace:function(e){for(var n=t.__morphT,r=1-n,o=[],i=0;i<u.length;i++){var a=u[i],s=a.from,l=a.to,d=a.rotation*n,h=a.fromCp,p=a.toCp,f=Math.sin(d),g=Math.cos(d);He(o,h,p,n);for(var m=0;m<s.length;m+=2){var v=s[m],y=s[m+1],b=v*r+(S=l[m])*n,x=y*r+(C=l[m+1])*n;c[m]=b*g-x*f+o[0],c[m+1]=b*f+x*g+o[1]}var _=c[0],w=c[1];for(e.moveTo(_,w),m=2;m<s.length;){var S=c[m++],C=c[m++],M=c[m++],T=c[m++],k=c[m++],I=c[m++];_===S&&w===C&&M===k&&T===I?e.lineTo(k,I):e.bezierCurveTo(S,C,M,T,k,I),_=k,w=I}}}})}function vH(e,t,n){if(!e||!t)return t;var r=n.done,o=n.during;return mH(e,t),t.__morphT=0,t.animateTo({__morphT:1},D({during:function(e){t.dirtyShape(),o&&o(e)},done:function(){fH(t,"buildPath"),fH(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape(),r&&r()}},n)),t}function yH(e,t,n,r,o,i){e=o===n?0:Math.round(32767*(e-n)/(o-n)),t=i===r?0:Math.round(32767*(t-r)/(i-r));for(var a,s=0,l=32768;l>0;l/=2){var u=0,c=0;(e&l)>0&&(u=1),(t&l)>0&&(c=1),s+=l*l*(3*u^c),0===c&&(1===u&&(e=l-1-e,t=l-1-t),a=e,e=t,t=a)}return s}function bH(e){var t=1/0,n=1/0,r=-1/0,o=-1/0,i=B(e,function(e){var i=e.getBoundingRect(),a=e.getComputedTransform(),s=i.x+i.width/2+(a?a[4]:0),l=i.y+i.height/2+(a?a[5]:0);return t=Math.min(s,t),n=Math.min(l,n),r=Math.max(s,r),o=Math.max(l,o),[s,l]});return B(i,function(i,a){return{cp:i,z:yH(i[0],i[1],t,n,r,o),path:e[a]}}).sort(function(e,t){return e.z-t.z}).map(function(e){return e.path})}function xH(e){return function(e,t){var n,r=[],o=e.shape;switch(e.type){case"rect":!function(e,t,n){for(var r=e.width,o=e.height,i=r>o,a=KV([r,o],i?0:1,t),s=i?"width":"height",l=i?"height":"width",u=i?"x":"y",c=i?"y":"x",d=e[s]/a.length,h=0;h<a.length;h++)for(var p=e[l]/a[h],f=0;f<a[h];f++){var g={};g[u]=h*d,g[c]=f*p,g[s]=d,g[l]=p,g.x+=e.x,g.y+=e.y,n.push(g)}}(o,t,r),n=Is;break;case"sector":JV(o,t,r),n=Tu;break;case"circle":JV({r0:0,r:o.r,startAngle:0,endAngle:2*Math.PI,cx:o.cx,cy:o.cy},t,r),n=Tu;break;default:var i=e.getComputedTransform(),a=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,s=B(function(e,t){var n=ZV(e),r=[];t=t||1;for(var o=0;o<n.length;o++){var i=n[o],a=[],s=i[0],l=i[1];a.push(s,l);for(var u=2;u<i.length;){var c=i[u++],d=i[u++],h=i[u++],p=i[u++],f=i[u++],g=i[u++];$V(s,l,c,d,h,p,f,g,a,t),s=f,l=g}r.push(a)}return r}(e.getUpdatedPathProxy(),a),function(e){return function(e){for(var t=[],n=0;n<e.length;)t.push([e[n++],e[n++]]);return t}(e)}),l=s.length;if(0===l)oH(rH,{points:s[0]},t,r);else if(l===t)for(var u=0;u<l;u++)r.push({points:s[u]});else{var c=0,d=B(s,function(e){var t=[],n=[];Ma(e,t,n);var r=(n[1]-t[1])*(n[0]-t[0]);return c+=r,{poly:e,area:r}});d.sort(function(e,t){return t.area-e.area});var h=t;for(u=0;u<l;u++){var p=d[u];if(h<=0)break;var f=u===l-1?h:Math.ceil(p.area/c*t);f<0||(oH(rH,{points:p.poly},f,r),h-=f)}}n=Pu}if(!n)return function(e,t){for(var n=[],r=0;r<t;r++)n.push(lu(e));return n}(e,t);var g=[];for(u=0;u<r.length;u++){var m=new n;m.setShape(r[u]),iH(e,m),g.push(m)}return g}(e.path,e.count)}function _H(e){return U(e[0])}function wH(e,t){for(var n=[],r=e.length,o=0;o<r;o++)n.push({one:e[o],many:[]});for(o=0;o<t.length;o++){var i=t[o].length,a=void 0;for(a=0;a<i;a++)n[a%r].many.push(t[o][a])}var s=0;for(o=r-1;o>=0;o--)if(!n[o].many.length){var l=n[s].many;if(l.length<=1){if(!s)return n;s=0}i=l.length;var u=Math.ceil(i/2);n[o].many=l.slice(u,i),n[s].many=l.slice(0,u),s++}return n}var SH={clone:function(e){for(var t=[],n=1-Math.pow(1-e.path.style.opacity,1/e.count),r=0;r<e.count;r++){var o=lu(e.path);o.setStyle("opacity",n),t.push(o)}return t},split:null};function CH(e,t,n,r,o,i){if(e.length&&t.length){var a=tc("update",r,o);if(a&&a.duration>0){var s,l,u=r.getModel("universalTransition").get("delay"),c=Object.assign({setToFinal:!0},a);_H(e)&&(s=e,l=t),_H(t)&&(s=t,l=e);for(var d=s?s===e:e.length>t.length,h=s?wH(l,s):wH(d?t:e,[d?e:t]),p=0,f=0;f<h.length;f++)p+=h[f].many.length;var g=0;for(f=0;f<h.length;f++)m(h[f],d,g,p),g+=h[f].many.length}}function m(e,t,r,o,a){var s=e.many,l=e.one;if(1!==s.length||a)for(var d=D({dividePath:SH[n],individualDelay:u&&function(e,t,n,i){return u(e+r,o)}},c),h=t?function(e,t,n){var r=[];!function e(t){for(var n=0;n<t.length;n++){var o=t[n];dH(o)?e(o.childrenRef()):o instanceof ms&&r.push(o)}}(e);var o=r.length;if(!o)return{fromIndividuals:[],toIndividuals:[],count:0};var i=(n.dividePath||xH)({path:t,count:o});if(i.length!==o)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};r=bH(r),i=bH(i);for(var a=n.done,s=n.during,l=n.individualDelay,u=new lo,c=0;c<o;c++){var d=r[c],h=i[c];h.parent=t,h.copyTransform(u),l||mH(d,h)}function p(e){for(var t=0;t<i.length;t++)i[t].addSelfToZr(e)}function f(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,fH(t,"addSelfToZr"),fH(t,"removeSelfFromZr")}t.__isCombineMorphing=!0,t.childrenRef=function(){return i},pH(t,"addSelfToZr",{after:function(e){p(e)}}),pH(t,"removeSelfFromZr",{after:function(e){for(var t=0;t<i.length;t++)i[t].removeSelfFromZr(e)}});var g=i.length;if(l){var m=g,v=function(){0==--m&&(f(),a&&a())};for(c=0;c<g;c++){var y=l?D({delay:(n.delay||0)+l(c,g,r[c],i[c]),done:v},n):n;vH(r[c],i[c],y)}}else t.__morphT=0,t.animateTo({__morphT:1},D({during:function(e){for(var n=0;n<g;n++){var r=i[n];r.__morphT=t.__morphT,r.dirtyShape()}s&&s(e)},done:function(){f();for(var t=0;t<e.length;t++)fH(e[t],"updateTransform");a&&a()}},n));return t.__zr&&p(t.__zr),{fromIndividuals:r,toIndividuals:i,count:g}}(s,l,d):function(e,t,n){var r=t.length,o=[],i=n.dividePath||xH;if(dH(e)){!function e(t){for(var n=0;n<t.length;n++){var r=t[n];dH(r)?e(r.childrenRef()):r instanceof ms&&o.push(r)}}(e.childrenRef());var a=o.length;if(a<r)for(var s=0,l=a;l<r;l++)o.push(lu(o[s++%a]));o.length=r}else{o=i({path:e,count:r});var u=e.getComputedTransform();for(l=0;l<o.length;l++)o[l].setLocalTransform(u);if(o.length!==r)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}o=bH(o),t=bH(t);var c=n.individualDelay;for(l=0;l<r;l++){var d=c?D({delay:(n.delay||0)+c(l,r,o[l],t[l])},n):n;vH(o[l],t[l],d)}return{fromIndividuals:o,toIndividuals:t,count:t.length}}(l,s,d),p=h.fromIndividuals,f=h.toIndividuals,g=p.length,v=0;v<g;v++)y=u?D({delay:u(v,g)},c):c,i(p[v],f[v],t?s[v]:e.one,t?e.one:s[v],y);else{var y,b=t?s[0]:l,x=t?l:s[0];dH(b)?m({many:[b],one:x},!0,r,o,!0):(vH(b,x,y=u?D({delay:u(r,o)},c):c),i(b,x,b,x,y))}}}function MH(e){if(!e)return[];if(U(e)){for(var t=[],n=0;n<e.length;n++)t.push(MH(e[n]));return t}var r=[];return e.traverse(function(e){e instanceof ms&&!e.disableMorphing&&!e.invisible&&!e.ignore&&r.push(e)}),r}var TH=Ci();function kH(e){var t=[];return O(e,function(e){var n=e.data;if(!(n.count()>1e4))for(var r=n.getIndices(),o=function(e){for(var t=e.dimensions,n=0;n<t.length;n++){var r=e.getDimensionInfo(t[n]);if(r&&0===r.otherDims.itemGroupId)return t[n]}}(n),i=0;i<r.length;i++)t.push({dataGroupId:e.dataGroupId,data:n,dim:e.dim||o,divide:e.divide,dataIndex:i})}),t}function IH(e,t,n){e.traverse(function(e){e instanceof ms&&oc(e,{style:{opacity:0}},t,{dataIndex:n,isFrom:!0})})}function AH(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function DH(e){e.stopAnimation(),e.isGroup&&e.traverse(function(e){e.stopAnimation()})}function PH(e,t,n){var r=kH(e),o=kH(t);function i(e,t,n,r,o){(n||e)&&t.animateFrom({style:n&&n!==e?A(A({},n.style),e.style):e.style},o)}function a(e){for(var t=0;t<e.length;t++)if(e[t].dim)return e[t].dim}var s=a(r),l=a(o),u=!1;function c(e,t){return function(n){var r=n.data,o=n.dataIndex;if(t)return r.getId(o);var i=n.dataGroupId,a=e?s||l:l||s,u=a&&r.getDimensionInfo(a),c=u&&u.ordinalMeta;if(u){var d=r.get(u.name,o);return c&&c.categories[d]||d+""}var h=r.getRawDataItem(o);return h&&h.groupId?h.groupId+"":i||r.getId(o)}}var d=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++){var o=e[r],i=t[r];if(o.data.getId(o.dataIndex)!==i.data.getId(i.dataIndex))return!1}return!0}(r,o),h={};if(!d)for(var p=0;p<o.length;p++){var f=o[p],g=f.data.getItemGraphicEl(f.dataIndex);g&&(h[g.id]=!0)}function m(e,t){var n=r[t],a=o[e],s=a.data.hostModel,l=n.data.getItemGraphicEl(n.dataIndex),c=a.data.getItemGraphicEl(a.dataIndex);l!==c?l&&h[l.id]||c&&(DH(c),l?(DH(l),AH(l),u=!0,CH(MH(l),MH(c),a.divide,s,e,i)):IH(c,s,e)):c&&function(e,t,n){var r=tc("update",n,t);r&&e.traverse(function(e){if(e instanceof fa){var t=function(e){return ec(e).oldStyle}(e);t&&e.animateFrom({style:t},r)}})}(c,a.dataIndex,s)}new xy(r,o,c(!0,d),c(!1,d),null,"multiple").update(m).updateManyToOne(function(e,t){var n=o[e],a=n.data,s=a.hostModel,l=a.getItemGraphicEl(n.dataIndex),c=F(B(t,function(e){return r[e].data.getItemGraphicEl(r[e].dataIndex)}),function(e){return e&&e!==l&&!h[e.id]});l&&(DH(l),c.length?(O(c,function(e){DH(e),AH(e)}),u=!0,CH(MH(c),MH(l),n.divide,s,e,i)):IH(l,s,n.dataIndex))}).updateOneToMany(function(e,t){var n=r[t],a=n.data.getItemGraphicEl(n.dataIndex);if(!a||!h[a.id]){var s=F(B(e,function(e){return o[e].data.getItemGraphicEl(o[e].dataIndex)}),function(e){return e&&e!==a}),l=o[e[0]].data.hostModel;s.length&&(O(s,function(e){return DH(e)}),a?(DH(a),AH(a),u=!0,CH(MH(a),MH(s),n.divide,l,e[0],i)):O(s,function(t){return IH(t,l,e[0])}))}}).updateManyToMany(function(e,t){new xy(t,e,function(e){return r[e].data.getId(r[e].dataIndex)},function(e){return o[e].data.getId(o[e].dataIndex)}).update(function(n,r){m(e[n],t[r])}).execute()}).execute(),u&&O(t,function(e){var t=e.data.hostModel,r=t&&n.getViewOfSeriesModel(t),o=tc("update",t,0);r&&t.isAnimationEnabled()&&o&&o.duration>0&&r.group.traverse(function(e){e instanceof ms&&!e.animators.length&&e.animateFrom({style:{opacity:0}},o)})})}function LH(e){return e.getModel("universalTransition").get("seriesKey")||e.id}function NH(e){return U(e)?e.sort().join(","):e}function RH(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function EH(e,t){for(var n=0;n<e.length;n++)if(null!=t.seriesIndex&&t.seriesIndex===e[n].seriesIndex||null!=t.seriesId&&t.seriesId===e[n].id)return n}vy([function(e){e.registerPainter("canvas",Lw)}]),vy([function(e){e.registerPainter("svg",Tw)}]),vy([function(e){e.registerChartView(hS),e.registerSeriesModel(Nw),e.registerLayout(pS("line",!0)),e.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),n=e.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,mS("line"))},function(e){e.registerChartView(TS),e.registerSeriesModel(yS),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,G(Sb,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Cb("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,mS("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)})})},function(e){e.registerChartView(QS),e.registerSeriesModel(rC),cm("pie",e.registerAction),e.registerLayout(G(YS,"pie")),e.registerProcessor(qS("pie")),e.registerProcessor({seriesType:"pie",reset:function(e,t){var n=e.getData();n.filterSelf(function(e){var t=n.mapDimension("value"),r=n.get(t,e);return!(X(r)&&!isNaN(r)&&r<0)})}})},function(e){vy(rM),e.registerSeriesModel(oC),e.registerChartView(lC),e.registerLayout(pS("scatter"))},function(e){vy(vM),e.registerChartView(lM),e.registerSeriesModel(uM),e.registerLayout(oM),e.registerProcessor(qS("radar")),e.registerPreprocessor(sM)},function(e){vy(UT),e.registerChartView(MT),e.registerSeriesModel(TT),e.registerLayout(IT),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,kT),cm("map",e.registerAction)},function(e){e.registerChartView(nk),e.registerSeriesModel(Ck),e.registerLayout(Tk),e.registerVisual(kk),function(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=e.dataIndex,r=t.getData().tree.getNodeByDataIndex(n);r.isExpand=!r.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,n){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var r=HT(t.coordinateSystem,e,void 0,n);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)})})}(e)},function(e){e.registerSeriesModel(Dk),e.registerChartView(Gk),e.registerVisual(iI),e.registerLayout(yI),function(e){for(var t=0;t<Ik.length;t++)e.registerAction({type:Ik[t],update:"updateView"},_e);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(t,n){var r=xk(e,["treemapZoomToNode","treemapRootToNode"],t);if(r){var o=t.getViewRoot();o&&(e.direction=wk(o,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}})})}(e)},function(e){e.registerChartView(bA),e.registerSeriesModel(TA),e.registerProcessor(CI),e.registerVisual(MI),e.registerVisual(kI),e.registerLayout(BI),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,jI),e.registerLayout(qI),e.registerCoordinateSystem("graphView",{dimensions:DT.dimensions,create:XI}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},_e),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},_e),e.registerAction(kA,function(e,t,n){t.eachComponent({mainType:"series",query:e},function(t){var r=HT(t.coordinateSystem,e,void 0,n);t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom)})})},function(e){e.registerChartView(PA),e.registerSeriesModel(LA)},function(e){e.registerChartView(EA),e.registerSeriesModel(OA),e.registerLayout(BA),e.registerProcessor(qS("funnel"))},function(e){vy(uP),e.registerChartView(zA),e.registerSeriesModel(GA),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,YA)},function(e){e.registerChartView(hP),e.registerSeriesModel(fP),e.registerLayout(gP),e.registerVisual(kP),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(t){t.setNodePosition(e.dataIndex,[e.localX,e.localY])})})},function(e){e.registerSeriesModel(AP),e.registerChartView(DP),e.registerLayout(BP),e.registerTransform(zP)},function(e){e.registerChartView(VP),e.registerSeriesModel(KP),e.registerPreprocessor(JP),e.registerVisual(oL),e.registerLayout(iL)},function(e){e.registerChartView(uL),e.registerSeriesModel(cL),e.registerLayout(pS("effectScatter"))},function(e){e.registerChartView(yL),e.registerSeriesModel(wL),e.registerLayout(vL),e.registerVisual(CL)},function(e){e.registerChartView(kL),e.registerSeriesModel(IL)},function(e){e.registerChartView(LL),e.registerSeriesModel($L),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,G(Sb,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Cb("pictorialBar"))},function(e){e.registerChartView(KL),e.registerSeriesModel(JL),e.registerLayout(QL),e.registerProcessor(qS("themeRiver"))},function(e){e.registerChartView(oN),e.registerSeriesModel(iN),e.registerLayout(G(lN,"sunburst")),e.registerProcessor(G(qS,"sunburst")),e.registerVisual(cN),function(e){e.registerAction({type:nN,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t,n){var r=xk(e,[nN],t);if(r){var o=t.getViewRoot();o&&(e.direction=wk(o,r.node)?"rollUp":"drillDown"),t.resetViewRoot(r.node)}})}),e.registerAction({type:rN,update:"none"},function(e,t,n){e=A({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(t){var n=xk(e,[rN],t);n&&(e.dataIndex=n.node.dataIndex)}),n.dispatchAction(A(e,{type:"highlight"}))}),e.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(e,t,n){e=A({},e),n.dispatchAction(A(e,{type:"downplay"}))})}(e)},function(e){e.registerChartView(tR),e.registerSeriesModel(fN)}]),vy(function(e){vy(rM),vy(nE)}),vy(function(e){vy(nE),jC.registerAxisPointerClass("PolarAxisPointer",rE),e.registerCoordinateSystem("polar",vE),e.registerComponentModel(iE),e.registerComponentView(NE),mC(e,"angle",sE,PE),mC(e,"radius",lE,LE),e.registerComponentView(wE),e.registerComponentView(TE),e.registerLayout(G(DE,"bar"))}),vy(UT),vy(function(e){vy(nE),jC.registerAxisPointerClass("SingleAxisPointer",qE),e.registerComponentView(KE),e.registerComponentView(BE),e.registerComponentModel(FE),mC(e,"single",FE,FE.defaultOption),e.registerCoordinateSystem("single",UE)}),vy(uP),vy(function(e){e.registerComponentModel(JE),e.registerComponentView(eO),e.registerCoordinateSystem("calendar",nO)}),vy(function(e){e.registerComponentModel(lO),e.registerComponentView(dO),e.registerPreprocessor(function(e){var t=e.graphic;U(t)?t[0]&&t[0].elements?e.graphic=[e.graphic[0]]:e.graphic=[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}),vy(function(e){e.registerComponentModel(BO),e.registerComponentView(FO),EO("saveAsImage",VO),EO("magicType",GO),EO("dataView",ZO),EO("dataZoom",mB),EO("restore",eB),vy(LO)}),vy(function(e){vy(nE),e.registerComponentModel(bB),e.registerComponentView(OB),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},_e),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},_e)}),vy(nE),vy(function(e){e.registerComponentView(oz),e.registerComponentModel(iz),e.registerPreprocessor(HB),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,QB),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(t){t.setAreas(e.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},_e),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},_e),EO("brush",lz)}),vy(function(e){e.registerComponentModel(uz),e.registerComponentView(cz)}),vy(function(e){e.registerComponentModel(hz),e.registerComponentView(vz),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,n){var r=t.getComponent("timeline");return r&&null!=e.currentIndex&&(r.setCurrentIndex(e.currentIndex),!r.get("loop",!0)&&r.isIndexMax()&&r.getPlayState()&&(r.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:r.get("replaceMerge",!0)}),D({currentIndex:r.option.currentIndex},e)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)})}(e),e.registerPreprocessor(xz)}),vy(function(e){e.registerComponentModel(kz),e.registerComponentView(Fz),e.registerPreprocessor(function(e){Sz(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}),vy(function(e){e.registerComponentModel(Vz),e.registerComponentView(qz),e.registerPreprocessor(function(e){Sz(e.series,"markLine")&&(e.markLine=e.markLine||{})})}),vy(function(e){e.registerComponentModel(Xz),e.registerComponentView(nF),e.registerPreprocessor(function(e){Sz(e.series,"markArea")&&(e.markArea=e.markArea||{})})}),vy(function(e){vy(fF),vy(_F)}),vy(function(e){vy(LF),vy(HF)}),vy(LF),vy(HF),vy(function(e){vy(_V),vy(TV)}),vy(_V),vy(TV),vy(function(e){e.registerPreprocessor(PV),e.registerVisual(e.PRIORITY.VISUAL.ARIA,DV)}),vy(function(e){e.registerTransform(GV),e.registerTransform(UV)}),vy(function(e){e.registerComponentModel(jV),e.registerComponentView(YV)}),vy(function(e){e.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){O(hi(n.seriesTransition),function(e){O(hi(e.to),function(e){for(var t=n.updatedSeries,r=0;r<t.length;r++)(null!=e.seriesIndex&&e.seriesIndex===t[r].seriesIndex||null!=e.seriesId&&e.seriesId===t[r].id)&&(t[r][Qf]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(e,t,n){var r=TH(t);if(r.oldSeries&&n.updatedSeries&&n.optionChanged){var o=n.seriesTransition;if(o)O(hi(o),function(e){!function(e,t,n,r){var o=[],i=[];O(hi(e.from),function(e){var n=EH(t.oldSeries,e);n>=0&&o.push({dataGroupId:t.oldDataGroupIds[n],data:t.oldData[n],divide:RH(t.oldData[n]),dim:e.dimension})}),O(hi(e.to),function(e){var r=EH(n.updatedSeries,e);if(r>=0){var o=n.updatedSeries[r].getData();i.push({dataGroupId:t.oldDataGroupIds[r],data:o,divide:RH(o),dim:e.dimension})}}),o.length>0&&i.length>0&&PH(o,i,r)}(e,r,n,t)});else{var i=function(e,t){var n=me(),r=me(),o=me();return O(e.oldSeries,function(t,n){var i=e.oldDataGroupIds[n],a=e.oldData[n],s=LH(t),l=NH(s);r.set(l,{dataGroupId:i,data:a}),U(s)&&O(s,function(e){o.set(e,{key:l,dataGroupId:i,data:a})})}),O(t.updatedSeries,function(e){if(e.isUniversalTransitionEnabled()&&e.isAnimationEnabled()){var t=e.get("dataGroupId"),i=e.getData(),a=LH(e),s=NH(a),l=r.get(s);if(l)n.set(s,{oldSeries:[{dataGroupId:l.dataGroupId,divide:RH(l.data),data:l.data}],newSeries:[{dataGroupId:t,divide:RH(i),data:i}]});else if(U(a)){var u=[];O(a,function(e){var t=r.get(e);t.data&&u.push({dataGroupId:t.dataGroupId,divide:RH(t.data),data:t.data})}),u.length&&n.set(s,{oldSeries:u,newSeries:[{dataGroupId:t,data:i,divide:RH(i)}]})}else{var c=o.get(a);if(c){var d=n.get(c.key);d||(d={oldSeries:[{dataGroupId:c.dataGroupId,data:c.data,divide:RH(c.data)}],newSeries:[]},n.set(c.key,d)),d.newSeries.push({dataGroupId:t,data:i,divide:RH(i)})}}}}),n}(r,n);O(i.keys(),function(e){var n=i.get(e);PH(n.oldSeries,n.newSeries,t)})}O(n.updatedSeries,function(e){e[Qf]&&(e[Qf]=!1)})}for(var a=e.getSeries(),s=r.oldSeries=[],l=r.oldDataGroupIds=[],u=r.oldData=[],c=0;c<a.length;c++){var d=a[c].getData();d.count()<1e4&&(s.push(a[c]),l.push(a[c].get("dataGroupId")),u.push(d))}})}),vy(function(e){e.registerUpdateLifecycle("series:beforeupdate",function(e,t,n){var r=x_(t).labelManager;r||(r=x_(t).labelManager=new b_),r.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(e,t,n){var r=x_(t).labelManager;n.updatedSeries.forEach(function(e){r.addLabelsOfSeries(t.getViewOfSeriesModel(e))}),r.updateLayoutConfig(t),r.layout(t),r.processLabelsOverall()})}),e.Axis=Ex,e.ChartView=hg,e.ComponentModel=xh,e.ComponentView=lg,e.List=Uy,e.Model=hd,e.PRIORITY=av,e.SeriesModel=eg,e.color=rr,e.connect=function(e){if(U(e)){var t=e;e=null,O(t,function(t){null!=t.group&&(e=t.group)}),e=e||"g_"+Zv++,O(t,function(t){t.group=e})}return qv[e]=!0,e},e.dataTool={},e.dependencies={zrender:"5.4.4"},e.disConnect=Jv,e.disconnect=Kv,e.dispose=function(e){Y(e)?e=Yv[e]:e instanceof Ev||(e=Qv(e)),e instanceof Ev&&!e.isDisposed()&&e.dispose()},e.env=o,e.extendChartView=function(e){var t=hg.extend(e);return hg.registerClass(t),t},e.extendComponentModel=function(e){var t=xh.extend(e);return xh.registerClass(t),t},e.extendComponentView=function(e){var t=lg.extend(e);return lg.registerClass(t),t},e.extendSeriesModel=function(e){var t=eg.extend(e);return eg.registerClass(t),t},e.format=Mx,e.getCoordinateSystemDimensions=function(e){var t=np.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},e.getInstanceByDom=Qv,e.getInstanceById=function(e){return Yv[e]},e.getMap=function(e){var t=rv("getMap");return t&&t(e)},e.graphic=Cx,e.helper=sx,e.init=function(e,t,n){var r=!(n&&n.ssr);if(r){var o=Qv(e);if(o)return o}var i=new Ev(e,t,n);return i.id="ec_"+Xv++,Yv[i.id]=i,r&&Pi(e,$v,i.id),Dv(i),tv.trigger("afterinit",i),i},e.innerDrawElementOnCanvas=Ym,e.matrix=Tt,e.number=_x,e.parseGeoJSON=xx,e.parseGeoJson=xx,e.registerAction=ay,e.registerCoordinateSystem=sy,e.registerLayout=ly,e.registerLoading=hy,e.registerLocale=wd,e.registerMap=py,e.registerPostInit=ry,e.registerPostUpdate=oy,e.registerPreprocessor=ty,e.registerProcessor=ny,e.registerTheme=ey,e.registerTransform=fy,e.registerUpdateLifecycle=iy,e.registerVisual=uy,e.setCanvasCreator=function(e){d({createCanvas:e})},e.setPlatformAPI=d,e.throttle=_g,e.time=Sx,e.use=vy,e.util=Tx,e.vector=je,e.version="5.4.3",e.zrUtil=Se,e.zrender=Bo,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],t):t((e=e||self).bmap={},e.echarts)}(this,function(e,t){"use strict";function n(e,t){this._bmap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=t,this._projection=new BMap.MercatorProjection}function r(e,n){return n=n||[0,0],t.util.map([0,1],function(t){var r=n[t],o=e[t]/2,i=[],a=[];return i[t]=r-o,a[t]=r+o,i[1-t]=a[1-t]=n[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(a)[t])},this)}var o;function i(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}n.prototype.dimensions=["lng","lat"],n.prototype.setZoom=function(e){this._zoom=e},n.prototype.setCenter=function(e){this._center=this._projection.lngLatToPoint(new BMap.Point(e[0],e[1]))},n.prototype.setMapOffset=function(e){this._mapOffset=e},n.prototype.getBMap=function(){return this._bmap},n.prototype.dataToPoint=function(e){var t=new BMap.Point(e[0],e[1]);e=this._bmap.pointToOverlayPixel(t),t=this._mapOffset;return[e.x-t[0],e.y-t[1]]},n.prototype.pointToData=function(e){var t=this._mapOffset;return[(e=this._bmap.overlayPixelToPoint({x:e[0]+t[0],y:e[1]+t[1]})).lng,e.lat]},n.prototype.getViewRect=function(){var e=this._api;return new t.graphic.BoundingRect(0,0,e.getWidth(),e.getHeight())},n.prototype.getRoamTransform=function(){return t.matrix.create()},n.prototype.prepareCustoms=function(){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.util.bind(this.dataToPoint,this),size:t.util.bind(r,this)}}},n.dimensions=n.prototype.dimensions,n.create=function(e,r){var i,a=r.getDom();e.eachComponent("bmap",function(e){var s,l=r.getZr().painter,u=l.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");function c(e){this._root=e}if(o=o||((c.prototype=new BMap.Overlay).initialize=function(e){return e.getPanes().labelPane.appendChild(this._root),this._root},c.prototype.draw=function(){},c),i)throw new Error("Only one bmap component can exist");e.__bmap||((d=a.querySelector(".ec-extension-bmap"))&&(u.style.left="0px",u.style.top="0px",a.removeChild(d)),(d=document.createElement("div")).className="ec-extension-bmap",d.style.cssText="position:absolute;width:100%;height:100%",a.appendChild(d),(h=e.get("mapOptions"))&&delete(h=t.util.clone(h)).mapType,s=e.__bmap=new BMap.Map(d,h),d=new o(u),s.addOverlay(d),l.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}),s=e.__bmap;var d,h=e.get("center");u=e.get("zoom");h&&u&&(d=s.getCenter(),l=s.getZoom(),e.centerOrZoomChanged([d.lng,d.lat],l)&&(l=new BMap.Point(h[0],h[1]),s.centerAndZoom(l,u))),(i=new n(s,r)).setMapOffset(e.__mapOffset||[0,0]),i.setZoom(u),i.setCenter(h),e.coordinateSystem=i}),e.eachSeries(function(e){"bmap"===e.get("coordinateSystem")&&(e.coordinateSystem=i)})},t.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(e,t){this.option.center=e,this.option.zoom=t},centerOrZoomChanged:function(e,t){var n,r=this.option;return n=e,e=r.center,!(n&&e&&n[0]===e[0]&&n[1]===e[1]&&t===r.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),t.extendComponentView({type:"bmap",render:function(e,n,r){var o=!0,a=e.getBMap(),s=r.getZr().painter.getViewportRoot(),l=e.coordinateSystem,u=function(t,n){var i,a,u,c;o||(c=s.parentNode.parentNode.parentNode,i=[-parseInt(c.style.left,10)||0,-parseInt(c.style.top,10)||0],a=s.style,u=i[0]+"px",c=i[1]+"px",a.left!==u&&(a.left=u),a.top!==c&&(a.top=c),l.setMapOffset(i),e.__mapOffset=i,r.dispatchAction({type:"bmapRoam",animation:{duration:0}}))};function c(){o||r.dispatchAction({type:"bmapRoam",animation:{duration:0}})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("moveend",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",u),a.addEventListener("moveend",u),a.addEventListener("zoomend",c),this._oldMoveHandler=u,this._oldZoomEndHandler=c,(h=e.get("roam"))&&"scale"!==h?a.enableDragging():a.disableDragging(),h&&"move"!==h?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var d=e.__mapStyle,h=(u=e.get("mapStyle")||{},JSON.stringify(u));JSON.stringify(d)!==h&&(i(u)||a.setMapStyle(t.util.clone(u)),e.__mapStyle=JSON.parse(h)),d=e.__mapStyle2,u=e.get("mapStyleV2")||{},h=JSON.stringify(u),JSON.stringify(d)!==h&&(i(u)||a.setMapStyleV2(t.util.clone(u)),e.__mapStyle2=JSON.parse(h)),o=!1}}),t.registerCoordinateSystem("bmap",n),t.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(e,t){t.eachComponent("bmap",function(e){var t=e.getBMap(),n=t.getCenter();e.setCenterAndZoom([n.lng,n.lat],t.getZoom())})}),e.version="1.0.0",Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(function(){try{return require("moment")}catch(e){}}()):"function"==typeof define&&define.amd?define(["require"],function(e){return t(function(){try{return e("moment")}catch(e){}}())}):(e=e||self).Chart=t(e.moment)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},n=function(e,t){return e(t={exports:{}}),t.exports}(function(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[t[r]]=r);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var i in o)if(o.hasOwnProperty(i)){if(!("channels"in o[i]))throw new Error("missing channels property: "+i);if(!("labels"in o[i]))throw new Error("missing channel labels property: "+i);if(o[i].labels.length!==o[i].channels)throw new Error("channel and label counts mismatch: "+i);var a=o[i].channels,s=o[i].labels;delete o[i].channels,delete o[i].labels,Object.defineProperty(o[i],"channels",{value:a}),Object.defineProperty(o[i],"labels",{value:s})}o.rgb.hsl=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),l=s-a;return s===a?t=0:r===s?t=(o-i)/l:o===s?t=2+(i-r)/l:i===s&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},o.rgb.hsv=function(e){var t,n,r,o,i,a=e[0]/255,s=e[1]/255,l=e[2]/255,u=Math.max(a,s,l),c=u-Math.min(a,s,l),d=function(e){return(u-e)/6/c+.5};return 0===c?o=i=0:(i=c/u,t=d(a),n=d(s),r=d(l),a===u?o=r-n:s===u?o=1/3+t-r:l===u&&(o=2/3+n-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*u]},o.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[o.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,r))*100,100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},o.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,o=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-o)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},o.rgb.keyword=function(e){var r=n[e];if(r)return r;var o,i,a,s=1/0;for(var l in t)if(t.hasOwnProperty(l)){var u=(i=e,a=t[l],Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));u<s&&(s=u,o=l)}return o},o.keyword.rgb=function(e){return t[e]},o.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},o.rgb.lab=function(e){var t=o.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},o.hsl.rgb=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),o=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[u]=255*i;return o},o.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,o=n,i=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,o*=i<=1?i:2-i,[t,100*(0===r?2*o/(i+o):2*n/(r+n)),(r+n)/2*100]},o.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*i),l=255*r*(1-n*(1-i));switch(r*=255,o){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},o.hsv.hsl=function(e){var t,n,r,o=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-i)*a,n=i*s,[o,100*(n=(n/=(t=(2-i)*s)<=1?t:2-t)||0),100*(r/=2)]},o.hwb.rgb=function(e){var t,n,r,o,i,a,s,l=e[0]/360,u=e[1]/100,c=e[2]/100,d=u+c;switch(d>1&&(u/=d,c/=d),r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),o=u+r*((n=1-c)-u),t){default:case 6:case 0:i=n,a=o,s=u;break;case 1:i=o,a=n,s=u;break;case 2:i=u,a=n,s=o;break;case 3:i=u,a=o,s=n;break;case 4:i=o,a=u,s=n;break;case 5:i=n,a=u,s=o}return[255*i,255*a,255*s]},o.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o))]},o.xyz.rgb=function(e){var t,n,r,o=e[0]/100,i=e[1]/100,a=e[2]/100;return n=-.9689*o+1.8758*i+.0415*a,r=.0557*o+-.204*i+1.057*a,t=(t=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},o.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},o.lab.xyz=function(e){var t,n,r,o=e[0];t=e[1]/500+(n=(o+16)/116),r=n-e[2]/200;var i=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=i>.008856?i:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},o.lab.lch=function(e){var t,n=e[0],r=e[1],o=e[2];return(t=360*Math.atan2(o,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+o*o),t]},o.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},o.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var a=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(a+=60),a},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},o.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},o.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},o.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,o=e[2]/255,i=Math.max(Math.max(n,r),o),a=Math.min(Math.min(n,r),o),s=i-a;return t=s<=0?0:i===n?(r-o)/s%6:i===r?2+(o-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},o.hsl.hcg=function(e){var t,n=e[1]/100,r=e[2]/100,o=0;return(t=r<.5?2*n*r:2*n*(1-r))<1&&(o=(r-.5*t)/(1-t)),[e[0],100*t,100*o]},o.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},o.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var o,i=[0,0,0],a=t%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return o=(1-n)*r,[255*(n*i[0]+o),255*(n*i[1]+o),255*(n*i[2]+o)]},o.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},o.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},o.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},o.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});function r(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),a=i.length,s=0;s<a;s++){var l=i[s],u=t[l];-1===u.distance&&(u.distance=t[o].distance+1,u.parent=o,r.unshift(l))}return t}function o(e,t){return function(n){return t(e(n))}}function i(e,t){for(var r=[t[e].parent,e],i=n[t[e].parent][e],a=t[e].parent;t[a].parent;)r.unshift(t[a].parent),i=o(n[t[a].parent][a],i),a=t[a].parent;return i.conversion=r,i}n.rgb,n.hsl,n.hsv,n.hwb,n.cmyk,n.xyz,n.lab,n.lch,n.hex,n.keyword,n.ansi16,n.ansi256,n.hcg,n.apple,n.gray;var a={};Object.keys(n).forEach(function(e){a[e]={},Object.defineProperty(a[e],"channels",{value:n[e].channels}),Object.defineProperty(a[e],"labels",{value:n[e].labels});var t=function(e){for(var t=r(e),n={},o=Object.keys(t),a=o.length,s=0;s<a;s++){var l=o[s];null!==t[l].parent&&(n[l]=i(l,t))}return n}(e);Object.keys(t).forEach(function(n){var r=t[n];a[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,o=0;o<r;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),a[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})});var s=a,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},u={getRgba:c,getHsla:d,getRgb:function(e){var t=c(e);return t&&t.slice(0,3)},getHsl:function(e){var t=d(e);return t&&t.slice(0,3)},getHwb:h,getAlpha:function(e){var t=c(e);return t||(t=d(e))||(t=h(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+v(e[0])+v(e[1])+v(e[2])+(t>=0&&t<1?v(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?p(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:p,percentString:function(e,t){return t<1||e[3]&&e[3]<1?f(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:f,hslString:function(e,t){return t<1||e[3]&&e[3]<1?g(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:g,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return y[e.slice(0,3)]}};function c(e){if(e){var t=[0,0,0],n=1,r=e.match(/^#([a-fA-F0-9]{3,4})$/i),o="";if(r){o=(r=r[1])[3];for(var i=0;i<t.length;i++)t[i]=parseInt(r[i]+r[i],16);o&&(n=Math.round(parseInt(o+o,16)/255*100)/100)}else if(r=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(o=r[2],r=r[1],i=0;i<t.length;i++)t[i]=parseInt(r.slice(2*i,2*i+2),16);o&&(n=Math.round(parseInt(o,16)/255*100)/100)}else if(r=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(i=0;i<t.length;i++)t[i]=parseInt(r[i+1]);n=parseFloat(r[4])}else if(r=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(i=0;i<t.length;i++)t[i]=Math.round(2.55*parseFloat(r[i+1]));n=parseFloat(r[4])}else if(r=e.match(/(\w+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(t=l[r[1]]))return}for(i=0;i<t.length;i++)t[i]=m(t[i],0,255);return n=n||0==n?m(n,0,1):1,t[3]=n,t}}function d(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[m(parseInt(t[1]),0,360),m(parseFloat(t[2]),0,100),m(parseFloat(t[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function h(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[m(parseInt(t[1]),0,360),m(parseFloat(t[2]),0,100),m(parseFloat(t[3]),0,100),m(isNaN(n)?1:n,0,1)]}}}function p(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function f(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function g(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function m(e,t,n){return Math.min(Math.max(t,e),n)}function v(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var y={};for(var b in l)y[l[b]]=b;var x=function(e){return e instanceof x?e:this instanceof x?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=u.getRgba(e))?this.setValues("rgb",t):(t=u.getHsla(e))?this.setValues("hsl",t):(t=u.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new x(e);var t};x.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return u.hexString(this.values.rgb)},rgbString:function(){return u.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return u.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return u.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return u.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return u.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return u.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return u.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=e,r=void 0===t?.5:t,o=2*r-1,i=this.alpha()-n.alpha(),a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a;return this.rgb(a*this.red()+s*n.red(),a*this.green()+s*n.green(),a*this.blue()+s*n.blue()).alpha(this.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new x,r=this.values,o=n.values;for(var i in r)r.hasOwnProperty(i)&&(e=r[i],"[object Array]"===(t={}.toString.call(e))?o[i]=e.slice(0):"[object Number]"===t?o[i]=e:console.error("unexpected color value:",e));return n}},x.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},x.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},x.prototype.getValues=function(e){for(var t=this.values,n={},r=0;r<e.length;r++)n[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(n.a=t.alpha),n},x.prototype.setValues=function(e,t){var n,r,o=this.values,i=this.spaces,a=this.maxes,l=1;if(this.valid=!0,"alpha"===e)l=t;else if(t.length)o[e]=t.slice(0,e.length),l=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)o[e][n]=t[e.charAt(n)];l=t.a}else if(void 0!==t[i[e][0]]){var u=i[e];for(n=0;n<e.length;n++)o[e][n]=t[u[n]];l=t.alpha}if(o.alpha=Math.max(0,Math.min(1,void 0===l?o.alpha:l)),"alpha"===e)return!1;for(n=0;n<e.length;n++)r=Math.max(0,Math.min(a[e][n],o[e][n])),o[e][n]=Math.round(r);for(var c in i)c!==e&&(o[c]=s[e][c](o[e]));return!0},x.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},x.prototype.setChannel=function(e,t,n){var r=this.values[e];return void 0===n?r[t]:(n===r[t]||(r[t]=n,this.setValues(e,r)),this)},"undefined"!=typeof window&&(window.Color=x);var _=x;function w(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}var S,C={noop:function(){},uid:(S=0,function(){return S++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return C.valueOrDefault(C.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,r){var o,i,a;if(C.isArray(e))if(i=e.length,r)for(o=i-1;o>=0;o--)t.call(n,e[o],o);else for(o=0;o<i;o++)t.call(n,e[o],o);else if(C.isObject(e))for(i=(a=Object.keys(e)).length,o=0;o<i;o++)t.call(n,e[a[o]],a[o])},arrayEquals:function(e,t){var n,r,o,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(o=e[n],i=t[n],o instanceof Array&&i instanceof Array){if(!C.arrayEquals(o,i))return!1}else if(o!==i)return!1;return!0},clone:function(e){if(C.isArray(e))return e.map(C.clone);if(C.isObject(e)){for(var t=Object.create(e),n=Object.keys(e),r=n.length,o=0;o<r;++o)t[n[o]]=C.clone(e[n[o]]);return t}return e},_merger:function(e,t,n,r){if(w(e)){var o=t[e],i=n[e];C.isObject(o)&&C.isObject(i)?C.merge(o,i,r):t[e]=C.clone(i)}},_mergerIf:function(e,t,n){if(w(e)){var r=t[e],o=n[e];C.isObject(r)&&C.isObject(o)?C.mergeIf(r,o):t.hasOwnProperty(e)||(t[e]=C.clone(o))}},merge:function(e,t,n){var r,o,i,a,s,l=C.isArray(t)?t:[t],u=l.length;if(!C.isObject(e))return e;for(r=(n=n||{}).merger||C._merger,o=0;o<u;++o)if(t=l[o],C.isObject(t))for(s=0,a=(i=Object.keys(t)).length;s<a;++s)r(i[s],e,t,n);return e},mergeIf:function(e,t){return C.merge(e,t,{merger:C._mergerIf})},extend:Object.assign||function(e){return C.merge(e,[].slice.call(arguments,1),{merger:function(e,t,n){t[e]=n[e]}})},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=t.prototype,n.prototype=new r,n.extend=C.inherits,e&&C.extend(n.prototype,e),n.__super__=t.prototype,n},_deprecated:function(e,t,n,r){void 0!==t&&console.warn(e+': "'+n+'" is deprecated. Please use "'+r+'" instead')}},M=C;C.callCallback=C.callback,C.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},C.getValueOrDefault=C.valueOrDefault,C.getValueAtIndexOrDefault=C.valueAtIndexOrDefault;var T={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-T.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*T.easeInBounce(2*e):.5*T.easeOutBounce(2*e-1)+.5}},k={effects:T};M.easingEffects=T;var I=Math.PI,A=I/180,D=2*I,P=I/2,L=I/4,N=2*I/3,R={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,r,o,i){if(i){var a=Math.min(i,o/2,r/2),s=t+a,l=n+a,u=t+r-a,c=n+o-a;e.moveTo(t,l),s<u&&l<c?(e.arc(s,l,a,-I,-P),e.arc(u,l,a,-P,0),e.arc(u,c,a,0,P),e.arc(s,c,a,P,I)):s<u?(e.moveTo(s,n),e.arc(u,l,a,-P,P),e.arc(s,l,a,P,I+P)):l<c?(e.arc(s,l,a,-I,0),e.arc(s,c,a,0,I)):e.arc(s,l,a,-I,I),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,o)},drawPoint:function(e,t,n,r,o,i){var a,s,l,u,c,d=(i||0)*A;if(t&&"object"==typeof t&&("[object HTMLImageElement]"===(a=t.toString())||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(r,o),e.rotate(d),e.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),void e.restore();if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(r,o,n,0,D),e.closePath();break;case"triangle":e.moveTo(r+Math.sin(d)*n,o-Math.cos(d)*n),d+=N,e.lineTo(r+Math.sin(d)*n,o-Math.cos(d)*n),d+=N,e.lineTo(r+Math.sin(d)*n,o-Math.cos(d)*n),e.closePath();break;case"rectRounded":u=n-(c=.516*n),s=Math.cos(d+L)*u,l=Math.sin(d+L)*u,e.arc(r-s,o-l,c,d-I,d-P),e.arc(r+l,o-s,c,d-P,d),e.arc(r+s,o+l,c,d,d+P),e.arc(r-l,o+s,c,d+P,d+I),e.closePath();break;case"rect":if(!i){u=Math.SQRT1_2*n,e.rect(r-u,o-u,2*u,2*u);break}d+=L;case"rectRot":s=Math.cos(d)*n,l=Math.sin(d)*n,e.moveTo(r-s,o-l),e.lineTo(r+l,o-s),e.lineTo(r+s,o+l),e.lineTo(r-l,o+s),e.closePath();break;case"crossRot":d+=L;case"cross":s=Math.cos(d)*n,l=Math.sin(d)*n,e.moveTo(r-s,o-l),e.lineTo(r+s,o+l),e.moveTo(r+l,o-s),e.lineTo(r-l,o+s);break;case"star":s=Math.cos(d)*n,l=Math.sin(d)*n,e.moveTo(r-s,o-l),e.lineTo(r+s,o+l),e.moveTo(r+l,o-s),e.lineTo(r-l,o+s),d+=L,s=Math.cos(d)*n,l=Math.sin(d)*n,e.moveTo(r-s,o-l),e.lineTo(r+s,o+l),e.moveTo(r+l,o-s),e.lineTo(r-l,o+s);break;case"line":s=Math.cos(d)*n,l=Math.sin(d)*n,e.moveTo(r-s,o-l),e.lineTo(r+s,o+l);break;case"dash":e.moveTo(r,o),e.lineTo(r+Math.cos(d)*n,o+Math.sin(d)*n)}e.fill(),e.stroke()}},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,r){var o=n.steppedLine;if(o){if("middle"===o){var i=(t.x+n.x)/2;e.lineTo(i,r?n.y:t.y),e.lineTo(i,r?t.y:n.y)}else"after"===o&&!r||"after"!==o&&r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}else n.tension?e.bezierCurveTo(r?t.controlPointPreviousX:t.controlPointNextX,r?t.controlPointPreviousY:t.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},E=R;M.clear=R.clear,M.drawRoundedRectangle=function(e){e.beginPath(),R.roundedRect.apply(R,arguments)};var O={_set:function(e,t){return M.merge(this[e]||(this[e]={}),t)}};O._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var B=O,z=M.valueOrDefault,F={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,r,o;return M.isObject(e)?(t=+e.top||0,n=+e.right||0,r=+e.bottom||0,o=+e.left||0):t=n=r=o=+e||0,{top:t,right:n,bottom:r,left:o,height:t+r,width:o+n}},_parseFont:function(e){var t=B.global,n=z(e.fontSize,t.defaultFontSize),r={family:z(e.fontFamily,t.defaultFontFamily),lineHeight:M.options.toLineHeight(z(e.lineHeight,t.defaultLineHeight),n),size:n,style:z(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return r.string=function(e){return!e||M.isNullOrUndef(e.size)||M.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r},resolve:function(e,t,n,r){var o,i,a,s=!0;for(o=0,i=e.length;o<i;++o)if(void 0!==(a=e[o])&&(void 0!==t&&"function"==typeof a&&(a=a(t),s=!1),void 0!==n&&M.isArray(a)&&(a=a[n],s=!1),void 0!==a))return r&&!s&&(r.cacheable=!1),a}},V={_factorize:function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t==0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort(function(e,t){return e-t}).pop(),n},log10:Math.log10||function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t}},H=V;M.log10=V.log10;var W=M,G=k,U=E,j=F,Y=H;W.easing=G,W.canvas=U,W.options=j,W.math=Y,W.rtl={getRtlAdapter:function(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}},overrideTextDirection:function(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)},restoreTextDirection:function(e){var t=e.prevTextDirection;void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}};var q=function(e){W.extend(this,e),this.initialize.apply(this,arguments)};W.extend(q.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=W.extend({},e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,r=t._start,o=t._view;return n&&1!==e?(o||(o=t._view={}),r||(r=t._start={}),function(e,t,n,r){var o,i,a,s,l,u,c,d,h,p=Object.keys(n);for(o=0,i=p.length;o<i;++o)if(u=n[a=p[o]],t.hasOwnProperty(a)||(t[a]=u),(s=t[a])!==u&&"_"!==a[0]){if(e.hasOwnProperty(a)||(e[a]=s),(c=typeof u)==typeof(l=e[a]))if("string"===c){if((d=_(l)).valid&&(h=_(u)).valid){t[a]=h.mix(d,r).rgbString();continue}}else if(W.isFinite(l)&&W.isFinite(u)){t[a]=l+(u-l)*r;continue}t[a]=u}}(r,o,n,e),t):(t._view=W.extend({},n),t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return W.isNumber(this._model.x)&&W.isNumber(this._model.y)}}),q.extend=W.inherits;var X=q,Z=X.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),$=Z;Object.defineProperty(Z.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Z.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),B._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:W.noop,onComplete:W.noop}});var K={animations:[],request:null,addAnimation:function(e,t,n,r){var o,i,a=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,r||(e.animating=!0),o=0,i=a.length;o<i;++o)if(a[o].chart===e)return void(a[o]=t);a.push(t),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=W.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=W.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,n,r,o=this.animations,i=0;i<o.length;)t=(e=o[i]).chart,n=e.numSteps,r=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(r,n),W.callback(e.render,[t,e],t),W.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(W.callback(e.onAnimationComplete,[e],t),t.animating=!1,o.splice(i,1)):++i}},J=W.options.resolve,Q=["push","pop","shift","splice","unshift"];function ee(e,t){var n=e._chartjs;if(n){var r=n.listeners,o=r.indexOf(t);-1!==o&&r.splice(o,1),r.length>0||(Q.forEach(function(t){delete e[t]}),delete e._chartjs)}}var te=function(e,t){this.initialize(e,t)};W.extend(te.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements(),n._type=n.getMeta().type},updateIndex:function(e){this.index=e},linkScales:function(){var e=this.getMeta(),t=this.chart,n=t.scales,r=this.getDataset(),o=t.options.scales;null!==e.xAxisID&&e.xAxisID in n&&!r.xAxisID||(e.xAxisID=r.xAxisID||o.xAxes[0].id),null!==e.yAxisID&&e.yAxisID in n&&!r.yAxisID||(e.yAxisID=r.yAxisID||o.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&ee(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,n=this.getMeta(),r=this.getDataset().data||[],o=n.data;for(e=0,t=r.length;e<t;++e)o[e]=o[e]||this.createMetaData(e);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,n=this,r=n.getDataset(),o=r.data||(r.data=[]);n._data!==o&&(n._data&&ee(n._data,n),o&&Object.isExtensible(o)&&(t=n,(e=o)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Q.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),o=r.apply(this,t);return W.each(e._chartjs.listeners,function(e){"function"==typeof e[n]&&e[n].apply(e,t)}),o}})}))),n._data=o),n.resyncElements()},_configure:function(){this._config=W.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(e,t,n){"_meta"!==e&&"data"!==e&&W._merger(e,t,n)}})},_update:function(e){this._configure(),this._cachedDataOpts=null,this.update(e)},update:W.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],r=n.length,o=0;o<r;++o)n[o].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,r=0;for(e.dataset&&e.dataset.draw();r<n;++r)t[r].draw()},getStyle:function(e){var t,n=this.getMeta(),r=n.dataset;return this._configure(),r&&void 0===e?t=this._resolveDatasetElementOptions(r||{}):(e=e||0,t=this._resolveDataElementOptions(n.data[e]||{},e)),!1!==t.fill&&null!==t.fill||(t.backgroundColor=t.borderColor),t},_resolveDatasetElementOptions:function(e,t){var n,r,o,i,a=this,s=a.chart,l=a._config,u=e.custom||{},c=s.options.elements[a.datasetElementType.prototype._type]||{},d=a._datasetElementOptions,h={},p={chart:s,dataset:a.getDataset(),datasetIndex:a.index,hover:t};for(n=0,r=d.length;n<r;++n)o=d[n],i=t?"hover"+o.charAt(0).toUpperCase()+o.slice(1):o,h[o]=J([u[i],l[i],c[i]],p);return h},_resolveDataElementOptions:function(e,t){var n=this,r=e&&e.custom,o=n._cachedDataOpts;if(o&&!r)return o;var i,a,s,l,u=n.chart,c=n._config,d=u.options.elements[n.dataElementType.prototype._type]||{},h=n._dataElementOptions,p={},f={chart:u,dataIndex:t,dataset:n.getDataset(),datasetIndex:n.index},g={cacheable:!r};if(r=r||{},W.isArray(h))for(a=0,s=h.length;a<s;++a)p[l=h[a]]=J([r[l],c[l],d[l]],f,t,g);else for(a=0,s=(i=Object.keys(h)).length;a<s;++a)p[l=i[a]]=J([r[l],c[h[l]],c[l],d[l]],f,t,g);return g.cacheable&&(n._cachedDataOpts=Object.freeze(p)),p},removeHoverStyle:function(e){W.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},o=e._model,i=W.getHoverColor;e.$previousStyle={backgroundColor:o.backgroundColor,borderColor:o.borderColor,borderWidth:o.borderWidth},o.backgroundColor=J([r.hoverBackgroundColor,t.hoverBackgroundColor,i(o.backgroundColor)],void 0,n),o.borderColor=J([r.hoverBorderColor,t.hoverBorderColor,i(o.borderColor)],void 0,n),o.borderWidth=J([r.hoverBorderWidth,t.hoverBorderWidth,o.borderWidth],void 0,n)},_removeDatasetHoverStyle:function(){var e=this.getMeta().dataset;e&&this.removeHoverStyle(e)},_setDatasetHoverStyle:function(){var e,t,n,r,o,i,a=this.getMeta().dataset,s={};if(a){for(i=a._model,o=this._resolveDatasetElementOptions(a,!0),e=0,t=(r=Object.keys(o)).length;e<t;++e)s[n=r[e]]=i[n],i[n]=o[n];a.$previousStyle=s}},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,n=e.data.length,r=t.length;r<n?e.data.splice(r,n-r):r>n&&this.insertElements(n,r-n)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),te.extend=W.inherits;var ne=te,re=2*Math.PI;function oe(e,t){var n=t.startAngle,r=t.endAngle,o=t.pixelMargin,i=o/t.outerRadius,a=t.x,s=t.y;e.beginPath(),e.arc(a,s,t.outerRadius,n-i,r+i),t.innerRadius>o?(i=o/t.innerRadius,e.arc(a,s,t.innerRadius-o,r+i,n-i,!0)):e.arc(a,s,o,r+Math.PI/2,n-Math.PI/2),e.closePath(),e.clip()}B._set("global",{elements:{arc:{backgroundColor:B.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var ie=X.extend({_type:"arc",inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var r=W.getAngleFromPoint(n,{x:e,y:t}),o=r.angle,i=r.distance,a=n.startAngle,s=n.endAngle;s<a;)s+=re;for(;o>s;)o-=re;for(;o<a;)o+=re;var l=o>=a&&o<=s,u=i>=n.innerRadius&&i<=n.outerRadius;return l&&u}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,r="inner"===n.borderAlign?.33:0,o={x:n.x,y:n.y,innerRadius:n.innerRadius,outerRadius:Math.max(n.outerRadius-r,0),pixelMargin:r,startAngle:n.startAngle,endAngle:n.endAngle,fullCircles:Math.floor(n.circumference/re)};if(t.save(),t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,o.fullCircles){for(o.endAngle=o.startAngle+re,t.beginPath(),t.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),t.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),t.closePath(),e=0;e<o.fullCircles;++e)t.fill();o.endAngle=o.startAngle+n.circumference%re}t.beginPath(),t.arc(o.x,o.y,o.outerRadius,o.startAngle,o.endAngle),t.arc(o.x,o.y,o.innerRadius,o.endAngle,o.startAngle,!0),t.closePath(),t.fill(),n.borderWidth&&function(e,t,n){var r="inner"===t.borderAlign;r?(e.lineWidth=2*t.borderWidth,e.lineJoin="round"):(e.lineWidth=t.borderWidth,e.lineJoin="bevel"),n.fullCircles&&function(e,t,n,r){var o,i=n.endAngle;for(r&&(n.endAngle=n.startAngle+re,oe(e,n),n.endAngle=i,n.endAngle===n.startAngle&&n.fullCircles&&(n.endAngle+=re,n.fullCircles--)),e.beginPath(),e.arc(n.x,n.y,n.innerRadius,n.startAngle+re,n.startAngle,!0),o=0;o<n.fullCircles;++o)e.stroke();for(e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.startAngle+re),o=0;o<n.fullCircles;++o)e.stroke()}(e,t,n,r),r&&oe(e,n),e.beginPath(),e.arc(n.x,n.y,t.outerRadius,n.startAngle,n.endAngle),e.arc(n.x,n.y,n.innerRadius,n.endAngle,n.startAngle,!0),e.closePath(),e.stroke()}(t,n,o),t.restore()}}),ae=W.valueOrDefault,se=B.global.defaultColor;B._set("global",{elements:{line:{tension:.4,backgroundColor:se,borderWidth:3,borderColor:se,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var le=X.extend({_type:"line",draw:function(){var e,t,n,r=this,o=r._view,i=r._chart.ctx,a=o.spanGaps,s=r._children.slice(),l=B.global,u=l.elements.line,c=-1,d=r._loop;if(s.length){if(r._loop){for(e=0;e<s.length;++e)if(t=W.previousItem(s,e),!s[e]._view.skip&&t._view.skip){s=s.slice(e).concat(s.slice(0,e)),d=a;break}d&&s.push(s[0])}for(i.save(),i.lineCap=o.borderCapStyle||u.borderCapStyle,i.setLineDash&&i.setLineDash(o.borderDash||u.borderDash),i.lineDashOffset=ae(o.borderDashOffset,u.borderDashOffset),i.lineJoin=o.borderJoinStyle||u.borderJoinStyle,i.lineWidth=ae(o.borderWidth,u.borderWidth),i.strokeStyle=o.borderColor||l.defaultColor,i.beginPath(),(n=s[0]._view).skip||(i.moveTo(n.x,n.y),c=0),e=1;e<s.length;++e)n=s[e]._view,t=-1===c?W.previousItem(s,e):s[c],n.skip||(c!==e-1&&!a||-1===c?i.moveTo(n.x,n.y):W.canvas.lineTo(i,t._view,n),c=e);d&&i.closePath(),i.stroke(),i.restore()}}}),ue=W.valueOrDefault,ce=B.global.defaultColor;function de(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}B._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:ce,borderColor:ce,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var he=X.extend({_type:"point",inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:de,inXRange:de,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,r=t.pointStyle,o=t.rotation,i=t.radius,a=t.x,s=t.y,l=B.global,u=l.defaultColor;t.skip||(void 0===e||W.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||u,n.lineWidth=ue(t.borderWidth,l.elements.point.borderWidth),n.fillStyle=t.backgroundColor||u,W.canvas.drawPoint(n,r,i,a,s,o))}}),pe=B.global.defaultColor;function fe(e){return e&&void 0!==e.width}function ge(e){var t,n,r,o,i;return fe(e)?(i=e.width/2,t=e.x-i,n=e.x+i,r=Math.min(e.y,e.base),o=Math.max(e.y,e.base)):(i=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),r=e.y-i,o=e.y+i),{left:t,top:r,right:n,bottom:o}}function me(e,t,n){return e===t?n:e===n?t:e}function ve(e,t,n){var r=null===t,o=null===n,i=!(!e||r&&o)&&ge(e);return i&&(r||t>=i.left&&t<=i.right)&&(o||n>=i.top&&n<=i.bottom)}B._set("global",{elements:{rectangle:{backgroundColor:pe,borderColor:pe,borderSkipped:"bottom",borderWidth:0}}});var ye=X.extend({_type:"rectangle",draw:function(){var e=this._chart.ctx,t=this._view,n=function(e){var t=ge(e),n=t.right-t.left,r=t.bottom-t.top,o=function(e,t,n){var r,o,i,a,s=e.borderWidth,l=function(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=me(t,"left","right")):e.base<e.y&&(t=me(t,"bottom","top")),n[t]=!0,n):n}(e);return W.isObject(s)?(r=+s.top||0,o=+s.right||0,i=+s.bottom||0,a=+s.left||0):r=o=i=a=+s||0,{t:l.top||r<0?0:r>n?n:r,r:l.right||o<0?0:o>t?t:o,b:l.bottom||i<0?0:i>n?n:i,l:l.left||a<0?0:a>t?t:a}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:r-o.t-o.b}}}(t),r=n.outer,o=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(r.x,r.y,r.w,r.h),r.w===o.w&&r.h===o.h||(e.save(),e.beginPath(),e.rect(r.x,r.y,r.w,r.h),e.clip(),e.fillStyle=t.borderColor,e.rect(o.x,o.y,o.w,o.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return ve(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return fe(n)?ve(n,e,null):ve(n,null,t)},inXRange:function(e){return ve(this._view,e,null)},inYRange:function(e){return ve(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return fe(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return fe(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),be={},xe=ie,_e=le,we=he,Se=ye;be.Arc=xe,be.Line=_e,be.Point=we,be.Rectangle=Se;var Ce=W._deprecated,Me=W.valueOrDefault;B._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),B._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Te=ne.extend({dataElementType:be.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var e,t,n=this;ne.prototype.initialize.apply(n,arguments),(e=n.getMeta()).stack=n.getDataset().stack,e.bar=!0,t=n._getIndexScale().options,Ce("bar chart",t.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),Ce("bar chart",t.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),Ce("bar chart",t.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),Ce("bar chart",n._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),Ce("bar chart",t.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(e){var t,n,r=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,n=r.length;t<n;++t)this.updateElement(r[t],t,e)},updateElement:function(e,t,n){var r=this,o=r.getMeta(),i=r.getDataset(),a=r._resolveDataElementOptions(e,t);e._xScale=r.getScaleForId(o.xAxisID),e._yScale=r.getScaleForId(o.yAxisID),e._datasetIndex=r.index,e._index=t,e._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:i.label,label:r.chart.data.labels[t]},W.isArray(i.data[t])&&(e._model.borderSkipped=null),r._updateElementGeometry(e,t,n,a),e.pivot()},_updateElementGeometry:function(e,t,n,r){var o=this,i=e._model,a=o._getValueScale(),s=a.getBasePixel(),l=a.isHorizontal(),u=o._ruler||o.getRuler(),c=o.calculateBarValuePixels(o.index,t,r),d=o.calculateBarIndexPixels(o.index,t,u,r);i.horizontal=l,i.base=n?s:c.base,i.x=l?n?s:c.head:d.center,i.y=l?d.center:n?s:c.head,i.height=l?d.size:void 0,i.width=l?void 0:d.size},_getStacks:function(e){var t,n,r=this._getIndexScale(),o=r._getMatchingVisibleMetas(this._type),i=r.options.stacked,a=o.length,s=[];for(t=0;t<a&&(n=o[t],(!1===i||-1===s.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&s.push(n.stack),n.index!==e);++t);return s},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),r=void 0!==t?n.indexOf(t):-1;return-1===r?n.length-1:r},getRuler:function(){var e,t,n=this._getIndexScale(),r=[];for(e=0,t=this.getMeta().data.length;e<t;++e)r.push(n.getPixelForValue(null,e,this.index));return{pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this.getStackCount(),scale:n}},calculateBarValuePixels:function(e,t,n){var r,o,i,a,s,l,u,c=this.chart,d=this._getValueScale(),h=d.isHorizontal(),p=c.data.datasets,f=d._getMatchingVisibleMetas(this._type),g=d._parseValue(p[e].data[t]),m=n.minBarLength,v=d.options.stacked,y=this.getMeta().stack,b=void 0===g.start?0:g.max>=0&&g.min>=0?g.min:g.max,x=void 0===g.start?g.end:g.max>=0&&g.min>=0?g.max-g.min:g.min-g.max,_=f.length;if(v||void 0===v&&void 0!==y)for(r=0;r<_&&(o=f[r]).index!==e;++r)o.stack===y&&(i=void 0===(u=d._parseValue(p[o.index].data[t])).start?u.end:u.min>=0&&u.max>=0?u.max:u.min,(g.min<0&&i<0||g.max>=0&&i>0)&&(b+=i));return a=d.getPixelForValue(b),l=(s=d.getPixelForValue(b+x))-a,void 0!==m&&Math.abs(l)<m&&(l=m,s=x>=0&&!h||x<0&&h?a-m:a+m),{size:l,base:a,head:s,center:s+l/2}},calculateBarIndexPixels:function(e,t,n,r){var o="flex"===r.barThickness?function(e,t,n){var r,o=t.pixels,i=o[e],a=e>0?o[e-1]:null,s=e<o.length-1?o[e+1]:null,l=n.categoryPercentage;return null===a&&(a=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-a),r=i-(i-Math.min(a,s))/2*l,{chunk:Math.abs(s-a)/2*l/t.stackCount,ratio:n.barPercentage,start:r}}(t,n,r):function(e,t,n){var r,o,i=n.barThickness,a=t.stackCount,s=t.pixels[e],l=W.isNullOrUndef(i)?function(e,t){var n,r,o,i,a=e._length;for(o=1,i=t.length;o<i;++o)a=Math.min(a,Math.abs(t[o]-t[o-1]));for(o=0,i=e.getTicks().length;o<i;++o)r=e.getPixelForTick(o),a=o>0?Math.min(a,Math.abs(r-n)):a,n=r;return a}(t.scale,t.pixels):-1;return W.isNullOrUndef(i)?(r=l*n.categoryPercentage,o=n.barPercentage):(r=i*a,o=1),{chunk:r/a,ratio:o,start:s-r/2}}(t,n,r),i=this.getStackIndex(e,this.getMeta().stack),a=o.start+o.chunk*i+o.chunk/2,s=Math.min(Me(r.maxBarThickness,1/0),o.chunk*o.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}},draw:function(){var e=this.chart,t=this._getValueScale(),n=this.getMeta().data,r=this.getDataset(),o=n.length,i=0;for(W.canvas.clipArea(e.ctx,e.chartArea);i<o;++i){var a=t._parseValue(r.data[i]);isNaN(a.min)||isNaN(a.max)||n[i].draw()}W.canvas.unclipArea(e.ctx)},_resolveDataElementOptions:function(){var e=this,t=W.extend({},ne.prototype._resolveDataElementOptions.apply(e,arguments)),n=e._getIndexScale().options,r=e._getValueScale().options;return t.barPercentage=Me(n.barPercentage,t.barPercentage),t.barThickness=Me(n.barThickness,t.barThickness),t.categoryPercentage=Me(n.categoryPercentage,t.categoryPercentage),t.maxBarThickness=Me(n.maxBarThickness,t.maxBarThickness),t.minBarLength=Me(r.minBarLength,t.minBarLength),t}}),ke=W.valueOrDefault,Ie=W.options.resolve;B._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",r=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+r.r+")"}}}});var Ae=ne.extend({dataElementType:be.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(e){var t=this,n=t.getMeta().data;W.each(n,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,o=r.getMeta(),i=e.custom||{},a=r.getScaleForId(o.xAxisID),s=r.getScaleForId(o.yAxisID),l=r._resolveDataElementOptions(e,t),u=r.getDataset().data[t],c=r.index,d=n?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof u?u:NaN,t,c),h=n?s.getBasePixel():s.getPixelForValue(u,t,c);e._xScale=a,e._yScale=s,e._options=l,e._datasetIndex=c,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,rotation:l.rotation,radius:n?0:l.radius,skip:i.skip||isNaN(d)||isNaN(h),x:d,y:h},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,r=W.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ke(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=ke(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=ke(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveDataElementOptions:function(e,t){var n=this,r=n.chart,o=n.getDataset(),i=e.custom||{},a=o.data[t]||{},s=ne.prototype._resolveDataElementOptions.apply(n,arguments),l={chart:r,dataIndex:t,dataset:o,datasetIndex:n.index};return n._cachedDataOpts===s&&(s=W.extend({},s)),s.radius=Ie([i.radius,a.r,n._config.radius,r.options.elements.point.radius],l,t),s}}),De=W.valueOrDefault,Pe=Math.PI,Le=2*Pe,Ne=Pe/2;B._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t,n,r,o=document.createElement("ul"),i=e.data,a=i.datasets,s=i.labels;if(o.setAttribute("class",e.id+"-legend"),a.length)for(t=0,n=a[0].data.length;t<n;++t)(r=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[t],s[t]&&r.appendChild(document.createTextNode(s[t]));return o.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var o=e.getDatasetMeta(0),i=o.controller.getStyle(r);return{text:n,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(t.datasets[0].data[r])||o.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,o,i=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(o=a.getDatasetMeta(n)).data[i]&&(o.data[i].hidden=!o.data[i].hidden);a.update()}},cutoutPercentage:50,rotation:-Ne,circumference:Le,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],r=": "+t.datasets[e.datasetIndex].data[e.index];return W.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}});var Re=ne.extend({dataElementType:be.Arc,linkScales:W.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,r,o,i=this,a=i.chart,s=a.chartArea,l=a.options,u=1,c=1,d=0,h=0,p=i.getMeta(),f=p.data,g=l.cutoutPercentage/100||0,m=l.circumference,v=i._getRingWeight(i.index);if(m<Le){var y=l.rotation%Le,b=(y+=y>=Pe?-Le:y<-Pe?Le:0)+m,x=Math.cos(y),_=Math.sin(y),w=Math.cos(b),S=Math.sin(b),C=y<=0&&b>=0||b>=Le,M=y<=Ne&&b>=Ne||b>=Le+Ne,T=y<=-Ne&&b>=-Ne||b>=Pe+Ne,k=y===-Pe||b>=Pe?-1:Math.min(x,x*g,w,w*g),I=T?-1:Math.min(_,_*g,S,S*g),A=C?1:Math.max(x,x*g,w,w*g),D=M?1:Math.max(_,_*g,S,S*g);u=(A-k)/2,c=(D-I)/2,d=-(A+k)/2,h=-(D+I)/2}for(r=0,o=f.length;r<o;++r)f[r]._options=i._resolveDataElementOptions(f[r],r);for(a.borderWidth=i.getMaxBorderWidth(),t=(s.right-s.left-a.borderWidth)/u,n=(s.bottom-s.top-a.borderWidth)/c,a.outerRadius=Math.max(Math.min(t,n)/2,0),a.innerRadius=Math.max(a.outerRadius*g,0),a.radiusLength=(a.outerRadius-a.innerRadius)/(i._getVisibleDatasetWeightTotal()||1),a.offsetX=d*a.outerRadius,a.offsetY=h*a.outerRadius,p.total=i.calculateTotal(),i.outerRadius=a.outerRadius-a.radiusLength*i._getRingWeightOffset(i.index),i.innerRadius=Math.max(i.outerRadius-a.radiusLength*v,0),r=0,o=f.length;r<o;++r)i.updateElement(f[r],r,e)},updateElement:function(e,t,n){var r=this,o=r.chart,i=o.chartArea,a=o.options,s=a.animation,l=(i.left+i.right)/2,u=(i.top+i.bottom)/2,c=a.rotation,d=a.rotation,h=r.getDataset(),p=n&&s.animateRotate||e.hidden?0:r.calculateCircumference(h.data[t])*(a.circumference/Le),f=n&&s.animateScale?0:r.innerRadius,g=n&&s.animateScale?0:r.outerRadius,m=e._options||{};W.extend(e,{_datasetIndex:r.index,_index:t,_model:{backgroundColor:m.backgroundColor,borderColor:m.borderColor,borderWidth:m.borderWidth,borderAlign:m.borderAlign,x:l+o.offsetX,y:u+o.offsetY,startAngle:c,endAngle:d,circumference:p,outerRadius:g,innerRadius:f,label:W.valueAtIndexOrDefault(h.label,t,o.data.labels[t])}});var v=e._model;n&&s.animateRotate||(v.startAngle=0===t?a.rotation:r.getMeta().data[t-1]._model.endAngle,v.endAngle=v.startAngle+v.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),r=0;return W.each(n.data,function(n,o){e=t.data[o],isNaN(e)||n.hidden||(r+=Math.abs(e))}),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?Le*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,r,o,i,a,s,l,u=0,c=this.chart;if(!e)for(t=0,n=c.data.datasets.length;t<n;++t)if(c.isDatasetVisible(t)){e=(r=c.getDatasetMeta(t)).data,t!==this.index&&(i=r.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)o=e[t],i?(i._configure(),a=i._resolveDataElementOptions(o,t)):a=o._options,"inner"!==a.borderAlign&&(s=a.borderWidth,u=(l=a.hoverBorderWidth)>(u=s>u?s:u)?l:u);return u},setHoverStyle:function(e){var t=e._model,n=e._options,r=W.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=De(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=De(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=De(n.hoverBorderWidth,n.borderWidth)},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(De(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});B._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),B._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var Ee=Te.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Oe=W.valueOrDefault,Be=W.options.resolve,ze=W.canvas._isPointInArea;function Fe(e,t){var n=e&&e.options.ticks||{},r=n.reverse,o=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:o,end:r?o:i}}function Ve(e,t,n){var r=n/2,o=Fe(e,r),i=Fe(t,r);return{top:i.end,right:o.end,bottom:i.start,left:o.start}}function He(e){var t,n,r,o;return W.isObject(e)?(t=e.top,n=e.right,r=e.bottom,o=e.left):t=n=r=o=e,{top:t,right:n,bottom:r,left:o}}B._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var We=ne.extend({datasetElementType:be.Line,dataElementType:be.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(e){var t,n,r=this,o=r.getMeta(),i=o.dataset,a=o.data||[],s=r.chart.options,l=r._config,u=r._showLine=Oe(l.showLine,s.showLines);for(r._xScale=r.getScaleForId(o.xAxisID),r._yScale=r.getScaleForId(o.yAxisID),u&&(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),i._scale=r._yScale,i._datasetIndex=r.index,i._children=a,i._model=r._resolveDatasetElementOptions(i),i.pivot()),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e);for(u&&0!==i._model.tension&&r.updateBezierControlPoints(),t=0,n=a.length;t<n;++t)a[t].pivot()},updateElement:function(e,t,n){var r,o,i=this,a=i.getMeta(),s=e.custom||{},l=i.getDataset(),u=i.index,c=l.data[t],d=i._xScale,h=i._yScale,p=a.dataset._model,f=i._resolveDataElementOptions(e,t);r=d.getPixelForValue("object"==typeof c?c:NaN,t,u),o=n?h.getBasePixel():i.calculatePointY(c,t,u),e._xScale=d,e._yScale=h,e._options=f,e._datasetIndex=u,e._index=t,e._model={x:r,y:o,skip:s.skip||isNaN(r)||isNaN(o),radius:f.radius,pointStyle:f.pointStyle,rotation:f.rotation,backgroundColor:f.backgroundColor,borderColor:f.borderColor,borderWidth:f.borderWidth,tension:Oe(s.tension,p?p.tension:0),steppedLine:!!p&&p.steppedLine,hitRadius:f.hitRadius}},_resolveDatasetElementOptions:function(e){var t=this,n=t._config,r=e.custom||{},o=t.chart.options,i=o.elements.line,a=ne.prototype._resolveDatasetElementOptions.apply(t,arguments);return a.spanGaps=Oe(n.spanGaps,o.spanGaps),a.tension=Oe(n.lineTension,i.tension),a.steppedLine=Be([r.steppedLine,n.steppedLine,i.stepped]),a.clip=He(Oe(n.clip,Ve(t._xScale,t._yScale,a.borderWidth))),a},calculatePointY:function(e,t,n){var r,o,i,a,s,l,u,c=this.chart,d=this._yScale,h=0,p=0;if(d.options.stacked){for(s=+d.getRightValue(e),u=(l=c._getSortedVisibleDatasetMetas()).length,r=0;r<u&&(i=l[r]).index!==n;++r)o=c.data.datasets[i.index],"line"===i.type&&i.yAxisID===d.id&&((a=+d.getRightValue(o.data[t]))<0?p+=a||0:h+=a||0);return s<0?d.getPixelForValue(p+s):d.getPixelForValue(h+s)}return d.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,n,r,o=this.chart,i=this.getMeta(),a=i.dataset._model,s=o.chartArea,l=i.data||[];function u(e,t,n){return Math.max(Math.min(e,n),t)}if(a.spanGaps&&(l=l.filter(function(e){return!e._model.skip})),"monotone"===a.cubicInterpolationMode)W.splineCurveMonotone(l);else for(e=0,t=l.length;e<t;++e)n=l[e]._model,r=W.splineCurve(W.previousItem(l,e)._model,n,W.nextItem(l,e)._model,a.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(o.options.elements.line.capBezierPoints)for(e=0,t=l.length;e<t;++e)n=l[e]._model,ze(n,s)&&(e>0&&ze(l[e-1]._model,s)&&(n.controlPointPreviousX=u(n.controlPointPreviousX,s.left,s.right),n.controlPointPreviousY=u(n.controlPointPreviousY,s.top,s.bottom)),e<l.length-1&&ze(l[e+1]._model,s)&&(n.controlPointNextX=u(n.controlPointNextX,s.left,s.right),n.controlPointNextY=u(n.controlPointNextY,s.top,s.bottom)))},draw:function(){var e,t=this.chart,n=this.getMeta(),r=n.data||[],o=t.chartArea,i=t.canvas,a=0,s=r.length;for(this._showLine&&(e=n.dataset._model.clip,W.canvas.clipArea(t.ctx,{left:!1===e.left?0:o.left-e.left,right:!1===e.right?i.width:o.right+e.right,top:!1===e.top?0:o.top-e.top,bottom:!1===e.bottom?i.height:o.bottom+e.bottom}),n.dataset.draw(),W.canvas.unclipArea(t.ctx));a<s;++a)r[a].draw(o)},setHoverStyle:function(e){var t=e._model,n=e._options,r=W.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Oe(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=Oe(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=Oe(n.hoverBorderWidth,n.borderWidth),t.radius=Oe(n.hoverRadius,n.radius)}}),Ge=W.options.resolve;B._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t,n,r,o=document.createElement("ul"),i=e.data,a=i.datasets,s=i.labels;if(o.setAttribute("class",e.id+"-legend"),a.length)for(t=0,n=a[0].data.length;t<n;++t)(r=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=a[0].backgroundColor[t],s[t]&&r.appendChild(document.createTextNode(s[t]));return o.outerHTML},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var o=e.getDatasetMeta(0),i=o.controller.getStyle(r);return{text:n,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,hidden:isNaN(t.datasets[0].data[r])||o.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,o,i=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(o=a.getDatasetMeta(n)).data[i].hidden=!o.data[i].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var Ue=ne.extend({dataElementType:be.Arc,linkScales:W.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,r,o=this,i=o.getDataset(),a=o.getMeta(),s=o.chart.options.startAngle||0,l=o._starts=[],u=o._angles=[],c=a.data;for(o._updateRadius(),a.count=o.countVisibleElements(),t=0,n=i.data.length;t<n;t++)l[t]=s,r=o._computeAngle(t),u[t]=r,s+=r;for(t=0,n=c.length;t<n;++t)c[t]._options=o._resolveDataElementOptions(c[t],t),o.updateElement(c[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,r=t.options,o=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(o/2,0),t.innerRadius=Math.max(r.cutoutPercentage?t.outerRadius/100*r.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var r=this,o=r.chart,i=r.getDataset(),a=o.options,s=a.animation,l=o.scale,u=o.data.labels,c=l.xCenter,d=l.yCenter,h=a.startAngle,p=e.hidden?0:l.getDistanceFromCenterForValue(i.data[t]),f=r._starts[t],g=f+(e.hidden?0:r._angles[t]),m=s.animateScale?0:l.getDistanceFromCenterForValue(i.data[t]),v=e._options||{};W.extend(e,{_datasetIndex:r.index,_index:t,_scale:l,_model:{backgroundColor:v.backgroundColor,borderColor:v.borderColor,borderWidth:v.borderWidth,borderAlign:v.borderAlign,x:c,y:d,innerRadius:0,outerRadius:n?m:p,startAngle:n&&s.animateRotate?h:f,endAngle:n&&s.animateRotate?h:g,label:W.valueAtIndexOrDefault(u,t,u[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return W.each(t.data,function(t,r){isNaN(e.data[r])||t.hidden||n++}),n},setHoverStyle:function(e){var t=e._model,n=e._options,r=W.getHoverColor,o=W.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=o(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=o(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=o(n.hoverBorderWidth,n.borderWidth)},_computeAngle:function(e){var t=this,n=this.getMeta().count,r=t.getDataset(),o=t.getMeta();if(isNaN(r.data[e])||o.data[e].hidden)return 0;var i={chart:t.chart,dataIndex:e,dataset:r,datasetIndex:t.index};return Ge([t.chart.options.elements.arc.angle,2*Math.PI/n],i,e)}});B._set("pie",W.clone(B.doughnut)),B._set("pie",{cutoutPercentage:0});var je=Re,Ye=W.valueOrDefault;B._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var qe=ne.extend({datasetElementType:be.Line,dataElementType:be.Point,linkScales:W.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(e){var t,n,r=this,o=r.getMeta(),i=o.dataset,a=o.data||[],s=r.chart.scale,l=r._config;for(void 0!==l.tension&&void 0===l.lineTension&&(l.lineTension=l.tension),i._scale=s,i._datasetIndex=r.index,i._children=a,i._loop=!0,i._model=r._resolveDatasetElementOptions(i),i.pivot(),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e);for(r.updateBezierControlPoints(),t=0,n=a.length;t<n;++t)a[t].pivot()},updateElement:function(e,t,n){var r=this,o=e.custom||{},i=r.getDataset(),a=r.chart.scale,s=a.getPointPositionForValue(t,i.data[t]),l=r._resolveDataElementOptions(e,t),u=r.getMeta().dataset._model,c=n?a.xCenter:s.x,d=n?a.yCenter:s.y;e._scale=a,e._options=l,e._datasetIndex=r.index,e._index=t,e._model={x:c,y:d,skip:o.skip||isNaN(c)||isNaN(d),radius:l.radius,pointStyle:l.pointStyle,rotation:l.rotation,backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,tension:Ye(o.tension,u?u.tension:0),hitRadius:l.hitRadius}},_resolveDatasetElementOptions:function(){var e=this,t=e._config,n=e.chart.options,r=ne.prototype._resolveDatasetElementOptions.apply(e,arguments);return r.spanGaps=Ye(t.spanGaps,n.spanGaps),r.tension=Ye(t.lineTension,n.elements.line.tension),r},updateBezierControlPoints:function(){var e,t,n,r,o=this.getMeta(),i=this.chart.chartArea,a=o.data||[];function s(e,t,n){return Math.max(Math.min(e,n),t)}for(o.dataset._model.spanGaps&&(a=a.filter(function(e){return!e._model.skip})),e=0,t=a.length;e<t;++e)n=a[e]._model,r=W.splineCurve(W.previousItem(a,e,!0)._model,n,W.nextItem(a,e,!0)._model,n.tension),n.controlPointPreviousX=s(r.previous.x,i.left,i.right),n.controlPointPreviousY=s(r.previous.y,i.top,i.bottom),n.controlPointNextX=s(r.next.x,i.left,i.right),n.controlPointNextY=s(r.next.y,i.top,i.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,r=W.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=Ye(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=Ye(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=Ye(n.hoverBorderWidth,n.borderWidth),t.radius=Ye(n.hoverRadius,n.radius)}});B._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),B._set("global",{datasets:{scatter:{showLine:!1}}});var Xe={bar:Te,bubble:Ae,doughnut:Re,horizontalBar:Ee,line:We,polarArea:Ue,pie:je,radar:qe,scatter:We};function Ze(e,t){return e.native?{x:e.x,y:e.y}:W.getRelativePosition(e,t)}function $e(e,t){var n,r,o,i,a,s,l=e._getSortedVisibleDatasetMetas();for(r=0,i=l.length;r<i;++r)for(o=0,a=(n=l[r].data).length;o<a;++o)(s=n[o])._view.skip||t(s)}function Ke(e,t){var n=[];return $e(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function Je(e,t,n,r){var o=Number.POSITIVE_INFINITY,i=[];return $e(e,function(e){if(!n||e.inRange(t.x,t.y)){var a=e.getCenterPoint(),s=r(t,a);s<o?(i=[e],o=s):s===o&&i.push(e)}}),i}function Qe(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var o=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(i,2))}}function et(e,t,n){var r=Ze(t,e);n.axis=n.axis||"x";var o=Qe(n.axis),i=n.intersect?Ke(e,r):Je(e,r,!1,o),a=[];return i.length?(e._getSortedVisibleDatasetMetas().forEach(function(e){var t=e.data[i[0]._index];t&&!t._view.skip&&a.push(t)}),a):[]}var tt={modes:{single:function(e,t){var n=Ze(t,e),r=[];return $e(e,function(e){if(e.inRange(n.x,n.y))return r.push(e),r}),r.slice(0,1)},label:et,index:et,dataset:function(e,t,n){var r=Ze(t,e);n.axis=n.axis||"xy";var o=Qe(n.axis),i=n.intersect?Ke(e,r):Je(e,r,!1,o);return i.length>0&&(i=e.getDatasetMeta(i[0]._datasetIndex).data),i},"x-axis":function(e,t){return et(e,t,{intersect:!1})},point:function(e,t){return Ke(e,Ze(t,e))},nearest:function(e,t,n){var r=Ze(t,e);n.axis=n.axis||"xy";var o=Qe(n.axis);return Je(e,r,n.intersect,o)},x:function(e,t,n){var r=Ze(t,e),o=[],i=!1;return $e(e,function(e){e.inXRange(r.x)&&o.push(e),e.inRange(r.x,r.y)&&(i=!0)}),n.intersect&&!i&&(o=[]),o},y:function(e,t,n){var r=Ze(t,e),o=[],i=!1;return $e(e,function(e){e.inYRange(r.y)&&o.push(e),e.inRange(r.x,r.y)&&(i=!0)}),n.intersect&&!i&&(o=[]),o}}},nt=W.extend;function rt(e,t){return W.where(e,function(e){return e.pos===t})}function ot(e,t){return e.sort(function(e,n){var r=t?n:e,o=t?e:n;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function it(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function at(e,t,n){var r,o,i=n.box,a=e.maxPadding;if(n.size&&(e[n.pos]-=n.size),n.size=n.horizontal?i.height:i.width,e[n.pos]+=n.size,i.getPadding){var s=i.getPadding();a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}if(r=t.outerWidth-it(a,e,"left","right"),o=t.outerHeight-it(a,e,"top","bottom"),r!==e.w||o!==e.h){e.w=r,e.h=o;var l=n.horizontal?[r,e.w]:[o,e.h];return!(l[0]===l[1]||isNaN(l[0])&&isNaN(l[1]))}}function st(e,t){var n=t.maxPadding;return function(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach(function(e){r[e]=Math.max(t[e],n[e])}),r}(e?["left","right"]:["top","bottom"])}function lt(e,t,n){var r,o,i,a,s,l,u=[];for(r=0,o=e.length;r<o;++r)(a=(i=e[r]).box).update(i.width||t.w,i.height||t.h,st(i.horizontal,t)),at(t,n,i)&&(l=!0,u.length&&(s=!0)),a.fullWidth||u.push(i);return s&&lt(u,t,n)||l}function ut(e,t,n){var r,o,i,a,s=n.padding,l=t.x,u=t.y;for(r=0,o=e.length;r<o;++r)a=(i=e[r]).box,i.horizontal?(a.left=a.fullWidth?s.left:t.left,a.right=a.fullWidth?n.outerWidth-s.right:t.left+t.w,a.top=u,a.bottom=u+a.height,a.width=a.right-a.left,u=a.bottom):(a.left=l,a.right=l+a.width,a.top=t.top,a.bottom=t.top+t.h,a.height=a.bottom-a.top,l=a.right);t.x=l,t.y=u}B._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var ct,dt={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(){t.draw.apply(t,arguments)}}]},e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var r,o=["fullWidth","position","weight"],i=o.length,a=0;a<i;++a)r=o[a],n.hasOwnProperty(r)&&(t[r]=n[r])},update:function(e,t,n){if(e){var r=e.options.layout||{},o=W.options.toPadding(r.padding),i=t-o.width,a=n-o.height,s=function(e){var t=function(e){var t,n,r,o=[];for(t=0,n=(e||[]).length;t<n;++t)r=e[t],o.push({index:t,box:r,pos:r.position,horizontal:r.isHorizontal(),weight:r.weight});return o}(e),n=ot(rt(t,"left"),!0),r=ot(rt(t,"right")),o=ot(rt(t,"top"),!0),i=ot(rt(t,"bottom"));return{leftAndTop:n.concat(o),rightAndBottom:r.concat(i),chartArea:rt(t,"chartArea"),vertical:n.concat(r),horizontal:o.concat(i)}}(e.boxes),l=s.vertical,u=s.horizontal,c=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:i,vBoxMaxWidth:i/2/l.length,hBoxMaxHeight:a/2}),d=nt({maxPadding:nt({},o),w:i,h:a,x:o.left,y:o.top},o);!function(e,t){var n,r,o;for(n=0,r=e.length;n<r;++n)(o=e[n]).width=o.horizontal?o.box.fullWidth&&t.availableWidth:t.vBoxMaxWidth,o.height=o.horizontal&&t.hBoxMaxHeight}(l.concat(u),c),lt(l,d,c),lt(u,d,c)&&lt(l,d,c),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(d),ut(s.leftAndTop,d,c),d.x+=d.w,d.y+=d.h,ut(s.rightAndBottom,d,c),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h},W.each(s.chartArea,function(t){var n=t.box;nt(n,e.chartArea),n.update(d.w,d.h)})}}},ht=(ct=Object.freeze({__proto__:null,default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&ct.default||ct,pt="$chartjs",ft="chartjs-size-monitor",gt="chartjs-render-monitor",mt=["animationstart","webkitAnimationStart"],vt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function yt(e,t){var n=W.getStyle(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}var bt=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};function xt(e,t,n){e.addEventListener(t,n,bt)}function _t(e,t,n){e.removeEventListener(t,n,bt)}function wt(e,t,n,r,o){return{type:e,chart:t,native:o||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function St(e){var t=document.createElement("div");return t.className=e||"",t}var Ct={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(e){if(!this.disableCSSInjection){var t=e.getRootNode?e.getRootNode():document;!function(e,t){var n=e[pt]||(e[pt]={});if(!n.containsStyles){n.containsStyles=!0,t="/* Chart.js */\n"+t;var r=document.createElement("style");r.setAttribute("type","text/css"),r.appendChild(document.createTextNode(t)),e.appendChild(r)}}(t.host?t:document.head,ht)}},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(this._ensureLoaded(e),function(e,t){var n=e.style,r=e.getAttribute("height"),o=e.getAttribute("width");if(e[pt]={initial:{height:r,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===o||""===o){var i=yt(e,"width");void 0!==i&&(e.width=i)}if(null===r||""===r)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var a=yt(e,"height");void 0!==i&&(e.height=a)}}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[pt]){var n=t[pt].initial;["height","width"].forEach(function(e){var r=n[e];W.isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)}),W.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t[pt]}},addEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var o=n[pt]||(n[pt]={});xt(r,t,(o.proxies||(o.proxies={}))[e.id+"_"+t]=function(t){n(function(e,t){var n=vt[e.type]||e.type,r=W.getRelativePosition(e,t);return wt(n,t,r.x,r.y,e)}(t,e))})}else!function(e,t,n){var r,o,i,a,s=e[pt]||(e[pt]={}),l=s.resizer=function(e){var t=St(ft),n=St(ft+"-expand"),r=St(ft+"-shrink");n.appendChild(St()),r.appendChild(St()),t.appendChild(n),t.appendChild(r),t._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,r.scrollLeft=1e6,r.scrollTop=1e6};var o=function(){t._reset(),e()};return xt(n,"scroll",o.bind(n,"expand")),xt(r,"scroll",o.bind(r,"shrink")),t}((r=function(){if(s.resizer){var r=n.options.maintainAspectRatio&&e.parentNode,o=r?r.clientWidth:0;t(wt("resize",n)),r&&r.clientWidth<o&&n.canvas&&t(wt("resize",n))}},i=!1,a=[],function(){a=Array.prototype.slice.call(arguments),o=o||this,i||(i=!0,W.requestAnimFrame.call(window,function(){i=!1,r.apply(o,a)}))}));!function(e,t){var n=e[pt]||(e[pt]={}),r=n.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};W.each(mt,function(t){xt(e,t,r)}),n.reflow=!!e.offsetParent,e.classList.add(gt)}(e,function(){if(s.resizer){var t=e.parentNode;t&&t!==l.parentNode&&t.insertBefore(l,t.firstChild),l._reset()}})}(r,n,e)},removeEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var o=((n[pt]||{}).proxies||{})[e.id+"_"+t];o&&_t(r,t,o)}else!function(e){var t=e[pt]||{},n=t.resizer;delete t.resizer,function(e){var t=e[pt]||{},n=t.renderProxy;n&&(W.each(mt,function(t){_t(e,t,n)}),delete t.renderProxy),e.classList.remove(gt)}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}(r)}};W.addEvent=xt,W.removeEvent=_t;var Mt=Ct._enabled?Ct:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}},Tt=W.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Mt);B._set("global",{plugins:{}});var kt={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var r,o,i,a,s,l=this.descriptors(e),u=l.length;for(r=0;r<u;++r)if("function"==typeof(s=(i=(o=l[r]).plugin)[t])&&((a=[e].concat(n||[])).push(o.options),!1===s.apply(i,a)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],r=[],o=e&&e.config||{},i=o.options&&o.options.plugins||{};return this._plugins.concat(o.plugins||[]).forEach(function(e){if(-1===n.indexOf(e)){var t=e.id,o=i[t];!1!==o&&(!0===o&&(o=W.clone(B.global.plugins[t])),n.push(e),r.push({plugin:e,options:o||{}}))}}),t.descriptors=r,t.id=this._cacheId,r},_invalidate:function(e){delete e.$plugins}},It={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=W.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?W.merge(Object.create(null),[B.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=W.extend(this.defaults[e],t))},addScalesToLayout:function(e){W.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,dt.addBox(e,t)})}},At=W.valueOrDefault,Dt=W.rtl.getRtlAdapter;B._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:W.noop,title:function(e,t){var n="",r=t.labels,o=r?r.length:0;if(e.length>0){var i=e[0];i.label?n=i.label:i.xLabel?n=i.xLabel:o>0&&i.index<o&&(n=r[i.index])}return n},afterTitle:W.noop,beforeBody:W.noop,beforeLabel:W.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),W.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:W.noop,afterBody:W.noop,beforeFooter:W.noop,footer:W.noop,afterFooter:W.noop}}});var Pt={average:function(e){if(!e.length)return!1;var t,n,r=0,o=0,i=0;for(t=0,n=e.length;t<n;++t){var a=e[t];if(a&&a.hasValue()){var s=a.tooltipPosition();r+=s.x,o+=s.y,++i}}return{x:r/i,y:o/i}},nearest:function(e,t){var n,r,o,i=t.x,a=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var l=e[n];if(l&&l.hasValue()){var u=l.getCenterPoint(),c=W.distanceBetweenPoints(t,u);c<s&&(s=c,o=l)}}if(o){var d=o.tooltipPosition();i=d.x,a=d.y}return{x:i,y:a}}};function Lt(e,t){return t&&(W.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Nt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Rt(e){var t=B.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,rtl:e.rtl,textDirection:e.textDirection,bodyFontColor:e.bodyFontColor,_bodyFontFamily:At(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:At(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:At(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:At(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:At(e.titleFontStyle,t.defaultFontStyle),titleFontSize:At(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:At(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:At(e.footerFontStyle,t.defaultFontStyle),footerFontSize:At(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function Et(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Ot(e){return Lt([],Nt(e))}var Bt=X.extend({initialize:function(){this._model=Rt(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,n=t.callbacks,r=n.beforeTitle.apply(e,arguments),o=n.title.apply(e,arguments),i=n.afterTitle.apply(e,arguments),a=[];return a=Lt(a,Nt(r)),a=Lt(a,Nt(o)),Lt(a,Nt(i))},getBeforeBody:function(){return Ot(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,r=n._options.callbacks,o=[];return W.each(e,function(e){var i={before:[],lines:[],after:[]};Lt(i.before,Nt(r.beforeLabel.call(n,e,t))),Lt(i.lines,r.label.call(n,e,t)),Lt(i.after,Nt(r.afterLabel.call(n,e,t))),o.push(i)}),o},getAfterBody:function(){return Ot(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),r=t.footer.apply(e,arguments),o=t.afterFooter.apply(e,arguments),i=[];return i=Lt(i,Nt(n)),i=Lt(i,Nt(r)),Lt(i,Nt(o))},update:function(e){var t,n,r,o,i,a,s,l,u,c,d=this,h=d._options,p=d._model,f=d._model=Rt(h),g=d._active,m=d._data,v={xAlign:p.xAlign,yAlign:p.yAlign},y={x:p.x,y:p.y},b={width:p.width,height:p.height},x={x:p.caretX,y:p.caretY};if(g.length){f.opacity=1;var _=[],w=[];x=Pt[h.position].call(d,g,d._eventPosition);var S=[];for(t=0,n=g.length;t<n;++t)S.push((o=void 0,i=void 0,void 0,void 0,l=void 0,u=void 0,c=void 0,o=(r=g[t])._xScale,i=r._yScale||r._scale,a=r._index,s=r._datasetIndex,u=(l=r._chart.getDatasetMeta(s).controller)._getIndexScale(),c=l._getValueScale(),{xLabel:o?o.getLabelForIndex(a,s):"",yLabel:i?i.getLabelForIndex(a,s):"",label:u?""+u.getLabelForIndex(a,s):"",value:c?""+c.getLabelForIndex(a,s):"",index:a,datasetIndex:s,x:r._model.x,y:r._model.y}));h.filter&&(S=S.filter(function(e){return h.filter(e,m)})),h.itemSort&&(S=S.sort(function(e,t){return h.itemSort(e,t,m)})),W.each(S,function(e){_.push(h.callbacks.labelColor.call(d,e,d._chart)),w.push(h.callbacks.labelTextColor.call(d,e,d._chart))}),f.title=d.getTitle(S,m),f.beforeBody=d.getBeforeBody(S,m),f.body=d.getBody(S,m),f.afterBody=d.getAfterBody(S,m),f.footer=d.getFooter(S,m),f.x=x.x,f.y=x.y,f.caretPadding=h.caretPadding,f.labelColors=_,f.labelTextColors=w,f.dataPoints=S,b=function(e,t){var n=e._chart.ctx,r=2*t.yPadding,o=0,i=t.body,a=i.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);a+=t.beforeBody.length+t.afterBody.length;var s=t.title.length,l=t.footer.length,u=t.titleFontSize,c=t.bodyFontSize,d=t.footerFontSize;r+=s*u,r+=s?(s-1)*t.titleSpacing:0,r+=s?t.titleMarginBottom:0,r+=a*c,r+=a?(a-1)*t.bodySpacing:0,r+=l?t.footerMarginTop:0,r+=l*d,r+=l?(l-1)*t.footerSpacing:0;var h=0,p=function(e){o=Math.max(o,n.measureText(e).width+h)};return n.font=W.fontString(u,t._titleFontStyle,t._titleFontFamily),W.each(t.title,p),n.font=W.fontString(c,t._bodyFontStyle,t._bodyFontFamily),W.each(t.beforeBody.concat(t.afterBody),p),h=t.displayColors?c+2:0,W.each(i,function(e){W.each(e.before,p),W.each(e.lines,p),W.each(e.after,p)}),h=0,n.font=W.fontString(d,t._footerFontStyle,t._footerFontFamily),W.each(t.footer,p),{width:o+=2*t.xPadding,height:r}}(this,f),y=function(e,t,n,r){var o=e.x,i=e.y,a=e.caretSize,s=e.caretPadding,l=e.cornerRadius,u=n.xAlign,c=n.yAlign,d=a+s,h=l+s;return"right"===u?o-=t.width:"center"===u&&((o-=t.width/2)+t.width>r.width&&(o=r.width-t.width),o<0&&(o=0)),"top"===c?i+=d:i-="bottom"===c?t.height+d:t.height/2,"center"===c?"left"===u?o+=d:"right"===u&&(o-=d):"left"===u?o-=h:"right"===u&&(o+=h),{x:o,y:i}}(f,b,v=function(e,t){var n,r,o,i,a,s=e._model,l=e._chart,u=e._chart.chartArea,c="center",d="center";s.y<t.height?d="top":s.y>l.height-t.height&&(d="bottom");var h=(u.left+u.right)/2,p=(u.top+u.bottom)/2;"center"===d?(n=function(e){return e<=h},r=function(e){return e>h}):(n=function(e){return e<=t.width/2},r=function(e){return e>=l.width-t.width/2}),o=function(e){return e+t.width+s.caretSize+s.caretPadding>l.width},i=function(e){return e-t.width-s.caretSize-s.caretPadding<0},a=function(e){return e<=p?"top":"bottom"},n(s.x)?(c="left",o(s.x)&&(c="center",d=a(s.y))):r(s.x)&&(c="right",i(s.x)&&(c="center",d=a(s.y)));var f=e._options;return{xAlign:f.xAlign?f.xAlign:c,yAlign:f.yAlign?f.yAlign:d}}(this,b),d._chart)}else f.opacity=0;return f.xAlign=v.xAlign,f.yAlign=v.yAlign,f.x=y.x,f.y=y.y,f.width=b.width,f.height=b.height,f.caretX=x.x,f.caretY=x.y,d._model=f,e&&h.custom&&h.custom.call(d,f),d},drawCaret:function(e,t){var n=this._chart.ctx,r=this._view,o=this.getCaretPosition(e,t,r);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)},getCaretPosition:function(e,t,n){var r,o,i,a,s,l,u=n.caretSize,c=n.cornerRadius,d=n.xAlign,h=n.yAlign,p=e.x,f=e.y,g=t.width,m=t.height;if("center"===h)s=f+m/2,"left"===d?(o=(r=p)-u,i=r,a=s+u,l=s-u):(o=(r=p+g)+u,i=r,a=s-u,l=s+u);else if("left"===d?(r=(o=p+c+u)-u,i=o+u):"right"===d?(r=(o=p+g-c-u)-u,i=o+u):(r=(o=n.caretX)-u,i=o+u),"top"===h)s=(a=f)-u,l=a;else{s=(a=f+m)+u,l=a;var v=i;i=r,r=v}return{x1:r,x2:o,x3:i,y1:a,y2:s,y3:l}},drawTitle:function(e,t,n){var r,o,i,a=t.title,s=a.length;if(s){var l=Dt(t.rtl,t.x,t.width);for(e.x=Et(t,t._titleAlign),n.textAlign=l.textAlign(t._titleAlign),n.textBaseline="middle",r=t.titleFontSize,o=t.titleSpacing,n.fillStyle=t.titleFontColor,n.font=W.fontString(r,t._titleFontStyle,t._titleFontFamily),i=0;i<s;++i)n.fillText(a[i],l.x(e.x),e.y+r/2),e.y+=r+o,i+1===s&&(e.y+=t.titleMarginBottom-o)}},drawBody:function(e,t,n){var r,o,i,a,s,l,u,c,d=t.bodyFontSize,h=t.bodySpacing,p=t._bodyAlign,f=t.body,g=t.displayColors,m=0,v=g?Et(t,"left"):0,y=Dt(t.rtl,t.x,t.width),b=function(t){n.fillText(t,y.x(e.x+m),e.y+d/2),e.y+=d+h},x=y.textAlign(p);for(n.textAlign=p,n.textBaseline="middle",n.font=W.fontString(d,t._bodyFontStyle,t._bodyFontFamily),e.x=Et(t,x),n.fillStyle=t.bodyFontColor,W.each(t.beforeBody,b),m=g&&"right"!==x?"center"===p?d/2+1:d+2:0,s=0,u=f.length;s<u;++s){for(r=f[s],o=t.labelTextColors[s],i=t.labelColors[s],n.fillStyle=o,W.each(r.before,b),l=0,c=(a=r.lines).length;l<c;++l){if(g){var _=y.x(v);n.fillStyle=t.legendColorBackground,n.fillRect(y.leftForLtr(_,d),e.y,d,d),n.lineWidth=1,n.strokeStyle=i.borderColor,n.strokeRect(y.leftForLtr(_,d),e.y,d,d),n.fillStyle=i.backgroundColor,n.fillRect(y.leftForLtr(y.xPlus(_,1),d-2),e.y+1,d-2,d-2),n.fillStyle=o}b(a[l])}W.each(r.after,b)}m=0,W.each(t.afterBody,b),e.y-=h},drawFooter:function(e,t,n){var r,o,i=t.footer,a=i.length;if(a){var s=Dt(t.rtl,t.x,t.width);for(e.x=Et(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=s.textAlign(t._footerAlign),n.textBaseline="middle",r=t.footerFontSize,n.fillStyle=t.footerFontColor,n.font=W.fontString(r,t._footerFontStyle,t._footerFontFamily),o=0;o<a;++o)n.fillText(i[o],s.x(e.x),e.y+r/2),e.y+=r+t.footerSpacing}},drawBackground:function(e,t,n,r){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var o=t.xAlign,i=t.yAlign,a=e.x,s=e.y,l=r.width,u=r.height,c=t.cornerRadius;n.beginPath(),n.moveTo(a+c,s),"top"===i&&this.drawCaret(e,r),n.lineTo(a+l-c,s),n.quadraticCurveTo(a+l,s,a+l,s+c),"center"===i&&"right"===o&&this.drawCaret(e,r),n.lineTo(a+l,s+u-c),n.quadraticCurveTo(a+l,s+u,a+l-c,s+u),"bottom"===i&&this.drawCaret(e,r),n.lineTo(a+c,s+u),n.quadraticCurveTo(a,s+u,a,s+u-c),"center"===i&&"left"===o&&this.drawCaret(e,r),n.lineTo(a,s+c),n.quadraticCurveTo(a,s,a+c,s),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},r={x:t.x,y:t.y},o=Math.abs(t.opacity<.001)?0:t.opacity,i=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&i&&(e.save(),e.globalAlpha=o,this.drawBackground(r,t,e,n),r.y+=t.yPadding,W.rtl.overrideTextDirection(e,t.textDirection),this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),W.rtl.restoreTextDirection(e,t.textDirection),e.restore())}},handleEvent:function(e){var t,n=this,r=n._options;return n._lastActive=n._lastActive||[],"mouseout"===e.type?n._active=[]:(n._active=n._chart.getElementsAtEventForMode(e,r.mode,r),r.reverse&&n._active.reverse()),(t=!W.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(r.enabled||r.custom)&&(n._eventPosition={x:e.x,y:e.y},n.update(!0),n.pivot())),t}}),zt=Pt,Ft=Bt;Ft.positioners=zt;var Vt=W.valueOrDefault;function Ht(){return W.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,r){if("xAxes"===e||"yAxes"===e){var o,i,a,s=n[e].length;for(t[e]||(t[e]=[]),o=0;o<s;++o)a=n[e][o],i=Vt(a.type,"xAxes"===e?"category":"linear"),o>=t[e].length&&t[e].push({}),!t[e][o].type||a.type&&a.type!==t[e][o].type?W.merge(t[e][o],[It.getScaleDefaults(i),a]):W.merge(t[e][o],a)}else W._merger(e,t,n,r)}})}function Wt(){return W.merge(Object.create(null),[].slice.call(arguments),{merger:function(e,t,n,r){var o=t[e]||Object.create(null),i=n[e];"scales"===e?t[e]=Ht(o,i):"scale"===e?t[e]=W.merge(o,[It.getScaleDefaults(i.type),i]):W._merger(e,t,n,r)}})}function Gt(e){var t=e.options;W.each(e.scales,function(t){dt.removeBox(e,t)}),t=Wt(B.global,B[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Ut(e,t,n){var r,o=function(e){return e.id===r};do{r=t+n++}while(W.findIndex(e,o)>=0);return r}function jt(e){return"top"===e||"bottom"===e}function Yt(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}B._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var qt=function(e,t){return this.construct(e,t),this};W.extend(qt.prototype,{construct:function(e,t){var n=this;t=function(e){var t=(e=e||Object.create(null)).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=Wt(B.global,B[e.type],e.options||{}),e}(t);var r=Tt.acquireContext(e,t),o=r&&r.canvas,i=o&&o.height,a=o&&o.width;n.id=W.uid(),n.ctx=r,n.canvas=o,n.config=t,n.width=a,n.height=i,n.aspectRatio=i?a/i:null,n.options=t.options,n._bufferedRender=!1,n._layers=[],n.chart=n,n.controller=n,qt.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),r&&o?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return kt.notify(e,"beforeInit"),W.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.initToolTip(),kt.notify(e,"afterInit"),e},clear:function(){return W.canvas.clear(this),this},stop:function(){return K.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,r=t.canvas,o=n.maintainAspectRatio&&t.aspectRatio||null,i=Math.max(0,Math.floor(W.getMaximumWidth(r))),a=Math.max(0,Math.floor(o?i/o:W.getMaximumHeight(r)));if((t.width!==i||t.height!==a)&&(r.width=t.width=i,r.height=t.height=a,r.style.width=i+"px",r.style.height=a+"px",W.retinaScale(t,n.devicePixelRatio),!e)){var s={width:i,height:a};kt.notify(t,"resize",[s]),n.onResize&&n.onResize(t,s),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;W.each(t.xAxes,function(e,n){e.id||(e.id=Ut(t.xAxes,"x-axis-",n))}),W.each(t.yAxes,function(e,n){e.id||(e.id=Ut(t.yAxes,"y-axis-",n))}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},r=[],o=Object.keys(n).reduce(function(e,t){return e[t]=!1,e},{});t.scales&&(r=r.concat((t.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),t.scale&&r.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),W.each(r,function(t){var r=t.options,i=r.id,a=Vt(r.type,t.dtype);jt(r.position)!==jt(t.dposition)&&(r.position=t.dposition),o[i]=!0;var s=null;if(i in n&&n[i].type===a)(s=n[i]).options=r,s.ctx=e.ctx,s.chart=e;else{var l=It.getScaleConstructor(a);if(!l)return;s=new l({id:i,type:a,options:r,ctx:e.ctx,chart:e}),n[s.id]=s}s.mergeTicksOptions(),t.isDefault&&(e.scale=s)}),W.each(o,function(e,t){e||delete n[t]}),e.scales=n,It.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e,t,n=this,r=[],o=n.data.datasets;for(e=0,t=o.length;e<t;e++){var i=o[e],a=n.getDatasetMeta(e),s=i.type||n.config.type;if(a.type&&a.type!==s&&(n.destroyDatasetMeta(e),a=n.getDatasetMeta(e)),a.type=s,a.order=i.order||0,a.index=e,a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{var l=Xe[a.type];if(void 0===l)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(n,e),r.push(a.controller)}}return r},resetElements:function(){var e=this;W.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t,n,r=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),Gt(r),kt._invalidate(r),!1!==kt.notify(r,"beforeUpdate")){r.tooltip._data=r.data;var o=r.buildOrUpdateControllers();for(t=0,n=r.data.datasets.length;t<n;t++)r.getDatasetMeta(t).controller.buildOrUpdateElements();r.updateLayout(),r.options.animation&&r.options.animation.duration&&W.each(o,function(e){e.reset()}),r.updateDatasets(),r.tooltip.initialize(),r.lastActive=[],kt.notify(r,"afterUpdate"),r._layers.sort(Yt("z","_idx")),r._bufferedRender?r._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:r.render(e)}},updateLayout:function(){var e=this;!1!==kt.notify(e,"beforeLayout")&&(dt.update(this,this.width,this.height),e._layers=[],W.each(e.boxes,function(t){t._configure&&t._configure(),e._layers.push.apply(e._layers,t._layers())},e),e._layers.forEach(function(e,t){e._idx=t}),kt.notify(e,"afterScaleUpdate"),kt.notify(e,"afterLayout"))},updateDatasets:function(){if(!1!==kt.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);kt.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),n={meta:t,index:e};!1!==kt.notify(this,"beforeDatasetUpdate",[n])&&(t.controller._update(),kt.notify(this,"afterDatasetUpdate",[n]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,r=Vt(e.duration,n&&n.duration),o=e.lazy;if(!1!==kt.notify(t,"beforeRender")){var i=function(e){kt.notify(t,"afterRender"),W.callback(n&&n.onComplete,[e],t)};if(n&&r){var a=new $({numSteps:r/16.66,easing:e.easing||n.easing,render:function(e,t){var n=W.easing.effects[t.easing],r=t.currentStep,o=r/t.numSteps;e.draw(n(o),o,r)},onAnimationProgress:n.onProgress,onAnimationComplete:i});K.addAnimation(t,a,r,o)}else t.draw(),i(new $({numSteps:0,chart:t}));return t}},draw:function(e){var t,n,r=this;if(r.clear(),W.isNullOrUndef(e)&&(e=1),r.transition(e),!(r.width<=0||r.height<=0)&&!1!==kt.notify(r,"beforeDraw",[e])){for(n=r._layers,t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(r.chartArea);for(r.drawDatasets(e);t<n.length;++t)n[t].draw(r.chartArea);r._drawTooltip(e),kt.notify(r,"afterDraw",[e])}},transition:function(e){for(var t=0,n=(this.data.datasets||[]).length;t<n;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},_getSortedDatasetMetas:function(e){var t,n,r=[];for(t=0,n=(this.data.datasets||[]).length;t<n;++t)e&&!this.isDatasetVisible(t)||r.push(this.getDatasetMeta(t));return r.sort(Yt("order","index")),r},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(e){var t,n;if(!1!==kt.notify(this,"beforeDatasetsDraw",[e])){for(n=(t=this._getSortedVisibleDatasetMetas()).length-1;n>=0;--n)this.drawDataset(t[n],e);kt.notify(this,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n={meta:e,index:e.index,easingValue:t};!1!==kt.notify(this,"beforeDatasetDraw",[n])&&(e.controller.draw(t),kt.notify(this,"afterDatasetDraw",[n]))},_drawTooltip:function(e){var t=this.tooltip,n={tooltip:t,easingValue:e};!1!==kt.notify(this,"beforeTooltipDraw",[n])&&(t.draw(),kt.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(e){return tt.modes.single(this,e)},getElementsAtEvent:function(e){return tt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return tt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var r=tt.modes[t];return"function"==typeof r?r(this,e,n):[]},getDatasetAtEvent:function(e){return tt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var n=t._meta[this.id];return n||(n=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t.order||0,index:e}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],r=n._meta&&n._meta[t];r&&(r.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,r=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);r&&(n.unbindEvents(),W.canvas.clear(n),Tt.releaseContext(n.ctx),n.canvas=null,n.ctx=null),kt.notify(n,"destroy"),delete qt.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Ft({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};W.each(e.options.events,function(r){Tt.addEventListener(e,r,n),t[r]=n}),e.options.responsive&&(n=function(){e.resize()},Tt.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,W.each(t,function(t,n){Tt.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var r,o,i,a=n?"set":"remove";for(o=0,i=e.length;o<i;++o)(r=e[o])&&this.getDatasetMeta(r._datasetIndex).controller[a+"HoverStyle"](r);"dataset"===t&&this.getDatasetMeta(e[0]._datasetIndex).controller["_"+a+"DatasetHoverStyle"]()},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==kt.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var r=t.handleEvent(e);n&&(r=n._start?n.handleEvent(e):r|n.handleEvent(e)),kt.notify(t,"afterEvent",[e]);var o=t._bufferedRequest;return o?t.render(o):r&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,n=this,r=n.options||{},o=r.hover;return n.lastActive=n.lastActive||[],"mouseout"===e.type?n.active=[]:n.active=n.getElementsAtEventForMode(e,o.mode,o),W.callback(r.onHover||r.hover.onHover,[e.native,n.active],n),"mouseup"!==e.type&&"click"!==e.type||r.onClick&&r.onClick.call(n,e.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,o.mode,!1),n.active.length&&o.mode&&n.updateHoverStyle(n.active,o.mode,!0),t=!W.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,t}}),qt.instances={};var Xt=qt;function Zt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function $t(e){this.options=e||{}}qt.Controller=qt,qt.types={},W.configMerge=Wt,W.scaleMerge=Ht,W.extend($t.prototype,{formats:Zt,parse:Zt,format:Zt,add:Zt,diff:Zt,startOf:Zt,endOf:Zt,_create:function(e){return e}}),$t.override=function(e){W.extend($t.prototype,e)};var Kt={_date:$t},Jt={formatters:{values:function(e){return W.isArray(e)?e:""+e},linear:function(e,t,n){var r=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(r)>1&&e!==Math.floor(e)&&(r=e-Math.floor(e));var o=W.log10(Math.abs(r)),i="";if(0!==e)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var a=W.log10(Math.abs(e)),s=Math.floor(a)-Math.floor(o);s=Math.max(Math.min(s,20),0),i=e.toExponential(s)}else{var l=-1*Math.floor(o);l=Math.max(Math.min(l,20),0),i=e.toFixed(l)}else i="0";return i},logarithmic:function(e,t,n){var r=e/Math.pow(10,Math.floor(W.log10(e)));return 0===e?"0":1===r||2===r||5===r||0===t||t===n.length-1?e.toExponential():""}}},Qt=W.isArray,en=W.isNullOrUndef,tn=W.valueOrDefault,nn=W.valueAtIndexOrDefault;function rn(e,t,n){var r,o=e.getTicks().length,i=Math.min(t,o-1),a=e.getPixelForTick(i),s=e._startPixel,l=e._endPixel;if(!(n&&(r=1===o?Math.max(a-s,l-a):0===t?(e.getPixelForTick(1)-a)/2:(a-e.getPixelForTick(i-1))/2,(a+=i<t?r:-r)<s-1e-6||a>l+1e-6)))return a}function on(e){return e.drawTicks?e.tickMarkLength:0}function an(e){var t,n;return e.display?(t=W.options._parseFont(e),n=W.options.toPadding(e.padding),t.lineHeight+n.height):0}function sn(e,t){return W.extend(W.options._parseFont({fontFamily:tn(t.fontFamily,e.fontFamily),fontSize:tn(t.fontSize,e.fontSize),fontStyle:tn(t.fontStyle,e.fontStyle),lineHeight:tn(t.lineHeight,e.lineHeight)}),{color:W.options.resolve([t.fontColor,e.fontColor,B.global.defaultFontColor])})}function ln(e){var t=sn(e,e.minor);return{minor:t,major:e.major.enabled?sn(e,e.major):t}}function un(e){var t,n,r,o=[];for(n=0,r=e.length;n<r;++n)void 0!==(t=e[n])._index&&o.push(t);return o}function cn(e,t,n,r){var o,i,a,s,l=tn(n,0),u=Math.min(tn(r,e.length),e.length),c=0;for(t=Math.ceil(t),r&&(t=(o=r-n)/Math.floor(o/t)),s=l;s<0;)c++,s=Math.round(l+c*t);for(i=Math.max(l,0);i<u;i++)a=e[i],i===s?(a._index=i,c++,s=Math.round(l+c*t)):delete a.label}B._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Jt.formatters.values,minor:{},major:{}}});var dn=X.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){W.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var r,o,i,a,s,l=this,u=l.options.ticks,c=u.sampleSize;if(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=W.extend({left:0,right:0,top:0,bottom:0},n),l._ticks=null,l.ticks=null,l._labelSizes=null,l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l._gridLineItems=null,l._labelItems=null,l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),a=l.buildTicks()||[],(!(a=l.afterBuildTicks(a)||a)||!a.length)&&l.ticks)for(a=[],r=0,o=l.ticks.length;r<o;++r)a.push({value:l.ticks[r],major:!1});return l._ticks=a,s=c<a.length,i=l._convertTicksToLabels(s?function(e,t){for(var n=[],r=e.length/t,o=0,i=e.length;o<i;o+=r)n.push(e[Math.floor(o)]);return n}(a,c):a),l._configure(),l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l._ticksToDraw=u.display&&(u.autoSkip||"auto"===u.source)?l._autoSkip(a):a,s&&(i=l._convertTicksToLabels(l._ticksToDraw)),l.ticks=i,l.afterUpdate(),l.minSize},_configure:function(){var e,t,n=this,r=n.options.ticks.reverse;n.isHorizontal()?(e=n.left,t=n.right):(e=n.top,t=n.bottom,r=!r),n._startPixel=e,n._endPixel=t,n._reversePixels=r,n._length=t-e},afterUpdate:function(){W.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){W.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){W.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){W.callback(this.options.beforeDataLimits,[this])},determineDataLimits:W.noop,afterDataLimits:function(){W.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){W.callback(this.options.beforeBuildTicks,[this])},buildTicks:W.noop,afterBuildTicks:function(e){var t=this;return Qt(e)&&e.length?W.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=W.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){W.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){W.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){W.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e,t,n,r,o,i,a,s=this,l=s.options,u=l.ticks,c=s.getTicks().length,d=u.minRotation||0,h=u.maxRotation,p=d;!s._isVisible()||!u.display||d>=h||c<=1||!s.isHorizontal()?s.labelRotation=d:(t=(e=s._getLabelSizes()).widest.width,n=e.highest.height-e.highest.offset,r=Math.min(s.maxWidth,s.chart.width-t),t+6>(o=l.offset?s.maxWidth/c:r/(c-1))&&(o=r/(c-(l.offset?.5:1)),i=s.maxHeight-on(l.gridLines)-u.padding-an(l.scaleLabel),a=Math.sqrt(t*t+n*n),p=W.toDegrees(Math.min(Math.asin(Math.min((e.highest.height+6)/o,1)),Math.asin(Math.min(i/a,1))-Math.asin(n/a))),p=Math.max(d,Math.min(h,p))),s.labelRotation=p)},afterCalculateTickRotation:function(){W.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){W.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=e.chart,r=e.options,o=r.ticks,i=r.scaleLabel,a=r.gridLines,s=e._isVisible(),l="bottom"===r.position,u=e.isHorizontal();if(u?t.width=e.maxWidth:s&&(t.width=on(a)+an(i)),u?s&&(t.height=on(a)+an(i)):t.height=e.maxHeight,o.display&&s){var c=ln(o),d=e._getLabelSizes(),h=d.first,p=d.last,f=d.widest,g=d.highest,m=.4*c.minor.lineHeight,v=o.padding;if(u){var y=0!==e.labelRotation,b=W.toRadians(e.labelRotation),x=Math.cos(b),_=Math.sin(b),w=_*f.width+x*(g.height-(y?g.offset:0))+(y?0:m);t.height=Math.min(e.maxHeight,t.height+w+v);var S,C,M=e.getPixelForTick(0)-e.left,T=e.right-e.getPixelForTick(e.getTicks().length-1);y?(S=l?x*h.width+_*h.offset:_*(h.height-h.offset),C=l?_*(p.height-p.offset):x*p.width+_*p.offset):(S=h.width/2,C=p.width/2),e.paddingLeft=Math.max((S-M)*e.width/(e.width-M),0)+3,e.paddingRight=Math.max((C-T)*e.width/(e.width-T),0)+3}else{var k=o.mirror?0:f.width+v+m;t.width=Math.min(e.maxWidth,t.width+k),e.paddingTop=h.height/2,e.paddingBottom=p.height/2}}e.handleMargins(),u?(e.width=e._length=n.width-e.margins.left-e.margins.right,e.height=t.height):(e.width=t.width,e.height=e._length=n.height-e.margins.top-e.margins.bottom)},handleMargins:function(){var e=this;e.margins&&(e.margins.left=Math.max(e.paddingLeft,e.margins.left),e.margins.top=Math.max(e.paddingTop,e.margins.top),e.margins.right=Math.max(e.paddingRight,e.margins.right),e.margins.bottom=Math.max(e.paddingBottom,e.margins.bottom))},afterFit:function(){W.callback(this.options.afterFit,[this])},isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(en(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},_convertTicksToLabels:function(e){var t,n,r,o=this;for(o.ticks=e.map(function(e){return e.value}),o.beforeTickToLabelConversion(),t=o.convertTicksToLabels(e)||o.ticks,o.afterTickToLabelConversion(),n=0,r=e.length;n<r;++n)e[n].label=t[n];return t},_getLabelSizes:function(){var e=this,t=e._labelSizes;return t||(e._labelSizes=t=function(e,t,n,r){var o,i,a,s,l,u,c,d,h,p,f,g,m,v=n.length,y=[],b=[],x=[],_=0,w=0;for(o=0;o<v;++o){if(s=n[o].label,l=n[o].major?t.major:t.minor,e.font=u=l.string,c=r[u]=r[u]||{data:{},gc:[]},d=l.lineHeight,h=p=0,en(s)||Qt(s)){if(Qt(s))for(i=0,a=s.length;i<a;++i)f=s[i],en(f)||Qt(f)||(h=W.measureText(e,c.data,c.gc,h,f),p+=d)}else h=W.measureText(e,c.data,c.gc,h,s),p=d;y.push(h),b.push(p),x.push(d/2),_=Math.max(h,_),w=Math.max(p,w)}function S(e){return{width:y[e]||0,height:b[e]||0,offset:x[e]||0}}return function(e,t){W.each(e,function(e){var n,r=e.gc,o=r.length/2;if(o>t){for(n=0;n<o;++n)delete e.data[r[n]];r.splice(0,o)}})}(r,v),g=y.indexOf(_),m=b.indexOf(w),{first:S(0),last:S(v-1),widest:S(g),highest:S(m)}}(e.ctx,ln(e.options.ticks),e.getTicks(),e.longestTextCache),e.longestLabelWidth=t.widest.width),t},_parseValue:function(e){var t,n,r,o;return Qt(e)?(t=+this.getRightValue(e[0]),n=+this.getRightValue(e[1]),r=Math.min(t,n),o=Math.max(t,n)):(t=void 0,n=e=+this.getRightValue(e),r=e,o=e),{min:r,max:o,start:t,end:n}},_getScaleLabel:function(e){var t=this._parseValue(e);return void 0!==t.start?"["+t.start+", "+t.end+"]":+this.getRightValue(e)},getLabelForIndex:W.noop,getPixelForValue:W.noop,getValueForPixel:W.noop,getPixelForTick:function(e){var t=this.options.offset,n=this._ticks.length,r=1/Math.max(n-(t?0:1),1);return e<0||e>n-1?null:this.getPixelForDecimal(e*r+(t?r/2:0))},getPixelForDecimal:function(e){return this._reversePixels&&(e=1-e),this._startPixel+e*this._length},getDecimalForPixel:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,n,r,o,i=this.options.ticks,a=this._length,s=i.maxTicksLimit||a/this._tickSize()+1,l=i.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(e):[],u=l.length,c=l[0],d=l[u-1];if(u>s)return function(e,t,n){var r,o,i=0,a=t[0];for(n=Math.ceil(n),r=0;r<e.length;r++)o=e[r],r===a?(o._index=r,a=t[++i*n]):delete o.label}(e,l,u/s),un(e);if(r=function(e,t,n,r){var o,i,a,s,l=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),u=(t.length-1)/r;if(!l)return Math.max(u,1);for(a=0,s=(o=W.math._factorize(l)).length-1;a<s;a++)if((i=o[a])>u)return i;return Math.max(u,1)}(l,e,0,s),u>0){for(t=0,n=u-1;t<n;t++)cn(e,r,l[t],l[t+1]);return o=u>1?(d-c)/(u-1):null,cn(e,r,W.isNullOrUndef(o)?0:c-o,c),cn(e,r,d,W.isNullOrUndef(o)?e.length:d+o),un(e)}return cn(e,r),un(e)},_tickSize:function(){var e=this.options.ticks,t=W.toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),o=this._getLabelSizes(),i=e.autoSkipPadding||0,a=o?o.widest.width+i:0,s=o?o.highest.height+i:0;return this.isHorizontal()?s*n>a*r?a/n:s/r:s*r<a*n?s/n:a/r},_isVisible:function(){var e,t,n,r=this.chart,o=this.options.display;if("auto"!==o)return!!o;for(e=0,t=r.data.datasets.length;e<t;++e)if(r.isDatasetVisible(e)&&((n=r.getDatasetMeta(e)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(e){var t,n,r,o,i,a,s,l,u,c,d,h,p,f,g,m,v,y=this,b=y.chart,x=y.options,_=x.gridLines,w=x.position,S=_.offsetGridLines,C=y.isHorizontal(),M=y._ticksToDraw,T=M.length+(S?1:0),k=on(_),I=[],A=_.drawBorder?nn(_.lineWidth,0,0):0,D=A/2,P=W._alignPixel,L=function(e){return P(b,e,A)};for("top"===w?(t=L(y.bottom),s=y.bottom-k,u=t-D,d=L(e.top)+D,p=e.bottom):"bottom"===w?(t=L(y.top),d=e.top,p=L(e.bottom)-D,s=t+D,u=y.top+k):"left"===w?(t=L(y.right),a=y.right-k,l=t-D,c=L(e.left)+D,h=e.right):(t=L(y.left),c=e.left,h=L(e.right)-D,a=t+D,l=y.left+k),n=0;n<T;++n)r=M[n]||{},en(r.label)&&n<M.length||(n===y.zeroLineIndex&&x.offset===S?(f=_.zeroLineWidth,g=_.zeroLineColor,m=_.zeroLineBorderDash||[],v=_.zeroLineBorderDashOffset||0):(f=nn(_.lineWidth,n,1),g=nn(_.color,n,"rgba(0,0,0,0.1)"),m=_.borderDash||[],v=_.borderDashOffset||0),void 0!==(o=rn(y,r._index||n,S))&&(i=P(b,o,f),C?a=l=c=h=i:s=u=d=p=i,I.push({tx1:a,ty1:s,tx2:l,ty2:u,x1:c,y1:d,x2:h,y2:p,width:f,color:g,borderDash:m,borderDashOffset:v})));return I.ticksLength=T,I.borderValue=t,I},_computeLabelItems:function(){var e,t,n,r,o,i,a,s,l,u,c,d,h=this,p=h.options,f=p.ticks,g=p.position,m=f.mirror,v=h.isHorizontal(),y=h._ticksToDraw,b=ln(f),x=f.padding,_=on(p.gridLines),w=-W.toRadians(h.labelRotation),S=[];for("top"===g?(i=h.bottom-_-x,a=w?"left":"center"):"bottom"===g?(i=h.top+_+x,a=w?"right":"center"):"left"===g?(o=h.right-(m?0:_)-x,a=m?"left":"right"):(o=h.left+(m?0:_)+x,a=m?"right":"left"),e=0,t=y.length;e<t;++e)r=(n=y[e]).label,en(r)||(s=h.getPixelForTick(n._index||e)+f.labelOffset,u=(l=n.major?b.major:b.minor).lineHeight,c=Qt(r)?r.length:1,v?(o=s,d="top"===g?((w?1:.5)-c)*u:(w?0:.5)*u):(i=s,d=(1-c)*u/2),S.push({x:o,y:i,rotation:w,label:r,font:l,textOffset:d,textAlign:a}));return S},_drawGrid:function(e){var t=this,n=t.options.gridLines;if(n.display){var r,o,i,a,s,l=t.ctx,u=t.chart,c=W._alignPixel,d=n.drawBorder?nn(n.lineWidth,0,0):0,h=t._gridLineItems||(t._gridLineItems=t._computeGridLineItems(e));for(i=0,a=h.length;i<a;++i)r=(s=h[i]).width,o=s.color,r&&o&&(l.save(),l.lineWidth=r,l.strokeStyle=o,l.setLineDash&&(l.setLineDash(s.borderDash),l.lineDashOffset=s.borderDashOffset),l.beginPath(),n.drawTicks&&(l.moveTo(s.tx1,s.ty1),l.lineTo(s.tx2,s.ty2)),n.drawOnChartArea&&(l.moveTo(s.x1,s.y1),l.lineTo(s.x2,s.y2)),l.stroke(),l.restore());if(d){var p,f,g,m,v=d,y=nn(n.lineWidth,h.ticksLength-1,1),b=h.borderValue;t.isHorizontal()?(p=c(u,t.left,v)-v/2,f=c(u,t.right,y)+y/2,g=m=b):(g=c(u,t.top,v)-v/2,m=c(u,t.bottom,y)+y/2,p=f=b),l.lineWidth=d,l.strokeStyle=nn(n.color,0),l.beginPath(),l.moveTo(p,g),l.lineTo(f,m),l.stroke()}}},_drawLabels:function(){var e=this;if(e.options.ticks.display){var t,n,r,o,i,a,s,l,u=e.ctx,c=e._labelItems||(e._labelItems=e._computeLabelItems());for(t=0,r=c.length;t<r;++t){if(a=(i=c[t]).font,u.save(),u.translate(i.x,i.y),u.rotate(i.rotation),u.font=a.string,u.fillStyle=a.color,u.textBaseline="middle",u.textAlign=i.textAlign,s=i.label,l=i.textOffset,Qt(s))for(n=0,o=s.length;n<o;++n)u.fillText(""+s[n],0,l),l+=a.lineHeight;else u.fillText(s,0,l);u.restore()}}},_drawTitle:function(){var e=this,t=e.ctx,n=e.options,r=n.scaleLabel;if(r.display){var o,i,a=tn(r.fontColor,B.global.defaultFontColor),s=W.options._parseFont(r),l=W.options.toPadding(r.padding),u=s.lineHeight/2,c=n.position,d=0;if(e.isHorizontal())o=e.left+e.width/2,i="bottom"===c?e.bottom-u-l.bottom:e.top+u+l.top;else{var h="left"===c;o=h?e.left+u+l.top:e.right-u-l.top,i=e.top+e.height/2,d=h?-.5*Math.PI:.5*Math.PI}t.save(),t.translate(o,i),t.rotate(d),t.textAlign="center",t.textBaseline="middle",t.fillStyle=a,t.font=s.string,t.fillText(r.labelString,0,0),t.restore()}},draw:function(e){this._isVisible()&&(this._drawGrid(e),this._drawTitle(),this._drawLabels())},_layers:function(){var e=this,t=e.options,n=t.ticks&&t.ticks.z||0,r=t.gridLines&&t.gridLines.z||0;return e._isVisible()&&n!==r&&e.draw===e._draw?[{z:r,draw:function(){e._drawGrid.apply(e,arguments),e._drawTitle.apply(e,arguments)}},{z:n,draw:function(){e._drawLabels.apply(e,arguments)}}]:[{z:n,draw:function(){e.draw.apply(e,arguments)}}]},_getMatchingVisibleMetas:function(e){var t=this,n=t.isHorizontal();return t.chart._getSortedVisibleDatasetMetas().filter(function(r){return(!e||r.type===e)&&(n?r.xAxisID===t.id:r.yAxisID===t.id)})}});dn.prototype._draw=dn.prototype.draw;var hn=dn,pn=W.isNullOrUndef,fn=hn.extend({determineDataLimits:function(){var e,t=this,n=t._getLabels(),r=t.options.ticks,o=r.min,i=r.max,a=0,s=n.length-1;void 0!==o&&(e=n.indexOf(o))>=0&&(a=e),void 0!==i&&(e=n.indexOf(i))>=0&&(s=e),t.minIndex=a,t.maxIndex=s,t.min=n[a],t.max=n[s]},buildTicks:function(){var e=this._getLabels(),t=this.minIndex,n=this.maxIndex;this.ticks=0===t&&n===e.length-1?e:e.slice(t,n+1)},getLabelForIndex:function(e,t){var n=this.chart;return n.getDatasetMeta(t).controller._getValueScaleId()===this.id?this.getRightValue(n.data.datasets[t].data[e]):this._getLabels()[e]},_configure:function(){var e=this,t=e.options.offset,n=e.ticks;hn.prototype._configure.call(e),e.isHorizontal()||(e._reversePixels=!e._reversePixels),n&&(e._startValue=e.minIndex-(t?.5:0),e._valueRange=Math.max(n.length-(t?0:1),1))},getPixelForValue:function(e,t,n){var r,o,i,a=this;return pn(t)||pn(n)||(e=a.chart.data.datasets[n].data[t]),pn(e)||(r=a.isHorizontal()?e.x:e.y),(void 0!==r||void 0!==e&&isNaN(t))&&(o=a._getLabels(),e=W.valueOrDefault(r,e),t=-1!==(i=o.indexOf(e))?i:t,isNaN(t)&&(t=e)),a.getPixelForDecimal((t-a._startValue)/a._valueRange)},getPixelForTick:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e],e+this.minIndex)},getValueForPixel:function(e){var t=Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange);return Math.min(Math.max(t,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}});fn._defaults={position:"bottom"};var gn=W.noop,mn=W.isNullOrUndef,vn=hn.extend({getRightValue:function(e){return"string"==typeof e?+e:hn.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=W.sign(e.min),r=W.sign(e.max);n<0&&r<0?e.max=0:n>0&&r>0&&(e.min=0)}var o=void 0!==t.min||void 0!==t.suggestedMin,i=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),o!==i&&e.min>=e.max&&(o?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,n=t.stepSize,r=t.maxTicksLimit;return n?e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(e=this._computeTickLimit(),r=r||11),r&&(e=Math.min(r,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:gn,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),r={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,precision:t.precision,stepSize:W.valueOrDefault(t.fixedStepSize,t.stepSize)},o=e.ticks=function(e,t){var n,r,o,i,a=[],s=e.stepSize,l=s||1,u=e.maxTicks-1,c=e.min,d=e.max,h=e.precision,p=t.min,f=t.max,g=W.niceNum((f-p)/u/l)*l;if(g<1e-14&&mn(c)&&mn(d))return[p,f];(i=Math.ceil(f/g)-Math.floor(p/g))>u&&(g=W.niceNum(i*g/u/l)*l),s||mn(h)?n=Math.pow(10,W._decimalPlaces(g)):(n=Math.pow(10,h),g=Math.ceil(g*n)/n),r=Math.floor(p/g)*g,o=Math.ceil(f/g)*g,s&&(!mn(c)&&W.almostWhole(c/g,g/1e3)&&(r=c),!mn(d)&&W.almostWhole(d/g,g/1e3)&&(o=d)),i=(o-r)/g,i=W.almostEquals(i,Math.round(i),g/1e3)?Math.round(i):Math.ceil(i),r=Math.round(r*n)/n,o=Math.round(o*n)/n,a.push(mn(c)?r:c);for(var m=1;m<i;++m)a.push(Math.round((r+m*g)*n)/n);return a.push(mn(d)?o:d),a}(r,e);e.handleDirectionalChanges(),e.max=W.max(o),e.min=W.min(o),t.reverse?(o.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),hn.prototype.convertTicksToLabels.call(e)},_configure:function(){var e,t=this,n=t.getTicks(),r=t.min,o=t.max;hn.prototype._configure.call(t),t.options.offset&&n.length&&(r-=e=(o-r)/Math.max(n.length-1,1)/2,o+=e),t._startValue=r,t._endValue=o,t._valueRange=o-r}}),yn={position:"left",ticks:{callback:Jt.formatters.linear}};function bn(e,t,n,r){var o,i,a=e.options,s=function(e,t,n){var r=[n.type,void 0===t&&void 0===n.stack?n.index:"",n.stack].join(".");return void 0===e[r]&&(e[r]={pos:[],neg:[]}),e[r]}(t,a.stacked,n),l=s.pos,u=s.neg,c=r.length;for(o=0;o<c;++o)i=e._parseValue(r[o]),isNaN(i.min)||isNaN(i.max)||n.data[o].hidden||(l[o]=l[o]||0,u[o]=u[o]||0,a.relativePoints?l[o]=100:i.min<0||i.max<0?u[o]+=i.min:l[o]+=i.max)}function xn(e,t,n){var r,o,i=n.length;for(r=0;r<i;++r)o=e._parseValue(n[r]),isNaN(o.min)||isNaN(o.max)||t.data[r].hidden||(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}var _n=vn.extend({determineDataLimits:function(){var e,t,n,r,o=this,i=o.options,a=o.chart.data.datasets,s=o._getMatchingVisibleMetas(),l=i.stacked,u={},c=s.length;if(o.min=Number.POSITIVE_INFINITY,o.max=Number.NEGATIVE_INFINITY,void 0===l)for(e=0;!l&&e<c;++e)l=void 0!==(t=s[e]).stack;for(e=0;e<c;++e)n=a[(t=s[e]).index].data,l?bn(o,u,t,n):xn(o,t,n);W.each(u,function(e){r=e.pos.concat(e.neg),o.min=Math.min(o.min,W.min(r)),o.max=Math.max(o.max,W.max(r))}),o.min=W.isFinite(o.min)&&!isNaN(o.min)?o.min:0,o.max=W.isFinite(o.max)&&!isNaN(o.max)?o.max:1,o.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=W.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){return this.getPixelForDecimal((+this.getRightValue(e)-this._startValue)/this._valueRange)},getValueForPixel:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange},getPixelForTick:function(e){var t=this.ticksAsNumbers;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])}}),wn=yn;_n._defaults=wn;var Sn=W.valueOrDefault,Cn=W.math.log10,Mn={position:"left",ticks:{callback:Jt.formatters.logarithmic}};function Tn(e,t){return W.isFinite(e)&&e>=0?e:t}var kn=hn.extend({determineDataLimits:function(){var e,t,n,r,o,i,a=this,s=a.options,l=a.chart,u=l.data.datasets,c=a.isHorizontal();function d(e){return c?e.xAxisID===a.id:e.yAxisID===a.id}a.min=Number.POSITIVE_INFINITY,a.max=Number.NEGATIVE_INFINITY,a.minNotZero=Number.POSITIVE_INFINITY;var h=s.stacked;if(void 0===h)for(e=0;e<u.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&d(t)&&void 0!==t.stack){h=!0;break}if(s.stacked||h){var p={};for(e=0;e<u.length;e++){var f=[(t=l.getDatasetMeta(e)).type,void 0===s.stacked&&void 0===t.stack?e:"",t.stack].join(".");if(l.isDatasetVisible(e)&&d(t))for(void 0===p[f]&&(p[f]=[]),o=0,i=(r=u[e].data).length;o<i;o++){var g=p[f];n=a._parseValue(r[o]),isNaN(n.min)||isNaN(n.max)||t.data[o].hidden||n.min<0||n.max<0||(g[o]=g[o]||0,g[o]+=n.max)}}W.each(p,function(e){if(e.length>0){var t=W.min(e),n=W.max(e);a.min=Math.min(a.min,t),a.max=Math.max(a.max,n)}})}else for(e=0;e<u.length;e++)if(t=l.getDatasetMeta(e),l.isDatasetVisible(e)&&d(t))for(o=0,i=(r=u[e].data).length;o<i;o++)n=a._parseValue(r[o]),isNaN(n.min)||isNaN(n.max)||t.data[o].hidden||n.min<0||n.max<0||(a.min=Math.min(n.min,a.min),a.max=Math.max(n.max,a.max),0!==n.min&&(a.minNotZero=Math.min(n.min,a.minNotZero)));a.min=W.isFinite(a.min)?a.min:null,a.max=W.isFinite(a.max)?a.max:null,a.minNotZero=W.isFinite(a.minNotZero)?a.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=Tn(t.min,e.min),e.max=Tn(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(Cn(e.min))-1),e.max=Math.pow(10,Math.floor(Cn(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(Cn(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(Cn(e.min))+1):10),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(Cn(e.max))):e.minNotZero=1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),r={min:Tn(t.min),max:Tn(t.max)},o=e.ticks=function(e,t){var n,r,o=[],i=Sn(e.min,Math.pow(10,Math.floor(Cn(t.min)))),a=Math.floor(Cn(t.max)),s=Math.ceil(t.max/Math.pow(10,a));0===i?(n=Math.floor(Cn(t.minNotZero)),r=Math.floor(t.minNotZero/Math.pow(10,n)),o.push(i),i=r*Math.pow(10,n)):(n=Math.floor(Cn(i)),r=Math.floor(i/Math.pow(10,n)));var l=n<0?Math.pow(10,Math.abs(n)):1;do{o.push(i),10==++r&&(r=1,l=++n>=0?1:l),i=Math.round(r*Math.pow(10,n)*l)/l}while(n<a||n===a&&r<s);var u=Sn(e.max,i);return o.push(u),o}(r,e);e.max=W.max(o),e.min=W.min(o),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&o.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),hn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return this._getScaleLabel(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){var t=this.tickValues;return e<0||e>t.length-1?null:this.getPixelForValue(t[e])},_getFirstTickValue:function(e){var t=Math.floor(Cn(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},_configure:function(){var e=this,t=e.min,n=0;hn.prototype._configure.call(e),0===t&&(t=e._getFirstTickValue(e.minNotZero),n=Sn(e.options.ticks.fontSize,B.global.defaultFontSize)/e._length),e._startValue=Cn(t),e._valueOffset=n,e._valueRange=(Cn(e.max)-Cn(t))/(1-n)},getPixelForValue:function(e){var t=this,n=0;return(e=+t.getRightValue(e))>t.min&&e>0&&(n=(Cn(e)-t._startValue)/t._valueRange+t._valueOffset),t.getPixelForDecimal(n)},getValueForPixel:function(e){var t=this,n=t.getDecimalForPixel(e);return 0===n&&0===t.min?0:Math.pow(10,t._startValue+(n-t._valueOffset)*t._valueRange)}}),In=Mn;kn._defaults=In;var An=W.valueOrDefault,Dn=W.valueAtIndexOrDefault,Pn=W.options.resolve,Ln={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Jt.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function Nn(e){var t=e.ticks;return t.display&&e.display?An(t.fontSize,B.global.defaultFontSize)+2*t.backdropPaddingY:0}function Rn(e,t,n,r,o){return e===r||e===o?{start:t-n/2,end:t+n/2}:e<r||e>o?{start:t-n,end:t}:{start:t,end:t+n}}function En(e){return 0===e||180===e?"center":e<180?"left":"right"}function On(e,t,n,r){var o,i,a=n.y+r/2;if(W.isArray(t))for(o=0,i=t.length;o<i;++o)e.fillText(t[o],n.x,a),a+=r;else e.fillText(t,n.x,a)}function Bn(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function zn(e){return W.isNumber(e)?e:0}var Fn=vn.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=Nn(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;W.each(t.data.datasets,function(o,i){if(t.isDatasetVisible(i)){var a=t.getDatasetMeta(i);W.each(o.data,function(t,o){var i=+e.getRightValue(t);isNaN(i)||a.data[o].hidden||(n=Math.min(i,n),r=Math.max(i,r))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=r===Number.NEGATIVE_INFINITY?0:r,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Nn(this.options))},convertTicksToLabels:function(){var e=this;vn.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(function(){var t=W.callback(e.options.pointLabels.callback,arguments,e);return t||0===t?t:""})},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,n,r,o=W.options._parseFont(e.options.pointLabels),i={l:0,r:e.width,t:0,b:e.height-e.paddingTop},a={};e.ctx.font=o.string,e._pointLabelSizes=[];var s,l,u,c=e.chart.data.labels.length;for(t=0;t<c;t++){r=e.getPointPosition(t,e.drawingArea+5),s=e.ctx,l=o.lineHeight,u=e.pointLabels[t],n=W.isArray(u)?{w:W.longestText(s,s.font,u),h:u.length*l}:{w:s.measureText(u).width,h:l},e._pointLabelSizes[t]=n;var d=e.getIndexAngle(t),h=W.toDegrees(d)%360,p=Rn(h,r.x,n.w,0,180),f=Rn(h,r.y,n.h,90,270);p.start<i.l&&(i.l=p.start,a.l=d),p.end>i.r&&(i.r=p.end,a.r=d),f.start<i.t&&(i.t=f.start,a.t=d),f.end>i.b&&(i.b=f.end,a.b=d)}e.setReductions(e.drawingArea,i,a)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var r=this,o=t.l/Math.sin(n.l),i=Math.max(t.r-r.width,0)/Math.sin(n.r),a=-t.t/Math.cos(n.t),s=-Math.max(t.b-(r.height-r.paddingTop),0)/Math.cos(n.b);o=zn(o),i=zn(i),a=zn(a),s=zn(s),r.drawingArea=Math.min(Math.floor(e-(o+i)/2),Math.floor(e-(a+s)/2)),r.setCenterPoint(o,i,a,s)},setCenterPoint:function(e,t,n,r){var o=this,i=o.width-t-o.drawingArea,a=e+o.drawingArea,s=n+o.drawingArea,l=o.height-o.paddingTop-r-o.drawingArea;o.xCenter=Math.floor((a+i)/2+o.left),o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)},getIndexAngle:function(e){var t=this.chart,n=(e*(360/t.data.labels.length)+((t.options||{}).startAngle||0))%360;return(n<0?n+360:n)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(W.isNullOrUndef(e))return NaN;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(e){var t=this.min,n=this.max;return this.getPointPositionForValue(e||0,this.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},_drawGrid:function(){var e,t,n,r=this,o=r.ctx,i=r.options,a=i.gridLines,s=i.angleLines,l=An(s.lineWidth,a.lineWidth),u=An(s.color,a.color);if(i.pointLabels.display&&function(e){var t=e.ctx,n=e.options,r=n.pointLabels,o=Nn(n),i=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),a=W.options._parseFont(r);t.save(),t.font=a.string,t.textBaseline="middle";for(var s=e.chart.data.labels.length-1;s>=0;s--){var l=0===s?o/2:0,u=e.getPointPosition(s,i+l+5),c=Dn(r.fontColor,s,B.global.defaultFontColor);t.fillStyle=c;var d=e.getIndexAngle(s),h=W.toDegrees(d);t.textAlign=En(h),Bn(h,e._pointLabelSizes[s],u),On(t,e.pointLabels[s],u,a.lineHeight)}t.restore()}(r),a.display&&W.each(r.ticks,function(e,n){0!==n&&(t=r.getDistanceFromCenterForValue(r.ticksAsNumbers[n]),function(e,t,n,r){var o,i=e.ctx,a=t.circular,s=e.chart.data.labels.length,l=Dn(t.color,r-1),u=Dn(t.lineWidth,r-1);if((a||s)&&l&&u){if(i.save(),i.strokeStyle=l,i.lineWidth=u,i.setLineDash&&(i.setLineDash(t.borderDash||[]),i.lineDashOffset=t.borderDashOffset||0),i.beginPath(),a)i.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{o=e.getPointPosition(0,n),i.moveTo(o.x,o.y);for(var c=1;c<s;c++)o=e.getPointPosition(c,n),i.lineTo(o.x,o.y)}i.closePath(),i.stroke(),i.restore()}}(r,a,t,n))}),s.display&&l&&u){for(o.save(),o.lineWidth=l,o.strokeStyle=u,o.setLineDash&&(o.setLineDash(Pn([s.borderDash,a.borderDash,[]])),o.lineDashOffset=Pn([s.borderDashOffset,a.borderDashOffset,0])),e=r.chart.data.labels.length-1;e>=0;e--)t=r.getDistanceFromCenterForValue(i.ticks.reverse?r.min:r.max),n=r.getPointPosition(e,t),o.beginPath(),o.moveTo(r.xCenter,r.yCenter),o.lineTo(n.x,n.y),o.stroke();o.restore()}},_drawLabels:function(){var e=this,t=e.ctx,n=e.options.ticks;if(n.display){var r,o,i=e.getIndexAngle(0),a=W.options._parseFont(n),s=An(n.fontColor,B.global.defaultFontColor);t.save(),t.font=a.string,t.translate(e.xCenter,e.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",W.each(e.ticks,function(i,l){(0!==l||n.reverse)&&(r=e.getDistanceFromCenterForValue(e.ticksAsNumbers[l]),n.showLabelBackdrop&&(o=t.measureText(i).width,t.fillStyle=n.backdropColor,t.fillRect(-o/2-n.backdropPaddingX,-r-a.size/2-n.backdropPaddingY,o+2*n.backdropPaddingX,a.size+2*n.backdropPaddingY)),t.fillStyle=s,t.fillText(i,0,-r))}),t.restore()}},_drawTitle:W.noop}),Vn=Ln;Fn._defaults=Vn;var Hn=W._deprecated,Wn=W.options.resolve,Gn=W.valueOrDefault,Un=Number.MIN_SAFE_INTEGER||-9007199254740991,jn=Number.MAX_SAFE_INTEGER||9007199254740991,Yn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qn=Object.keys(Yn);function Xn(e,t){return e-t}function Zn(e){return W.valueOrDefault(e.time.min,e.ticks.min)}function $n(e){return W.valueOrDefault(e.time.max,e.ticks.max)}function Kn(e,t,n,r){var o=function(e,t,n){for(var r,o,i,a=0,s=e.length-1;a>=0&&a<=s;){if(o=e[(r=a+s>>1)-1]||null,i=e[r],!o)return{lo:null,hi:i};if(i[t]<n)a=r+1;else{if(!(o[t]>n))return{lo:o,hi:i};s=r-1}}return{lo:i,hi:null}}(e,t,n),i=o.lo?o.hi?o.lo:e[e.length-2]:e[0],a=o.lo?o.hi?o.hi:e[e.length-1]:e[1],s=a[t]-i[t],l=s?(n-i[t])/s:0,u=(a[r]-i[r])*l;return i[r]+u}function Jn(e,t){var n=e._adapter,r=e.options.time,o=r.parser,i=o||r.format,a=t;return"function"==typeof o&&(a=o(a)),W.isFinite(a)||(a="string"==typeof i?n.parse(a,i):n.parse(a)),null!==a?+a:(o||"function"!=typeof i||(a=i(t),W.isFinite(a)||(a=n.parse(a))),a)}function Qn(e,t){if(W.isNullOrUndef(t))return null;var n=e.options.time,r=Jn(e,e.getRightValue(t));return null===r||n.round&&(r=+e._adapter.startOf(r,n.round)),r}function er(e,t,n,r){var o,i,a,s=qn.length;for(o=qn.indexOf(e);o<s-1;++o)if(a=(i=Yn[qn[o]]).steps?i.steps:jn,i.common&&Math.ceil((n-t)/(a*i.size))<=r)return qn[o];return qn[s-1]}function tr(e,t,n){var r,o,i=[],a={},s=t.length;for(r=0;r<s;++r)a[o=t[r]]=r,i.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){var o,i,a=e._adapter,s=+a.startOf(t[0].value,r),l=t[t.length-1].value;for(o=s;o<=l;o=+a.add(o,1,r))(i=n[o])>=0&&(t[i].major=!0);return t}(e,i,a,n):i}var nr=hn.extend({initialize:function(){this.mergeTicksOptions(),hn.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,n=t.time||(t.time={}),r=e._adapter=new Kt._date(t.adapters.date);return Hn("time scale",n.format,"time.format","time.parser"),Hn("time scale",n.min,"time.min","ticks.min"),Hn("time scale",n.max,"time.max","ticks.max"),W.mergeIf(n.displayFormats,r.formats()),hn.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),hn.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,n,r,o,i,a,s=this,l=s.chart,u=s._adapter,c=s.options,d=c.time.unit||"day",h=jn,p=Un,f=[],g=[],m=[],v=s._getLabels();for(e=0,n=v.length;e<n;++e)m.push(Qn(s,v[e]));for(e=0,n=(l.data.datasets||[]).length;e<n;++e)if(l.isDatasetVisible(e))if(o=l.data.datasets[e].data,W.isObject(o[0]))for(g[e]=[],t=0,r=o.length;t<r;++t)i=Qn(s,o[t]),f.push(i),g[e][t]=i;else g[e]=m.slice(0),a||(f=f.concat(m),a=!0);else g[e]=[];m.length&&(h=Math.min(h,m[0]),p=Math.max(p,m[m.length-1])),f.length&&(f=n>1?function(e){var t,n,r,o={},i=[];for(t=0,n=e.length;t<n;++t)o[r=e[t]]||(o[r]=!0,i.push(r));return i}(f).sort(Xn):f.sort(Xn),h=Math.min(h,f[0]),p=Math.max(p,f[f.length-1])),h=Qn(s,Zn(c))||h,p=Qn(s,$n(c))||p,h=h===jn?+u.startOf(Date.now(),d):h,p=p===Un?+u.endOf(Date.now(),d)+1:p,s.min=Math.min(h,p),s.max=Math.max(h+1,p),s._table=[],s._timestamps={data:f,datasets:g,labels:m}},buildTicks:function(){var e,t,n,r=this,o=r.min,i=r.max,a=r.options,s=a.ticks,l=a.time,u=r._timestamps,c=[],d=r.getLabelCapacity(o),h=s.source,p=a.distribution;for(u="data"===h||"auto"===h&&"series"===p?u.data:"labels"===h?u.labels:function(e,t,n,r){var o,i=e._adapter,a=e.options,s=a.time,l=s.unit||er(s.minUnit,t,n,r),u=Wn([s.stepSize,s.unitStepSize,1]),c="week"===l&&s.isoWeekday,d=t,h=[];if(c&&(d=+i.startOf(d,"isoWeek",c)),d=+i.startOf(d,c?"day":l),i.diff(n,t,l)>1e5*u)throw t+" and "+n+" are too far apart with stepSize of "+u+" "+l;for(o=d;o<n;o=+i.add(o,u,l))h.push(o);return o!==n&&"ticks"!==a.bounds||h.push(o),h}(r,o,i,d),"ticks"===a.bounds&&u.length&&(o=u[0],i=u[u.length-1]),o=Qn(r,Zn(a))||o,i=Qn(r,$n(a))||i,e=0,t=u.length;e<t;++e)(n=u[e])>=o&&n<=i&&c.push(n);return r.min=o,r.max=i,r._unit=l.unit||(s.autoSkip?er(l.minUnit,r.min,r.max,d):function(e,t,n,r,o){var i,a;for(i=qn.length-1;i>=qn.indexOf(n);i--)if(a=qn[i],Yn[a].common&&e._adapter.diff(o,r,a)>=t-1)return a;return qn[n?qn.indexOf(n):0]}(r,c.length,l.minUnit,r.min,r.max)),r._majorUnit=s.major.enabled&&"year"!==r._unit?function(e){for(var t=qn.indexOf(e)+1,n=qn.length;t<n;++t)if(Yn[qn[t]].common)return qn[t]}(r._unit):void 0,r._table=function(e,t,n,r){if("linear"===r||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var o,i,a,s,l,u=[],c=[t];for(o=0,i=e.length;o<i;++o)(s=e[o])>t&&s<n&&c.push(s);for(c.push(n),o=0,i=c.length;o<i;++o)l=c[o+1],a=c[o-1],s=c[o],void 0!==a&&void 0!==l&&Math.round((l+a)/2)===s||u.push({time:s,pos:o/(i-1)});return u}(r._timestamps.data,o,i,p),r._offsets=function(e,t,n,r,o){var i,a,s=0,l=0;return o.offset&&t.length&&(i=Kn(e,"time",t[0],"pos"),s=1===t.length?1-i:(Kn(e,"time",t[1],"pos")-i)/2,a=Kn(e,"time",t[t.length-1],"pos"),l=1===t.length?a:(a-Kn(e,"time",t[t.length-2],"pos"))/2),{start:s,end:l,factor:1/(s+1+l)}}(r._table,c,0,0,a),s.reverse&&c.reverse(),tr(r,c,r._majorUnit)},getLabelForIndex:function(e,t){var n=this,r=n._adapter,o=n.chart.data,i=n.options.time,a=o.labels&&e<o.labels.length?o.labels[e]:"",s=o.datasets[t].data[e];return W.isObject(s)&&(a=n.getRightValue(s)),i.tooltipFormat?r.format(Jn(n,a),i.tooltipFormat):"string"==typeof a?a:r.format(Jn(n,a),i.displayFormats.datetime)},tickFormatFunction:function(e,t,n,r){var o=this._adapter,i=this.options,a=i.time.displayFormats,s=a[this._unit],l=this._majorUnit,u=a[l],c=n[t],d=i.ticks,h=l&&u&&c&&c.major,p=o.format(e,r||(h?u:s)),f=h?d.major:d.minor,g=Wn([f.callback,f.userCallback,d.callback,d.userCallback]);return g?g(p,t,n):p},convertTicksToLabels:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(this.tickFormatFunction(e[t].value,t,e));return r},getPixelForOffset:function(e){var t=this._offsets,n=Kn(this._table,"time",e,"pos");return this.getPixelForDecimal((t.start+n)*t.factor)},getPixelForValue:function(e,t,n){var r=null;if(void 0!==t&&void 0!==n&&(r=this._timestamps.datasets[n][t]),null===r&&(r=Qn(this,e)),null!==r)return this.getPixelForOffset(r)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end,r=Kn(this._table,"pos",n,"time");return this._adapter._create(r)},_getLabelSize:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=W.toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(r),i=Math.sin(r),a=Gn(t.fontSize,B.global.defaultFontSize);return{w:n*o+a*i,h:n*i+a*o}},getLabelWidth:function(e){return this._getLabelSize(e).w},getLabelCapacity:function(e){var t=this,n=t.options.time,r=n.displayFormats,o=r[n.unit]||r.millisecond,i=t.tickFormatFunction(e,0,tr(t,[e],t._majorUnit),o),a=t._getLabelSize(i),s=Math.floor(t.isHorizontal()?t.width/a.w:t.height/a.h);return t.options.offset&&s--,s>0?s:1}});nr._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var rr={category:fn,linear:_n,logarithmic:kn,radialLinear:Fn,time:nr},or={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Kt._date.override("function"==typeof e?{_id:"moment",formats:function(){return or},parse:function(t,n){return"string"==typeof t&&"string"==typeof n?t=e(t,n):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,n){return e(t).format(n)},add:function(t,n,r){return e(t).add(n,r).valueOf()},diff:function(t,n,r){return e(t).diff(e(n),r)},startOf:function(t,n,r){return t=e(t),"isoWeek"===n?t.isoWeekday(r).valueOf():t.startOf(n).valueOf()},endOf:function(t,n){return e(t).endOf(n).valueOf()},_create:function(t){return e(t)}}:{}),B._set("global",{plugins:{filler:{propagate:!0}}});var ir={dataset:function(e){var t=e.fill,n=e.chart,r=n.getDatasetMeta(t),o=r&&n.isDatasetVisible(t)&&r.dataset._children||[],i=o.length||0;return i?function(e,t){return t<i&&o[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,r=t?t.y:null;return W.isArray(t)?function(e,n){return t[n]}:function(e){return{x:null===n?e.x:n,y:null===r?e.y:r}}}};function ar(e,t,n){var r,o=e._model||{},i=o.fill;if(void 0===i&&(i=!!o.backgroundColor),!1===i||null===i)return!1;if(!0===i)return"origin";if(r=parseFloat(i,10),isFinite(r)&&Math.floor(r)===r)return"-"!==i[0]&&"+"!==i[0]||(r=t+r),!(r===t||r<0||r>=n)&&r;switch(i){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return i;default:return!1}}function sr(e){return(e.el._scale||{}).getPointPositionForValue?function(e){var t,n,r,o,i,a=e.el._scale,s=a.options,l=a.chart.data.labels.length,u=e.fill,c=[];if(!l)return null;for(t=s.ticks.reverse?a.max:a.min,n=s.ticks.reverse?a.min:a.max,r=a.getPointPositionForValue(0,t),o=0;o<l;++o)i="start"===u||"end"===u?a.getPointPositionForValue(o,"start"===u?t:n):a.getBasePosition(o),s.gridLines.circular&&(i.cx=r.x,i.cy=r.y,i.angle=a.getIndexAngle(o)-Math.PI/2),c.push(i);return c}(e):function(e){var t,n=e.el._model||{},r=e.el._scale||{},o=e.fill,i=null;if(isFinite(o))return null;if("start"===o?i=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===o?i=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?i=n.scaleZero:r.getBasePixel&&(i=r.getBasePixel()),null!=i){if(void 0!==i.x&&void 0!==i.y)return i;if(W.isFinite(i))return{x:(t=r.isHorizontal())?i:null,y:t?null:i}}return null}(e)}function lr(e,t,n){var r,o=e[t].fill,i=[t];if(!n)return o;for(;!1!==o&&-1===i.indexOf(o);){if(!isFinite(o))return o;if(!(r=e[o]))return!1;if(r.visible)return o;i.push(o),o=r.fill}return!1}function ur(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),ir[n](e))}function cr(e){return e&&!e.skip}function dr(e,t,n,r,o){var i,a,s,l;if(r&&o){for(e.moveTo(t[0].x,t[0].y),i=1;i<r;++i)W.canvas.lineTo(e,t[i-1],t[i]);if(void 0===n[0].angle)for(e.lineTo(n[o-1].x,n[o-1].y),i=o-1;i>0;--i)W.canvas.lineTo(e,n[i],n[i-1],!0);else for(a=n[0].cx,s=n[0].cy,l=Math.sqrt(Math.pow(n[0].x-a,2)+Math.pow(n[0].y-s,2)),i=o-1;i>0;--i)e.arc(a,s,l,n[i].angle,n[i-1].angle,!0)}}function hr(e,t,n,r,o,i){var a,s,l,u,c,d,h,p,f=t.length,g=r.spanGaps,m=[],v=[],y=0,b=0;for(e.beginPath(),a=0,s=f;a<s;++a)c=n(u=t[l=a%f]._view,l,r),d=cr(u),h=cr(c),i&&void 0===p&&d&&(s=f+(p=a+1)),d&&h?(y=m.push(u),b=v.push(c)):y&&b&&(g?(d&&m.push(u),h&&v.push(c)):(dr(e,m,v,y,b),y=b=0,m=[],v=[]));dr(e,m,v,y,b),e.closePath(),e.fillStyle=o,e.fill()}var pr={id:"filler",afterDatasetsUpdate:function(e,t){var n,r,o,i,a=(e.data.datasets||[]).length,s=t.propagate,l=[];for(r=0;r<a;++r)i=null,(o=(n=e.getDatasetMeta(r)).dataset)&&o._model&&o instanceof be.Line&&(i={visible:e.isDatasetVisible(r),fill:ar(o,r,a),chart:e,el:o}),n.$filler=i,l.push(i);for(r=0;r<a;++r)(i=l[r])&&(i.fill=lr(l,r,s),i.boundary=sr(i),i.mapper=ur(i))},beforeDatasetsDraw:function(e){var t,n,r,o,i,a,s,l=e._getSortedVisibleDatasetMetas(),u=e.ctx;for(n=l.length-1;n>=0;--n)(t=l[n].$filler)&&t.visible&&(o=(r=t.el)._view,i=r._children||[],a=t.mapper,s=o.backgroundColor||B.global.defaultColor,a&&s&&i.length&&(W.canvas.clipArea(u,e.chartArea),hr(u,i,a,o,s,r._loop),W.canvas.unclipArea(u)))}},fr=W.rtl.getRtlAdapter,gr=W.noop,mr=W.valueOrDefault;function vr(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}B._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,r=this.chart,o=r.getDatasetMeta(n);o.hidden=null===o.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.options.legend||{},r=n.labels&&n.labels.usePointStyle;return e._getSortedDatasetMetas().map(function(n){var o=n.controller.getStyle(r?0:void 0);return{text:t[n.index].label,fillStyle:o.backgroundColor,hidden:!e.isDatasetVisible(n.index),lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:o.borderWidth,strokeStyle:o.borderColor,pointStyle:o.pointStyle,rotation:o.rotation,datasetIndex:n.index}},this)}}},legendCallback:function(e){var t,n,r,o=document.createElement("ul"),i=e.data.datasets;for(o.setAttribute("class",e.id+"-legend"),t=0,n=i.length;t<n;t++)(r=o.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=i[t].backgroundColor,i[t].label&&r.appendChild(document.createTextNode(i[t].label));return o.outerHTML}});var yr=X.extend({initialize:function(e){W.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:gr,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:gr,beforeSetDimensions:gr,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:gr,beforeBuildLabels:gr,buildLabels:function(){var e=this,t=e.options.labels||{},n=W.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:gr,beforeFit:gr,fit:function(){var e=this,t=e.options,n=t.labels,r=t.display,o=e.ctx,i=W.options._parseFont(n),a=i.size,s=e.legendHitBoxes=[],l=e.minSize,u=e.isHorizontal();if(u?(l.width=e.maxWidth,l.height=r?10:0):(l.width=r?10:0,l.height=e.maxHeight),r){if(o.font=i.string,u){var c=e.lineWidths=[0],d=0;o.textAlign="left",o.textBaseline="middle",W.each(e.legendItems,function(e,t){var r=vr(n,a)+a/2+o.measureText(e.text).width;(0===t||c[c.length-1]+r+2*n.padding>l.width)&&(d+=a+n.padding,c[c.length-(t>0?0:1)]=0),s[t]={left:0,top:0,width:r,height:a},c[c.length-1]+=r+n.padding}),l.height+=d}else{var h=n.padding,p=e.columnWidths=[],f=e.columnHeights=[],g=n.padding,m=0,v=0;W.each(e.legendItems,function(e,t){var r=vr(n,a)+a/2+o.measureText(e.text).width;t>0&&v+a+2*h>l.height&&(g+=m+n.padding,p.push(m),f.push(v),m=0,v=0),m=Math.max(m,r),v+=a+h,s[t]={left:0,top:0,width:r,height:a}}),g+=m,p.push(m),f.push(v),l.width+=g}e.width=l.width,e.height=l.height}else e.width=l.width=e.height=l.height=0},afterFit:gr,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,r=B.global,o=r.defaultColor,i=r.elements.line,a=e.height,s=e.columnHeights,l=e.width,u=e.lineWidths;if(t.display){var c,d=fr(t.rtl,e.left,e.minSize.width),h=e.ctx,p=mr(n.fontColor,r.defaultFontColor),f=W.options._parseFont(n),g=f.size;h.textAlign=d.textAlign("left"),h.textBaseline="middle",h.lineWidth=.5,h.strokeStyle=p,h.fillStyle=p,h.font=f.string;var m=vr(n,g),v=e.legendHitBoxes,y=function(e,r){switch(t.align){case"start":return n.padding;case"end":return e-r;default:return(e-r+n.padding)/2}},b=e.isHorizontal();c=b?{x:e.left+y(l,u[0]),y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+y(a,s[0]),line:0},W.rtl.overrideTextDirection(e.ctx,t.textDirection);var x=g+n.padding;W.each(e.legendItems,function(t,r){var p=h.measureText(t.text).width,f=m+g/2+p,_=c.x,w=c.y;d.setWidth(e.minSize.width),b?r>0&&_+f+n.padding>e.left+e.minSize.width&&(w=c.y+=x,c.line++,_=c.x=e.left+y(l,u[c.line])):r>0&&w+x>e.top+e.minSize.height&&(_=c.x=_+e.columnWidths[c.line]+n.padding,c.line++,w=c.y=e.top+y(a,s[c.line]));var S=d.x(_);!function(e,t,r){if(!(isNaN(m)||m<=0)){h.save();var a=mr(r.lineWidth,i.borderWidth);if(h.fillStyle=mr(r.fillStyle,o),h.lineCap=mr(r.lineCap,i.borderCapStyle),h.lineDashOffset=mr(r.lineDashOffset,i.borderDashOffset),h.lineJoin=mr(r.lineJoin,i.borderJoinStyle),h.lineWidth=a,h.strokeStyle=mr(r.strokeStyle,o),h.setLineDash&&h.setLineDash(mr(r.lineDash,i.borderDash)),n&&n.usePointStyle){var s=m*Math.SQRT2/2,l=d.xPlus(e,m/2),u=t+g/2;W.canvas.drawPoint(h,r.pointStyle,s,l,u,r.rotation)}else h.fillRect(d.leftForLtr(e,m),t,m,g),0!==a&&h.strokeRect(d.leftForLtr(e,m),t,m,g);h.restore()}}(S,w,t),v[r].left=d.leftForLtr(S,v[r].width),v[r].top=w,function(e,t,n,r){var o=g/2,i=d.xPlus(e,m+o),a=t+o;h.fillText(n.text,i,a),n.hidden&&(h.beginPath(),h.lineWidth=2,h.moveTo(i,a),h.lineTo(d.xPlus(i,r),a),h.stroke())}(S,w,t,p),b?c.x+=f+n.padding:c.y+=x}),W.rtl.restoreTextDirection(e.ctx,t.textDirection)}},_getLegendItemAt:function(e,t){var n,r,o,i=this;if(e>=i.left&&e<=i.right&&t>=i.top&&t<=i.bottom)for(o=i.legendHitBoxes,n=0;n<o.length;++n)if(e>=(r=o[n]).left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height)return i.legendItems[n];return null},handleEvent:function(e){var t,n=this,r=n.options,o="mouseup"===e.type?"click":e.type;if("mousemove"===o){if(!r.onHover&&!r.onLeave)return}else{if("click"!==o)return;if(!r.onClick)return}t=n._getLegendItemAt(e.x,e.y),"click"===o?t&&r.onClick&&r.onClick.call(n,e.native,t):(r.onLeave&&t!==n._hoveredItem&&(n._hoveredItem&&r.onLeave.call(n,e.native,n._hoveredItem),n._hoveredItem=t),r.onHover&&t&&r.onHover.call(n,e.native,t))}});function br(e,t){var n=new yr({ctx:e.ctx,options:t,chart:e});dt.configure(e,n,t),dt.addBox(e,n),e.legend=n}var xr={id:"legend",_element:yr,beforeInit:function(e){var t=e.options.legend;t&&br(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(W.mergeIf(t,B.global.legend),n?(dt.configure(e,n,t),n.options=t):br(e,t)):n&&(dt.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},_r=W.noop;B._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var wr=X.extend({initialize:function(e){W.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:_r,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:_r,beforeSetDimensions:_r,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:_r,beforeBuildLabels:_r,buildLabels:_r,afterBuildLabels:_r,beforeFit:_r,fit:function(){var e,t=this,n=t.options,r=t.minSize={},o=t.isHorizontal();n.display?(e=(W.isArray(n.text)?n.text.length:1)*W.options._parseFont(n).lineHeight+2*n.padding,t.width=r.width=o?t.maxWidth:e,t.height=r.height=o?e:t.maxHeight):t.width=r.width=t.height=r.height=0},afterFit:_r,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var r,o,i,a=W.options._parseFont(n),s=a.lineHeight,l=s/2+n.padding,u=0,c=e.top,d=e.left,h=e.bottom,p=e.right;t.fillStyle=W.valueOrDefault(n.fontColor,B.global.defaultFontColor),t.font=a.string,e.isHorizontal()?(o=d+(p-d)/2,i=c+l,r=p-d):(o="left"===n.position?d+l:p-l,i=c+(h-c)/2,r=h-c,u=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(o,i),t.rotate(u),t.textAlign="center",t.textBaseline="middle";var f=n.text;if(W.isArray(f))for(var g=0,m=0;m<f.length;++m)t.fillText(f[m],0,g,r),g+=s;else t.fillText(f,0,0,r);t.restore()}}});function Sr(e,t){var n=new wr({ctx:e.ctx,options:t,chart:e});dt.configure(e,n,t),dt.addBox(e,n),e.titleBlock=n}var Cr={},Mr=pr,Tr=xr,kr={id:"title",_element:wr,beforeInit:function(e){var t=e.options.title;t&&Sr(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(W.mergeIf(t,B.global.title),n?(dt.configure(e,n,t),n.options=t):Sr(e,t)):n&&(dt.removeBox(e,n),delete e.titleBlock)}};for(var Ir in Cr.filler=Mr,Cr.legend=Tr,Cr.title=kr,Xt.helpers=W,function(){function e(e,t,n){var r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}function t(e){return null!=e&&"none"!==e}function n(n,r,o){var i=document.defaultView,a=W._getParentNode(n),s=i.getComputedStyle(n)[r],l=i.getComputedStyle(a)[r],u=t(s),c=t(l),d=Number.POSITIVE_INFINITY;return u||c?Math.min(u?e(s,n,o):d,c?e(l,a,o):d):"none"}W.where=function(e,t){if(W.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return W.each(e,function(e){t(e)&&n.push(e)}),n},W.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var r=0,o=e.length;r<o;++r)if(t.call(n,e[r],r,e))return r;return-1},W.findNextWhere=function(e,t,n){W.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<e.length;r++){var o=e[r];if(t(o))return o}},W.findPreviousWhere=function(e,t,n){W.isNullOrUndef(n)&&(n=e.length);for(var r=n-1;r>=0;r--){var o=e[r];if(t(o))return o}},W.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},W.almostEquals=function(e,t,n){return Math.abs(e-t)<n},W.almostWhole=function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e},W.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},W.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},W.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},W.toRadians=function(e){return e*(Math.PI/180)},W.toDegrees=function(e){return e*(180/Math.PI)},W._decimalPlaces=function(e){if(W.isFinite(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}},W.getAngleFromPoint=function(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r),i=Math.atan2(r,n);return i<-.5*Math.PI&&(i+=2*Math.PI),{angle:i,distance:o}},W.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},W.aliasPixel=function(e){return e%2==0?0:.5},W._alignPixel=function(e,t,n){var r=e.currentDevicePixelRatio,o=n/2;return Math.round((t-o)*r)/r+o},W.splineCurve=function(e,t,n,r){var o=e.skip?t:e,i=t,a=n.skip?t:n,s=Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2)),l=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),u=s/(s+l),c=l/(s+l),d=r*(u=isNaN(u)?0:u),h=r*(c=isNaN(c)?0:c);return{previous:{x:i.x-d*(a.x-o.x),y:i.y-d*(a.y-o.y)},next:{x:i.x+h*(a.x-o.x),y:i.y+h*(a.y-o.y)}}},W.EPSILON=Number.EPSILON||1e-14,W.splineCurveMonotone=function(e){var t,n,r,o,i,a,s,l,u,c=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),d=c.length;for(t=0;t<d;++t)if(!(r=c[t]).model.skip){if(n=t>0?c[t-1]:null,(o=t<d-1?c[t+1]:null)&&!o.model.skip){var h=o.model.x-r.model.x;r.deltaK=0!==h?(o.model.y-r.model.y)/h:0}!n||n.model.skip?r.mK=r.deltaK:!o||o.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2}for(t=0;t<d-1;++t)r=c[t],o=c[t+1],r.model.skip||o.model.skip||(W.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=o.mK=0:(i=r.mK/r.deltaK,a=o.mK/r.deltaK,(l=Math.pow(i,2)+Math.pow(a,2))<=9||(s=3/Math.sqrt(l),r.mK=i*s*r.deltaK,o.mK=a*s*r.deltaK)));for(t=0;t<d;++t)(r=c[t]).model.skip||(n=t>0?c[t-1]:null,o=t<d-1?c[t+1]:null,n&&!n.model.skip&&(u=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-u,r.model.controlPointPreviousY=r.model.y-u*r.mK),o&&!o.model.skip&&(u=(o.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+u,r.model.controlPointNextY=r.model.y+u*r.mK))},W.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},W.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},W.niceNum=function(e,t){var n=Math.floor(W.log10(e)),r=e/Math.pow(10,n);return(t?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)},W.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},W.getRelativePosition=function(e,t){var n,r,o=e.originalEvent||e,i=e.target||e.srcElement,a=i.getBoundingClientRect(),s=o.touches;s&&s.length>0?(n=s[0].clientX,r=s[0].clientY):(n=o.clientX,r=o.clientY);var l=parseFloat(W.getStyle(i,"padding-left")),u=parseFloat(W.getStyle(i,"padding-top")),c=parseFloat(W.getStyle(i,"padding-right")),d=parseFloat(W.getStyle(i,"padding-bottom")),h=a.right-a.left-l-c,p=a.bottom-a.top-u-d;return{x:n=Math.round((n-a.left-l)/h*i.width/t.currentDevicePixelRatio),y:r=Math.round((r-a.top-u)/p*i.height/t.currentDevicePixelRatio)}},W.getConstraintWidth=function(e){return n(e,"max-width","clientWidth")},W.getConstraintHeight=function(e){return n(e,"max-height","clientHeight")},W._calculatePadding=function(e,t,n){return(t=W.getStyle(e,t)).indexOf("%")>-1?n*parseInt(t,10)/100:parseInt(t,10)},W._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},W.getMaximumWidth=function(e){var t=W._getParentNode(e);if(!t)return e.clientWidth;var n=t.clientWidth,r=n-W._calculatePadding(t,"padding-left",n)-W._calculatePadding(t,"padding-right",n),o=W.getConstraintWidth(e);return isNaN(o)?r:Math.min(r,o)},W.getMaximumHeight=function(e){var t=W._getParentNode(e);if(!t)return e.clientHeight;var n=t.clientHeight,r=n-W._calculatePadding(t,"padding-top",n)-W._calculatePadding(t,"padding-bottom",n),o=W.getConstraintHeight(e);return isNaN(o)?r:Math.min(r,o)},W.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},W.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var r=e.canvas,o=e.height,i=e.width;r.height=o*n,r.width=i*n,e.ctx.scale(n,n),r.style.height||r.style.width||(r.style.height=o+"px",r.style.width=i+"px")}},W.fontString=function(e,t,n){return t+" "+e+"px "+n},W.longestText=function(e,t,n,r){var o=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(o=r.data={},i=r.garbageCollect=[],r.font=t),e.font=t;var a,s,l,u,c,d=0,h=n.length;for(a=0;a<h;a++)if(null!=(u=n[a])&&!0!==W.isArray(u))d=W.measureText(e,o,i,d,u);else if(W.isArray(u))for(s=0,l=u.length;s<l;s++)null==(c=u[s])||W.isArray(c)||(d=W.measureText(e,o,i,d,c));var p=i.length/2;if(p>n.length){for(a=0;a<p;a++)delete o[i[a]];i.splice(0,p)}return d},W.measureText=function(e,t,n,r,o){var i=t[o];return i||(i=t[o]=e.measureText(o).width,n.push(o)),i>r&&(r=i),r},W.numberOfLabelLines=function(e){var t=1;return W.each(e,function(e){W.isArray(e)&&e.length>t&&(t=e.length)}),t},W.color=_?function(e){return e instanceof CanvasGradient&&(e=B.global.defaultColor),_(e)}:function(e){return console.error("Color.js not found!"),e},W.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:W.color(e).saturate(.5).darken(.1).rgbString()}}(),Xt._adapters=Kt,Xt.Animation=$,Xt.animationService=K,Xt.controllers=Xe,Xt.DatasetController=ne,Xt.defaults=B,Xt.Element=X,Xt.elements=be,Xt.Interaction=tt,Xt.layouts=dt,Xt.platform=Tt,Xt.plugins=kt,Xt.Scale=hn,Xt.scaleService=It,Xt.Ticks=Jt,Xt.Tooltip=Ft,Xt.helpers.each(rr,function(e,t){Xt.scaleService.registerScaleType(t,e,e._defaults)}),Cr)Cr.hasOwnProperty(Ir)&&Xt.plugins.register(Cr[Ir]);Xt.platform.initialize();var Ar=Xt;return"undefined"!=typeof window&&(window.Chart=Xt),Xt.Chart=Xt,Xt.Legend=Cr.legend._element,Xt.Title=Cr.title._element,Xt.pluginService=Xt.plugins,Xt.PluginBase=Xt.Element.extend({}),Xt.canvasHelpers=Xt.helpers.canvas,Xt.layoutService=Xt.layouts,Xt.LinearScaleBase=vn,Xt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){Xt[e]=function(t,n){return new Xt(t,Xt.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),Ar});